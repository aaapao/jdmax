/*
活动名称：红包618
环境变量：jd_red618_url // 活动链接
        jd_red618_ids // 分享码，多个用英文逗号，@，换行分割（一般是链接后面的s=xxx参数，5个字符）
        jd_red618_threads // 控制并发线程数（正整数），默认1，最大5，尽量使用默认值，否则请开启代理运行
        jd_red618_interval // 自定义运行间隔时长（整数，单位毫秒），默认2000
        jd_red618_notify // 是否推送通知（true/false），默认不推送
        jd_red618_pinFilter // 账号pin过滤，多个用@进行分割
        jd_red618_maxdraw // 开红包次数（正整数），默认3

高并发脚本，谨慎使用并发
活动限制IP严重，建议使用代理

cron:59 59 11,23 * * *

*/

const $ = new Env('红包618')
var iｉl='jsjiami.com.v7';function Iii11l(){const iliIli=(function(){return[...[iｉl,'epOjUysUDujHViPLaAmYfirn.xXcpMDobHmnW.v7==','WO9QEMddHCog','bJRcGsddV8oRWOddQCknW6q+a8o4','eN02vJu','W5dcKH0E','dmoSW6pdPLeBWPqG','WQDdW53cJui','rhJcJmoVWO87bCoRaa','W6BdJMeOW6e','WRRcUCkCs3aTWO1wWP7dPa','cI7cOYfQhvJdThVdOq','AwxcHNmGW5ldKW','WRRdUXy','phtdGCotoa','W5/dLLm','W4dcMmkZ','efmQAc4','W7ddHh4ZW7i','W70ExKnY','FudcIW','W57dUwa9W5q','WQxdPb0/tW','uCoOya','W6rkyh8','8jQ6H8oE','bfS6','W5KhDfWvnLe','W78gW4tdPCkl','W4hcSJG2jW','n8khdSo1cmkTWOBdRmogW63dI8kIW5RdTw7cOvxdO8ksu8oaWQjwv8kYpmkyFCooW6hdMSo9W5RcUSkKC8kpmmoeiJZcMuvXhg9mW4hcJ3bQf2/cQ2uFW5CUxmoFWRNdTCkdASo8W5r0WPNcNCktWQyPpvPJdLn6WRW1WQZdKGJcOHb5BauanNRcLCklWPm0c8kHW5tcL8ovrKesW4xcQgK/WP93i8kZWRf4W4ZcUSoDjMy/du8TWOhdM8odvCoKWRhdUCorvCkIdelcI1dcQ8oxqmkGWRBdKJugWOlcKfZcS1tdLGdcJSoriGBcOq','WODUygy','W4xcTg5UzW','W4NcGra','d33dGNxcL8kSW5xdGSkSW5Kxomkh','W7dcGvGB','W5tdJSohCX4','W6KaW4ldQmkaCCokFa','WRXGWOT6eG','DCoQm8kEfbhdShaCWOW','cI7cOY9Gg1VdUNldTW','lZafBSorWPfLW7dcOSkY','W7tcGuy','WRuprSk+WPFcGtPf','cmkAWPi','W6nwBG','r8oYW4lcMmkz','W6rbvMnDqCkGWQC7W5hdVCkqzmo7sfG','wHZdOCkA','W7BcGvy','W4JcHqyCpSkj','cvy+DcNcVXq2WRXBW7RdIX54W6W+','WQDPW7JcQ2m','r2dcTSoLWQO','cMr2W5Dj','z3/cOx8KW4ldK8oa','cSkrWPddVCoIW6VcRdZdVWG2oYxcRa','W5ZcJwW','zmoiW6tdMmkl','dSkCWOxdG8omW7G','dSkBWOddLa','WQ5egsxcOq','tc7cQd/dLq','u8oWW6JcSSkf','k058W5pdTq','WRtcSSklzgO8WPHk','4P2YxEAEV+ECNUITPEAYR3i','44kF5O6C56sc44cl6k+p5ysP6iYK5yYdWR8EWQDvefG','WQpdO8kjW6ju','x0JcK8ouWOGXaG','q8oOW6xcQCkYWRCft8kaW6G','w/cAGzBcKoI+GoIIOoE5JEACR2a','m1KofXa','kK0u','W6/dQ8ozocHSW41HWQldGXBcICkC','6yk86k2+6zoU5O+pxmou','D8o3W5ZcGSkH','W4RdNSkPWP4','W67cGwibWQddQSoIoG','WRX1CfnZqSoV','ASomW5ZdICkQ','W5xdKL8+W7LtiCoVo8ovW6fFmx/cVLCyW7S3','jadcVGzk','WOldHg7dK8oL','W4FcOJ85aW','xCoEW5hdLCkL','WQJdR8kRW49bWQ0','W6/dPCozmcTPW494WRldNqNcSSkt','yKVcLCowW4u','W6fPe09UrgS','W63NUkNMNOtVVklKUy3MR7ZMLBhNGAFMN7pLKQzB','WRNcVCkCAq','fdNcHGTX','W4nxB1nF','nxtdGCor','i3uxW77cVSohWOzRW4TyW4nPWRS','W63ORANMS4/LP4VOTzqj4P2awq','CKlcVmorWO0','qaFcQJJdSCoAwJNdNCkxWQVcMmk+WR/cIfZcSCkHWPu','WRD5y2ddKG','Amk3W5JdG34','fSkheW','W5HykLLo','ncBcUtHM','W6emW5/dRmkBBa','oapcI2xcJ3pdRgFdRmkmWQnHpmofmwiOoCowW6iLW4RcRW','v8k/W7/dPge1WR0SrLlcQeiJv8o1s8oslNdcIwW','sqBcRrNdMa','FepcL38','F8kIW6ddLgm','qqldJq','WOTQvv7dLG','WR1aWRbHnq','FNBcMNlcOG','as7cUqvXaa','WO/cUmoPWORdMG','W5VdMvGxW6Pt','Ba4+WQFcOvBcPmosWOueW5pdUmoX','lmkMnCoXhq','W6mJxW','W7ZcTWqEpa','WRFdV0ddOmom','aSk6pSoLka','xWhdHKaN','bLSQrcxcTee','jxRdPSoeiSkfW7ddLa','W7/dMeq+W7O','e1ldUmoZaa','W6hcQKriuq','WRpdJCkhW4v3','4P6Vl+IeJUACQ+I9OEIJOUMaLEwkVUs6VUMxHoISH8oV','fhfAW6HiW5r3W4BdK8k8WP0BCW','W5NcIN9vCCotWOlcOmo5W53cIIJcJs5gWPfeucXhW5vVWPtcQG','hsRcPqnOg2ZdUMhdSW','WQZcR8ksFcO','WQVdS8k0W7Pr','WRRcRSkUs3C','WPBKVOBMGA3LI4iS','rHxdIa','W4hcGSkaWRvu','xuJcGW','eSkWWRtdQW','W61eFxjq','W7NdLmoS','iGhdNSkmWRb1W7m','umoVW7q','b2W2','W5VdJ8ozwHddLSkY','W4ddHmomsG3dQSkG','qqVcSGddTCoC','WQVdQCoaWOW+','mhz/W5HF','kemQkcW','AYlcNXddTa','gJldTCoUW4K','iMxdMCozja','WR7cQSoFWOZdKmofWQVdL8o0WPddTCkPCeVdObRdVSo6d8kPW4RdMSoKlGFcQ8kVWR8oWPuqv8oN','fmkhaW','W5GtBx8','4PYmcEADIoIcG+ASH+EGKUwMPEEqHc8','z8ogW6C','WQ/cImoYvJ8','zvZcKNJcKG','jeymgW','uHldSG','W7eNq3qk','WRFdUSkPW4fb'],...(function(){return[...['D3tcR2lcJq','WRiqECkJWPe','W7/cHSkqWPz+','W5BcHSkPWPfU','WOZcPmorWPNdKW','avO+FdNcVuf0','W53cKwXGCmkB','WPrivMRdSW','WQFdHSkmW4T0','W7f0cLnZtMb3zuJcTmo8W7TXrSoiW6BdHCogW41YWPCtW4xcTeldOmowW4JdOwu','nfasgW','chnlW7nh','W5FcK8k0WO1/AmkO','fem7gsy','WQlcJ8kVAcRcVmo/','W5pcHSkPWPLP','sshdRLWk','gthcSGHT','t8o5Fams','bfeZDZJcSq','W4SVW4NdR8kU','pxRdKG','W77cV2mGWPa','WQddVmoSWQucqmk4','W5WDAxq','wspcGsddG8oS','rgZcVmk7WQ53W73cNmoyW5xdKsK','amkcdCoTma','WQ/cUCkmpI5GWP5wWPtdSG','WRhdSqucuG3cIG','WQbdzZlcVx1SEG','WOHjW7JcG2a3ptLTqmknWRiGW4RcQSoX','smklW47dLuK','duyyfWGqW4aToLmpjJpdQCoBWOPie8kbef9WhCo4hmk4WP8Kte7cLqiABM7dMmkmCmoGa3r2BtVcVgBcTry4W5JdJ8opWP/cImoVWOZcQL83oSoBwejgirldQSo3zSkvt8k4W5vAW48KWRdcO8kRDSkEW7ZdS8kBxmkEc0PfmSoEy8oBW73cPCoBvCoei8kjF8oHqmkNWQdcJmoHWOH3qbFdU8k6WQfLWQRdPx8vcdySAx9gW4igWONdSmkrrWBdRSk6DWHb','WQvwvqlcNq','ASoGjmosaXFdShu','WR9bW7FcIuK','44cd6lsE5y6x','W6KGv3vk','kK1phauEW4rUz0G','WRiuz8kJWOVcJZ1eWQG','uqtcKb3dUG','b3GUmIy','5PAA6zsa5QAV','bY/cTa','W4hcJH4','pICeoCkuW4W','F0lcNx3cK3VdUJS','lZOunSke','qCkBhmoVdmkYWO/cPCkdWQldHG','6Akp5y2/5lQA6zUR','WR/dV8oJWP4Era','W4STW4BdGSkL','W6neEq','W6xcSMjezW','W4i/D24X','WQ59CKxdLG','6zcQ5O6j5zc66zYK55Ml5A2d56YK5B+y6AcM5lQ6q+s/K+wTIUEVPq','W4ldKmk6','WRTIWO5+','W73dI8oPhxldQmkUW6NcRSk4ra4TghpdTCoyWPDuW6HlWOaQgmkVD8k5gSo8ECkxECkWgcyW','W7lcTdZcJ8k5WOxcS8oUAcm+W5iZ','WRdcR8kp','cI7cOYOWg1W','FudcJ8odW7uYWQ3dLa','W5RdSSkQWOVdKW','zhpcPLeUW4tdJSovW6yE','AxNcU3i','EsJcHY/dRW','jhZcH1pcRxJdPG','W5hcVmkGWRn/','C0RcPSowW6a','W63dPamZzbpcIGi/','W4acBhSk','c8kDWOJdHCoOW74','W57dJSoA','AmkBW7ZcJCk5iKm2mSkVW6NcQa','W53cKwW','6lEY5y+B5PEu5Pso','jrxdPmoTW7O','ASoGia','FuRcGSofW7uZ','W6NcQw5hEa','6Ak75y6C5lU56zIv','vtnoWRBdQq','W7FcJ0uwWRO','W4dcSIimkq','W77KV67MGkxLI4bh','qCkffSo9o8kYWO7cP8oo','WRlcTmoFFG','WRPdqW','vXFcRrW','bcxcOqnPauW','W57dJSoExHZdSmk7W60','WPBMI43MIjxLI4iS','W7lcI1arWRFdSCo/','WOPHD2VdHmokn8o9','b8kBWO3dNW','stRdL8kwW5a','y3pcLN7cIhJdVsNdKq','q0lcLmoLWOaO','W6ZdRSoFocHSW49CWQRdKblcUmkt','WR7dU8o5W5CsrSkZeLuI','W4pcUCkMWPPO','WQSesG','WRpdP2FdNmoMW5e','W6JdQCoCDX3dS1qDWRyy','WQbfwsm','zK3cJhdcI2ZdMYNdISki','WPTkW7xcG2O8','W7dcLLKAWRZdPmoUpmoRW6Gmsq','tYC2','W4xdGmousZZdSmk5W6y','WR9EWOdcSSoEpCksoCoQrL3dUmolBG','W4yhux53','WPD2zgi','CIfSWRpdRW','eNPI','AGVdOSkCW7e','tfBcVwlcPq','WQFdQMBdL8o7','W4dcPmkvWRv3','WRJdUX8Z','aNZdK8oFna','W7tdPSkrWRtdUq','WQJdO8kOW4fbWPBdHCkZ','E8omW6ddL8kckLi','W45jjG','WRhcUCkgB2SW','WP7cL8oLWQVdQq','W5xdHmojAWhdTmkXW7NcPN3dT8kfW4pdSgtcU3G','WOxcKCkKqgSSWO1RWPxdPIxcUCkTWRu','6kYu5AgK5yAn5Q2K56oF55IQ6zkS5OYR','WOFdQ33dOCoA','aCkrWORdLSo5W6q','WPPLFhtdLG','wmo4W7ZcO8kjWQazuSoSW6rTr8kDEvVdJhFcOJFcJmo8Dx3dImo8FSkormkgxSk1','eJBdQCoP','WQ3cRSknv2W9WO5kWPNdUd4','BCocW4hdG8kL','rIdcIaldIG','W5RdHSkTWPO','vmk/W6NdS1i3WRu','WQznwIlcOhK','WRNcGmk+rc4','6k635Agc5yE75QYD56ck55U46zgF5O6N','WO9GCW','W7TThe9KwW','W5tdImorsW3dQW','WQrJW6RcHge','vs/cKIhdHCoQWPy','u8k+W4xdSLy0W6zYcgJcGKK/','WRmbE8kUWORcHq','WRpcTmkEreG','WO3dJwldOmoe','aJhdRmo+W7OBW7VcPG','dx1KW6HiW6uZWPS','wSk1W7tdO2CXWQmO','Dmo6kCo2grO','dCkVnSoXjG','W5L2gf5z','g0qXEtG','CYTcWQi','WQldUYiIsqNcGrq','zd1wWQi','6ycK6kYx56gPqwO','AmoCW6tdK8kmo3qxg8kB'],...(function(){return['WPyqqSkSWPi','mtOg','sGtdPCkE','W4xcH3Ta','cmknemkQvCo5WOtcRmkxWQy','D+EQUUwfPEwiKq4','i3tdM8oup8kb','WQxdP33dMq','u8kwW4JdUua','o1rJW5JdLa','EehcJ8ooW7q/WQFdIq','W4ldMSkZWPJdR8o+','W4tdS8kpWOBdQa','uW3cJqddOSohus0','zcdcHmkhyCovW6RdPsuybYy','kwjDW4n9','W6jkBG','W5RcLmoIdKBcQCo6WRm','gdFdRSoGW6OQW6ZcUq','nNddM8oLeq','WP5kW7lcK1e4yg0','ff4Jeci','WRBcKSkAB3S','WRepzq','bbhcNCoMWOmxi8oP','WQJcQSoYyrS','W5BdNLKxW7Tt','WRRcM8kYwHlcTmo1WRS','AmoPW77cUCkC','AJxdNwaz','yL/cGmolW7u','WQhdPmkZ','xSoMFWydWPxcHG','E0WuWQKsWReJnHjae8oFcfBdSrCrWQhdKCoT','zLFcS8oMWPy','qflcI8o0WOa','WQFcMCoMWPtdTG','xZJcNctdPa','WQhcMCoPWPhdOq','zgbqW7tdTrhcQq','DL3cQSoHW6K','8jgjSCk6','qK/cHCoYWOqjcCoJaadcO8ops8oYsCkN','WQCcCSkLWOm','yIfcWRldRCkt','q0lcGmk2W5bKomo/hqi','uH/dLSkYWOa','W6CPwx5De8oG','stldMuCy','ohVdLSoCjCkiW7VdGa','WPFcISkoqci','kK09daeyWPCZnYjsz2pdPmo5WOnq','6zo95O6Z5AEJ6ls5','n1vhW4JdMq','WQDCwc/cUW','gLeSzsNcQLa','W7W8vhnm','WR7cISk3rZi','W4dcIrSyjCkuA8kC','m1bO','W6jPc1G','bIFcKstdV8o1WPddS8kAWRa','kNdcS8oiW6u5W78','mKWgsfveW753Fre','W7pcStJcGCk4WOxcSCk1udytW44fW4i','WQ/dLexdTmoh','trhdVmkyW7C','aYZdO8ojW7eQ','gSkvWO3dHCozW6xcQdC','ywRcQuhcJG','WQ7cRmkeywS','W4tdM8kcWO3dVSoYW6q5WORdHwZdQmoTs1CgBflcVa','WRlcPCkzwNS','gZ3dRa','xeBcKmoJWOK','6k2s5AkD5ywC5Q6B56g055QF6zcI5O6p','WRhcP8oFzWRdTvyt','jeGwhW','6zoT5O6D5Awr6lE8','ESozW7ZdKSkx','vSkVW67dHL8XWRC','W5ddHv8kW70','imkSWQpdI8om','WRVdRhddICoD','dJWhn8ke','CrTvtLniWPnNvtP9yLy','gSkZWQJdSmoC','mdCNdCk6','jw/dKmoAoa','zCogW7C','W6mkW7FdISkI','xY7cItxdHq','u8oSW63cUmku','WQtcLmk/sZ7cKSo+','W4xdGmousW','pcavmmkpW5TfW7dcOSkY','W5tMIj/MIQdLIkjL','EvC6W63dPvO','irSosd4xW5vmqIWcoW','W5itDhS','4P6iWQROH5/MNOtOV6xOOONPG7BLI7hKU5hPL5dOR6u8','WPBcR8kTuM0','5yI/5lMX56kBWROt','WOlcG8oLwHu','jZS5dCkJ','W5RdG18cWQiiA8o/imoWW7qbvs/dUX1iWQ13W5dcLXxcGdFdMdhcNIqMdh8DW6RcLG','FZRdGmoeoCkaW63cNdGQiHNdUCkLW74md8kpW4HwWRBdNSoPWQJdJJNdUa','W4pcM28tm8orW7ldUSoQW4e','W4NcIqy','zutcN2pcG0RdRsq','DIJdRCkYW54','W5ZdHmoywZRdVmk5W6ZcV3BdKCkLW4RdVx7cU0vEWPv0WRS','WOtcLCkkDHa','WQVdT8o1','AM0RWQe5','W7SWqMOD','WRhcS8kp','WPb/Eg7dHq','zmoEDqGC','FLKuWROj','BxpcT3GzW5ldKmoBW7CEWPhcPYxdSmk7nK3cMga8WQ0','htZdO8oRW6SM','dLGYFZ4','ohVdKCovkmkJW7G','aZJdO8oOW7aJ','WQtdPHSqEG','WR7cU8okWPJdHSknW7C','W4BcMCkRWP5ZFa','W5BcNSkSWP5U','Drz2WORdOW','WORcNmkJxGW','lJKio8kf','WQBdPHqjsaxcNG','W6H8aKDU','W6i/xW','WRJcJmkSFuy','WRVdTqe','x30bWPup','WP1VysZcJq','vbldVmkv','WPZcHSoSW4FcR8kNW6bjW7ddKexdR8oo','W4RcHq0FgmkeAmkhWQWGbmontrRcV8keWPOTW5Dcha','W7JcUWqIuGZcNfXqh8kaW5dcHKO3W6e','W70gW4e','de7cRa','ktasla','oJ7dHCo7W48','W6NcHLGtWQy','WQPIWPv8fa','bhFdPmoYjG','cwtdHa','CszfWQpdQ8kqWOyqWQekWQ4UW6BcUcFdQG','vczsWQ3dGq','CgBcVNu/','WPv5WR57fG','htddOmoLW6SDW73cUa','WRxcS8kTyJi','WOrQye/cHmoDjG','efDjW5pdKa','FhWeWRyh','CuNcKepcH3hdUYFdK8k6WRv2oCoycq','c8kDWORdKmoHW6dcVa','W4ddKK9eWQKFj8oZk8oX','vmkPW70','cI7cUtbKbKZdThJdGCkiBmkuWPaL','W5dcI39nBCkBW67dOmo8W4G'];}())];}())];}());Iii11l=function(){return iliIli;};return Iii11l();};const IlilI=iii1II;(function(lllII,l11iII,l1i11i,l11iI1,IliiI,lI111i,I1lIII){return lllII=lllII>>0x2,lI111i='hs',I1lIII='hs',function(liIlll,I1iI1I,illll1,IIIIl1,liiilI){const lI111I=iii1II;IIIIl1='tfi',lI111i=IIIIl1+lI111i,liiilI='up',I1lIII+=liiilI,lI111i=illll1(lI111i),I1lIII=illll1(I1lIII),illll1=0x0;const lI111l=liIlll();while(!![]&&--l11iI1+I1iI1I){try{IIIIl1=-parseInt(lI111I(0x244,'6hGS'))/0x1*(parseInt(lI111I(0x398,'Eq6F'))/0x2)+-parseInt(lI111I(0x24c,'s%v7'))/0x3+parseInt(lI111I(0x217,'9cFl'))/0x4+parseInt(lI111I(0x254,'U9[u'))/0x5+-parseInt(lI111I(0x2d9,'l)Bx'))/0x6+-parseInt(lI111I(0x351,'Kidk'))/0x7*(parseInt(lI111I(0x1fb,'qx^#'))/0x8)+parseInt(lI111I(0x383,'l)Bx'))/0x9;}catch(liiii1){IIIIl1=illll1;}finally{liiilI=lI111l[lI111i]();if(lllII<=l11iI1)illll1?IliiI?IIIIl1=liiilI:IliiI=liiilI:illll1=liiilI;else{if(illll1==IliiI['replace'](/[VYUfAPeXOHnubxWpLyDrM=]/g,'')){if(IIIIl1===I1iI1I){lI111l['un'+lI111i](liiilI);break;}lI111l[I1lIII](liiilI);}}}}}(l1i11i,l11iII,function(IIiiIl,l1ilIl,IIiiIi,l1ilIi,l11iIi,ll11li,iliIlI){return l1ilIl='\x73\x70\x6c\x69\x74',IIiiIl=arguments[0x0],IIiiIl=IIiiIl[l1ilIl](''),IIiiIi=`\x72\x65\x76\x65\x72\x73\x65`,IIiiIl=IIiiIl[IIiiIi]('\x76'),l1ilIi=`\x6a\x6f\x69\x6e`,(0x16e3c5,IIiiIl[l1ilIi](''));});}(0x308,0xf067e,Iii11l,0xc4),Iii11l)&&(iｉl=0x14da);const jdCookie=require(IlilI(0x306,'y5qi')),common=require(IlilI(0x25e,'XK6L')),notify=require(IlilI(0x1bb,'Kidk')),{H5st,jsTk}=require(IlilI(0x1df,'5ja2'));let red618_url=process[IlilI(0x205,'uu^6')][IlilI(0x278,'0bVL')]||'',redshareId=(process['env'][IlilI(0x333,'qx^#')]||'')['split'](/[,@\n]+/g)[IlilI(0x1d9,'5ja2')](I1llI1=>I1llI1[IlilI(0x2f5,'y5qi')]())[IlilI(0x330,'z#J3')](Boolean),maxdraw=process['env'][IlilI(0x376,'Eq6F')]||'3',taskThreads=process[IlilI(0x362,'5fur')]['jd_red618_threads']||'1';const runInterval=process[IlilI(0x221,'!^lb')]['jd_red618_interval']||IlilI(0x282,'P1Bh'),isNotify=(process[IlilI(0x2c9,'snh#')][IlilI(0x224,'6hGS')]||process['env']['jd_red618_Notify'])===IlilI(0x1fa,'snh#'),pinFilter=(process['env'][IlilI(0x38a,'KT]k')]||'')[IlilI(0x20b,'5ja2')]('@'),endTime=0x19036605000,maxThreads=0x5;let actId,Referer,cookiesArr=Object[IlilI(0x37f,'qprh')](jdCookie)[IlilI(0x20c,'6NB#')](I11i1l=>jdCookie[I11i1l])[IlilI(0x2e6,'!^lb')](il1il=>il1il);!cookiesArr[0x0]&&($['msg']($['name'],IlilI(0x238,'YA(2')),process['exit'](0x1));const prize_map={0x1:'[红包]',0x3:IlilI(0x27e,'KVZ3'),0x6:IlilI(0x2fa,'KVZ3'),0x11:IlilI(0x348,'Rt]t'),0x12:'[实物]',0x13:'[超市卡]'};!(async()=>{const llIi1=IlilI;notify[llIi1(0x1d0,'uu^6')]({'title':$[llIi1(0x293,'AN9Z')]}),await Main(),isNotify&&notify[llIi1(0x2de,'amsE')]()&&await notify['push']();})()[IlilI(0x283,'6hGS')](Il1i1i=>$[IlilI(0x2a2,'(t^a')](Il1i1i))[IlilI(0x1f2,'!^lb')](()=>$[IlilI(0x298,'Eq6F')]());async function Main(){const IliIII=IlilI,iIIili={'XWebz':function(Ii1iiI,Ilil1I){return Ii1iiI(Ilil1I);},'dtEMN':function(iliIiI,II11iI){return iliIiI>=II11iI;},'hjHVH':'⚠\x20自定义运行间隔时长设置错误','wGBmB':function(Il1i1l,Iil1ii){return Il1i1l!==Iil1ii;},'XWlev':function(lill1I,Ii1ii1){return lill1I*Ii1ii1;},'MrfBg':'链接后面的字符必须为7位字符','PTOmS':IliIII(0x38e,'uu^6'),'FmtYS':IliIII(0x39d,'vsKe'),'vplas':function(Ilil11,i1ii1){return Ilil11>i1ii1;},'FDwIJ':function(il1ii,llI111){return il1ii!==llI111;},'nlDrE':function(i1iIiI,IlllI1){return i1iIiI!==IlllI1;},'Sifod':IliIII(0x367,'fQ[C'),'wFWPh':IliIII(0x313,'XK6L'),'ixGEQ':function(I1il11,lI1l11){return I1il11>=lI1l11;},'xIvLt':IliIII(0x273,'Lg@7'),'kLvKE':'LYrIx','zIkFy':function(II11l,II11i){return II11l===II11i;},'AGELq':'CDDMF','pVtEQ':IliIII(0x2d8,'SIuD'),'fbgof':'GsekC','fOcbr':function(iI1Iii,liI1ii){return iI1Iii===liI1ii;},'tsmdK':IliIII(0x35f,'P1Bh'),'YfBvy':IliIII(0x1ba,'Lg@7'),'giLJa':IliIII(0x323,'A9F8'),'znXUC':function(lIIiIl,iI1Iil){return lIIiIl(iI1Iil);},'ZYLKb':function(il1iI,i1iIii){return il1iI!==i1iIii;},'MHqcd':IliIII(0x265,'sKuT'),'QmBCM':IliIII(0x29a,'AN9Z')};try{try{if(iIIili[IliIII(0x369,'fQ[C')](iIIili[IliIII(0x321,'l)Bx')],IliIII(0x24d,'zzCz'))){const llIlIl=parseInt(taskThreads);if(iIIili[IliIII(0x2e5,'AN9Z')](llIlIl,0x0)&&iIIili[IliIII(0x2d0,'vsKe')](llIlIl,0x1)){if(iIIili[IliIII(0x35c,'y5qi')](iIIili[IliIII(0x397,'Y&tF')],iIIili[IliIII(0x317,'Kidk')]))try{const il1i1=iIIili['XWebz'](lI1Iii,i1li);iIIili[IliIII(0x280,'uu^6')](il1i1,0x0)&&(IliI11[IliIII(0x357,'LfJK')]=il1i1);}catch{i1l1lI[IliIII(0x2ec,'HIIB')](iIIili[IliIII(0x378,'oq!P')]);}else taskThreads=llIlIl;}}else II1Il=lilIlI;}catch{iIIili['nlDrE']('ZzCsC',iIIili[IliIII(0x388,'XK6L')])?llIll1[IliIII(0x281,'0k3k')](IliIII(0x1b5,'5fur')+Illl1l):taskThreads=0x1;}taskThreads=Math[IliIII(0x1bd,'snh#')](taskThreads,maxThreads),$[IliIII(0x30c,'z#J3')]=null;if(runInterval)try{const iI1Il1=parseInt(runInterval);if(iIIili['ixGEQ'](iI1Il1,0x0)){if(iIIili[IliIII(0x33b,'TU74')]('MooLb',iIIili[IliIII(0x1ed,'SIuD')])){let i1lli1=lIII1I[IliIII(0x2bf,'HIIB')];illIlI=i1lli1['match'](/\/active\/(\w+)\/index/)?.[0x1],liIiI=i1lli1;}else $[IliIII(0x387,'!^lb')]=iI1Il1;}}catch{'iJlAV'!==iIIili[IliIII(0x233,'CTC4')]?console[IliIII(0x20f,'NiUQ')]('⚠\x20自定义运行间隔时长设置错误'):ilil1l+=illlIi['charAt'](I1lIii['floor'](IiI1I[IliIII(0x32b,'z@Ar')]()*illlIl[IliIII(0x34e,'KT]k')]));}$[IliIII(0x271,'NiUQ')]=Date[IliIII(0x295,'FfdA')]();const i1iIil=$[IliIII(0x307,'z@Ar')]('yyyy-MM-dd\x20HH:mm',endTime);if(endTime&&iIIili[IliIII(0x2ab,'uu^6')]($[IliIII(0x23a,'0k3k')],endTime)){if(iIIili[IliIII(0x1f9,'NiUQ')]('CDDMF',iIIili['AGELq'])){console['log']('活动已于\x20'+i1iIil+IliIII(0x24f,'SIuD'));return;}else Iii11I['authorCode']=iIIili[IliIII(0x2ee,'(t^a')](Iil1II,IliIII(0x2e8,'FfdA'));}const liI1il=IliIII(0x304,'1XEe')+common['genRandomString'](0xd,iIIili['pVtEQ']);$['UA']=common['genUA'](liI1il);if(/https:\/\/u\.jd\.com\/.+/[IliIII(0x1e2,'Y&tF')](red618_url)){if(red618_url[IliIII(0x1c6,'A9F8')]('/')[IliIII(0x1e0,'vsKe')]()){red618_url=red618_url[IliIII(0x234,'P1Bh')]('/')[IliIII(0x35a,'1XEe')]()[IliIII(0x389,'s%v7')]('?')['shift']();if(iIIili[IliIII(0x360,'Rt]t')](red618_url[IliIII(0x227,'snh#')],0x7)){if(iIIili[IliIII(0x2fe,'pNDQ')](iIIili[IliIII(0x36e,'1XEe')],IliIII(0x28e,'9cFl'))){console[IliIII(0x353,'6hGS')](iIIili[IliIII(0x252,'6hGS')]);return;}else{Iliiii=i1illI[IliIII(0x297,'XK6L')]('/')['pop']()[IliIII(0x29f,'uu^6')]('?')[IliIII(0x1e4,'@iLW')]();if(iIIili[IliIII(0x276,'5fur')](i1IIl[IliIII(0x31c,'s%v7')],0x7)){i1IIi[IliIII(0x299,'pNDQ')](IliIII(0x2d5,'z@Ar'));return;}}}}else{console[IliIII(0x32e,'A9F8')](IliIII(0x320,'A9F8'));return;}}else iIIili[IliIII(0x303,'uu^6')](red618_url[IliIII(0x2af,'NiUQ')],0x7)?IliIII(0x251,'Xr0z')!==iIIili['tsmdK']?red618_url=red618_url:lilIil[IliIII(0x2ec,'HIIB')](iIIili[IliIII(0x28d,'Eq6F')]):red618_url='';authorCodeList=await iIIili[IliIII(0x1c7,'6NB#')](getAuthorCodeList,iIIili[IliIII(0x268,'fQ[C')]);authorCodeList?$[IliIII(0x1f6,'(t^a')]=authorCodeList[random(0x0,authorCodeList['length'])]:'yjhsg'!==iIIili[IliIII(0x239,'5fur')]?liiII1+=IIIl1l['charAt'](lllll[IliIII(0x2c2,'YA(2')](iIIili[IliIII(0x26d,'snh#')](i11ili['random'](),iil1l1[IliIII(0x267,'Xr0z')])))['toUpperCase']():$[IliIII(0x1b0,'Y&tF')]=iIIili[IliIII(0x1b9,'Y&tF')](atob,IliIII(0x1b3,'Eq6F'));$[IliIII(0x347,'TU74')]=red618_url?red618_url:$[IliIII(0x342,'FfdA')],$[IliIII(0x370,'0k3k')]='https://u.jd.com/'+$[IliIII(0x1f3,'Lg@7')];if(red618_url){if(iIIili[IliIII(0x318,'KT]k')](iIIili[IliIII(0x331,'LfJK')],iIIili[IliIII(0x259,'qx^#')]))console[IliIII(0x25a,'TU74')](IliIII(0x240,'6NB#')+$[IliIII(0x382,'Eq6F')]),console[IliIII(0x202,'5ja2')](IliIII(0x341,'snh#')+$[IliIII(0x2b8,'s%v7')]);else{if(iIIl1l[IliIII(0x33d,'NiUQ')]('/')[IliIII(0x286,'P1Bh')]()){Iliil1=i1III[IliIII(0x37b,'YA(2')]('/')['pop']()[IliIII(0x270,'Rt]t')]('?')[IliIII(0x1d1,'uu^6')]();if(iIIili[IliIII(0x2a3,'A9F8')](Ii1iIi['length'],0x7)){Ii1iIl[IliIII(0x32e,'A9F8')](iIIili[IliIII(0x2d4,'A9F8')]);return;}}else{iliIIi[IliIII(0x26c,'YA(2')](iIIili[IliIII(0x275,'(t^a')]);return;}}}console[IliIII(0x2e7,'z#J3')](''),$['needRemoveCookieIndex']=[],await common[IliIII(0x339,'qx^#')](taskThreads,cookiesArr,taskFnc),$[IliIII(0x33a,'HIIB')]=![];$[IliIII(0x1c0,'z#J3')][IliIII(0x2ed,'zzCz')]>0x0&&(cookiesArr=cookiesArr['filter']((lIIiI1,ll1I1)=>!$[IliIII(0x1c9,'amsE')][IliIII(0x2fc,'A9F8')](ll1I1+0x1)),$['needRemoveCookieIndex']=[]);const llIlIi=notify[IliIII(0x21d,'Xr0z')]();llIlIi&&console[IliIII(0x344,'Y&tF')](IliIII(0x23c,'Kidk')+llIlIi['replace'](/：/g,'\x20➜\x20'));}catch(Ii1ili){console[IliIII(0x311,'0bVL')](IliIII(0x277,'A9F8')+Ii1ili);}}function iii1II(_0xbbb8ff,_0xeb2af7){const _0x31867c=Iii11l();return iii1II=function(_0x122dc0,_0x238060){_0x122dc0=_0x122dc0-0x1af;let _0x4735f7=_0x31867c[_0x122dc0];if(iii1II['ociQvn']===undefined){var _0x3d1ba9=function(_0x18c748){const _0x175640='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1ee154='',_0x193b56='';for(let _0x51fe71=0x0,_0x2174db,_0x22f3dd,_0x3ea1fb=0x0;_0x22f3dd=_0x18c748['charAt'](_0x3ea1fb++);~_0x22f3dd&&(_0x2174db=_0x51fe71%0x4?_0x2174db*0x40+_0x22f3dd:_0x22f3dd,_0x51fe71++%0x4)?_0x1ee154+=String['fromCharCode'](0xff&_0x2174db>>(-0x2*_0x51fe71&0x6)):0x0){_0x22f3dd=_0x175640['indexOf'](_0x22f3dd);}for(let _0x211354=0x0,_0x14a69e=_0x1ee154['length'];_0x211354<_0x14a69e;_0x211354++){_0x193b56+='%'+('00'+_0x1ee154['charCodeAt'](_0x211354)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x193b56);};const _0x328417=function(_0x18466e,_0x312501){let _0x29649c=[],_0x308fd0=0x0,_0x565fcf,_0x4a3557='';_0x18466e=_0x3d1ba9(_0x18466e);let _0x1577c3;for(_0x1577c3=0x0;_0x1577c3<0x100;_0x1577c3++){_0x29649c[_0x1577c3]=_0x1577c3;}for(_0x1577c3=0x0;_0x1577c3<0x100;_0x1577c3++){_0x308fd0=(_0x308fd0+_0x29649c[_0x1577c3]+_0x312501['charCodeAt'](_0x1577c3%_0x312501['length']))%0x100,_0x565fcf=_0x29649c[_0x1577c3],_0x29649c[_0x1577c3]=_0x29649c[_0x308fd0],_0x29649c[_0x308fd0]=_0x565fcf;}_0x1577c3=0x0,_0x308fd0=0x0;for(let _0x556e84=0x0;_0x556e84<_0x18466e['length'];_0x556e84++){_0x1577c3=(_0x1577c3+0x1)%0x100,_0x308fd0=(_0x308fd0+_0x29649c[_0x1577c3])%0x100,_0x565fcf=_0x29649c[_0x1577c3],_0x29649c[_0x1577c3]=_0x29649c[_0x308fd0],_0x29649c[_0x308fd0]=_0x565fcf,_0x4a3557+=String['fromCharCode'](_0x18466e['charCodeAt'](_0x556e84)^_0x29649c[(_0x29649c[_0x1577c3]+_0x29649c[_0x308fd0])%0x100]);}return _0x4a3557;};iii1II['TzYwIY']=_0x328417,_0xbbb8ff=arguments,iii1II['ociQvn']=!![];}const _0x226f27=_0x31867c[0x0],_0x23872f=_0x122dc0+_0x226f27,_0x439b19=_0xbbb8ff[_0x23872f];return!_0x439b19?(iii1II['HXpEip']===undefined&&(iii1II['HXpEip']=!![]),_0x4735f7=iii1II['TzYwIY'](_0x4735f7,_0x238060),_0xbbb8ff[_0x23872f]=_0x4735f7):_0x4735f7=_0x439b19,_0x4735f7;},iii1II(_0xbbb8ff,_0xeb2af7);}async function taskFnc(iI1Ii1,Ii1ill){const II1l=IlilI,llIlI1={'eRPMm':function(llIIil,llIIii){return llIIil===llIIii;},'fwMvO':II1l(0x2c6,'Eq6F'),'TLiae':function(Ii1I1i,llIIlI){return Ii1I1i-llIIlI;},'xgwxb':II1l(0x266,'XK6L'),'dQRUB':function(Ii1I1l,IIlIl){return Ii1I1l-IIlIl;},'IoQXV':function(ili11l,Iiilll){return ili11l&Iiilll;},'Tvwgc':II1l(0x287,'Eq6F'),'tzejh':II1l(0x332,'9cFl'),'heAYg':'Set-Cookie','HUxIL':function(Iiilli,IIlIi){return Iiilli+IIlIi;},'VjlnL':function(ili11i,iiIi1l){return ili11i+iiIi1l;},'brtxe':II1l(0x245,'FfdA'),'grFCh':function(li11I,lliiII){return li11I(lliiII);},'mbFUZ':function(iiIi1i,liI1ll){return iiIi1i+liI1ll;},'LEaLn':II1l(0x21c,'HIIB'),'vyIXE':II1l(0x229,'LfJK'),'FxzTP':II1l(0x352,'0bVL'),'WpWfw':II1l(0x30b,'0bVL'),'lNKOL':II1l(0x316,'5ja2'),'broaD':function(ll1II,IllIii){return ll1II(IllIii);},'BsUAj':II1l(0x2a5,'qprh'),'MBBpd':function(liI1li,IllIil){return liI1li*IllIil;},'aUIRl':function(ill1Ii,llIIl1){return ill1Ii+llIIl1;},'TwAnF':'|278','beJta':II1l(0x2ce,'FfdA'),'HINWJ':function(ill1Il,i1lll1){return ill1Il==i1lll1;},'vfNij':function(Ii1I1I,l1i1Ii){return Ii1I1I!==l1i1Ii;},'yUKxX':II1l(0x2be,'z@Ar'),'ndsmH':II1l(0x32d,'Eq6F'),'QTXrE':function(l1iI1,lliiI1){return l1iI1/lliiI1;},'ZpUnd':function(IiiI1,lilII){return IiiI1+lilII;},'tqsMd':function(IIIiI,iii1i1){return IIIiI*iii1i1;},'cBWBI':II1l(0x35d,'Lg@7'),'UbQBv':function(IllIll,i1lllI){return IllIll(i1lllI);},'FFxdA':function(llIIi1,iI1IlI){return llIIi1+iI1IlI;},'BGMCP':function(l1i1Il,ill1I1){return l1i1Il+ill1I1;},'Ewhqg':II1l(0x22a,'0k3k'),'rRfYJ':function(l1i1II,ili111){return l1i1II!==ili111;},'qQTUz':II1l(0x25c,'Xr0z'),'aXQsk':II1l(0x1fc,'LfJK'),'tJeKe':function(Ii1I11,IllIli){return Ii1I11>IllIli;},'nEjEb':'无门槛','XzrNq':II1l(0x2f8,'Xr0z'),'CeXQl':II1l(0x2f2,'snh#'),'sVQls':II1l(0x33c,'qprh'),'ZiYhp':II1l(0x1b6,'s%v7'),'pJgAZ':II1l(0x328,'CTC4'),'oyqRd':function(ii1Ii,ii1Il){return ii1Ii===ii1Il;},'jLRys':II1l(0x1fe,'Lg@7'),'WamIm':II1l(0x2ff,'XK6L'),'bdzpe':II1l(0x1d6,'qprh'),'QsgqQ':'shareUnionCoupon','rrjFA':II1l(0x279,'(t^a'),'wGLAQ':function(l1iII,iI1Ill){return l1iII*iI1Ill;},'DbtjO':function(lilI1,IIIi1){return lilI1*IIIi1;},'GKKDV':function(i1llli,i1llll){return i1llli!==i1llll;},'dklFE':II1l(0x28c,'0bVL'),'cDIKx':II1l(0x28f,'d*Jn'),'Zzzep':II1l(0x232,'z@Ar'),'OhFMA':'application/x-www-form-urlencoded;charset=utf-8','MFvGt':'Content-Type','eCsnK':function(iI1Ili,llIIiI){return iI1Ili>=llIIiI;},'KgHwP':function(iI1111,IIIl1){return iI1111(IIIl1);},'JQqBR':II1l(0x363,'6NB#'),'TVmxP':II1l(0x2bd,'Eq6F'),'LKkXM':function(ii1ii,Iii1){return ii1ii>Iii1;},'MXGzA':function(I1I1lI,ii1il){return I1I1lI===ii1il;},'ePDuY':II1l(0x26f,'TU74'),'CBgkl':II1l(0x2dd,'KT]k'),'kNrgd':function(l1iIlI){return l1iIlI();},'VNAmy':'getCoupons','dkQxF':function(iI111I,IIIlI1){return iI111I(IIIlI1);}};if($['runEnd'])return{'runEnd':!![]};const iI1IiI=decodeURIComponent(common['getCookieValue'](iI1Ii1,'pt_pin'));function IIlI1(i1lIiI,IiiIl){const liiiiI=II1l;if(llIlI1[liiiiI(0x315,'uu^6')](llIlI1[liiiiI(0x28b,'KVZ3')],llIlI1['fwMvO'])){if(i1lIiI['length']<=0x4)return i1lIiI;else{if(llIlI1[liiiiI(0x212,'snh#')](liiiiI(0x335,'s%v7'),liiiiI(0x296,'y5qi')))IIlll[liiiiI(0x1c5,'s%v7')](liliI+liiiiI(0x391,'Exq2')),ll1lI=!![];else{const l1lli1=i1lIiI[liiiiI(0x1d4,'Y&tF')](0x0,0x2),IiiIi=i1lIiI['slice'](-0x2),ii1l1i=Math[liiiiI(0x204,'Lg@7')](llIlI1[liiiiI(0x2d2,'(t^a')](IiiIl-l1lli1[liiiiI(0x24b,'5fur')],IiiIi[liiiiI(0x322,'!^lb')]),0x0),l1iIl1='*'['repeat'](ii1l1i);return l1lli1+l1iIl1+IiiIi;}}}else illlI1=!![];}const i1iIli=llIlI1[II1l(0x1e3,'d*Jn')](decodeURIComponent,iI1IiI),i1iIll=IIlI1(i1iIli,0x6),i1lliI=II1l(0x2c1,'Exq2')+Ii1ill+'】'+i1iIll+'：',liI1l1=notify[II1l(0x2ca,'Y&tF')](Ii1ill,iI1IiI);if(pinFilter['length']>0x0&&(pinFilter['includes'](iI1IiI)||pinFilter[II1l(0x2cb,'XK6L')](encodeURIComponent(iI1IiI)))){liI1l1[II1l(0x1c2,'KVZ3')]('已设置跳过运行当前账号'),console[II1l(0x209,'zzCz')](liI1l1['getInlineContent']()),$[II1l(0x1de,'snh#')]['push'](Ii1ill);return;}const IllIlI=await common[II1l(0x22d,'!^lb')](iI1Ii1);if(!IllIlI&&typeof IllIlI===llIlI1['JQqBR']){console['log'](i1lliI+II1l(0x2ea,'z@Ar')),$[II1l(0x25f,'qx^#')][II1l(0x2f7,'CTC4')](Ii1ill);return;}let IiillI=![],ili11I=$[II1l(0x21e,'Y&tF')],li11l,lliiIl,li11i;const lliiIi=common[II1l(0x356,'Kidk')](iI1IiI),iiIi1I=llIlI1['TVmxP'],IllIl1=IIIil=>IIIil[II1l(0x29d,'1XEe')]('')[II1l(0x36f,'U9[u')]((IIIii,iI111i)=>{const II1i=II1l;if(llIlI1[II1i(0x1d2,'U9[u')](llIlI1[II1i(0x206,'NiUQ')],'hZdcD'))return IIIii=llIlI1[II1i(0x2b2,'@iLW')](IIIii<<0x5,IIIii)+iI111i[II1i(0x23b,'P1Bh')](0x0),llIlI1[II1i(0x1c1,'SIuD')](IIIii,IIIii);else for(let iI111l of I1ilII){let i1lIii=iI111l[II1i(0x290,'Kidk')](';')[0x0]['trim']();if(i1lIii[II1i(0x361,'zzCz')]('=')[0x1]){if(l1l11i[II1i(0x1cc,'Kidk')](i1lIii[II1i(0x21b,'sKuT')]('=')[0x1])==-0x1)l1iIl+=i1lIii[II1i(0x31a,'FfdA')](/ /g,'')+';\x20';}}},0x0),ll1Ii=[...new Set(redshareId)];llIlI1[II1l(0x336,'l)Bx')](ll1Ii[II1l(0x25d,'vsKe')],0x0)?llIlI1[II1l(0x395,'!^lb')](llIlI1[II1l(0x2ac,'Rt]t')],llIlI1[II1l(0x1d8,'s%v7')])?li11l=ll1Ii[Math[II1l(0x2c2,'YA(2')](llIlI1[II1l(0x2e0,'9cFl')](Math[II1l(0x334,'1XEe')](),ll1Ii['length']))]:ii1iil=!![]:li11l='';for(let i1lIil=0x0;i1lIil<maxdraw;i1lIil++){if(llIlI1[II1l(0x38b,'s%v7')](llIlI1[II1l(0x248,'l)Bx')],II1l(0x2d3,'AN9Z'))){let III11l=llIlI1[II1l(0x359,'s%v7')](ill1II);lliiIl='__jda='+III11l[II1l(0x38c,'d*Jn')]+II1l(0x381,'zzCz')+III11l[II1l(0x27f,'Rt]t')]+';__jdc='+III11l[II1l(0x2c8,'Xr0z')]+II1l(0x36a,'oq!P')+III11l[II1l(0x23e,'Eq6F')]+II1l(0x2cd,'TU74')+III11l['shshshfpa']+II1l(0x2f4,'TU74')+III11l[II1l(0x2b3,'KVZ3')]+II1l(0x380,'9cFl')+III11l['mba_muid']+II1l(0x2e4,'5ja2')+III11l[II1l(0x1d5,'5ja2')]+II1l(0x1f8,'9cFl')+III11l[II1l(0x326,'s%v7')]+';',ss=await llIlI1[II1l(0x1e6,'Kidk')](ll1Il,$[II1l(0x1bc,'(t^a')]);if(ss){let llIl1l=ss?.[II1l(0x2f1,'@iLW')](/(https:\/\/u\.jd\.com\/jda[^']+)/);if(llIl1l)$['hrl']=llIl1l[0x1],await iiIi11(llIl1l[0x1]);else{if(II1l(0x247,'Xr0z')===II1l(0x30e,'YA(2'))console[II1l(0x2e9,'(t^a')](i1lliI+'没有获取到跳转链接'),IiillI=!![];else return IIIl1I;}}else console['log'](i1lliI+II1l(0x377,'amsE')),IiillI=!![];let llIl1i=await jsTk(lliiIi,II1l(0x291,'fQ[C')+actId+'/index.html',{'bizId':II1l(0x2c3,'Eq6F'),'v':II1l(0x285,'zzCz'),'qs':'stath=20&navh=44&tttparams=MiCEMF2eyJnTGF0IjoiMjkuNjA2OTI3IiwidW5fYXJlYSI6IjRfNTA5NTBfNTA5NTdfMCIsImRMYXQiOiIiLCJwcnN0YXRlIjoiMCIsImFkZHJlc3NJZCI6IjYyNzEwMzg4MDYiLCJsYXQiOiIiLCJwb3NMYXQiOiIyOS42MDY5MjciLCJwb3NMbmciOiIxMDYuNTY2NzEyIiwiZ3BzX2FyZWEiOiIwXzBfMF8wIiwibG5nIjoiIiwidWVtcHMiOiIwLTAtMCIsImdMbmciOiIxMDYuNTY2NzEyIiwibW9kZWwiOiJpUGhvbmU4LDIiLCJkTG5nIjoiIn70%3D&utm_source=kong&utm_term=626e4b23b76a4568aa45f7b551b5c4ef&d=kizfKM1&useNewLoad=1&uabt=384_3901_1_0-385_3902_1_0&utm_medium=jingfen&cu'});li11i=llIl1i[II1l(0x201,'amsE')],await l1i1I1(llIlI1[II1l(0x26b,'TU74')]);if(IiillI||$[II1l(0x386,'d*Jn')])break;if($['waitTime'])await $[II1l(0x1af,'z#J3')]($[II1l(0x38f,'y5qi')]);}else IIIIII[II1l(0x393,'qx^#')]=!![];}await llIlI1[II1l(0x327,'FfdA')](l1i1I1,'shareUnionCoupon');if($['runEnd'])return{'runEnd':!![]};if($[II1l(0x35e,'SIuD')])await $['wait']($['waitTime']);async function ll1Il(IIIli){const illli1=II1l,ii1i1=await common[illli1(0x289,'z#J3')]({'url':IIIli,'method':llIlI1[illli1(0x258,'A9F8')],'headers':{'Cookie':iI1Ii1,'User-Agent':iiIi1I},'proxy':null,'debug':![],'timeout':0x7530}),Iiii=ii1i1['data'];let llIl11=ii1i1&&ii1i1[illli1(0x24e,'qprh')]&&(ii1i1[llIlI1['tzejh']][illli1(0x302,'KVZ3')]||ii1i1[llIlI1[illli1(0x2ad,'Xr0z')]][llIlI1[illli1(0x264,'A9F8')]]||'')||'';if(llIl11)for(let IIIll of llIl11){let I1I1il=IIIll[illli1(0x1ea,'amsE')](';')[0x0]['trim']();if(I1I1il[illli1(0x23d,'Eq6F')]('=')[0x1]){if(lliiIl[illli1(0x288,'z#J3')](I1I1il[illli1(0x392,'FfdA')]('=')[0x1])==-0x1)lliiIl+=llIlI1['HUxIL'](I1I1il['replace'](/ /g,''),';\x20');}}return Iiii;}async function iiIi11(l1llii){const I1lII1=II1l;if('LidQB'!==llIlI1[I1lII1(0x394,'Lg@7')]){const liII1=await common[I1lII1(0x37a,'NiUQ')]({'url':l1llii+(I1lII1(0x1b2,'oq!P')+llIlI1[I1lII1(0x36b,'zzCz')](IllIl1,iiIi1I)),'maxRedirects':0x0,'method':I1lII1(0x31b,'qprh'),'headers':{'Cookie':llIlI1[I1lII1(0x2c0,'LfJK')](llIlI1[I1lII1(0x39a,'Y&tF')](lliiIl,'\x20'),iI1Ii1),'User-Agent':iiIi1I,'Referer':$['red618_url']},'proxy':null,'debug':![],'timeout':0x7530});let I1I1ii=liII1[I1lII1(0x372,'YA(2')];if(I1I1ii?.[I1lII1(0x2f9,'z#J3')]){let IIIlIi=I1I1ii[I1lII1(0x2dc,'zzCz')];actId=IIIlIi[I1lII1(0x1c8,'Exq2')](/\/active\/(\w+)\/index/)?.[0x1],Referer=IIIlIi;}let l1llil=liII1&&liII1[llIlI1[I1lII1(0x32c,'SIuD')]]&&(liII1[I1lII1(0x1cf,'fQ[C')][llIlI1[I1lII1(0x1da,'Exq2')]]||liII1[llIlI1[I1lII1(0x39b,'Kidk')]]['Set-Cookie']||'')||'';if(l1llil)for(let llIl1I of l1llil){if(llIlI1['vyIXE']===llIlI1[I1lII1(0x26e,'l)Bx')]){let i1lIl1=llIl1I[I1lII1(0x379,'z@Ar')](';')[0x0][I1lII1(0x2d7,'sKuT')]();if(i1lIl1[I1lII1(0x2ae,'6NB#')]('=')[0x1]){if(lliiIl[I1lII1(0x1cc,'Kidk')](i1lIl1[I1lII1(0x29b,'5fur')]('=')[0x1])==-0x1)lliiIl+=i1lIl1['replace'](/ /g,'')+';\x20';}}else llllI[I1lII1(0x39c,'FfdA')](''+lllil1+iil1il[I1lII1(0x263,'Rt]t')]+'['+ilil1I[I1lII1(0x231,'!^lb')]+']'),i11il1[I1lII1(0x1f4,'qx^#')]?.[I1lII1(0x374,'Kidk')](I1lII1(0x2ef,'9cFl'))&&(lllilI=!![]);}return lliiIl;}else{const IIIlI=llIliI[I1lII1(0x385,'pNDQ')](0x0,0x2),IiiI=I1l1I1[I1lII1(0x39f,'P1Bh')](-0x2),iIi1i=I1i111[I1lII1(0x216,'snh#')](llIlI1[I1lII1(0x2eb,'d*Jn')](ilI1li-IIIlI[I1lII1(0x1ca,'d*Jn')],IiiI[I1lII1(0x1f7,'A9F8')]),0x0),l1iIll='*'[I1lII1(0x300,'0k3k')](iIi1i);return llIlI1[I1lII1(0x1bf,'pNDQ')](llIlI1['VjlnL'](IIIlI,l1iIll),IiiI);}}function ill1II(){const Ill111=II1l;if(llIlI1[Ill111(0x262,'qx^#')]!==Ill111(0x241,'P1Bh')){let iIi1l=Iliii1[Ill111(0x253,'Kidk')][Ill111(0x338,'0bVL')][Ill111(0x38d,'0k3k')](/\?s=([^&]+)/)&&iIiIi[Ill111(0x250,'s%v7')][Ill111(0x337,'d*Jn')][Ill111(0x203,'Kidk')](/\?s=([^&]+)/)[0x1]||'';iil1ll[Ill111(0x39c,'FfdA')](iiilil+Ill111(0x1b7,'qx^#')+iIi1l);}else{let i1lIlI=llIlI1[Ill111(0x343,'1XEe')],l1lliI='1',I1I1iI=llIlI1[Ill111(0x27d,'s%v7')](parseInt,Date[Ill111(0x292,'TU74')]()/0x3e8)[Ill111(0x33f,'5ja2')](),IIIlII=I1I1iI+llIlI1[Ill111(0x223,'P1Bh')](parseInt,0x7fffffff*Math[Ill111(0x349,'Kidk')]())[Ill111(0x350,'CTC4')](),iiIiI1=[i1lIlI,IIIlII,I1I1iI,I1I1iI,I1I1iI,l1lliI][Ill111(0x1dc,'pNDQ')]('.'),ili1Il=[i1lIlI,l1lliI,[IIIlII,l1lliI][Ill111(0x261,'XK6L')]('|'),I1I1iI][Ill111(0x1dc,'pNDQ')]('.'),ili1Ii=i1lIlI,Iilll1=[i1lIlI,Ill111(0x2b5,'9cFl'),'-',llIlI1['lNKOL'],'-',Date[Ill111(0x2f6,'z@Ar')]()['toString']()][Ill111(0x20d,'6hGS')]('|');Iilll1=encodeURIComponent(Iilll1);let ll11I=llIlI1[Ill111(0x368,'9cFl')](i1llil,llIlI1[Ill111(0x207,'Lg@7')])+'-'+I1I1iI,iIi1I='239',liIIl=[iIi1I,l1lliI][Ill111(0x2df,'amsE')]('.'),IlI1lI=[IIIlII,iIi1I,Date['now']()['toString']()]['join']('.'),liIIi=(llIlI1[Ill111(0x1c4,'AN9Z')](Math[Ill111(0x2cc,'Y&tF')](0x5*Math[Ill111(0x2cf,'KVZ3')]()),0x2)+0x1)['toString'](),IilllI=llIlI1[Ill111(0x27b,'SIuD')](common[Ill111(0x1f1,'XK6L')](0x20,Ill111(0x2bb,'LfJK')),llIlI1[Ill111(0x358,'Eq6F')]);return{'jda':iiIiI1,'jdb':ili1Il,'jdc':ili1Ii,'jdv':Iilll1,'shshshfpa':ll11I,'mba_sid':liIIl,'mba_muid':IlI1lI,'pre_seq':liIIi,'pre_session':IilllI};}}function i1llil(iI1lIi,l1lllI=II1l(0x228,'NiUQ')){const I1iI11=II1l,llliIi={'GfxpJ':llIlI1[I1iI11(0x310,'U9[u')],'hxaFW':'链接后面的字符必须为7位字符'};if('DESIK'===I1iI11(0x1b8,'y5qi')){let i1lIli='';for(let i1lIll of iI1lIi){if(i1lIll=='x')i1lIli+=l1lllI['charAt'](Math[I1iI11(0x1cb,'NiUQ')](llIlI1['MBBpd'](Math[I1iI11(0x305,'l)Bx')](),l1lllI['length'])));else llIlI1[I1iI11(0x31d,'fQ[C')](i1lIll,'X')?llIlI1[I1iI11(0x2a7,'0bVL')]('qzaDR',llIlI1[I1iI11(0x1c3,'Exq2')])?(illIiI['log'](''+lI1lli+Ill1l[I1iI11(0x222,'6hGS')]),llI1Il['msg']?.['includes'](llliIi[I1iI11(0x1d3,'SIuD')])&&(i11iil=!![])):i1lIli+=l1lllI[I1iI11(0x230,'!^lb')](Math['floor'](Math[I1iI11(0x1cd,'d*Jn')]()*l1lllI['length']))['toUpperCase']():i1lIli+=i1lIll;}return i1lIli;}else{Iii111[I1iI11(0x2e7,'z#J3')](llliIi['hxaFW']);return;}}async function i1llii(llii1l,liIlil){const II11=II1l,llii1i={'ICUjB':function(ll11il,iI1lIl){return ll11il(iI1lIl);},'nsHKD':llIlI1[II11(0x2f0,'U9[u')],'oDdof':function(iiIiII,Iili){return llIlI1['rRfYJ'](iiIiII,Iili);}};if(llIlI1[II11(0x2bc,'qx^#')]!==II11(0x384,'l)Bx'))try{switch(llii1l){case'getCoupons':if(liIlil[II11(0x325,'d*Jn')]==0x0){let iIi11=liIlil?.[II11(0x34a,'l)Bx')]?.['couponList']||[],Iil1=[];for(let llliI1 of iIi11){let liIII='';switch(llliI1[II11(0x2a6,'Eq6F')]){case 0x1:case 0x13:{if(llIlI1[II11(0x29c,'XK6L')]!=='GOmIX'){liIII=prize_map[llliI1[II11(0x346,'(t^a')]]+(llliI1[II11(0x37d,'snh#')]+'元');break;}else{if(i11I1i[II11(0x3a0,'SIuD')](IillIl[II11(0x37c,'SIuD')]('=')[0x1])==-0x1)llliil+=liIl1['replace'](/ /g,'')+';\x20';}}case 0x3:case 0x11:{liIII=prize_map[llliI1[II11(0x340,'U9[u')]]+llliI1[II11(0x1ec,'d*Jn')];let Iillli=llIlI1[II11(0x215,'(t^a')](llliI1[II11(0x366,'0k3k')],0x0)?'满'+llliI1['quota']:II11(0x2c7,'TU74');liIII+='('+Iillli+'减'+llliI1[II11(0x22c,'amsE')]+')';break;}case 0x6:{if('soNkY'===II11(0x219,'z#J3'))II11II=Ii1iI1;else{liIII=prize_map[llliI1[II11(0x30f,'A9F8')]]+llliI1[II11(0x319,'5fur')];let ll111=llIlI1[II11(0x2e2,'uu^6')](llliI1['quota'],0x0)?'满'+llliI1['quota']:llIlI1['nEjEb'];liIII+='('+ll111+'打'+llliI1[II11(0x21a,'vsKe')]+'折)';break;}}default:{liIII=prize_map[llliI1[II11(0x329,'KT]k')]||llIlI1['XzrNq']]||'[未知类型'+llliI1[II11(0x345,'pNDQ')]+']',console['log'](''+i1lliI+JSON[II11(0x2c4,'1XEe')](llliI1));break;}}Iil1['push'](liIII);}console['log'](''+i1lliI+Iil1['join'](',\x20'));let ll11lI=Iil1[II11(0x2d1,'6hGS')](llliII=>{const l1ilII=II11;if(llliII[l1ilII(0x236,'s%v7')](l1ilII(0x2f3,'uu^6'))||llliII[l1ilII(0x34d,'zzCz')](l1ilII(0x1b1,'YA(2'))||llliII[l1ilII(0x355,'d*Jn')]('[立减卷]')){if('vGReK'!==llii1i['nsHKD']){const IlI1l1=llii1i[l1ilII(0x1db,'z@Ar')](lI1Iil,lilIiI);IlI1l1>=0x0&&(IiilIi['waitTime']=IlI1l1);}else return'';}else{if(llii1i[l1ilII(0x1f0,'Exq2')](l1ilII(0x396,'l)Bx'),l1ilII(0x2b7,'TU74')))lIli1I[l1ilII(0x226,'@iLW')](II1il),lllI11&&(I1lIli[l1ilII(0x2aa,'SIuD')]=!![]);else return llliII;}})[II11(0x28a,'CTC4')](Boolean);liI1l1[II11(0x269,'Lg@7')](ll11lI[II11(0x2b4,'AN9Z')](',\x20'));}else{if(llIlI1[II11(0x2c5,'CTC4')](llIlI1['CeXQl'],llIlI1[II11(0x256,'0k3k')])){Iil1I1[II11(0x37e,'oq!P')](llIlI1[II11(0x260,'CTC4')]);return;}else console[II11(0x311,'0bVL')](''+i1lliI+liIlil[II11(0x22e,'(t^a')]+'['+liIlil['code']+']'),liIlil[II11(0x2da,'s%v7')]?.[II11(0x2a1,'NiUQ')](llIlI1[II11(0x2e3,'zzCz')])&&(IiillI=!![]);}break;case'shareUnionCoupon':if(liIlil[II11(0x33e,'U9[u')]==0x0){if(llIlI1['sVQls']!==llIlI1[II11(0x1eb,'sKuT')]){let iiIiIi=liIlil[II11(0x214,'A9F8')]['shareUrl']['match'](/\?s=([^&]+)/)&&liIlil[II11(0x253,'Kidk')][II11(0x1be,'XK6L')][II11(0x22f,'FfdA')](/\?s=([^&]+)/)[0x1]||'';console[II11(0x2e7,'z#J3')](i1lliI+'分享码:\x20'+iiIiIi);}else Iliili='';}else console[II11(0x2d6,'KT]k')](''+i1lliI+liIlil[II11(0x1d7,'YA(2')]),liIlil[II11(0x1d7,'YA(2')]?.[II11(0x34d,'zzCz')](II11(0x2ce,'FfdA'))&&(llIlI1[II11(0x208,'YA(2')](llIlI1['pJgAZ'],II11(0x2a4,'5fur'))?IiillI=!![]:I11iII='');break;}}catch(liIlli){llIlI1[II11(0x27c,'5fur')](llIlI1[II11(0x34b,'qx^#')],llIlI1[II11(0x34f,'KT]k')])?console['log'](II11(0x294,'Eq6F')+llii1l+'\x20请求响应\x20'+(liIlli[II11(0x32a,'qx^#')]||liIlli)):lIli11={...lllI1I,...lillI1};}else{let lllI1=llIlI1[II11(0x365,'0k3k')],III11I='1',Ilii1=II1ll1(llIlI1[II11(0x25b,'qprh')](IlI1Ii['now'](),0x3e8))[II11(0x272,'Kidk')](),ll11i1=llIlI1[II11(0x375,'SIuD')](Ilii1,i11I1I(llIlI1[II11(0x22b,'0bVL')](0x7fffffff,l1il1i[II11(0x305,'l)Bx')]()))[II11(0x220,'1XEe')]()),ili1I1=[lllI1,ll11i1,Ilii1,Ilii1,Ilii1,III11I]['join']('.'),Iill=[lllI1,III11I,[ll11i1,III11I][II11(0x218,'@iLW')]('|'),Ilii1]['join']('.'),ili1II=lllI1,liIllI=[lllI1,llIlI1[II11(0x249,'snh#')],'-',llIlI1[II11(0x20a,'Lg@7')],'-',ll1[II11(0x21f,'@iLW')]()[II11(0x2ba,'z@Ar')]()][II11(0x2fd,'!^lb')]('|');liIllI=llIlI1['UbQBv'](iI1llI,liIllI);let ll11i=llIlI1[II11(0x2b0,'vsKe')](llIlI1['ZpUnd'](llliii(II11(0x324,'P1Bh')),'-'),Ilii1),iI1lI1=II11(0x1e1,'pNDQ'),I1I1li=[iI1lI1,III11I][II11(0x261,'XK6L')]('.'),l1i11=[ll11i1,iI1lI1,IllI11[II11(0x295,'FfdA')]()[II11(0x243,'@iLW')]()][II11(0x218,'@iLW')]('.'),IlI1li=(llIlI1[II11(0x235,'oq!P')](l1llIi[II11(0x211,'vsKe')](0x5*II1llI[II11(0x32f,'qprh')]()),0x2)+0x1)['toString'](),IlI1ll=llIlI1[II11(0x274,'Kidk')](i11I11[II11(0x1f5,'Xr0z')](0x20,II11(0x1e8,'U9[u')),llIlI1[II11(0x24a,'FfdA')]);return{'jda':ili1I1,'jdb':Iill,'jdc':ili1II,'jdv':liIllI,'shshshfpa':ll11i,'mba_sid':I1I1li,'mba_muid':l1i11,'pre_seq':IlI1li,'pre_session':IlI1ll};}}async function l1i1I1(ll11l){const ii1II1=II1l;if($['runEnd'])return;let III111='',liIll1=null,l1llli=null,iI1lII='POST',ll11iI={},l1i1I={};switch(ll11l){case ii1II1(0x1ff,'s%v7'):l1i1I={'appId':ii1II1(0x371,'0k3k'),'functionId':ii1II1(0x200,'Xr0z'),'appid':llIlI1['WamIm'],'clientVersion':common[ii1II1(0x246,'Lg@7')](),'client':llIlI1[ii1II1(0x39e,'9cFl')],'body':{'platform':0x4,'unionActId':0x79c9,'actId':actId,'d':ili11I,'unionShareId':li11l,'type':0x1,'qdPageId':'MO-J2011-1','mdClickId':ii1II1(0x30a,'@iLW'),'actType':0x1},'version':ii1II1(0x284,'SIuD'),'ua':lliiIi,'t':!![]},ll11iI=await H5st[ii1II1(0x2db,'Xr0z')](l1i1I),III111=ii1II1(0x279,'(t^a'),liIll1=ll11iI[ii1II1(0x308,'XK6L')];break;case llIlI1['QsgqQ']:l1i1I={'appId':'c10dc','functionId':ii1II1(0x36d,'0k3k'),'appid':ii1II1(0x1fd,'0k3k'),'clientVersion':common[ii1II1(0x257,'CTC4')](),'client':'apple','body':{'platform':0x4,'unionActId':0x79c9,'actId':actId,'d':ili11I,'unionShareId':'','supportPic':0x2},'version':ii1II1(0x1e7,'9cFl'),'ua':lliiIi,'t':!![]},ll11iI=await H5st[ii1II1(0x1ee,'A9F8')](l1i1I),III111=llIlI1[ii1II1(0x1ce,'5ja2')],liIll1=ll11iI[ii1II1(0x27a,'Xr0z')];break;default:console[ii1II1(0x37e,'oq!P')](ii1II1(0x237,'pNDQ')+ll11l);return;}const l1llll={'x-api-eid-token':li11i,'loginType':0x2,'_':new Date()[ii1II1(0x2b9,'5ja2')]()+llIlI1['MBBpd'](new Date()[ii1II1(0x31e,'z#J3')]()*0x3c,0x3e8)+llIlI1[ii1II1(0x399,'!^lb')](llIlI1[ii1II1(0x1e9,'U9[u')](0x8*0x3c,0x3c),0x3e8)};liIll1&&(llIlI1['GKKDV'](llIlI1[ii1II1(0x34c,'oq!P')],llIlI1['cDIKx'])?liIll1={...liIll1,...l1llll}:lliiiI=lilil[ll1ll[ii1II1(0x314,'l)Bx')](Illl11['random']()*ii1lI['length'])]);l1llli&&(l1llli={...l1llli,...l1llll});const I1I1ll={'url':III111,'method':iI1lII,'headers':{'accept':'*/*','Accept-Language':llIlI1[ii1II1(0x2a0,'fQ[C')],'Content-Type':llIlI1[ii1II1(0x1ef,'oq!P')],'Cookie':llIlI1[ii1II1(0x29e,'uu^6')](lliiIl,'\x20')+iI1Ii1,'X-Requested-With':ii1II1(0x31f,'s%v7'),'Referer':Referer,'Origin':ii1II1(0x364,'Exq2'),'x-rp-client':ii1II1(0x354,'z#J3'),'User-Agent':lliiIi},'params':l1llli,'data':liIll1,'timeout':0x7530};iI1lII===llIlI1[ii1II1(0x312,'pNDQ')]&&(delete I1I1ll[ii1II1(0x225,'pNDQ')],delete I1I1ll[ii1II1(0x2fb,'@iLW')][llIlI1['MFvGt']]);const lil1i=0x1;let liiiil=0x0,IIIIli=null,lllIi=![];while(liiiil<lil1i){const lllIl=await common['request'](I1I1ll);if(!lllIl['success']){IIIIli=ii1II1(0x20e,'XK6L')+ll11l+ii1II1(0x255,'KVZ3')+lllIl[ii1II1(0x1e5,'sKuT')],liiiil++;continue;}if(!lllIl[ii1II1(0x1b4,'AN9Z')]){IIIIli=ii1II1(0x36c,'qx^#')+ll11l+'\x20请求失败\x20➜\x20无响应数据',liiiil++;continue;}i1llii(ll11l,lllIl[ii1II1(0x242,'KT]k')]),lllIi=![];break;}llIlI1[ii1II1(0x373,'Rt]t')](liiiil,lil1i)&&(console[ii1II1(0x2b1,'Kidk')](IIIIli),lllIi&&($[ii1II1(0x210,'AN9Z')]=!![]));}}async function getAuthorCodeList(Iliii){const iliIll=IlilI,illlii=await common[iliIll(0x2a8,'uu^6')]({'url':Iliii,'method':'GET','headers':{'User-Agent':iliIll(0x213,'TU74')},'proxy':null,'debug':![],'timeout':0x7530}),I1lIIi=illlii[iliIll(0x390,'Eq6F')];return I1lIIi;}function random(l1i1i,I1iI1i){const llliIl=IlilI,l1i1l={'TjYgB':function(I1iI1l,illlil){return I1iI1l-illlil;}};return Math['floor'](Math[llliIl(0x309,'LfJK')]()*l1i1l[llliIl(0x2a9,'Eq6F')](I1iI1i,l1i1i))+l1i1i;}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
