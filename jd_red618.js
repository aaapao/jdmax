/*
活动名称：红包618
环境变量：jd_red618_url // 活动链接
        jd_red618_ids // 分享码，多个用英文逗号，@，换行分割（一般是链接后面的s=xxx参数，5个字符）
        jd_red618_threads // 控制并发线程数（正整数），默认1，最大5，尽量使用默认值，否则请开启代理运行
        jd_red618_interval // 自定义运行间隔时长（整数，单位毫秒），默认2000
        jd_red618_notify // 是否推送通知（true/false），默认不推送
        jd_red618_pinFilter // 账号pin过滤，多个用@进行分割
        jd_red618_maxdraw // 开红包次数（正整数），默认3

高并发脚本，谨慎使用并发
活动限制IP严重，建议使用代理

cron:59 59 11,23 * * *

*/

const $ = new Env('红包618')
var iｉl='jsjiami.com.v7';const ii1IIl=iii1II;(function(ii1II1,iliIll,llliIl,iliIli,illliI,ii1III,i11iIl){return ii1II1=ii1II1>>0x1,ii1III='hs',i11iIl='hs',function(ll11ll,l11iIl,i11iIi,IIIIll,liiiii){const IIIIi1=iii1II;IIIIll='tfi',ii1III=IIIIll+ii1III,liiiii='up',i11iIl+=liiiii,ii1III=i11iIi(ii1III),i11iIl=i11iIi(i11iIl),i11iIi=0x0;const II1I=ll11ll();while(!![]&&--iliIli+l11iIl){try{IIIIll=-parseInt(IIIIi1(0x37a,'#(su'))/0x1+parseInt(IIIIi1(0x2b6,'K42S'))/0x2+parseInt(IIIIi1(0x2ae,'N^7l'))/0x3*(parseInt(IIIIi1(0x1f0,'G^mM'))/0x4)+-parseInt(IIIIi1(0x351,'3MUf'))/0x5+parseInt(IIIIi1(0x25c,'NY1g'))/0x6*(-parseInt(IIIIi1(0x242,'QKci'))/0x7)+parseInt(IIIIi1(0x2eb,'*!Yo'))/0x8+parseInt(IIIIi1(0x2da,'u2w3'))/0x9*(-parseInt(IIIIi1(0x3b0,'J&0b'))/0xa);}catch(lI1111){IIIIll=i11iIi;}finally{liiiii=II1I[ii1III]();if(ii1II1<=iliIli)i11iIi?illliI?IIIIll=liiiii:illliI=liiiii:i11iIi=liiiii;else{if(i11iIi==illliI['replace'](/[QMeVJwgSCDrfTIFWbtU=]/g,'')){if(IIIIll===l11iIl){II1I['un'+ii1III](liiiii);break;}II1I[i11iIl](liiiii);}}}}}(llliIl,iliIll,function(Ilil1,IliII1,l1iIi1,i1I1I,llIil,llIii,IIiiI1){return IliII1='\x73\x70\x6c\x69\x74',Ilil1=arguments[0x0],Ilil1=Ilil1[IliII1](''),l1iIi1=`\x72\x65\x76\x65\x72\x73\x65`,Ilil1=Ilil1[l1iIi1]('\x76'),i1I1I=`\x6a\x6f\x69\x6e`,(0x16e3e0,Ilil1[i1I1I](''));});}(0x18e,0x95150,Iii11l,0xc9),Iii11l)&&(iｉl=ii1IIl(0x27e,'EQdP'));const jdCookie=require(ii1IIl(0x27f,'Rj7F')),common=require('./utils/Rebels_jdCommon'),notify=require(ii1IIl(0x2e9,']Jqu')),{H5st,jsTk}=require(ii1IIl(0x2cb,'^%fh'));let red618_url=process['env']['jd_red618_url']||'',redshareId=(process[ii1IIl(0x3ad,'3MUf')][ii1IIl(0x21f,'&dyI')]||'')[ii1IIl(0x255,'DIDf')](/[,@\n]+/g)[ii1IIl(0x345,'4owp')](li111=>li111['trim']())['filter'](Boolean),maxdraw=process[ii1IIl(0x2d9,'uAOx')]['jd_red618_maxdraw']||'3',taskThreads=process[ii1IIl(0x2fd,'uTdD')][ii1IIl(0x259,'7Xr%')]||'1';const runInterval=process[ii1IIl(0x1e0,'rCy9')]['jd_red618_interval']||'2000',isNotify=(process[ii1IIl(0x201,'E!m(')]['jd_red618_notify']||process['env'][ii1IIl(0x2bd,'6s4f')])===ii1IIl(0x301,'uAOx'),pinFilter=(process[ii1IIl(0x2df,'J&0b')]['jd_red618_pinFilter']||'')[ii1IIl(0x217,'uTdD')]('@'),endTime=0x19036605000,maxThreads=0x5;let actId,Referer,cookiesArr=Object[ii1IIl(0x30a,'@2r6')](jdCookie)['map'](liI1lI=>jdCookie[liI1lI])[ii1IIl(0x3b1,'*!Yo')](lIIiI1=>lIIiI1);function iii1II(_0x591b14,_0x3fa960){const _0x555d55=Iii11l();return iii1II=function(_0x345a99,_0x9332ef){_0x345a99=_0x345a99-0x1da;let _0x13acd2=_0x555d55[_0x345a99];if(iii1II['RBfURk']===undefined){var _0x300bb5=function(_0x3bbebc){const _0x419a22='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2da36f='',_0x5c75b9='';for(let _0xecfa77=0x0,_0x39ddb0,_0x131052,_0x1cae60=0x0;_0x131052=_0x3bbebc['charAt'](_0x1cae60++);~_0x131052&&(_0x39ddb0=_0xecfa77%0x4?_0x39ddb0*0x40+_0x131052:_0x131052,_0xecfa77++%0x4)?_0x2da36f+=String['fromCharCode'](0xff&_0x39ddb0>>(-0x2*_0xecfa77&0x6)):0x0){_0x131052=_0x419a22['indexOf'](_0x131052);}for(let _0x129b41=0x0,_0xaedd1a=_0x2da36f['length'];_0x129b41<_0xaedd1a;_0x129b41++){_0x5c75b9+='%'+('00'+_0x2da36f['charCodeAt'](_0x129b41)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5c75b9);};const _0x4db3b4=function(_0x355384,_0x1dc615){let _0x23c886=[],_0x4f69fd=0x0,_0x2625e9,_0x22de15='';_0x355384=_0x300bb5(_0x355384);let _0x4e6f81;for(_0x4e6f81=0x0;_0x4e6f81<0x100;_0x4e6f81++){_0x23c886[_0x4e6f81]=_0x4e6f81;}for(_0x4e6f81=0x0;_0x4e6f81<0x100;_0x4e6f81++){_0x4f69fd=(_0x4f69fd+_0x23c886[_0x4e6f81]+_0x1dc615['charCodeAt'](_0x4e6f81%_0x1dc615['length']))%0x100,_0x2625e9=_0x23c886[_0x4e6f81],_0x23c886[_0x4e6f81]=_0x23c886[_0x4f69fd],_0x23c886[_0x4f69fd]=_0x2625e9;}_0x4e6f81=0x0,_0x4f69fd=0x0;for(let _0x1b21ab=0x0;_0x1b21ab<_0x355384['length'];_0x1b21ab++){_0x4e6f81=(_0x4e6f81+0x1)%0x100,_0x4f69fd=(_0x4f69fd+_0x23c886[_0x4e6f81])%0x100,_0x2625e9=_0x23c886[_0x4e6f81],_0x23c886[_0x4e6f81]=_0x23c886[_0x4f69fd],_0x23c886[_0x4f69fd]=_0x2625e9,_0x22de15+=String['fromCharCode'](_0x355384['charCodeAt'](_0x1b21ab)^_0x23c886[(_0x23c886[_0x4e6f81]+_0x23c886[_0x4f69fd])%0x100]);}return _0x22de15;};iii1II['IIryCN']=_0x4db3b4,_0x591b14=arguments,iii1II['RBfURk']=!![];}const _0x20860d=_0x555d55[0x0],_0x1a3ca8=_0x345a99+_0x20860d,_0x442e60=_0x591b14[_0x1a3ca8];return!_0x442e60?(iii1II['dvsuDP']===undefined&&(iii1II['dvsuDP']=!![]),_0x13acd2=iii1II['IIryCN'](_0x13acd2,_0x9332ef),_0x591b14[_0x1a3ca8]=_0x13acd2):_0x13acd2=_0x442e60,_0x13acd2;},iii1II(_0x591b14,_0x3fa960);}!cookiesArr[0x0]&&($[ii1IIl(0x2c7,'LCsP')]($[ii1IIl(0x36e,'QKci')],ii1IIl(0x39e,'XkHj')),process['exit'](0x1));function Iii11l(){const Iii1I1=(function(){return[...[iｉl,'SMjMQsDFjbFViJDfaegtmUiJ.eCcomw.CvIr7IWT==','W49Jd8oDccGYW5yiFqDEW6DuW7jzWReXWPeU','WRWqoW','6yga6k2f6zg65O+fW6xcHW','vxHVW4tcHu3dL0BcImk4g8k8WO/cLq/dUCoGdSokvZy','WO0LWQhcVvVdOdr6','W5ddHfX+hdDf','W4RcRw5cW5K','lWVdVabSpSkeW5FdHGBcTwNcLSoV','z8kCeSku','WQz+hCkyWP8','WRpdMSoLeSk6W7lcGgy','6Ao65yYd5lIq6zIE','z8kwmSkuDvSiuq','lmkFAZJcIa','u8kdWPhcJKT/WRa1qSkB','W4NdK0zG','W711p8oFnW','W7pdMxS','W53WQAgVW5lOVzdOO4BNUP7MNBRcSa','WReEgshdLITuja','f3P4','WOZcMrG9sMzpWO9Wv8kGW6K','hgFdQ8kIrq','h8k9EZZcVSoiECkLg0a','nSotgqJcSmkWy8o/WQ8','AaHpW6i','wWhcJY47','tGD7WOf6','W7rCiCoKcq','W54Qe8oo','WPugv8k9lG','WQHVW75cWRW','W7LrW5nVW6W','ofuTW749','WPiWWRZcUtxcPNz8mCk0WQxdGSotW6lcVCoSiSoOW6POW7VcPSoxm8knW4TOjCkTEqbgWOdcUa','dL/dLSklsXC','ow8uW7yZ','W5TPW4C','WPxdSCo8WPemW7xcK1S','v+AiUUAkO+wkU0S','6zcy5O2w5zo/6z6055Mk5A+g56+y5B2C6Aks5lMyWPxKVjdLROVNRzO','kCkJCWlcMq','cmk6stRcJ8ooC8kN','W5v4obFdMSocW4RcPJyOW4b5nSo+W7NcKa','W59ep8ophq','yCk0ha','nSotgxpdV8oeySowWRbkWOTK','W4RcNvpcSCku','WQeAW4lcL8oZ','WRZcGmkZwa','rbxcRr0NW7JdMG','W4FdHmkZWQWe','oxNdRNRcNa','W6DbavSSWQxdNJvoW6BdHKuDWRVdVmoX','xWXpWQ5vqCoLW5eOW6K','W5WSW73cUNVcTa','W6HvcYBdHW','xbZcStad','W6VcQhhdRmk0W7mdW7isqq','wKWaWQZcJvXeWRy','WRXusZe5','W5pdOSooW4u','W5tdJ0XHcdrfWQu','WO3cIfW','umkpWPFcQeD+','W5ddHCkzWPdcPCoYWR3dNW','CxpcRc7dNq','iKzoW7D/qSo5WPutW6NdPd3dItFdQSko','eHZcOh8','W63dMwKkyG','W4ZdM8k7','WQpdMSoLeSkEW5m','nmkZtXNcIW','WQX9fq','k0SKW5iJ','W4LYWPRdPu4','W75jn0OS','eCoyWOuYWQugW70Khe8','WRWxtW','WPlcNmkIWQlcVmo4WPddVG','W4rLWRldH2y','W5jOW5y','WQ7cGY5xnmoKFxu9WPKaW7e','rZtcJbG4','W4RdGez5','w8kYf8ktzG','cxrXo8o/WPC','cf7dJG','WRLEW7LIWQ7cTJ5gWPJdKCk8jv4GdfJcP2NcHa','W4Top0OZ','W7VcHMBcKSkq','EazOW7DKr8oKW50','wdtcVqjKrG','W45KlrxdJmkTWOVdOdG2W6O4lSkGW7ZcMSkNmdmlcmo+nr8','EmkSfmkI','iqRcNf8r','WPpcM8oUW7DemSksW7ddU8kYhmkkW7y','WOK4dSozeN5UW5yQAGOvW6yjW4DoW7O8WPOjv2fQzKrzWRq','WOinpSoHW50','W77dS3X/WPOwW6jxW7iZjrBcKW','ESorW73dGwK','WPf+tbeEvG','W41Zdq','sCocWPqRWP8','qH/cIrGYW67dNh/cS8k8WQ0','vrJcVrOdW78','W5BdUmouW4JcTd3dLSoCW6Sq','W7xdHuGlBCk0zq','wWpcLtXZ','bEITUoAYPowrQow4Vgu','cHBcRsDwkxbbb0O','WO3cMK/cL8kk','W4zeFrWoxCkn','WRuphdZdTG','l0uR','WPuYWQhcKhW','wd7cTa','WPH1va','FwlcQchdKa','WQpcISk2uSk+','t8oRWOu','W4n0W5vg','W4v/pqa','W75vmKa9','W6/dHhK7DCk0Eg4NWRaz','q8khWOZcUxbJWQ0/','WQP0W5DOWOO','hGFdVYDI','FmkGf8kV','muSIW7yKWPC','WRvEW7rD','WQ8DWRNcI18','rcjnW7b3','WPuXWRZcJ2pdQd4','W4tcOSoGWPOcW6xcO3ZcJmkW','o8kpCdJcQq','W7Lkdv07WQJcHMm','WQyqtCkAiSkC','W7H6nKyNWQBcIMuz','5PE/6zAo5QEt','WRq9WOZcR2q','xLHet8oM','jeKOW5eKW6zsWRi','WRruW6ra','tfysWQ0dWQBdVIi','6ygX6k6p56gwWRNcIa','WPqRWR8','BmoxW7VdJgi/qYy','WOy0WPm','qLCmWRtcMq','W75qmmo6eq','W4hcONPVW7NcLq','6kY35Aoz5ysD5QYd56kX55IJ6zcm5O6V','pCkWvWdcKW','D3FcJc7dHG','lfWLW4S4','s8onWQtdP8op','W6NcNuFcJSk7'],...(function(){return[...['5Rke5PYX6i+g5yYx5yMg6lsX6l+36zkV5OYL','4PUld+IfRUwUS+s6J+I+PUIHL+MvTEMyMoAwTEMwLoIUNUE9G+MuTUIVOW','E3FcTH/dLmkvBIZdVrS+W5ZdMCkIaW','WOioWOBcPey','WOlcKSkfWRC','E8kCamkeyKav','C8oAWO4aWP0','BWHpW6b+','ESkxaSkmCLydrq','W7ZcHYWazq','W4xcKmoDWRqW','5Rsr5yID5Bsv5lUDW5O','W7aFhCoCWQu','WR4RWRJcH2i','sHbHWQ5g','WOZcNLxcK8kwhG','WRq0W6JcLW','FumVWQ3cQq','W4/dQ8kLWQq9','BSkpsG','W7xdH3PAcW','WQNdNmoNdmkQW4pcL3K','leuOW5K0W6qhW7ddS2qUt2/cPCkYWRy','ymk6aW','ySk6e8ktWP4UFW','WPdcMCkBWPdcTW','W73LRO7NIla4','WOOLWRRcQgldUH1+kSkX','W4vGW5DOW4G','zGvwW5Tx','CEs+REAaH+wjQ8kN','smoUWPy','W5BcOSo3WO4S','WOimnSo3W4dcV3GMWRXdn8kyWQnJWQZdMbFdTY7cSKL1W5OwW5RcKY3dIsKicuHFW5SUW4RcJ8kYB8kYWQOsbelcPYiSW7D7FrVdHa9KhSksWPdcR8k9Cce7W5rOiItcNSokB1JcLmo4WRRcPCkoW7emW59+WQZdK8kTugS/WRS9kmoJWR4LWPDQW6jfo8klqSknp8o8d8ocWOJdOsVdTSowW7tcKSk1WOBcQLJdVCkBjxldM8k2D8ohWO7dRSkfo3qTW5xcOCkrgCk9WQLxW4HXWQhcNheCWRlcS8kuD3CYW4ZdLSkgW5ZdH8o2WO/cMaWcD17dP0hdLGJcGSoCW4W1BN/dJ8o/W5ZcKv5tpeFdLmkiW5NdNSoBq8oNaW1iW6itWRhcV8oTmSk4WP/dNqFdHSknr8oDBSoJWOiWW7BdLmkCkr1nyCoEzeFcQSoWWQ9LF8khW73cNw9MwXpdUmo9WOZcN0ZcR8oKkJJdKwaBzNJcO3ddSSkydCkNwgWdWRFcTxBdHSkqW6NdH0r4hmoPlWZcVCk4B8oHm8o6kCoGwSomW54YW77dPCkrFSkMdmo2WRFdUaZcTCobDNHTW7aby8kObmkDy2VcI8oNWO0Tw8kbiSkXW61bWRBcHvnQWO3dU8kxW4hcU2aozSkxrgxcSt1+DCoMWOnZW4tcHdC/orz6WOOqyZ0HWPikvfrTxSkAeehdMX4yW5BcKmkTpI47pKblEe5ut8kMhuTBWQtcM8kpF8kYW7voECkpiCopWOxdTdVcSr4pnHPqW6BcVCkkW79fWOJdLCkWWPNdKCk2CCkMW73dTrFdQCowkM/dG8o0W51ofeSDfSkriCo9W4r4W77dVv5SgsRcN2bkW4JdKuzNmMudW67dR8kzkWPUWPlcISkaW49aWORdOJiLWRGZCWZdMmo4WPbPW5umueewo8kRW4BdVu4duxNcVSkDAvrWWOL0W7BcMmofWO03nCoYWP3cMSoJWQStWOxcUYjc','mNPQomoz','WOmOWPC','oG/dPIDSpa','DqLHWOW','4P+2A+IfVEAEG+I8HoIGRUMdR+wlMEs5IEMuQ+ITLv0','WO0LWOFcUL0','cvhdJmkm','m8ovh3hdTmohvSoTWOHvWRT/','uIpcKbXF','ssyTA8kIW4moAMGeW7bZvW','lLKR','W53dUL0+uW','W7VcOMhcPa','WQa+W7xcK8oA','k04NW4K0W7a','WRuxgtpdTG','WQP9g8kz','W6LLWPhdRNZcUq','BgFcQYu','l8kWBMpcVSoiCSkRm1e','EqFcNXOZ','cSoMWOJdGConpq7dMSkdvqq','W7RcLh59W7a','W5bJW5rVW6BcGSkctqmfvSkEWOXwmCkdWR4tFW','W7tcOMBcOmkJW7udW7C','5l6a5Akq5yAI55MW6zcC5O+t5lMG772z','5yUy5lQq56kmfmoV','E3JcJIldHW','A8kWemkpW4iWBG','ySoAWQxdJwWOsd7cU8kQ','F8kwaSkbC1Sjwa','BxHCBmoC','ELNcLYRdMG','W5RNUPFMNPFVV4xKUitMRQJMLRdNGQBMNlVLK7FcVG','W6bwoq','mH/dHdzp','qdLIWOzdW5K','WPmQWQVcPxRdRtXS','WR4EmtK','4P6sg+AEP+IdK+AURoEIRowLN+EqS8om','W4pcT0T7W7/cLG','WRpdGSoOcCkR','zmorW68','W5xdKCkSWQy','wGxcJCoBf0lcPSoKWOBdNNxdLCoC','W49vW6rbW6e','t8o7kgddJmkjla','WQFcVmkyWPhcNq','WQOCiGFdRq','WRa+W7JcU8oUW6yKWOJdN8omWO0dWP1gW61p','WORcKb07swfVWR9jw8kwW7e','v+AFV+EEGEEYVowDVa','AWLBWPzqWO3cGcm','WPqHWQ3cRv3dRdrWkmk1WOpcG8koWRZdO8kWuSk/WQb1W7O','p8k6DdRcMmojACoTdK3cNSkK','W4vJW4qvWRBdJSk4sWuO','WOhdSc0','tevMW5RcSW','zmkBbCkWWOe','W5xdHe5Pgcjt','W5NcRh1L','bXfxW7hdGq5JWPBdT2nIW7G','WQpcKLRcQ8kZW75r','W5b2eSozl3TWWPW','CNFcVsNdP8kEzYZdPI0jW4hdN8kNdq4EW7VcJSkyqq','bvVdR8kOBq','tEIVH+AZUUwNNoI0H1dINiRcIUAuT+wrPUw6OoAxKoApSW','x00e','WRddH8o3ca','WQxcPmkyWRNcQW','d2XVoG','4PIdW6FOHB7LRy3KUk7OVyBOOPZPL6NPMB/MLkpPLjFORPRNV5JPL7/ORiq','44cK6lw35yYK','W7lcOMZcRW','W5rNf8oedW','WR4qkW','W7zZWPpdK3O','i00UW7m+','W7dcVuJcGSkD','wXlcPHju','WRGEWR7cN00','foIUPUAYKEwLLoI0Tq7INlNcPq','j+s/JEAdUUwjTSkG','waT5W5r3','yqHpW6b+','mos8T+AbPowiKCkB','44o25OYJ56El44oh6kY55yEz6i2j5y2pWQOnW402WRuz','WRpdH8oNa8k6W5tcGq','rqdcSae2','WRtdMCogmmk6','vCoGWPy','zhbeBW','WPSMWQVcRwRdR2KUBmoJW7tdMCoxW6dcSSoS','ASo2WOxdISo6','eSkWFYRcR8ocCmkVlfhcRCkUj8kaW7dcGmoRWR7cPSoeW64','WPyRWQ8','WRtdM8oNnmkX','FSkGcSkcWPKN','WPZcTSkPWRlcTG','W5tdOSoeW43cVa','W63dK2Wiz8kYBG','hNTP','W6ZdNN0wy8keExe','oej2mmo1','xaddGCkJrWNdKSo9','WQ/cRYu9W4Pw','W4JdHSk4WQyormob','g8kWDbZcNmojECkVn2FcMSkZiCkfW74','W7NdV2NdT8knW7CyW5C2DtGP','rGxcRWa','WQKrjHxcQq','WRVcOZKLW45hWRC','ESoBW7NdMMG5wq','wLPYx8oKwItcS1HiW5ddTSkeWR0uFN7cKJBdRLm','sgL4W4NcUu/dK0/cHW','hr3cVW','uHhcQaK','W4HVWOxdOgtcVCksWQ3dNSkZh8oJjtrhmq5tWRvIxq9MW4BdR3FcL8oIW7RdKCo/h8khxIqTquJdJhrmlM8XWO1vsSkuuCkwnHhdOaTqirxcKSoPWRbRdGVdIIddJtFdNCkps8ojiSkVW58aW73dTmo+tt/dVc3cUCkkF8kEnSoOWPKAW5FdPCkWESkJcCo4sSoFE8k6amkAb3meW4CSW6rbDKhcVmkEWRrVW65GvhpdKmkPW50AW4P5jSkKW4KhWOrCiJldLhiRs8oeDSkzW4JdGSkTkXbpybxdPhBdS8oNirtcRG','WP0roSoQW5ZdKt5K','WPaEW5G','W73NURlLJzW4','rd7cOW','W4e3WQdcUMFdUJf5lSkXW70','ESkQyY/cJW','ASkagmkzkN8Rg8o1fSo+psvpW5bz','FGrRWOzhWOldNNxdMCoIA8kmCMpdPSk7'],...(function(){return['WQ13aCkeWOZcSwS','loIUNUAXUEwrJUw6GG4','W5TJW45eW7pcNG','d1j1wSoPtcdcUbm','WO5ZqWqpA8ocW5i','Fb98WO1MWRryWPJcJan1fW','W6dINO5s','W4ZcPf/cPSkT','W5CQe8omWRW','W5lcQutcO8k/','FSkJjCkRxG','A8kxjmkhqG','W7pdL8oXW7tcKG','W6vxea','iGhdOs0','WOZcL8kU','WOGHWQZdVZ7cSqzQlmk8','WP0xma','WO96tbifuW','W6THWPldRa','zc1QW4rh','EmolW7VdHW','W58Leq','lKS8','WR49dGtcRG','yxjDCmoS','iL84W7OKWOHBW5tcVbe','m2ldIghcSGjRW5pdQtlcNKvEwW','WQpcVxFcPmkiW68jW6Hg','WOBcQ17cTCkS','z8olW7ZdQweRsG','zNRdTs7dMW','v3jT','W7ddVLycsG','W4dcR8o1WQuMW6i','W43dJCkYWQqcyW','vuW5WPBcMG','W7ldTvqkta','WROmnJxcH8k4WQxcV3xdMmoTfumE','DNjWW4NcU0tdMWBdI8oZAmoZW4JcLZBdTmogdSolcw4pbCkXBSo/WRPvv0iBWQddHeCLwNtcQYbmW6rNECkeWO7dGbKhzCkEzSkMimk9W47dI8kAvCk3W7aeWQBdQ8kkxWarWO0NWO0qW7ueW7y3W4NdMs/cKSoDW4JdGv7cRwtcMWf+W5FdRComiCkCc3dcNftdKeZdVfhcHGxdJriJWQFdM8oFeHqNWQ3cKai7qxzDW6RcRJhcOx46WR4XWRmLhmogE3XwWQBdTmk2','W6HZWPG','W47cPCo1WOGkW6pcUxK','WP8YpWldIa','W7VdL2Gf','WO5RtH8E','W6WRW77cL8oFW7KOWPxdICoMWO0dW5q','rSkhWOVcQuTN','W45QW656W6S','6Ao95y+d5lIv6zIp','W57dJLP9eJ5SWR9oDW','qeOcWRlcNw1tWQK','WRPEDG','zSkXo8k1WPiNla1sWPOxW67cTG','FSk0cSkJWPGU','WO7cLSkqWRlcQ8oJWO0','W55OW4npW7lcKSkctq','DmkRxddcKq','qvHsW4tcRW','WQuqtmkRlq','ySk6eW','WPhcJLtcGmkd','bNiaW5eI','lWVdPHzc','WPLhb8kWWPG','WPKDnSoNW43dSdK','hxXN','WQ4lbcxdSxGwBSoVr0/dRCooWQFcSXCwWONdTYtcRddcNCkSWPXFoIGufSk2W7be','W5tdOCkTWQK0','fHZcVG','WRHSW4rnWPG','6lsv5y+v5PAd5PAi','j0S4W7m','quGUWPhcOG','W7FdKSkrWRi+','w8kWzbBcTW','WQyar8kQl8kD','WO7cNL7cKmkWeZCSW5lcVMJdJmkpW4rcmgRdG8k4tsa','fbBcP3ytEq','5l+b5Aod5ywf55Mh6zki5O6U5lQD776M','iuGSW7GJW7a','WR/cSdSrW4q','WRC+WOhcM2K','WOtcKKJcL8knaZq3','qGlcTqu','W7dcRhP/W7pcLHxdO340AZW','s10uWQuKWQFdTJ7dTLn5r2JdKW3cJCo3W7VcKv46','W6FdQ8kZWQC9','W6rmAbBcKmkxWO/dQ0i','W4tdTmoYW5NcNa','ku44W54+W7DzWRu','wtpcSJPJr8ob','aKhdP0xcSXj+W7i','W57dO8odW4ZcRIVdSmoa','W49YgSojhMbU','BmkbqcC','CWLV','WQH3e8ktWOJcPh0','xu0uWPtcKvve','W4JdHSkVWQyeFW','WQmYt8khcG','WPpcM8oL','WQyFvSk2gW','W5aLjCocWRm','W5hcOSoWW6fwWQ7cS3lcJ8kW','sSojW5ZdIfS','fCk7Bc/cKCooEq','W7zWWPpdOhW','WRqbWPRcINC','s8oGWPe','rmo/WPBdICobjKhdHSkEvWy6W7pcR0Dki089WPlcQHZcQmk6FMXqA8kbmSoEW4a7gNJdOmoHW6hcKSkAWQDayrJcN8oiWQe','ySoAW5FdNwGUg2pdQ8oapqP0udvkCq','xb/cTqy','W4lcSSoGWR8iW6tcK3lcJ8kW','Cb1/WQjZWRziW5JcMtT0','W5bJW5r3W67cM8kc','dNVdM8k+zq','meyLW7eU','svCw','W4b9lCoccq','WPani8oRW4FdSaL5W75i','6k2V5BoW5B+U5lYV5Q60776q5y6d5Bke6k6U6yEP5zcQ5A6T5zMf772d6BQz6k+457Qb57UJ6l+16kc7','WOJcSCkZWPtcQq','W5PNW5raW68','WQZcVIa9','BmkHsZdcPa','WOJcPt0RW40','WRPAW7Lp','WRj3fSobW5ZdRM3cJCoNWRG','W4vZW45MW6NcKG','W4n/W5bg','WRnIhSkEWPK','WO3cLvdcNmkx','WORcLSkFWRhcUSo5','zmkmqI3cTa','hLJdMCkFrYxdUmodWRJdHxFdJ8oOh8kXW64','6Agw5y6P5lMw6zIm','qmoAWQ4qWP0','8joQIum','WQrwpCkWWPC','W6nSWPddPNO','W5RdVSoh','WRldUSogdCkQ','AWXpW4b5w8o6W5uVW78','jumGW6yUWOG','WO4RWP3cUx/dRcTCp8kJWQu','WQRcRIG7W6XlWRz8W6iY','WOKjnCocW6i','uw5GW4NcTKxdKWFcNCkYnCo9WPBdIq','cXCBWQu1WQ3dTdRdQvm','44oT5O+l56sy44gN6k6D5yw26iYh5y2Oswy6WRddVg4','W43dH8k/WQicySoiW5i','6lwL5y+D5PAS5PEA','zCkfwqhcQCkhumoQWPvG','WQiAogRdL8oTWPpdPgtdMW','kuuLW7W','W73dMxmiy8kWzq','rSkPxsxcOW'];}())];}())];}());Iii11l=function(){return Iii1I1;};return Iii11l();};const prize_map={0x1:ii1IIl(0x1e5,'OnWN'),0x3:ii1IIl(0x39a,'n4$2'),0x6:'[打折券]',0x11:'[立减券]',0x12:ii1IIl(0x340,'OnWN'),0x13:'[超市卡]'};!(async()=>{const ii1IIi=ii1IIl;notify[ii1IIi(0x2ab,'J&0b')]({'title':$[ii1IIi(0x1fe,'DIDf')]}),await Main(),isNotify&&notify['getMessage']()&&await notify[ii1IIi(0x38c,'Sqgf')]();})()[ii1IIl(0x32d,'^%fh')](ll1I1=>$[ii1IIl(0x23a,'G^mM')](ll1I1))['finally'](()=>$[ii1IIl(0x2c5,'kgLd')]());async function Main(){const I1ll1l=ii1IIl,Ii1ili={'keTcs':I1ll1l(0x37e,'n4$2'),'nCygK':'tbPCT','wXlzd':I1ll1l(0x2a2,'^LAO'),'AeMNn':function(iI1Ii1,Ii1ill){return iI1Ii1(Ii1ill);},'PJqvu':function(llIlI1,iI1IiI){return llIlI1>iI1IiI;},'YGKWj':function(IIlI1,i1iIli){return IIlI1!==i1iIli;},'jgStP':I1ll1l(0x2fb,'[3sA'),'Fkacz':function(i1iIll,i1lliI){return i1iIll(i1lliI);},'YPITq':function(liI1l1,IllIlI){return liI1l1>=IllIlI;},'BZvVB':I1ll1l(0x327,'d[ZY'),'uecYK':I1ll1l(0x1e9,'hgwe'),'OycoR':function(IiillI,ili11I){return IiillI>ili11I;},'oCuwD':I1ll1l(0x2b0,'XkHj'),'dDOGz':'tOZFE','ZbDrL':function(li11l,lliiIl){return li11l!==lliiIl;},'DWNMC':I1ll1l(0x382,'&dyI'),'LrelF':'uIqjB','IWjvf':I1ll1l(0x2aa,'[3sA'),'luyHv':function(li11i,lliiIi,iiIi1I){return li11i(lliiIi,iiIi1I);},'vjjFy':'a2l6ZktNMQ==','RVjSZ':I1ll1l(0x28e,'vuBR'),'xnEgE':I1ll1l(0x325,'M8PE'),'cjGsj':'\x20➜\x20'};try{try{if(Ii1ili[I1ll1l(0x338,'!C%k')]===Ii1ili[I1ll1l(0x381,'EQdP')])Iil1l1['log']('❌\x20未能正确处理\x20'+i1i11I+I1ll1l(0x2f5,'4owp')+(il1iIl[I1ll1l(0x1eb,'7[k$')]||iii1ii));else{const ill1II=Ii1ili[I1ll1l(0x321,'n4$2')](parseInt,taskThreads);if(Ii1ili[I1ll1l(0x295,'n4$2')](ill1II,0x0)&&Ii1ili[I1ll1l(0x31e,']Jqu')](ill1II,0x1)){if(Ii1ili[I1ll1l(0x315,'*npq')]!==I1ll1l(0x323,'NY1g'))return IiiiI;else taskThreads=ill1II;}}}catch{taskThreads=0x1;}taskThreads=Math['min'](taskThreads,maxThreads),$['waitTime']=null;if(runInterval)try{const i1llii=Ii1ili[I1ll1l(0x2e1,'6s4f')](parseInt,runInterval);Ii1ili[I1ll1l(0x235,'K42S')](i1llii,0x0)&&($[I1ll1l(0x387,']Jqu')]=i1llii);}catch{'YoiSg'===I1ll1l(0x32c,'poIk')?console[I1ll1l(0x1fc,'Umpe')](Ii1ili[I1ll1l(0x398,'[3sA')]):IllIIi[I1ll1l(0x2fc,'vmt0')](I1ll1l(0x29a,'8)80')+IllIIl[I1ll1l(0x3ac,'u2w3')](/：/g,I1ll1l(0x1f1,'7[k$')));}$[I1ll1l(0x33e,'&dyI')]=Date[I1ll1l(0x31a,'[3sA')]();const IllIl1=$['time'](Ii1ili[I1ll1l(0x346,'N^7l')],endTime);if(endTime&&Ii1ili[I1ll1l(0x3a5,'4owp')]($[I1ll1l(0x24c,'H1Ko')],endTime)){console[I1ll1l(0x38b,'H1Ko')](I1ll1l(0x331,'poIk')+IllIl1+I1ll1l(0x369,'[3sA'));return;}const ll1Ii=I1ll1l(0x1fa,'XkHj')+common[I1ll1l(0x328,')#Qp')](0xd,'0123456789abcdefghijklmnopqrstuvwxyz');$['UA']=common[I1ll1l(0x229,'m@e^')](ll1Ii);if(/https:\/\/u\.jd\.com\/.+/[I1ll1l(0x290,'hgwe')](red618_url)){if(red618_url['split']('/')[I1ll1l(0x3a2,'4owp')]()){red618_url=red618_url[I1ll1l(0x303,'6s4f')]('/')[I1ll1l(0x1e6,'vmt0')]()[I1ll1l(0x26d,'7[k$')]('?')[I1ll1l(0x357,'EB&K')]();if(red618_url[I1ll1l(0x20e,'!C%k')]!==0x7){if(I1ll1l(0x287,'K42S')===I1ll1l(0x355,'8)80')){let llIIii=II1llI[I1ll1l(0x360,'M8PE')];i11I11=llIIii['match'](/\/active\/(\w+)\/index/)?.[0x1],l1llIl=llIIii;}else console[I1ll1l(0x29c,'3MUf')](Ii1ili[I1ll1l(0x397,'vmt0')]),console[I1ll1l(0x289,'QKci')](I1ll1l(0x239,'!C%k')+red618_url),console[I1ll1l(0x3a7,'[3sA')](I1ll1l(0x263,'M8PE')),red618_url='';}}else I1ll1l(0x306,'@2r6')===Ii1ili[I1ll1l(0x275,'7[k$')]?(console['log'](I1ll1l(0x320,'Sqgf')),console[I1ll1l(0x260,'Rj7F')](I1ll1l(0x361,'LCsP')+red618_url),console[I1ll1l(0x2d1,'7[k$')]('请尽快修正，可尝试重启容器，默认继续运行'),red618_url=''):lI1lil=!![];}else red618_url[I1ll1l(0x238,'rCy9')]===0x7?Ii1ili[I1ll1l(0x298,']Jqu')]('QPSxf',Ii1ili['DWNMC'])?red618_url=red618_url:llIliI[I1ll1l(0x262,'Umpe')]=I1l1I1(I1ll1l(0x3b4,'M8PE')):I1ll1l(0x22e,'!C%k')!==Ii1ili[I1ll1l(0x2d3,'DIDf')]?(delete i1l1Il[I1ll1l(0x2a1,'^%fh')],delete llIli[I1ll1l(0x32b,'hgwe')][Ii1ili[I1ll1l(0x322,')#Qp')]]):red618_url='';authorCodeList=await getAuthorCodeList(Ii1ili[I1ll1l(0x35e,'vuBR')]);authorCodeList?$[I1ll1l(0x2f2,'kgLd')]=authorCodeList[Ii1ili['luyHv'](random,0x0,authorCodeList[I1ll1l(0x2e4,'vmt0')])]:$[I1ll1l(0x25b,'N^7l')]=Ii1ili[I1ll1l(0x2d8,'DIDf')](atob,Ii1ili[I1ll1l(0x33f,'XkHj')]);$[I1ll1l(0x26a,'7[k$')]=red618_url?red618_url:$['authorCode'],$[I1ll1l(0x284,'QKci')]='https://u.jd.com/'+$[I1ll1l(0x252,'N^7l')];red618_url&&(I1ll1l(0x1db,'QKci')!==Ii1ili[I1ll1l(0x2bc,'d[ZY')]?liiI1l={...i1l1II,...i1ill}:(console['log'](I1ll1l(0x28a,'Sqgf')+$[I1ll1l(0x37f,'uAOx')]),console['log'](I1ll1l(0x319,'Umpe')+$['red618code'])));console['log'](''),$[I1ll1l(0x37d,'[3sA')]=[],await common['concTask'](taskThreads,cookiesArr,taskFnc),$['runEnd']=![];$['needRemoveCookieIndex'][I1ll1l(0x2ed,'uTdD')]>0x0&&(Ii1ili[I1ll1l(0x367,'*npq')](I1ll1l(0x314,'[3sA'),Ii1ili[I1ll1l(0x1f6,'hgwe')])?(cookiesArr=cookiesArr[I1ll1l(0x356,'G^mM')]((ili11l,Iiilll)=>!$['needRemoveCookieIndex'][I1ll1l(0x222,'uAOx')](Iiilll+0x1)),$[I1ll1l(0x240,'Rj7F')]=[]):l1llII='');const ll1Il=notify[I1ll1l(0x30e,'N^7l')]();ll1Il&&console[I1ll1l(0x3a7,'[3sA')]('\x0a📣\x20运行结果\x0a'+ll1Il[I1ll1l(0x1dc,'*!Yo')](/：/g,Ii1ili['cjGsj']));}catch(IIlIi){console[I1ll1l(0x2ad,'uAOx')]('❌\x20脚本运行遇到了错误\x0a'+IIlIi);}}async function taskFnc(ili11i,iiIi1l){const I1ll1i=ii1IIl,li11I={'AhztD':I1ll1i(0x38f,'N^7l'),'HKvsa':function(iI1IlI,l1i1Il){return iI1IlI!==l1i1Il;},'qWSOg':'gcLmK','zEXdx':function(ill1I1,l1i1II){return ill1I1+l1i1II;},'YyUNv':function(ili111,Ii1I11){return ili111!==Ii1I11;},'nBBBg':'pzLvG','TqlDP':function(IllIli,ii1Ii){return IllIli<<ii1Ii;},'zqLuL':I1ll1i(0x1f8,'v!#g'),'UviLd':function(ii1Il,l1iII){return ii1Il(l1iII);},'JTzsq':function(iI1Ill,lilI1){return iI1Ill*lilI1;},'tkBPe':I1ll1i(0x2c8,'E6CZ'),'Actbb':'none','mZDKY':function(IIIi1,i1llli){return IIIi1+i1llli;},'hDQGQ':'eEZEa','cucWO':I1ll1i(0x2a9,'G^mM'),'TiZgz':'GET','cKcSG':I1ll1i(0x2c2,'M8PE'),'AOiGS':I1ll1i(0x24b,'7[k$'),'GnmPf':function(i1llll,iI1Ili){return i1llll===iI1Ili;},'rjMQZ':I1ll1i(0x243,'kgLd'),'cwsxe':function(llIIiI,iI1111){return llIIiI==iI1111;},'vANes':function(IIIl1,ii1ii){return IIIl1(ii1ii);},'xJNmI':function(Iii1,I1I1lI){return Iii1+I1I1lI;},'cGKzT':I1ll1i(0x35b,'n4$2'),'EwMQk':function(ii1il,l1iIlI){return ii1il===l1iIlI;},'oHJfL':I1ll1i(0x337,'H1Ko'),'YUuGu':I1ll1i(0x2b7,'M8PE'),'GZjvT':function(iI111I,IIIlI1){return iI111I(IIIlI1);},'NERCx':function(i1lIiI,IiiIl){return i1lIiI(IiiIl);},'VzMqH':'xxxxxxxx-xxxx-xxxx-xxxxxxxxxxxx','wWlXF':I1ll1i(0x24f,'!C%k'),'OwCrq':function(ii1l1l,l1lli1){return ii1l1l+l1lli1;},'VxoFd':function(IiiIi,ii1l1i){return IiiIi-ii1l1i;},'njeNo':function(l1iIl1,ii1iI){return l1iIl1&ii1iI;},'SKZIr':function(IIIil,IIIii){return IIIil!==IIIii;},'hpMCJ':I1ll1i(0x3a8,'Sqgf'),'HfUWv':I1ll1i(0x27d,'Umpe'),'MzIRf':'AbCmj','fKOgo':I1ll1i(0x2af,'^%fh'),'fWIcW':function(iI111i,I1I1l1){return iI111i>I1I1l1;},'oRFYc':function(iI111l,i1lIii){return iI111l!==i1lIii;},'DZQTI':I1ll1i(0x296,'E6CZ'),'Viwda':I1ll1i(0x271,'J&0b'),'DopNm':I1ll1i(0x32f,'u2w3'),'UYqBP':'u_hongbao','MhFuV':'4.7','fnZVb':function(III11i,i1lIil){return III11i*i1lIil;},'mCHnJ':function(III11l,llIl1i){return III11l*llIl1i;},'gjVor':I1ll1i(0x353,'u2w3'),'YMOWJ':'*/*','ylNYl':I1ll1i(0x206,'d[ZY'),'rfwKO':I1ll1i(0x288,']Jqu'),'pqhcR':'h5_1.0.0','mWINM':I1ll1i(0x2ea,'Umpe'),'EXLCi':function(llIl1l,IiiII){return llIl1l<IiiII;},'CWioe':function(Iiil,IIIli,ii1i1){return Iiil(IIIli,ii1i1);},'OzauG':I1ll1i(0x370,'vuBR'),'rzuiW':function(Iiii,llIl11){return Iiii(llIl11);},'vTsls':'已设置跳过运行当前账号','jnBmg':I1ll1i(0x286,'u2w3'),'ZhmuS':I1ll1i(0x212,'EQdP'),'IougI':function(IIIll,I1I1il){return IIIll<I1I1il;},'TbBWa':I1ll1i(0x378,'EB&K'),'FCodK':function(l1llii){return l1llii();},'codmg':function(liII1,I1I1ii){return liII1(I1I1ii);},'fPeAN':I1ll1i(0x2a8,'uAOx'),'xSDbf':function(l1llil,IIIlIi){return l1llil(IIIlIi);},'qDPpz':I1ll1i(0x273,'poIk'),'frCyO':I1ll1i(0x365,'7Xr%'),'vvrXk':I1ll1i(0x376,'n4$2')};if($['runEnd'])return{'runEnd':!![]};const lliiII=decodeURIComponent(common[I1ll1i(0x28f,'m@e^')](ili11i,li11I['OzauG']));function iiIi1i(llIl1I,i1lIl1){const i11iII=I1ll1i;if(li11I[i11iII(0x30c,'^%fh')](i11iII(0x34d,'[3sA'),i11iII(0x2a3,'dCNB'))){if(llIl1I[i11iII(0x359,'DIDf')]<=0x4)return llIl1I;else{if(li11I[i11iII(0x2dd,'hgwe')](li11I[i11iII(0x29e,'J&0b')],'gcLmK'))try{const IIIlIl=lI1Iii(i1li);IIIlIl>=0x0&&(IliI11[i11iII(0x29b,'EB&K')]=IIIlIl);}catch{i1l1lI['log'](li11I['AhztD']);}else{const IIIlI=llIl1I[i11iII(0x25f,'NY1g')](0x0,0x2),IiiI=llIl1I[i11iII(0x2d4,'6s4f')](-0x2),iIi1i=Math[i11iII(0x2b5,'&dyI')](i1lIl1-IIIlI['length']-IiiI['length'],0x0),l1iIll='*'['repeat'](iIi1i);return li11I['zEXdx'](IIIlI,l1iIll)+IiiI;}}}else lilIl1[i11iII(0x277,'kgLd')](i1l1ii[i11iII(0x249,'K42S')],i11iII(0x280,'uTdD')),i1l1[i11iII(0x266,'*!Yo')](0x1);}const liI1ll=decodeURIComponent(lliiII),ll1II=li11I[I1ll1i(0x38d,'XkHj')](iiIi1i,liI1ll,0x6),IllIii=I1ll1i(0x390,'vmt0')+iiIi1l+'】'+ll1II+'：',liI1li=notify['create'](iiIi1l,lliiII);if(pinFilter[I1ll1i(0x26f,'XkHj')]>0x0&&(pinFilter[I1ll1i(0x247,'kgLd')](lliiII)||pinFilter[I1ll1i(0x318,'Rj7F')](li11I[I1ll1i(0x250,'v!#g')](encodeURIComponent,lliiII)))){liI1li[I1ll1i(0x22c,'3MUf')](li11I[I1ll1i(0x2a7,'@2r6')]),console[I1ll1i(0x20b,'EQdP')](liI1li[I1ll1i(0x379,'8)80')]()),$[I1ll1i(0x1de,'*npq')][I1ll1i(0x35a,')#Qp')](iiIi1l);return;}const IllIil=await common['getLoginStatus'](ili11i);if(!IllIil&&typeof IllIil===li11I[I1ll1i(0x251,'E!m(')]){console[I1ll1i(0x339,'K42S')](IllIii+I1ll1i(0x282,'NY1g')),$[I1ll1i(0x3a6,'n4$2')][I1ll1i(0x1da,'^LAO')](iiIi1l);return;}let ill1Ii=![],llIIl1=$['red618code'],ill1Il,i1lll1,Ii1I1I;const l1i1Ii=common['genUA'](lliiII),l1iI1=li11I['ZhmuS'],lliiI1=iIi1l=>iIi1l['split']('')[I1ll1i(0x236,'v!#g')]((i1lIlI,l1lliI)=>{const lI1Ii1=I1ll1i;if(li11I['YyUNv'](li11I[lI1Ii1(0x324,'4owp')],li11I[lI1Ii1(0x264,'XkHj')]))I1l11i={...iIIiiI,...liiI1i};else return i1lIlI=li11I['TqlDP'](i1lIlI,0x5)-i1lIlI+l1lliI[lI1Ii1(0x27c,'*!Yo')](0x0),i1lIlI&i1lIlI;},0x0),IiiI1=[...new Set(redshareId)];li11I[I1ll1i(0x230,'@2r6')](IiiI1['length'],0x0)?ill1Il=IiiI1[Math['floor'](Math[I1ll1i(0x34a,'m@e^')]()*IiiI1['length'])]:ill1Il='';for(let IIIlII=0x0;li11I[I1ll1i(0x348,'3MUf')](IIIlII,maxdraw);IIIlII++){if(li11I[I1ll1i(0x39b,'^%fh')]!==I1ll1i(0x204,'*npq')){let iiIiI1=li11I[I1ll1i(0x241,'!C%k')](iii1i1);i1lll1=I1ll1i(0x36c,'dCNB')+iiIiI1['jda']+I1ll1i(0x386,'M8PE')+iiIiI1['jdb']+I1ll1i(0x2f8,'uTdD')+iiIiI1[I1ll1i(0x300,'4owp')]+';__jdv='+iiIiI1[I1ll1i(0x2ee,']Jqu')]+I1ll1i(0x1e7,'[3sA')+iiIiI1['shshshfpa']+I1ll1i(0x1ee,'*npq')+iiIiI1[I1ll1i(0x245,'vmt0')]+I1ll1i(0x2d5,'poIk')+iiIiI1[I1ll1i(0x214,'N^7l')]+I1ll1i(0x207,'M8PE')+iiIiI1['pre_seq']+I1ll1i(0x218,'8)80')+iiIiI1[I1ll1i(0x304,'u2w3')]+';',ss=await li11I[I1ll1i(0x3ab,'kgLd')](lilII,$[I1ll1i(0x1fb,'[3sA')]);if(ss){let ili1Ii=ss?.[I1ll1i(0x1f3,'E!m(')](/(https:\/\/u\.jd\.com\/jda[^']+)/);ili1Ii?li11I[I1ll1i(0x208,'LCsP')]!==I1ll1i(0x394,'DIDf')?($[I1ll1i(0x2d6,'v!#g')]=ili1Ii[0x1],await li11I[I1ll1i(0x2b4,']Jqu')](IIIiI,ili1Ii[0x1])):(lIIii1=ll1i1[I1ll1i(0x27a,'NY1g')]((ll11I,iIi1I)=>!lliil1[I1ll1i(0x237,'LCsP')][I1ll1i(0x33b,'Sqgf')](iIi1I+0x1)),I1iIi1[I1ll1i(0x388,')#Qp')]=[]):li11I['qDPpz']!==li11I[I1ll1i(0x2db,'^LAO')]?ll1iI[I1ll1i(0x205,'NY1g')]=iI1lll[l1lIll(0x0,I1l1II[I1ll1i(0x1ed,'uAOx')])]:(console[I1ll1i(0x2fa,'NY1g')](IllIii+'没有获取到跳转链接'),ill1Ii=!![]);}else console[I1ll1i(0x2ad,'uAOx')](IllIii+'链接失败'),ill1Ii=!![];let ili1Il=await jsTk(l1i1Ii,I1ll1i(0x22d,'EB&K')+actId+I1ll1i(0x35d,'4owp'),{'bizId':li11I[I1ll1i(0x350,'vmt0')],'v':li11I[I1ll1i(0x23b,'*!Yo')],'qs':I1ll1i(0x347,'Umpe')});Ii1I1I=ili1Il[I1ll1i(0x2f3,'u2w3')],await llIIi1(I1ll1i(0x279,'^%fh'));if(ill1Ii||$[I1ll1i(0x311,'v!#g')])break;if($['waitTime'])await $['wait']($[I1ll1i(0x305,'E6CZ')]);}else{let liIIi=li11I[I1ll1i(0x36b,'m@e^')],IilllI='1',iI1lIi=lil11i(IlIIl[I1ll1i(0x393,'QKci')]()/0x3e8)[I1ll1i(0x294,'hgwe')](),l1lllI=li11I['zEXdx'](iI1lIi,li11I[I1ll1i(0x2b1,'n4$2')](lI1liI,li11I['JTzsq'](0x7fffffff,i1i1Ii[I1ll1i(0x309,'NY1g')]()))[I1ll1i(0x2d7,'XkHj')]()),llliIi=[liIIi,l1lllI,iI1lIi,iI1lIi,iI1lIi,IilllI][I1ll1i(0x1f9,'m@e^')]('.'),i1lIli=[liIIi,IilllI,[l1lllI,IilllI]['join']('|'),iI1lIi][I1ll1i(0x384,'vuBR')]('.'),i1lIll=liIIi,ll11ii=[liIIi,li11I[I1ll1i(0x3a1,'Sqgf')],'-',li11I[I1ll1i(0x2a6,'v!#g')],'-',lllii[I1ll1i(0x257,'4owp')]()['toString']()][I1ll1i(0x285,'NY1g')]('|');ll11ii=li11I['UviLd'](iI11Ii,ll11ii);let liIlii=li11I['mZDKY'](li11I[I1ll1i(0x334,'dCNB')](iIII1l,'xxxxxxxx-xxxx-xxxx-xxxxxxxxxxxx')+'-',iI1lIi),llii1l=I1ll1i(0x380,'vuBR'),liIlil=[llii1l,IilllI][I1ll1i(0x317,'@2r6')]('.'),llii1i=[l1lllI,llii1l,lllil['now']()[I1ll1i(0x2e3,'^%fh')]()][I1ll1i(0x285,'NY1g')]('.'),ll11il=(li11I[I1ll1i(0x332,'E!m(')](iI11Il[I1ll1i(0x2cd,'u2w3')](0x5*iIII1i[I1ll1i(0x34a,'m@e^')]()),0x2)+0x1)['toString'](),iI1lIl=li11I[I1ll1i(0x1f5,'hgwe')](iil1i1['genRandomString'](0x20,I1ll1i(0x3a4,'[3sA')),'|278');return{'jda':llliIi,'jdb':i1lIli,'jdc':i1lIll,'jdv':ll11ii,'shshshfpa':liIlii,'mba_sid':liIlil,'mba_muid':llii1i,'pre_seq':ll11il,'pre_session':iI1lIl};}}await li11I[I1ll1i(0x375,'uAOx')](llIIi1,li11I['Viwda']);if($[I1ll1i(0x26b,'uAOx')])return{'runEnd':!![]};if($[I1ll1i(0x28c,'[3sA')])await $[I1ll1i(0x2dc,'#(su')]($['waitTime']);async function lilII(iiIiII){const i1I11=I1ll1i,Iili={'oQMNH':function(iIi11,Iil1){return iIi11*Iil1;}};if(li11I[i1I11(0x1ff,'^%fh')]!==li11I['cucWO']){const ll11lI=await common[i1I11(0x2ba,'^LAO')]({'url':iiIiII,'method':li11I[i1I11(0x1f2,'M8PE')],'headers':{'Cookie':ili11i,'User-Agent':l1iI1},'proxy':null,'debug':![],'timeout':0x7530}),llliI1=ll11lI[i1I11(0x1e1,'^LAO')];let liIII=ll11lI&&ll11lI[i1I11(0x22b,'Umpe')]&&(ll11lI['headers'][li11I[i1I11(0x2e2,'M8PE')]]||ll11lI[li11I[i1I11(0x2c4,'uTdD')]][i1I11(0x2be,'^%fh')]||'')||'';if(liIII)for(let llii11 of liIII){if(li11I['GnmPf'](i1I11(0x1f4,'M8PE'),li11I[i1I11(0x233,'H1Ko')]))liIiI=l1il1I[Iiili[i1I11(0x270,'K42S')](Iili['oQMNH'](IilIli['random'](),li1[i1I11(0x335,'LCsP')]))];else{let ll11l1=llii11[i1I11(0x392,']Jqu')](';')[0x0][i1I11(0x297,'#(su')]();if(ll11l1[i1I11(0x371,'Sqgf')]('=')[0x1]){if(li11I[i1I11(0x2ef,'poIk')](i1lll1['indexOf'](ll11l1['split']('=')[0x1]),-0x1))i1lll1+=ll11l1['replace'](/ /g,'')+';\x20';}}}return llliI1;}else ii1ll['log'](i1I11(0x34c,'E!m(')+IliI1l);}async function IIIiI(llliII){const I1I1i1=I1ll1i,iiIiIl=await common['request']({'url':llliII+(I1I1i1(0x2bf,'[3sA')+li11I[I1I1i1(0x2b8,'8)80')](lliiI1,l1iI1)),'maxRedirects':0x0,'method':I1I1i1(0x1e4,'8)80'),'headers':{'Cookie':li11I[I1I1i1(0x329,'[3sA')](i1lll1,'\x20')+ili11i,'User-Agent':l1iI1,'Referer':$[I1I1i1(0x2f6,'rCy9')]},'proxy':null,'debug':![],'timeout':0x7530});let IlI1l1=iiIiIl[I1I1i1(0x383,'#(su')];if(IlI1l1?.[I1I1i1(0x281,'!C%k')]){let llii1I=IlI1l1[I1I1i1(0x366,'hgwe')];actId=llii1I[I1I1i1(0x2f7,'LCsP')](/\/active\/(\w+)\/index/)?.[0x1],Referer=llii1I;}let liIliI=iiIiIl&&iiIiIl['headers']&&(iiIiIl[li11I[I1I1i1(0x377,'XkHj')]][li11I[I1I1i1(0x25e,'J&0b')]]||iiIiIl[I1I1i1(0x221,'XkHj')][li11I['cGKzT']]||'')||'';if(liIliI)for(let iiIiIi of liIliI){if(li11I['EwMQk'](li11I[I1I1i1(0x20c,'u2w3')],li11I[I1I1i1(0x22a,'7[k$')])){iiilli['log'](l1iIIl+I1I1i1(0x231,'H1Ko')),iiilll[I1I1i1(0x28b,'EQdP')][I1I1i1(0x308,'&dyI')](lI11Il);return;}else{let IilI=iiIiIi['split'](';')[0x0][I1I1i1(0x23e,'^LAO')]();if(IilI[I1I1i1(0x2f9,'EB&K')]('=')[0x1]){if(i1lll1[I1I1i1(0x3b2,'!C%k')](IilI[I1I1i1(0x3a0,'^LAO')]('=')[0x1])==-0x1)i1lll1+=IilI['replace'](/ /g,'')+';\x20';}}}return i1lll1;}function iii1i1(){const i1I1l=I1ll1i;let liIlli=i1I1l(0x31c,'uAOx'),lil11='1',Iillll=li11I[i1I1l(0x30f,'n4$2')](parseInt,Date['now']()/0x3e8)[i1I1l(0x2d7,'XkHj')](),lllI1=Iillll+li11I[i1I1l(0x256,'[3sA')](parseInt,0x7fffffff*Math[i1I1l(0x1fd,'uTdD')]())[i1I1l(0x2b2,'n4$2')](),III11I=[liIlli,lllI1,Iillll,Iillll,Iillll,lil11][i1I1l(0x391,'M8PE')]('.'),Ilii1=[liIlli,lil11,[lllI1,lil11][i1I1l(0x25a,'^LAO')]('|'),Iillll][i1I1l(0x358,'7[k$')]('.'),ll11i1=liIlli,ili1I1=[liIlli,li11I['tkBPe'],'-',li11I[i1I1l(0x268,'*!Yo')],'-',Date[i1I1l(0x226,'&dyI')]()[i1I1l(0x310,'6s4f')]()][i1I1l(0x34b,'dCNB')]('|');ili1I1=encodeURIComponent(ili1I1);let Iill=li11I[i1I1l(0x2ac,'NY1g')](li11I[i1I1l(0x2c0,'OnWN')](IllIll,li11I[i1I1l(0x234,'!C%k')]),'-')+Iillll,ili1II=li11I[i1I1l(0x24e,'v!#g')],liIllI=[ili1II,lil11][i1I1l(0x2cc,'rCy9')]('.'),ll11i=[lllI1,ili1II,Date[i1I1l(0x22f,'rCy9')]()[i1I1l(0x37c,'dCNB')]()]['join']('.'),iI1lI1=li11I[i1I1l(0x35c,'^LAO')](Math[i1I1l(0x2ec,'7Xr%')](0x5*Math[i1I1l(0x34a,'m@e^')]())*0x2,0x1)['toString'](),I1I1li=li11I[i1I1l(0x224,'EQdP')](common[i1I1l(0x3b3,'n4$2')](0x20,i1I1l(0x1ea,'dCNB')),i1I1l(0x2b9,'Sqgf'));return{'jda':III11I,'jdb':Ilii1,'jdc':ll11i1,'jdv':ili1I1,'shshshfpa':Iill,'mba_sid':liIllI,'mba_muid':ll11i,'pre_seq':iI1lI1,'pre_session':I1I1li};}function IllIll(l1i11,IlI1li=I1ll1i(0x33c,'G^mM')){const i1I1i=I1ll1i;let IlI1ll='';for(let ll11l of l1i11){if(ll11l=='x')IlI1ll+=IlI1li[i1I1i(0x20d,'N^7l')](Math[i1I1i(0x276,'DIDf')](li11I['JTzsq'](Math[i1I1i(0x2de,'3MUf')](),IlI1li[i1I1i(0x20e,'!C%k')])));else{if(ll11l=='X'){if(li11I[i1I1i(0x2a4,']Jqu')](li11I[i1I1i(0x396,'M8PE')],li11I[i1I1i(0x396,'M8PE')]))return l1l11I=li11I['VxoFd'](lilIl<<0x5,IilIlI)+iIli11[i1I1i(0x29f,'n4$2')](0x0),li11I[i1I1i(0x395,'G^mM')](Iiiil,Iiiii);else IlI1ll+=IlI1li[i1I1i(0x2f1,'^LAO')](Math[i1I1i(0x291,'7[k$')](Math[i1I1i(0x219,'E6CZ')]()*IlI1li[i1I1i(0x1ed,'uAOx')]))[i1I1i(0x2f0,'^LAO')]();}else li11I[i1I1i(0x2d0,'n4$2')]===li11I[i1I1i(0x33a,'#(su')]?IlI1ll+=ll11l:(l11i1i[i1I1i(0x260,'Rj7F')](lI11I1+i1I1i(0x326,'Rj7F')),l1il11=!![]);}}return IlI1ll;}async function i1lllI(l1llli,iI1lII){const IIiiII=I1ll1i;try{switch(l1llli){case IIiiII(0x283,'K42S'):if(iI1lII[IIiiII(0x336,'8)80')]==0x0){let ll11iI=iI1lII?.[IIiiII(0x34e,'J&0b')]?.[IIiiII(0x21c,'#(su')]||[],l1i1I=[];for(let I1I1ll of ll11iI){let lil1i='';switch(I1I1ll['type']){case 0x1:case 0x13:{lil1i=prize_map[I1I1ll[IIiiII(0x26c,'uAOx')]]+(I1I1ll[IIiiII(0x31b,'7Xr%')]+'元');break;}case 0x3:case 0x11:{lil1i=prize_map[I1I1ll[IIiiII(0x38e,'3MUf')]]+I1I1ll[IIiiII(0x1e3,'Umpe')];let liiiil=I1I1ll[IIiiII(0x31d,'H1Ko')]>0x0?'满'+I1I1ll[IIiiII(0x225,'v!#g')]:'无门槛';lil1i+='('+liiiil+'减'+I1I1ll[IIiiII(0x244,'G^mM')]+')';break;}case 0x6:{lil1i=li11I[IIiiII(0x1e8,'K42S')](prize_map[I1I1ll[IIiiII(0x373,'!C%k')]],I1I1ll['limitStr']);let IIIIli=li11I[IIiiII(0x330,'N^7l')](I1I1ll['quota'],0x0)?'满'+I1I1ll[IIiiII(0x227,'LCsP')]:IIiiII(0x313,'dCNB');lil1i+='('+IIIIli+'打'+I1I1ll[IIiiII(0x23d,'LCsP')]+'折)';break;}default:{if(li11I[IIiiII(0x2f4,'vmt0')](IIiiII(0x223,'K42S'),IIiiII(0x389,'J&0b'))){lil1i=prize_map[I1I1ll[IIiiII(0x26c,'uAOx')]||IIiiII(0x254,'n4$2')]||IIiiII(0x37b,'&dyI')+I1I1ll[IIiiII(0x2e6,'&dyI')]+']',console['log'](''+IllIii+JSON[IIiiII(0x1df,'EQdP')](I1I1ll));break;}else II1iI[IIiiII(0x2fc,'vmt0')](''+llI1II+lIli1l[IIiiII(0x352,'NY1g')]),lillIi['msg']?.['includes'](IIiiII(0x293,'n4$2'))&&(ii1ili=!![]);}}l1i1I[IIiiII(0x200,'7Xr%')](lil1i);}console['log'](''+IllIii+l1i1I['join'](',\x20'));let l1llll=l1i1I[IIiiII(0x202,'NY1g')](lil1l=>{const llIiI=IIiiII,lllIl={'clcEw':function(Iliii,illlii){return Iliii*illlii;}};if(li11I[llIiI(0x2e7,'rCy9')](li11I['MzIRf'],li11I[llIiI(0x23c,'[3sA')]))ii1iil+=lllI1l[llIiI(0x2cf,'Sqgf')](i11iii[llIiI(0x2bb,'!C%k')](lllIl['clcEw'](llI1Ii[llIiI(0x31f,'vuBR')](),lllI1i['length'])))[llIiI(0x27b,'[3sA')]();else return lil1l[llIiI(0x246,'d[ZY')](llIiI(0x39d,'d[ZY'))||lil1l[llIiI(0x2c6,'#(su')](li11I[llIiI(0x368,')#Qp')])||lil1l[llIiI(0x316,'G^mM')]('[立减卷]')?'':lil1l;})['filter'](Boolean);liI1li[IIiiII(0x24d,'!C%k')](l1llll['join'](',\x20'));}else console[IIiiII(0x339,'K42S')](''+IllIii+iI1lII[IIiiII(0x213,'DIDf')]+'['+iI1lII[IIiiII(0x354,'M8PE')]+']'),iI1lII[IIiiII(0x36a,'6s4f')]?.['includes'](IIiiII(0x21b,'3MUf'))&&(ill1Ii=!![]);break;case IIiiII(0x2b3,'OnWN'):if(iI1lII[IIiiII(0x302,'OnWN')]==0x0){let l1i1i=iI1lII[IIiiII(0x232,'NY1g')][IIiiII(0x21d,'H1Ko')][IIiiII(0x39c,'^%fh')](/\?s=([^&]+)/)&&iI1lII[IIiiII(0x2a5,'E!m(')][IIiiII(0x292,'Sqgf')][IIiiII(0x265,'uAOx')](/\?s=([^&]+)/)[0x1]||'';console[IIiiII(0x2fa,'NY1g')](IllIii+IIiiII(0x362,'@2r6')+l1i1i);}else console[IIiiII(0x260,'Rj7F')](''+IllIii+iI1lII['msg']),iI1lII[IIiiII(0x2ce,'!C%k')]?.[IIiiII(0x32e,'hgwe')](IIiiII(0x272,'QKci'))&&(ill1Ii=!![]);break;}}catch(I1iI1i){console[IIiiII(0x299,'u2w3')](IIiiII(0x36f,'@2r6')+l1llli+IIiiII(0x1ec,'^%fh')+(I1iI1i[IIiiII(0x28d,'#(su')]||I1iI1i));}}async function llIIi1(l1i1l){const Ilill=I1ll1i,I1iI1l={'EOEgc':function(l1i11i,l11iI1){return l1i11i>l11iI1;},'jjFRe':function(IliiI,lI111i){return IliiI!==lI111i;},'nBRXH':Ilill(0x344,'poIk'),'YJWHX':'[立减卷]'};if($[Ilill(0x3a9,'&dyI')])return;let illlil='',Iliil=null,I1lIIl=null,l1ilI1=Ilill(0x3a3,'*npq'),l1l1Il={},lil1I={};switch(l1i1l){case li11I[Ilill(0x1f7,'kgLd')]:lil1I={'appId':Ilill(0x2ff,'Sqgf'),'functionId':li11I['DZQTI'],'appid':Ilill(0x312,'6s4f'),'clientVersion':common[Ilill(0x35f,'uAOx')](),'client':Ilill(0x2fe,')#Qp'),'body':{'platform':0x4,'unionActId':0x79c9,'actId':actId,'d':llIIl1,'unionShareId':ill1Il,'type':0x1,'qdPageId':'MO-J2011-1','mdClickId':'jxhongbao_ck','actType':0x1},'version':Ilill(0x349,'uAOx'),'ua':l1i1Ii,'t':!![]},l1l1Il=await H5st['getH5st'](lil1I),illlil='https://api.m.jd.com/api',Iliil=l1l1Il[Ilill(0x341,'[3sA')];break;case li11I['Viwda']:lil1I={'appId':li11I[Ilill(0x333,'[3sA')],'functionId':li11I[Ilill(0x307,'m@e^')],'appid':li11I[Ilill(0x30b,'[3sA')],'clientVersion':common[Ilill(0x2e0,'@2r6')](),'client':'apple','body':{'platform':0x4,'unionActId':0x79c9,'actId':actId,'d':llIIl1,'unionShareId':'','supportPic':0x2},'version':li11I['MhFuV'],'ua':l1i1Ii,'t':!![]},l1l1Il=await H5st[Ilill(0x364,'&dyI')](lil1I),illlil=Ilill(0x2e5,'OnWN'),Iliil=l1l1Il['paramsData'];break;default:console[Ilill(0x33d,'&dyI')]('❌\x20未知请求\x20'+l1i1l);return;}const l1l1Ii={'x-api-eid-token':Ii1I1I,'loginType':0x2,'_':new Date()[Ilill(0x25d,'uAOx')]()+li11I[Ilill(0x20f,'H1Ko')](new Date()['getTimezoneOffset']()*0x3c,0x3e8)+li11I['JTzsq'](li11I[Ilill(0x210,'u2w3')](0x8,0x3c),0x3c)*0x3e8};if(Iliil){if(li11I[Ilill(0x363,')#Qp')]!==li11I[Ilill(0x261,']Jqu')]){const liIlll=i1ili1(i1l1l1);I1iI1l['EOEgc'](liIlll,0x0)&&I1iI1l['jjFRe'](liIlll,0x1)&&(II11Ii=liIlll);}else Iliil={...Iliil,...l1l1Ii};}I1lIIl&&(I1lIIl={...I1lIIl,...l1l1Ii});const IIIIlI={'url':illlil,'method':l1ilI1,'headers':{'accept':li11I[Ilill(0x215,'EB&K')],'Accept-Language':Ilill(0x20a,')#Qp'),'Content-Type':Ilill(0x258,'4owp'),'Cookie':li11I[Ilill(0x3aa,'XkHj')](li11I['zEXdx'](i1lll1,'\x20'),ili11i),'X-Requested-With':li11I[Ilill(0x21a,'uAOx')],'Referer':Referer,'Origin':li11I[Ilill(0x342,'uAOx')],'x-rp-client':li11I['pqhcR'],'User-Agent':l1i1Ii},'params':I1lIIl,'data':Iliil,'timeout':0x7530};if(l1ilI1==='GET'){if(li11I['mWINM']==='suibu')delete IIIIlI[Ilill(0x216,'u2w3')],delete IIIIlI[Ilill(0x248,']Jqu')][Ilill(0x23f,'vuBR')];else return ii1il1[Ilill(0x36d,'[3sA')](I1iI1l[Ilill(0x203,'QKci')])||lI1llI['includes']('[打折券]')||illIil[Ilill(0x2c3,'H1Ko')](I1iI1l['YJWHX'])?'':i11iiI;}const l1i11l=0x1;let liiil1=0x0,lllII=null,l11iII=![];while(li11I[Ilill(0x228,'NY1g')](liiil1,l1i11l)){const illll1=await common['request'](IIIIlI);if(!illll1[Ilill(0x39f,'Sqgf')]){lllII=Ilill(0x274,'H1Ko')+l1i1l+Ilill(0x399,'vmt0')+illll1['error'],liiil1++;continue;}if(!illll1['data']){if(Ilill(0x343,'^%fh')!==Ilill(0x2c1,'^LAO')){let liiilI=iIiI1[Ilill(0x32a,'XkHj')][Ilill(0x3ae,'u2w3')][Ilill(0x2ca,')#Qp')](/\?s=([^&]+)/)&&liil1I['data'][Ilill(0x1ef,'uTdD')]['match'](/\?s=([^&]+)/)[0x1]||'';i11ii1[Ilill(0x372,'7Xr%')](IlIliI+'分享码:\x20'+liiilI);}else{lllII='🚫\x20'+l1i1l+Ilill(0x38a,'J&0b'),liiil1++;continue;}}li11I[Ilill(0x3af,'3MUf')](i1lllI,l1i1l,illll1[Ilill(0x269,'@2r6')]),l11iII=![];break;}liiil1>=l1i11l&&(console[Ilill(0x24a,'dCNB')](lllII),l11iII&&(Ilill(0x253,'7Xr%')!==Ilill(0x267,'K42S')?$[Ilill(0x209,'7Xr%')]=!![]:II11lI[Ilill(0x30d,'[3sA')]=!![]));}}async function getAuthorCodeList(liiii1){const Ilili=ii1IIl,IIiiIl={'rHBmu':Ilili(0x21e,'uTdD')},l1ilIl=await common[Ilili(0x1dd,'7Xr%')]({'url':liiii1,'method':IIiiIl[Ilili(0x278,'Sqgf')],'headers':{'User-Agent':Ilili(0x1e2,'DIDf')},'proxy':null,'debug':![],'timeout':0x7530}),IIiiIi=l1ilIl[Ilili(0x34e,'J&0b')];return IIiiIi;}function random(l1ilIi,l11iIi){const I1ll1I=ii1IIl,ll11li={'fXrQu':function(iliIlI,lI111I){return iliIlI+lI111I;},'mnkhu':function(IlilI,llIi1){return IlilI*llIi1;}};return ll11li['fXrQu'](Math[I1ll1I(0x2d2,'G^mM')](ll11li[I1ll1I(0x26e,'LCsP')](Math[I1ll1I(0x220,'&dyI')](),l11iIi-l1ilIi)),l1ilIi);}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
