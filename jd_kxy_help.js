/*
618开心夜助力

环境变量：
jd_kxy_inviterId // 指定助力码 非必须，不填默认助力账号一
jd_kxy_num // 指定人数  非必须，不填默认跑全部账号

cron:1 1 1 1 *

*/

const $ = new Env('618开心夜助力');
var iｉl='jsjiami.com.v7';const ililIi=iii1II;(function(II1iI,llI1II,lIli1l,lillIi,illIi1,ii1ili,liil1i){return II1iI=II1iI>>0x4,ii1ili='hs',liil1i='hs',function(lI1lil,i1l1iI,liil1l,lI1lii,Iiili1){const liiI1i=iii1II;lI1lii='tfi',ii1ili=lI1lii+ii1ili,Iiili1='up',liil1i+=Iiili1,ii1ili=liil1l(ii1ili),liil1i=liil1l(liil1i),liil1l=0x0;const Iil1l1=lI1lil();while(!![]&&--lillIi+i1l1iI){try{lI1lii=parseInt(liiI1i(0x1d5,'eOfS'))/0x1+parseInt(liiI1i(0x14f,'Fous'))/0x2*(-parseInt(liiI1i(0x1ba,'[()]'))/0x3)+-parseInt(liiI1i(0x20c,'iAvq'))/0x4+parseInt(liiI1i(0x1a1,'fuhA'))/0x5+-parseInt(liiI1i(0x1b6,'2llp'))/0x6+-parseInt(liiI1i(0x228,'@%G7'))/0x7*(parseInt(liiI1i(0x1e6,'jgdV'))/0x8)+-parseInt(liiI1i(0x18f,'W[Jt'))/0x9*(-parseInt(liiI1i(0x149,'W[Jt'))/0xa);}catch(i1i11I){lI1lii=liil1l;}finally{Iiili1=Iil1l1[ii1ili]();if(II1iI<=lillIi)liil1l?illIi1?lI1lii=Iiili1:illIi1=Iiili1:liil1l=Iiili1;else{if(liil1l==illIi1['replace'](/[WgBhdfeUuKAOYQXECFtx=]/g,'')){if(lI1lii===i1l1iI){Iil1l1['un'+ii1ili](Iiili1);break;}Iil1l1[liil1i](Iiili1);}}}}}(lIli1l,llI1II,function(il1iIl,iii1ii,il1iIi,iii1il,II11li,I1l11i,iIIiiI){return iii1ii='\x73\x70\x6c\x69\x74',il1iIl=arguments[0x0],il1iIl=il1iIl[iii1ii](''),il1iIi=`\x72\x65\x76\x65\x72\x73\x65`,il1iIl=il1iIl[il1iIi]('\x76'),iii1il=`\x6a\x6f\x69\x6e`,(0x1722ad,il1iIl[iii1il](''));});}(0xbd0,0x67cbd,Iii11l,0xbf),Iii11l)&&(iｉl=Iii11l);const notify=require('./utils/Rebels_sendJDNotify'),jdCookie=require(ililIi(0x25c,'tAiN')),common=require(ililIi(0x210,'nkjt')),{H5st}=require(ililIi(0x142,'npvl')),isNotify=process['env'][ililIi(0x1ca,'[()]')]==='true',pddcode=process[ililIi(0x158,'!#e3')][ililIi(0x1e3,'C*)x')]||'',pddnum=process[ililIi(0x175,'aUwP')][ililIi(0x1bc,'W[Jt')],linkId=ililIi(0x248,'P@qG'),PDD_WAIT='1';let waitTimes=parseInt(PDD_WAIT)*0x3e8;$[ililIi(0x234,'C*)x')]=0x0,$[ililIi(0x242,'Zw^N')]=![];let cookie='';const cookiesArr=Object[ililIi(0x243,'v4Uz')](jdCookie)['map'](lllil=>jdCookie[lllil])[ililIi(0x268,'H*#L')](iI11Il=>iI11Il);function iii1II(_0x4b8f82,_0x5db6c2){const _0x478b00=Iii11l();return iii1II=function(_0xe0014,_0x4e53da){_0xe0014=_0xe0014-0x136;let _0x597c54=_0x478b00[_0xe0014];if(iii1II['nSCGvm']===undefined){var _0x5aae3c=function(_0x19466f){const _0x1efdf1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3f3e2b='',_0x11a0de='';for(let _0x98dfea=0x0,_0x56a6a2,_0x16f520,_0x1da900=0x0;_0x16f520=_0x19466f['charAt'](_0x1da900++);~_0x16f520&&(_0x56a6a2=_0x98dfea%0x4?_0x56a6a2*0x40+_0x16f520:_0x16f520,_0x98dfea++%0x4)?_0x3f3e2b+=String['fromCharCode'](0xff&_0x56a6a2>>(-0x2*_0x98dfea&0x6)):0x0){_0x16f520=_0x1efdf1['indexOf'](_0x16f520);}for(let _0x4bd14f=0x0,_0x276279=_0x3f3e2b['length'];_0x4bd14f<_0x276279;_0x4bd14f++){_0x11a0de+='%'+('00'+_0x3f3e2b['charCodeAt'](_0x4bd14f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x11a0de);};const _0x58b469=function(_0x1adcc7,_0x4c4c18){let _0x2231f8=[],_0x31d070=0x0,_0x4ecca0,_0x1ad74c='';_0x1adcc7=_0x5aae3c(_0x1adcc7);let _0x4d5906;for(_0x4d5906=0x0;_0x4d5906<0x100;_0x4d5906++){_0x2231f8[_0x4d5906]=_0x4d5906;}for(_0x4d5906=0x0;_0x4d5906<0x100;_0x4d5906++){_0x31d070=(_0x31d070+_0x2231f8[_0x4d5906]+_0x4c4c18['charCodeAt'](_0x4d5906%_0x4c4c18['length']))%0x100,_0x4ecca0=_0x2231f8[_0x4d5906],_0x2231f8[_0x4d5906]=_0x2231f8[_0x31d070],_0x2231f8[_0x31d070]=_0x4ecca0;}_0x4d5906=0x0,_0x31d070=0x0;for(let _0x39d795=0x0;_0x39d795<_0x1adcc7['length'];_0x39d795++){_0x4d5906=(_0x4d5906+0x1)%0x100,_0x31d070=(_0x31d070+_0x2231f8[_0x4d5906])%0x100,_0x4ecca0=_0x2231f8[_0x4d5906],_0x2231f8[_0x4d5906]=_0x2231f8[_0x31d070],_0x2231f8[_0x31d070]=_0x4ecca0,_0x1ad74c+=String['fromCharCode'](_0x1adcc7['charCodeAt'](_0x39d795)^_0x2231f8[(_0x2231f8[_0x4d5906]+_0x2231f8[_0x31d070])%0x100]);}return _0x1ad74c;};iii1II['COjkVE']=_0x58b469,_0x4b8f82=arguments,iii1II['nSCGvm']=!![];}const _0x50d2e4=_0x478b00[0x0],_0x5b0ff9=_0xe0014+_0x50d2e4,_0x2f5c6b=_0x4b8f82[_0x5b0ff9];return!_0x2f5c6b?(iii1II['kRxdms']===undefined&&(iii1II['kRxdms']=!![]),_0x597c54=iii1II['COjkVE'](_0x597c54,_0x4e53da),_0x4b8f82[_0x5b0ff9]=_0x597c54):_0x597c54=_0x2f5c6b,_0x597c54;},iii1II(_0x4b8f82,_0x5db6c2);}!cookiesArr[0x0]&&($[ililIi(0x139,'[()]')]($[ililIi(0x209,'0vLS')],ililIi(0x233,'H*#L')),process[ililIi(0x264,'md!^')](0x1));function Iii11l(){const i1i11i=(function(){return[...[iｉl,'xKdgjCWsjYtiWaOumtiU.coeFAmCgQ.vCE7BfhXu==','WOOJW6ddTZO','bmodW5xcN8oF','W7ZcHxJcPHFcN8ojW7VdPSoubCkVW6pcGddcPv3cNmoLWRi7W7ddVhOKq8oMWQZcKIfXo14','WRy3aa/cI8o2WPW','bH9MA8khWRlcMG','x8oDW67dQ8oQ','fSoYWONdRmovgmo3W4O','W7z4WQNcVKaFWPtdLSkQW5y0FG','WQqXW47cV8ofECoGWPjGkmk9WRiiWO7dLKJcNmo/WQa','WRHmA8oqtSo3vNa','W4DVbW','l8o7W7PKCSkN','jCoOWOldV8o3fCoJ','5PYp6i+h5yYL5yQW5PAY5O2ca+ITQUMhSoAwHoI9QoIGIa','tCozW63dTSkmWOjri8o9Cq','W4JdSmoYW5NcKa','FaTvW47dU8o1cW','W6ZdUCoV','44c25O6556EC44oW6k+45ys26i+t5yYvt1yRwW4u','eCo/FKxdRCovaW','W7NcV2tcJZm','W5WBW6veWR8','W5JcMaeVWQW','4P+Is+A0QowiIoEdIUElTG','4P+ZW6RMN4NLO6xLHABMJ7JLR5tLIQlLIjVLJOVPH6tVVPxLVPxLP5VLIzNLIQlOTO7LJl4sW5xdPa','qmkbgs7cGa','4P6Hh+wkP+wiUEEGGEwMP+AvS++8MEs8PoIbL+ADPEw9UUwsNoA0VEwlG+++Ia','W4XLfe1zfslcNCkUgIerBCky','W5WHW71MWQdcKSoepmoWx8kzW77cUCkzW5KKEteIlCowWOZdVCocBxNcH1n8lN/dMZjmC0ynW4DoWPSUW4Htb1hcLXrZWPVcPIOzW4/dI8oPbZ3dRIiaWOCyWRpcRCoJW7ldHWtdVXpdK2VcQmoe','vSoyW6BdOCor','W4HVbgS','WQytWOK','FSktkdJcSa','dCokW5bKCSkN','nmkNW6WD','wmkYWR8rfmkVWQ/dImoRW7tdHSoepMnRW5xdIeRdR2KuWONcQSo8W50SW4RcT8oyW5HiW5pcUSoU','sSotW68','W4NcPCke','omo3DW','W67cKmotW6FcTSk8D2hdIgrcW6VdPIFcSq3dV8oXhCkOW57dJq','oXn9BSkg','W4ieDa','WQWSfqxcMSoGWP0','dehdMZDcW7ZdOshdMqxdOXXegMBcIMhcGmoB','4P2gWQhLIyxLIixMIOVLI6BcUSo0','WOxcKgrk','W67cNwNcUbVcLCogW7NdPSopdSoY','W7JcTNa','DttcT8ofWQXi','WOOoW6pcImks','4O+U77MHgEI2MownOSoBvWRPUzxORlpLJRVLIitLIBpKV5/OG70','hCo7zLq','m8oKxtHz','W5bqoG','WRW4W4FcQSkbv8omW4TTi8oZW5u4WPNdJfldKCkHWRu/WP57h15uamkpWRPhamk1W5bg','sGBcGq','guhdNG5gW7VdSa','eWCyt8o4W5ddTxOiW7W','wchcOcpdHW','rqVdHr9GW6FdQZNdHce','iSkXqsOnWPu','W4ZcVX07WOzn','tSozW6tdTSopWPzq','WONORk3MSQlLKlhLUjxcIG','W5G6W64','W7SxW6xcGCo6','4P+ayUwlIUwlT+AlVUwiMSopnG','W4lcKehcPq','W7edW7TeWRG','jSk6WPS','oSkWW6CJW55t','qadcISkvAGW','W5WWW6vMWR3dNCkg','W6qkB8klpue','WP3dK8oHW5SnsGpcKKxdVCknW4WJCCoXWR1Jc3HQEmkDjxldSSkwWPHbA8krrCoIWPtdPW','mq4W','W7NcLhZcQW','W7NcVgtcKCkwsca','WRC0W7NdRrvAWPi','W4hcV8kmWOZdK8opWR/dJtFdKa','EqTkW43dTmoNaW','WRqMW4hcR8kCuCoRW5z3p8o0WPuUW5ZdNKNdLG','W4lcT1xcPSkH','W6NdUCo7','ySkWhg7cJ8k1F8oPFCo+cJZcNXhdGqa','WQaWeshcNCoI','WQKYW70','vSk/WOBdRmkYieu','odBcIJdcJ8kbxG','WRKbWOddV8ooxG','fCo1DxddSCos','W694W67cVSkWBSo/W5u','woITSUAWV+wKUUI1VSoX4P6NWQpML6VLKy/LUQVML4dMJ6y','Dq7cHmkZwq','mSkTvsiqWPy','WPZdJ8o0evNdNJz3w8kwWQu5hCk6W6LxW40','jCoxW4dcGSo/','WRevy8kZe0uk','kCk2tq4kWPCzWRRdISoaWRLUWPFdNSkhjrW','W4RcOGeqWPXn','ub7cGmoLWRzVqmoYvL3dNq','4P+NioADIUIdS+ATLEEGLowLJEEtSSoR'],...(function(){return[...['WR3cO1W6CCkvW6xcKmoU','x2ThWPjb','rLHmWRTcW7S','mZZcMq','W4Sfzq','WPK5uZ4gtdZcUCkAaY0o','r8kJWP/dGSkKna','W4VcH08','WRVcKLGVta','gSoRzaW','qSkSWPKkdq','q0XlWOO','WPNdImoY','frCyA8o2W5BdK2yyW5GtW7lcI2VcHCoiWRxcICka','mCoHW7m','hWel','kmkJW7WA','pSo+b37cICk0','iCo9hh4Q','wConW7jP','m8kTW7i','vCoxW6jkoSkaW7y','ySkBnWJcUG','W5ZcGgxcIb0','tSoOffibWRbQ','DGDdW7pdPSoN','4P22WOlMNRZNN6NORQhMSQpcSq','E8oGW49YWPWDWQ94WOVdPvBcPG','hr/cMXRdLW','WQxdPmoKtv0','W47cHL7cUeBcHCkIW4xdPh88iCogWOVdSSk2W7G','rcP9W7VdU8oK','WPRdLmo2pKhdMHC','vCkOWR0','W6ezwSk8pG','lSo6zq','WOFdLmoSpupdNW','4P2ytUAYMoAET+wiVowiM+ATH+AuPW','bLFdIa','W5mWW70','WPFdV8osWR7dImoiDNRdGWPOW7VdNa','jhhdHbnS','WONORk3MSQlLP43OTQtcIUkDKmky','4P2SE+w0H+wGPEweK+ApTowVOUs4VUAxTEwpMoMeOE+9OoAoH+wUNos5HoAvG2JcGW','bG5ZF8krW7RdHNxcUv4UwSoNWPdcHx50WRnlWPu','4PYmW7JKUlBOGPROHPtLTipLI7BLIyJOHzpLTyi','dCo7CsCE','amosyIWY','emo0DLddUW','lCoZzWaF','W6ikEmkNoKm','WReNW5a','4P2rWRJLIRNLI5lMIANLI7FdG8oy5OAA6lg8W70','W583W6rpWPq','4P6lAow1HEwIREwfSEAmS+wST+wiLUwkN+woLoMfKU+/TUw9GowLV+wiKUwkVSkgW5C','W53cGSkbW5FcSW','BgbUWRzyW6S9FmkCq0ahW7ZdKW','Ca9nW58','mbiW','W6X4WO/dTCoDdmkFW4Ldd8oNWReH','hmoKcwO','cmksW490dSk7W4mW','fCoGdNG6WRzE','WRNdISokfwm','WPJdGSoMW5GFf0K','FCkVwYVdNSoPomkLtSoimb/cKq','xmkPWQW','WOpcMgPMW7BdJa','sCkLWOi','W5hcLCkfWOVdJa','CSkYWROsdG','4P67h+A1HEITT+I/NUMcJoAaNos4Ufz8yxdIN6uM5P2M5yIO54MU5Oo35Q2O5BUfqCo+WOj5','WQ4sWPZdLSosva','8jozRCoR','WQ0VW6ZdPWrmWQFdSSkiW6OWyMhcLgtcSf8','vZ7cHJ3dQ8kuhq','W7ZcVhVcKSkzwIG','WRtcPSkWWQxdImojW5KZWRhdOLSvaq','WQGUW70','W6X7gueeW7m','CrXlW7pdPSoN','oSoRW7P0xq','xmojW57dI8os','WPNcPNjjW5y','buxdGH4','W6zVgMDAfIJdM8o+yNbDmmkuW7/dUIauWRKYewnHWRJdT37cLCoJW53cKSkMegWuACkiW4jRuWJcGrZdTmkNBmoNr8o1WQddMSkqW6NcTa9+ECkQuSoRW6xcN3hcRmkJW7OxtSoND8onrCkbhMJcKahcSrDuf8ovECkLWRbHWOBdN8kUW7tdOmo0oSo5W6pdNujOWQhcHSkcWRSEfdRcKKtdVapcRSojkmkLamkSuNiVWODOh8oolXr+WRSeWRddPN1wWRpcO35QW70FWO11WQ9MWO7cH8oxWR7dGGZcISoxaSo+W7/dK8kBW6CUpW','kSktFJmP','oCk4W4iTW7q','WRJcKeukza','WQJdMSoWD2tcIG','xdRcPrJdVq','WOGSW43dUdu','wttcGcddVSk3f8oZW6TuWOCbW6u','W4ZcPmkvW6FcI8kAcgldSYbcW7BdU1lcLv/dH8k7lmkSW5BdSqW','v8k8WQirs8k1W6tcGSoSW6JdJSkEnMeHW5pcLa','WQ7dKSo+wW','tH3cKSkrnvflWQbJxseEvutdPdVcRZLujb7cHwz9WPhdSmoNW4xdKSk6WP3dRSkx','WQWSfqxcMSoGWQKeccj6dKqRWQ3cLCo/BJ7dHmoRcSks','cmkxWQC8yCowWQKRW4yyf8kTWRa','WOZdICozq0m','W4DVb0Teca','W74EW7tcSSov','BuHKW5ZcRLRdOgFdUbldPgm','f8oKDaHl'],...(function(){return['WRCSW6JcRCkqtCoYW5fXiq','4P+4s+ACUEwJI+weUoApT+wTREwjQ+wiJUwnSoMeKo+/KUw8P+wMHEwjJEwkIUI2MEwpRmo6amoc','WOGrAG','W6mzFSkl','omkNW6eMWPHhWPK','mmk5sqytWOeBWRldJCos','e3pdJrLW','WO4YW6xcRSkG','mSo0FYyl','Dr5jW5VdU8oKjtJdO8oJzCodWPW','otRcHG','4PY4wUwhGEwKIowZK+E4QSohDmoNjG','WRtcGNvzW4VdISk/pW','WQKNdqVcMSoT','nHKiWOpdRHddHwldHb7dO2Kd','W6yHFCoOW6G','y8kZWQBdJCkc','EafE','4PY1W6BLVPJLIkZLI47LIi7LTBlOVzNLIRRMJOpLRlxLIypLI4JKU7FMLBhVVR3PG6BLH5pVVOe','FqbpW5FdOCoLid7dVSoKACocWOBdQ8kDW6HG','WQZdOmorW6G0','uI/cGt7dUCojv8kRW7vYWOfcW60OWPrxzSk7wKZdG8k1WOmDWQLFW5ZcKCopW6D9Ax0TymoJW6nIWO3dH8oHW7hcUhBdPCoxwMG0W5RcV8kLemoDfSkYWOJdRbe6rdqdW5/dJ1BcQmoAzh0tW7FcO8o1','lmk3xa','W4hcV8kmWOZdR8oFWQe','W5BcOSkcW7ZcMSkwih3dQsDoW6S','ymkSjN9pumkkW4JdQaJdJ8oE','W4HjlxL1','mdhcHWddOa','W4jUfMDchZS','xZNdG3NdQa','iCo6gMNcH8k+Aq','W6JcO8oxWQxdL8omW4Dq','WO3cQuynE8kuW7RdLmoFvCo1W7y','gXWAtSoJW4FdShWFW6OkW63cS0BcMmowWRK','WQ0VW6ZdPWrmWPm','uSkEpdFcVG','WQWfWPRdLSoeqmkdW70+eG','WRhcTvrUW6VdJW','WR17sSoNBSoY','e8o+tv7dU8ozmCkOWRiwvmony8kECSoD','hH0l','b8okW4BcNSoFmuZdK8ohW7fDWRu','dMpcGWFdOCk1imoR','W7mqW50','W7lcO0dcOCkU','tWFcGSkeDW','u8onW6u','e2ZdJsjV','puDdaCkyW6pcK+w+SowMRooaVUs6Mos6T+I0QownJW','W79qm3apW7KAemovtSoWea','u0HwWRyzW6W5','jCoXh3pcKSk8sSkVxmoOatBcNsddUY7cIdtcNmkJDrVdRq','b0VdIa','4P65h+w8JUwjIEwlG+wiJow2NoI+G+wkSEAmSowSMUwlNowlPos4P+AxUo++REMbJEwgNo++IG','WR/dKmo7xe4','xqFcMCokWOe','ECk1pcJcLSo6W4ifwMnD','l8oGWQ3dJmos','fCoxW5pcHmovkMhdISokW6a','WOddNSoeW6iW','wWio','cHTZBG','F8ovW7NdSCoV','C8kNWOpdHmk/','W79qW5BcQSkqbSoaW48HdCkHW4uS','W5ZcT8klWOVdIW','nSkSW6mhW5LrWQSne8kgeYhcSxBcQmk+W4q','W47cHL7cUeBcHCkIW4xdPh88iCogWQVdUmk3W60','4PYrWQ7LIl3LIRRNOj3LP7lMLRpVVBRORQNLHyRLJy7LVOZLKzBMLOhKU4ZOVz3MTO7LIkxLK4JLHjVOVA3OOlhLKzFVVRm','W6LvkxrD','W6amW6/cOCoSCW','W4hIJPRVU6hcU+wiIowkQoEJSE++HG','4O6277QqsEI0VowmKCkcpCkB6BU36kY/5y+t5yUW5yMO5lY+6ikB','WOrboCkkWOVdMSo9','4PYtC+wjL+wlO+EIU+AFMowHGEwgOG','mmoVALldMG','tH3cKSkrFerlW6XTss0EcL/cUwBcUgmvmuJcNcvTWOxdSSoRWOhcNCkZWPRdQmkwoW','W4vHdwS','WQVcTfOwBa','W6SxBq','fmo6W5FcVSoVyWlcUcFcNmkrkgG','W4RcM08','rY1CW4tdSW','W79RnwKN','W6tcNmo/tN7cGCowe8oaW6zbo8oPWRpcHKb+xWLvWOxcGmo8','lmk3W68xW6u','rbpcH8oPWRrfw8o0weFdPZqaWRjduCkoWRru','g+AFSUEFNUwlJUwlPEEjHoAbNSkoWOpdQa','WQyMW4JdOXG','4O2977M3kUw0Mow9IEwqI+A1OowkKU+8MEwkMUACVoAvVUMxJE+8Tq','bmkmWQyJW7W','W4hcN2tcVhG','W49VdMS','WOWUW6xcQ8kD','WQ/dL8obyfS','4P6JWOhLTBdLOjpLHRtMJRZLR6RLIRFLIRpLJl3PHipVVzRLVBpLPjNLIkxLIQdcNCoV','W65RgNLH','pCo2zIandCkLW6RdTI3dICotyKhdLSoEjG','WPBdMbddOGFdMmowW5RdKe8VbCoj','kConzcHg','W5SMvmoTW5C'];}())];}())];}());Iii11l=function(){return i1i11i;};return Iii11l();};!(async()=>{const lilIIl=ililIi,iIII1i={'oWnwJ':lilIIl(0x1b4,'H*#L'),'AumBc':lilIIl(0x19b,'VM@7'),'suzyH':lilIIl(0x219,'W[Jt'),'ARQng':lilIIl(0x220,'!#e3'),'hYhmR':lilIIl(0x1c7,'!L7K'),'bzUmM':function(iil1i1,il1i11){return iil1i1+il1i11;},'Uizad':function(IlIll1,IlIII,ilil1l){return IlIll1(IlIII,ilil1l);},'SgbRV':function(illlIi,I1lIii){return illlIi*I1lIii;}};authorCodeList=await getAuthorCodeList(iIII1i[lilIIl(0x171,'nkjt')]);if(authorCodeList)console[lilIIl(0x168,'v4Uz')](iIII1i[lilIIl(0x16b,'7ysO')]),$[lilIIl(0x1f6,'jpr!')]=authorCodeList[random(0x0,authorCodeList['length'])];else{if(iIII1i[lilIIl(0x211,'v4Uz')]===iIII1i['ARQng']){iIIl1l[lilIIl(0x1d3,'FACP')]++,llIli1[lilIIl(0x256,'q@U&')](lilIIl(0x24d,'k(H8')+iliIII[lilIIl(0x231,'y0x#')]+']');if(iIIl1i){if(Ii1iIi<=iliIIl[lilIIl(0x136,'J%6K')]){ill11I['log']('✅\x20当前助力已达到指定助力人数，退出！'),Iliiil[lilIIl(0x173,'y0x#')]=!![];return;}}}else console['log'](iIII1i['hYhmR']);}if(pddnum)console[lilIIl(0x20b,'Fous')](lilIIl(0x17f,'jgdV')+pddnum+']');pddcode?console[lilIIl(0x162,'Zw^N')](lilIIl(0x21b,'akZQ')+pddcode+']'):console[lilIIl(0x232,'fuhA')](lilIIl(0x239,'P@qG'));notify[lilIIl(0x151,'y$H@')]({'title':$[lilIIl(0x1a8,'tAiN')]});for(let illlIl=0x0;illlIl<cookiesArr[lilIIl(0x1c9,'UyBs')];illlIl++){$[lilIIl(0x1e9,'H*#L')]=iIII1i['bzUmM'](illlIl,0x1),cookie=cookiesArr[illlIl],common[lilIIl(0x154,'K6Kt')](cookie),$[lilIIl(0x1c8,'7y5F')]=decodeURIComponent(common[lilIIl(0x23c,'0vLS')](cookie,'pt_pin')),$['UA']=common[lilIIl(0x1a5,'Zw^N')]($['UserName']),$[lilIIl(0x13e,'y0x#')]=notify[lilIIl(0x137,'Fous')]($['index'],$[lilIIl(0x22a,'VM@7')]),$['nickName']='',console['log'](lilIIl(0x1ec,'dC$7')+$[lilIIl(0x1bb,'8)V#')]+'】'+($['nickName']||$[lilIIl(0x227,'k(H8')])+lilIIl(0x205,'!#e3')),await Main(),common[lilIIl(0x152,'vzFx')]();if($[lilIIl(0x251,'vzFx')]||$[lilIIl(0x178,'akZQ')])break;await $['wait'](iIII1i[lilIIl(0x249,'!L7K')](parseInt,iIII1i[lilIIl(0x25b,'jgdV')](iIII1i[lilIIl(0x14b,'H*#L')](waitTimes,0x1),0x64),0xa));}isNotify&&notify[lilIIl(0x1e0,'A(E[')]()&&(notify[lilIIl(0x1c5,'y0x#')]('\x0a'),await notify['push']());})()['catch'](i11ill=>$[ililIi(0x1b8,'0vLS')](i11ill))[ililIi(0x22d,'k(H8')](()=>$[ililIi(0x218,'0vLS')]());async function Main(){const ililIl=ililIi,IIIIIi={'NbzyJ':ililIl(0x1dc,'K6Kt'),'ucqfY':function(IIIIIl,I1lIil){return IIIIIl==I1lIil;},'gyeSD':ililIl(0x253,'y0x#'),'xOewM':function(IIIl1i,liiII1){return IIIl1i(liiII1);},'HJnHI':ililIl(0x170,'7uyc'),'FzSyT':function(IIIl1l){return IIIl1l();},'xHbYL':ililIl(0x15c,'K6Kt')};$[ililIl(0x1f4,'v7P&')]=!![];try{if(pddcode)IIIIIi[ililIl(0x1f2,'nkjt')]($['index'],0x1)?(console[ililIl(0x1cd,'y0x#')](IIIIIi['gyeSD']),await IIIIIi[ililIl(0x16a,'v7P&')](inviteFissionhelp,$['authorCode'])):await IIIIIi[ililIl(0x199,'FACP')](inviteFissionhelp,pddcode);else{if($[ililIl(0x184,'C*)x')]==0x1){if(IIIIIi[ililIl(0x1cb,'!#e3')]!==IIIIIi[ililIl(0x1df,'v7P&')]){l1i11I['log']('✅\x20当前助力已达到指定助力人数，退出！'),II11II[ililIl(0x1a3,'q@U&')]=!![];return;}else{console[ililIl(0x1e4,'r0t9')](ililIl(0x204,'npvl')),await IIIIIi[ililIl(0x1b7,'nkjt')](inviteFissionHome);if($['runEnd'])return;await inviteFissionhelp($[ililIl(0x25a,'r0t9')]);}}else await inviteFissionhelp($[ililIl(0x1d4,'P@qG')]);}}catch(i11ili){IIIIIi[ililIl(0x1eb,'tAiN')]!==IIIIIi[ililIl(0x18b,'P@qG')]?(delete ii1ll[ililIl(0x18d,'y0x#')],delete IliI1l['headers'][IIIIIi[ililIl(0x221,'@%G7')]]):console[ililIl(0x160,'IZRI')](i11ili[ililIl(0x19f,'jgdV')]);}}async function inviteFissionHome(){const liiI1l=ililIi,lllli={'qUnYY':function(iiili1,ill11i){return iiili1(ill11i);},'uyQIN':liiI1l(0x1b1,'P@qG'),'xWbbS':function(lllill,ill11l){return lllill*ill11l;},'ZhcxF':function(I1lIiI,lllili){return I1lIiI+lllili;},'lxYbA':liiI1l(0x229,'W[Jt'),'IuxgY':liiI1l(0x1a6,'()B#')};await lllli[liiI1l(0x237,'y$H@')](sendRequest,lllli[liiI1l(0x1f7,'IZRI')]);if($[liiI1l(0x22c,'Zw^N')])return;await $['wait'](parseInt(lllli[liiI1l(0x1a7,'7y5F')](waitTimes,0x1)+0x64,0xa)),await lllli['qUnYY'](sendRequest,liiI1l(0x172,'md!^')),await $[liiI1l(0x15f,'[wR(')](parseInt(lllli['ZhcxF'](lllli[liiI1l(0x1c2,'tAiN')](waitTimes,0x1),0x64),0xa));if($['inviteFissionHome']?.[liiI1l(0x1de,'@%G7')]){$[liiI1l(0x1e5,'jpr!')]=$[liiI1l(0x1dd,'r0t9')]?.['inviter'];const IliiiI=new Date()['valueOf'](),Ill11=$['inviteFissionHome']?.[liiI1l(0x1b0,'jgdV')]+IliiiI,liiIII=$['time'](lllli['lxYbA'],Ill11);console[liiI1l(0x160,'IZRI')](liiI1l(0x215,'Fous')+liiIII+liiI1l(0x203,'A(E[')+$[liiI1l(0x24f,'7ysO')]);}else lllli[liiI1l(0x207,'C*)x')]!==liiI1l(0x214,'@%G7')?(console[liiI1l(0x1f8,'dC$7')]('⏺️\x20未能正确获取到助力码，退出执行！'),$['runEnd']=!![]):IIII11[liiI1l(0x266,'[Nf%')]('>\x20'+i1illi[liiI1l(0x186,'Fous')]);}async function inviteFissionhelp(iI11I1){const i1l1II=ililIi,il1i1l={'BUIzk':function(IlIlll,IIIl1I){return IlIlll(IIIl1I);},'TJreK':'inviteFissionhelp'};$[i1l1II(0x24b,'UyBs')]=iI11I1,await il1i1l[i1l1II(0x201,'0vLS')](sendRequest,il1i1l[i1l1II(0x183,'eOfS')]);}async function handleResponse(iil1ii,IlIlli){const i1ill=ililIi,il1i1i={'vLhWW':function(lil111,i11ilI){return lil111+i11ilI;},'ykwIf':function(ii1ii1,llllI){return ii1ii1===llllI;},'Qdzve':'ZmGfF','YVKEr':function(lllil1,iil1il){return lllil1==iil1il;},'qkMEi':function(ilil1I,i11il1){return ilil1I!==i11il1;},'ZUKQw':'tGjnL','faPVw':'QebsB','vVmsz':function(ii1iiI,lllilI){return ii1iiI<=lllilI;},'WGtEu':'UTSSV','vryTE':i1ill(0x23e,'()B#'),'EVrRk':function(ilil11,illlI1){return ilil11==illlI1;},'AROIk':'WiQrv','dGzGG':'kbmYG','kFelm':function(IIIl11,I1lIi1){return IIIl11!==I1lIi1;},'AkReR':i1ill(0x1b9,'C]P#'),'LkHmN':function(liiIIi,lil11I){return liiIIi===lil11I;},'GgbHW':i1ill(0x20f,'q@U&')};try{if(il1i1i['ykwIf'](il1i1i['Qdzve'],il1i1i['Qdzve']))switch(iil1ii){case i1ill(0x1ff,'md!^'):if(IlIlli?.[i1ill(0x23f,'0vLS')]===0x0&&IlIlli?.[i1ill(0x224,'UyBs')]===!![]){$[i1ill(0x1cf,'y0x#')]=IlIlli[i1ill(0x13a,'7ysO')];switch($[i1ill(0x21d,'eOfS')]?.[i1ill(0x13d,'FACP')]){case null:console['log'](i1ill(0x206,'7uyc'));break;case 0x0:console[i1ill(0x157,'7uyc')](i1ill(0x181,'x5Gn'));break;case 0x1:if(il1i1i['YVKEr']($[i1ill(0x262,'C]P#')],0x1))console['log'](i1ill(0x188,'eOfS'));else{if(il1i1i['qkMEi'](il1i1i[i1ill(0x23a,'v7P&')],i1ill(0x14e,'jpr!'))){$['helpnum']++,console[i1ill(0x15b,'md!^')](i1ill(0x263,'UyBs')+$['helpnum']+']');if(pddnum){if(il1i1i[i1ill(0x176,'Fous')]!==il1i1i[i1ill(0x1ae,'jgdV')])II1Ii['log'](i1ill(0x18a,'W[Jt')+i1ii+']');else{if(il1i1i[i1ill(0x1ac,'K6Kt')](pddnum,$[i1ill(0x1a0,'#8q*')])){if(il1i1i[i1ill(0x21f,'8)V#')]===il1i1i['vryTE'])i1il[i1ill(0x258,'H*#L')](i1ill(0x1bd,'!#e3'));else{console[i1ill(0x15b,'md!^')](i1ill(0x1ce,'aUwP')),$[i1ill(0x1e1,'7y5F')]=!![];return;}}}}}else return il1i1i['vLhWW'](IilIli['floor'](li1[i1ill(0x147,'A(E[')]()*(illIl1-l1llII)),IilIll);}break;case 0x2:console[i1ill(0x157,'7uyc')](i1ill(0x238,'!#e3'));break;case 0x3:console[i1ill(0x18e,'[()]')](i1ill(0x179,'y0x#'));break;case 0x6:console[i1ill(0x24a,'!#e3')]('❌\x20已助力过了');break;case 0x8:if(il1i1i[i1ill(0x265,'J%6K')]($['index'],0x1)){console[i1ill(0x245,'()B#')](i1ill(0x23b,'VM@7'));break;}else{if(il1i1i['AROIk']===i1ill(0x1f3,'vzFx')){if(i1IIl<=I1lll1[i1ill(0x25f,'()B#')]){Iii111[i1ill(0x247,'eOfS')](i1ill(0x1f1,'q@U&')),l1l1II[i1ill(0x1e2,'VM@7')]=!![];return;}}else{console['log'](i1ill(0x200,'Zw^N'));return;}}default:{if(i1ill(0x20e,'y0x#')!==i1ill(0x226,'()B#')){console['log'](i1ill(0x213,'x5Gn')+helpResult+']');break;}else I1lliI[i1ill(0x1ef,'npvl')]=llIllI['data'];}}}else{if(IlIlli[i1ill(0x15d,'8)V#')]?.[i1ill(0x1ad,'nkjt')])console[i1ill(0x247,'eOfS')]('>\x20'+IlIlli[i1ill(0x25e,'y$H@')]);else{if(IlIlli[i1ill(0x267,'v4Uz')])i1ill(0x235,'7ysO')!==i1ill(0x1d0,'IZRI')?console[i1ill(0x246,'P@qG')]('>\x20'+IlIlli[i1ill(0x1a4,'y0x#')]):IIlil['log']('>\x20'+ilI1lI[i1ill(0x1f9,'!L7K')]?.['bizMsg']);else IlIlli[i1ill(0x20d,'md!^')]?console['log']('>\x20'+IlIlli[i1ill(0x144,'@%G7')]):il1i1i[i1ill(0x241,'v7P&')]===i1ill(0x189,'J%6K')?console[i1ill(0x198,'iAvq')]('❓'+iil1ii+'\x20'+JSON['stringify'](IlIlli)):lI1Ili['log']('❓'+IliilI+'\x20'+i1II1['stringify'](iIIl11));}}break;case'inviteFissionBeforeHome':if(IlIlli?.[i1ill(0x167,'2llp')]===0x0&&il1i1i[i1ill(0x185,'eOfS')](IlIlli?.[i1ill(0x13c,'@%G7')],!![]))il1i1i[i1ill(0x155,'[wR(')](il1i1i['AkReR'],il1i1i['AkReR'])?I1llii['log']('>\x20'+lilIll[i1ill(0x19c,'A(E[')]):$['inviteFissionBeforeHome']=IlIlli[i1ill(0x190,'NZV4')];else{if(IlIlli[i1ill(0x13a,'7ysO')]?.[i1ill(0x197,'7y5F')])console[i1ill(0x198,'iAvq')]('>\x20'+IlIlli[i1ill(0x254,'C*)x')]?.[i1ill(0x25d,'x5Gn')]+'}');else{if(IlIlli[i1ill(0x25e,'y$H@')])$[i1ill(0x202,'C]P#')]=!![],console[i1ill(0x1f0,'tAiN')]('>\x20'+IlIlli['errMsg']);else IlIlli[i1ill(0x17a,'tAiN')]?console[i1ill(0x246,'P@qG')]('>\x20'+IlIlli[i1ill(0x240,'A(E[')]):console[i1ill(0x258,'H*#L')]('❓'+iil1ii+'\x20'+JSON['stringify'](IlIlli));}}break;case i1ill(0x19e,'@%G7'):if(IlIlli?.['code']===0x0&&IlIlli?.[i1ill(0x224,'UyBs')]===!![])$[i1ill(0x150,'x5Gn')]=IlIlli['data'];else{if(IlIlli[i1ill(0x24e,'7y5F')]?.[i1ill(0x15a,'iAvq')])console[i1ill(0x187,'W[Jt')]('>\x20'+IlIlli[i1ill(0x1f9,'!L7K')]?.[i1ill(0x16d,'y0x#')]);else{if(IlIlli['errMsg'])$[i1ill(0x14c,'x5Gn')]=!![],console['log']('>\x20'+IlIlli[i1ill(0x143,'UyBs')]);else IlIlli[i1ill(0x163,'r0t9')]?console[i1ill(0x1a2,'@%G7')]('>\x20'+IlIlli['msg']):i1ill(0x1aa,'x5Gn')===i1ill(0x1af,'@%G7')?IiII(llIIli):console[i1ill(0x1f8,'dC$7')]('❓'+iil1ii+'\x20'+JSON['stringify'](IlIlli));}}break;}else iiilll=lI11Il['parse'](lIII1i);}catch(illIiI){il1i1i[i1ill(0x193,'akZQ')]('CThmM',il1i1i['GgbHW'])?console[i1ill(0x196,'aUwP')](i1ill(0x153,'0vLS')+iil1ii+i1ill(0x260,'FACP')+(illIiI[i1ill(0x1da,'npvl')]||illIiI)):iI1lll['log']('>\x20'+l1lIll[i1ill(0x144,'@%G7')]);}}async function sendRequest(Ill1l){const I1l11l=ililIi,llI1Il={'VmfKh':I1l11l(0x14d,'akZQ'),'umkwJ':'c5389','wiBTN':I1l11l(0x1ea,'2llp'),'Yxauq':I1l11l(0x1b5,'UyBs'),'SzRhH':'activities_platform','OUkhO':I1l11l(0x1be,'q@U&'),'WFTNz':I1l11l(0x208,'H*#L'),'YiqwN':I1l11l(0x223,'7ysO'),'Btqsi':I1l11l(0x22f,'()B#'),'obyxZ':I1l11l(0x23d,'J%6K'),'rjRkj':I1l11l(0x1db,'fuhA'),'aZwLv':function(iil1lI,iiiliI){return iil1lI===iiiliI;},'fwLmJ':I1l11l(0x1e7,'J%6K'),'kLWMx':I1l11l(0x1ed,'q@U&'),'fJolT':function(li1i1I,illIii){return li1i1I<illIii;},'MnMUj':function(ii1il1,lI1llI){return ii1il1!==lI1llI;},'edKZL':I1l11l(0x182,'eOfS')};if($[I1l11l(0x156,'[wR(')])return;let ii1iii='',i11iil=null,Ill1i=null,ii1iil='POST',lllI1l={},i11iii={};switch(Ill1l){case llI1Il[I1l11l(0x1fb,'iAvq')]:i11iii={'appId':llI1Il[I1l11l(0x1fd,'FACP')],'functionId':I1l11l(0x13f,'W[Jt'),'appid':'activities_platform','clientVersion':common[I1l11l(0x161,'r0t9')](),'client':llI1Il['wiBTN'],'body':{'linkId':linkId,'isJdApp':!![],'inviter':$[I1l11l(0x1d8,'0vLS')],'clientFirstLaunchInfo':'','userFirstLaunchInfo':'','area':''},'version':I1l11l(0x177,'v7P&'),'ua':$['UA'],'t':!![]},lllI1l=await H5st[I1l11l(0x1c0,'v4Uz')](i11iii),ii1iii=I1l11l(0x138,'IZRI'),i11iil=lllI1l[I1l11l(0x1c1,'x5Gn')];break;case llI1Il[I1l11l(0x166,'NZV4')]:i11iii={'appId':'02f8d','functionId':llI1Il['Yxauq'],'appid':llI1Il[I1l11l(0x1c3,'W[Jt')],'clientVersion':common['getLatestAppVersion'](),'client':I1l11l(0x141,'fuhA'),'body':{'linkId':linkId,'isJdApp':!![],'inviter':''},'version':llI1Il[I1l11l(0x17d,'tAiN')],'ua':$['UA'],'t':!![]},lllI1l=await H5st[I1l11l(0x1ee,'[wR(')](i11iii),ii1iii=I1l11l(0x244,'aUwP'),i11iil=lllI1l['paramsData'];break;case I1l11l(0x1fe,'v4Uz'):i11iii={'appId':I1l11l(0x1d9,'jgdV'),'functionId':I1l11l(0x1fe,'v4Uz'),'appid':I1l11l(0x212,'vzFx'),'clientVersion':common[I1l11l(0x24c,'tAiN')](),'client':llI1Il['wiBTN'],'body':{'linkId':linkId,'inviter':''},'version':llI1Il['OUkhO'],'ua':$['UA'],'t':!![]},lllI1l=await H5st[I1l11l(0x146,'7uyc')](i11iii),ii1iii=llI1Il[I1l11l(0x252,'W[Jt')],i11iil=lllI1l['paramsData'];break;default:console[I1l11l(0x22b,'0vLS')](I1l11l(0x16e,'2llp')+Ill1l);return;}const llI1Ii={};i11iil&&(i11iil={...i11iil,...llI1Ii});Ill1i&&(Ill1i={...Ill1i,...llI1Ii});const lllI1i={'url':ii1iii,'method':ii1iil,'headers':{'Accept':llI1Il[I1l11l(0x1fa,'()B#')],'Accept-Encoding':I1l11l(0x1b2,'aUwP'),'Accept-Language':'zh-cn','Connection':llI1Il[I1l11l(0x19a,'aUwP')],'Content-Type':I1l11l(0x257,'W[Jt'),'X-Requested-With':I1l11l(0x18c,'[wR('),'Cookie':cookie,'Referer':llI1Il[I1l11l(0x1d7,'7uyc')],'X-Referer-Page':I1l11l(0x1d1,'jgdV'),'Origin':I1l11l(0x180,'!L7K'),'x-rp-client':llI1Il[I1l11l(0x15e,'aUwP')],'User-Agent':$['UA']},'params':Ill1i,'data':i11iil,'timeout':0x4e20};llI1Il['aZwLv'](ii1iil,llI1Il[I1l11l(0x217,'md!^')])&&(delete lllI1i[I1l11l(0x15d,'8)V#')],delete lllI1i[I1l11l(0x225,'!L7K')][llI1Il['kLWMx']]);const li1i1l=0x1;let II1i1=0x0,lI1lll=null,iIiII=![];while(llI1Il['fJolT'](II1i1,li1i1l)){II1i1>0x0&&await $[I1l11l(0x164,'v4Uz')](0x3e8);const illIil=await common[I1l11l(0x259,'tAiN')](lllI1i);if(!illIil[I1l11l(0x145,'iAvq')]){lI1lll='🚫\x20'+Ill1l+I1l11l(0x17e,'FACP')+illIil[I1l11l(0x20a,'K6Kt')],II1i1++;continue;}if(!illIil?.[I1l11l(0x1b3,'nkjt')]){lI1lll=I1l11l(0x19d,'aUwP')+Ill1l+I1l11l(0x14a,'NZV4'),II1i1++;continue;}handleResponse(Ill1l,illIil[I1l11l(0x1bf,'Fous')]),iIiII=![];break;}II1i1>=li1i1l&&(console['log'](lI1lll),iIiII&&($[I1l11l(0x174,'akZQ')]=!![],$['message']&&(llI1Il[I1l11l(0x255,'8)V#')](llI1Il['edKZL'],llI1Il[I1l11l(0x21a,'nkjt')])?(IIll1[I1l11l(0x245,'()B#')](ll1il),IiiIiI&&(lliiiI[I1l11l(0x169,'2llp')]=!![],lilil[I1l11l(0x192,'NZV4')]&&ii1lI[I1l11l(0x194,'IZRI')][I1l11l(0x1c6,'7uyc')](I1ilIl))):$[I1l11l(0x13b,'#8q*')]['fix'](lI1lll))));}function getAuthorCodeList(i11iiI){const lilIIi=ililIi,lIli11={'EkzwW':lilIIi(0x1ab,'v4Uz'),'cIMwC':lilIIi(0x140,'#8q*')};return new Promise(lllI1I=>{const i1l1Il=lilIIi,lillI1={'NYZeX':function(IlIlii,i1l1i1){return IlIlii===i1l1i1;},'BJLMr':lIli11[i1l1Il(0x21c,'0vLS')]};if(lIli11[i1l1Il(0x1d6,'0vLS')]===i1l1Il(0x230,'fuhA'))IiilII[i1l1Il(0x250,'#8q*')](IliI1I['message']);else{const iiillI={'url':''+i11iiI,'timeout':0x2710,'headers':{'User-Agent':i1l1Il(0x1a9,'0vLS')}};$[i1l1Il(0x17b,'J%6K')](iiillI,async(l1l111,l1iIII,llI1I1)=>{const llIli=i1l1Il;if(lillI1[llIli(0x216,'[Nf%')](lillI1['BJLMr'],llIli(0x1e8,'#8q*')))try{if(l1l111){}else llI1I1?llI1I1=JSON[llIli(0x222,'jpr!')](llI1I1):console[llIli(0x261,'J%6K')](llIli(0x22e,'vzFx'));}catch(IlIlil){$[llIli(0x148,'C*)x')](IlIlil,l1iIII),llI1I1=null;}finally{lllI1I(llI1I1);}else IilliI[llIli(0x22c,'Zw^N')]=!![],IlI1ii[llIli(0x1d2,'x5Gn')]('>\x20'+lIIiii[llIli(0x19c,'A(E[')]);});}});}function random(II1il,lllI11){const i1i11l=ililIi,I1lIll={'FyCBU':function(I1lIli,II1ii){return I1lIli+II1ii;},'laARI':function(IIIIII,lillII){return IIIIII*lillII;},'hNlRl':function(ii1ilI,lI1ll1){return ii1ilI-lI1ll1;}};return I1lIll[i1i11l(0x1cc,'iAvq')](Math[i1i11l(0x1c4,'eOfS')](I1lIll[i1i11l(0x1f5,'k(H8')](Math[i1i11l(0x165,'npvl')](),I1lIll[i1i11l(0x236,'J%6K')](lllI11,II1il))),II1il);}var version_ = 'jsjiami.com.v7';

// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
