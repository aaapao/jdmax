/*
京东微信签到红包

红包仅可在微信小程序使用

cron:29 4 * * *

*/

const $ = new Env('京东微信签到红包')
var iｉl='jsjiami.com.v7';function iii1II(_0x314f39,_0x38504f){const _0x5043ff=Iii11l();return iii1II=function(_0x37c255,_0x4107d5){_0x37c255=_0x37c255-0x183;let _0x5d9bd9=_0x5043ff[_0x37c255];if(iii1II['AudbaB']===undefined){var _0x52c218=function(_0x55d697){const _0x3b71f2='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x13a61c='',_0x123bff='';for(let _0x198ac2=0x0,_0x585b92,_0x1365e0,_0x32af2f=0x0;_0x1365e0=_0x55d697['charAt'](_0x32af2f++);~_0x1365e0&&(_0x585b92=_0x198ac2%0x4?_0x585b92*0x40+_0x1365e0:_0x1365e0,_0x198ac2++%0x4)?_0x13a61c+=String['fromCharCode'](0xff&_0x585b92>>(-0x2*_0x198ac2&0x6)):0x0){_0x1365e0=_0x3b71f2['indexOf'](_0x1365e0);}for(let _0x2d7502=0x0,_0x46619b=_0x13a61c['length'];_0x2d7502<_0x46619b;_0x2d7502++){_0x123bff+='%'+('00'+_0x13a61c['charCodeAt'](_0x2d7502)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x123bff);};const _0x13fa38=function(_0x235f84,_0x1c17b5){let _0x5bd304=[],_0x3ae79b=0x0,_0x484f55,_0x116742='';_0x235f84=_0x52c218(_0x235f84);let _0x30f0c6;for(_0x30f0c6=0x0;_0x30f0c6<0x100;_0x30f0c6++){_0x5bd304[_0x30f0c6]=_0x30f0c6;}for(_0x30f0c6=0x0;_0x30f0c6<0x100;_0x30f0c6++){_0x3ae79b=(_0x3ae79b+_0x5bd304[_0x30f0c6]+_0x1c17b5['charCodeAt'](_0x30f0c6%_0x1c17b5['length']))%0x100,_0x484f55=_0x5bd304[_0x30f0c6],_0x5bd304[_0x30f0c6]=_0x5bd304[_0x3ae79b],_0x5bd304[_0x3ae79b]=_0x484f55;}_0x30f0c6=0x0,_0x3ae79b=0x0;for(let _0x47c48b=0x0;_0x47c48b<_0x235f84['length'];_0x47c48b++){_0x30f0c6=(_0x30f0c6+0x1)%0x100,_0x3ae79b=(_0x3ae79b+_0x5bd304[_0x30f0c6])%0x100,_0x484f55=_0x5bd304[_0x30f0c6],_0x5bd304[_0x30f0c6]=_0x5bd304[_0x3ae79b],_0x5bd304[_0x3ae79b]=_0x484f55,_0x116742+=String['fromCharCode'](_0x235f84['charCodeAt'](_0x47c48b)^_0x5bd304[(_0x5bd304[_0x30f0c6]+_0x5bd304[_0x3ae79b])%0x100]);}return _0x116742;};iii1II['qxJzyu']=_0x13fa38,_0x314f39=arguments,iii1II['AudbaB']=!![];}const _0x3a1316=_0x5043ff[0x0],_0xd79254=_0x37c255+_0x3a1316,_0x3696da=_0x314f39[_0xd79254];return!_0x3696da?(iii1II['IHmDQG']===undefined&&(iii1II['IHmDQG']=!![]),_0x5d9bd9=iii1II['qxJzyu'](_0x5d9bd9,_0x4107d5),_0x314f39[_0xd79254]=_0x5d9bd9):_0x5d9bd9=_0x3696da,_0x5d9bd9;},iii1II(_0x314f39,_0x38504f);}const IliilI=iii1II;if(function(Ii1iII,l1i11I,II11II,Ii1iI1,lilIli,Iliili,Iliill){return Ii1iII=Ii1iII>>0x4,Iliili='hs',Iliill='hs',function(IIII11,i1illi,i1illl,I1llil,I1llii){const lI1Ili=iii1II;I1llil='tfi',Iliili=I1llil+Iliili,I1llii='up',Iliill+=I1llii,Iliili=i1illl(Iliili),Iliill=i1illl(Iliill),i1illl=0x0;const lilIll=IIII11();while(!![]&&--Ii1iI1+i1illi){try{I1llil=parseInt(lI1Ili(0x1df,'c]Ze'))/0x1+-parseInt(lI1Ili(0x19c,'Dt*6'))/0x2*(parseInt(lI1Ili(0x1bf,'30jI'))/0x3)+-parseInt(lI1Ili(0x18c,'0Fb@'))/0x4+-parseInt(lI1Ili(0x1ae,'E%6o'))/0x5+-parseInt(lI1Ili(0x1ff,'EbMp'))/0x6*(parseInt(lI1Ili(0x1aa,'#f1g'))/0x7)+parseInt(lI1Ili(0x1fa,'ko3r'))/0x8+parseInt(lI1Ili(0x1c4,'#wq#'))/0x9*(parseInt(lI1Ili(0x1f1,'MSUe'))/0xa);}catch(l1i111){I1llil=i1illl;}finally{I1llii=lilIll[Iliili]();if(Ii1iII<=Ii1iI1)i1illl?lilIli?I1llil=I1llii:lilIli=I1llii:i1illl=I1llii;else{if(i1illl==lilIli['replace'](/[dWRBNhAxtPSgbLJnrpkOe=]/g,'')){if(I1llil===i1illi){lilIll['un'+Iliili](I1llii);break;}lilIll[Iliill](I1llii);}}}}}(II11II,l1i11I,function(iliII1,II11I1,Iii11I,Iil1II,iIIl1I,I1iIli,lI1Ill){return II11I1='\x73\x70\x6c\x69\x74',iliII1=arguments[0x0],iliII1=iliII1[II11I1](''),Iii11I=`\x72\x65\x76\x65\x72\x73\x65`,iliII1=iliII1[Iii11I]('\x76'),Iil1II=`\x6a\x6f\x69\x6e`,(0x16b7f5,iliII1[Iil1II](''));});}(0xc20,0xc9511,Iii11l,0xc4),Iii11l){}function Iii11l(){const llIllI=(function(){return[...[iｉl,'pSjPsjhAitkaOmWLigbn.JegcokdmN.evrW7xBRp==','D8ozggPHW7tdQa','xGn3hG','WPRdRSoTW6S','sxRdQt7cOCk0xSkhsmoeW7hcKtefumoMp8oMW67dGSoh','4P+5W7lMN4pNNylORRxMSiST','WQqVySoJWQZcHSkvgCoWzSk2W4KMWR/cN3HYACo/bSkeWO7dRmors8kSW4NcIXn7WOqAEHaLWRqhWPWCWQS','W6q/WO0','W6GfCCkp','5BE66k+i572I6lwK6lYM6l+B6kcA5B2e5yQc6lw+5y+n','57M35y2G5lMS5yY55z6I5B+k5l6k5BcT56Mg5BQj5lYe55sn','BmoMoCo+oNhdJgG/iuj6WQhcK8kCkHn4WQlcK8kL','WQuqW5RcVG','n1xcVvxcMY/cKCkStW4','WOlcMvhcOmovW4dcNu1MWRa','6lAH5y6M5PEn5Ps9','z1Gumq7cU8oJgW','W6qJsbrUvG','WOhcNCoH','irKte1T8tmk2i8owCmke','WRmqvSk8W5iaWOSzW5CIWOJcUN7dVJrScSktb3pdKCoLW78v','BJTVW5lcOG','W6mWwrq','WPpcQsy8b1tdIc7cRCoRW6RcOaVdS8o9WRnfg1bYW6NcKmo3W6edWRTMsWBdPmoZWOu','WOFdQCkMWP1Mjx5IaSoAb2CnmSomeMWmWQq6WOdcHJWm','F8kmpIT9mCkIgfnh','WQFdH8o6m8kKbmoYWPxdI8kvoa','WPNcGmoZcq','8l6RUG0','WPJdPCo3W7qQcmk5W5y','4PUMWPlOHRxLRBlKUjFOVk3OO5hPLiZPMkdMLOpPLklORklNVyNPL7xORlu','WP/dRSoXW7WncCkXW4ORauBcJMKLWRHtWQH4wmkuWPG','WP3dPmoZ','W7FdNmooW5ldTCo4cmoYW4hdHZVdH8kP','yKWtadtcTG','WQhORQBMSRNLPkhOTOCA4PYlroAxOEwqR+w5LoAuKoAoMW','vbxcRvJcTcZcN8oOe0vLWRTLW7zlW6yVW5reWR8pWPBcTWxdMhvKbHuEWQBcULvwWONcUYBdGmk8W5bnW5VdPCogWQtcJWqBgNv2W5axESkWEc/cNmkMW5RdNSoWWPmOnCkmWRy4W5aCW4ldH1vAW4f9wSkqC8kIrSotW63cKSkbcSkvDSkwWQffp2FcJYHqdvddQmkjwGWJWPhdKCkrixr1kCojW7BcPw9cW5q9i8kiaCo6DCkOW68BW5NcOH7dGdWOW6zvW7XIftPSkYTGW6ddJSkrx8kJWQTnWQOYEJa7W49HsSkYnJXGWPuDW6CU','W6rrWPddPCk+u1TSj3aSDSoo','WOpcK8oRcq','jcLMWQeIW7W','WQzOWRBdS8kVpbW','yeWolq','WP1xWQtdT8kV'],...(function(){return[...['poIVHUAZU+wNRoI3SZpINzRdGG','WRJdR8kM','WQFdKCkCmmkuW7P7W7VdS1uLzW','DcdcQHldGCo3W5rVWO/cJCkWW65W','W7RcR8k0WODmjMa9p8oragWvhSo3dLOlWQCEWPdcQsata8ohxW','A8kkWPZcKG','W4pdNCoZgaXZtSkcdxtdMSoWBG8Ol8oSWO1UxCoSfbO','jI1LWQm','W7ZdM8omW5ldTCo5cmoEW6pdTIxdRCkR','W4lcISotWPhcMa','zv5qta','WOhcNXToEG','WRpdPCk1WRbkjxH7cmoIa2umca','aCo3cW','WQpcJgBdOeddRa','W4VdTe16uaBcKd/cVCo/W7RcHZy','W5WRmdFcICoz','ASkmoXn9mCkL','WP7dHxRdSh/dJqpdOa','4PYvWPRMNOBOGz/MRjlNOz3LPRNNKA7cHa','W6pcKSk7A8oHumkqWRhdHmkxfsZdJa','WOhcNvhcJa','8k+AUSk4','W5JcS8kz','44gy6lwQ5y+/','WPBcMgn0rW','DvRdUb7cTq','WPBcHgC','W6u+qHL/uSk6','W7OnhqhcRW','CCkhkqPTjSk0cG','hsTaWOlcVf4','WQ5qiCoiamkgWPjso0RdR25+','DSk5nSoWfdpdJW','WOFcJYPVAYaMzSk8zbFdMmkDgMhcUgBcGWS4qa','aJTnWOBcRuuy','rCopWOJcLSkCW5aS','W70SW7dcGmo2AK1IdZldMalcTq','zSkfngXZWQ1TW4i','WRNdJCoQ','W58OlrtcHq','CIFcQvlcMCklWPHVWP4','W7FWTBo3WRpOV7VOO6dNUQpMNjFcJq','W4SrW7q'],...(function(){return['6i+Q5B6u57UT5y2kpa','W7OzW5NdM8oG','W6m+qXa','WP/cHxzEr8oG','EWj+W77cJ2W/CCk2','WOZdL8oyj8kI','k1RdNmk8WRPCWPy','ASo3kmoQgY7cJIG6ixnJWQFcM8kqod91WQ7cL8kPW5egjSo1W6HpWRihp0XkW6WbW6BcQCkqWRldLCogW7BcU8oac0ZcHSoIjmoVWOpcOSktkqj/W4JdH1FdNxRdLXlcNCk1','ymocW4JdTG','FLWyiqJcT8oJeCkpbWuuWQBcVf7dGCo4yCkFeM0','kmkfxYGYWQlcVCkMWQldRCodW4SJ','WO3dNKVdO0ldGG','eSoHhmkBfG','44oH5O2B56AU44kj6k6O5ysK6i2R5y2ZhGTQWOPVkW','WR5Lh0qOa8oIW6ldTSoTWOHsFW','iIDjWOVcI1KgtM/dMCkReaf+W7Cdya/dGX/cL8o9WPldTG','5Awlna3OJzdLVlFNUz/LJ7i9','WQVcGg/dShFdUXydltBdMmoBk0tdN8kRBdWqWQtcLW','WPimx8kxW78l','W6O0xGz7vmkX','W5dcJmocC8ogWQbfWPVdRN0NzW','c0BdVutcMq','WQS+ySoAWRhdKmotwmo0vCkWWOK/W7tcM2G','W6VdJ8kioWe','WRb8WRRdUSkX','EGnIW5lcJ28','W4iXoq','WQryWPOyB8kbWO3cSvOEWOSBWR0','WPdcI2v4xq','ganBWPi','WQdcGCki','WRJdH8o+iCk3b8ob','ENO5WRm7W5/cSNFdGq','qmoJWQdcMSk9W60P','fs9AWOq','56675yUFW4q','CSo0rq','qhRdUbBcNmk2wSkgBCovW5pcIISD','j8ocl8kboSoaW7xcL8oakJ7dTeBcGSk0E8kwW4BdM8obW75mbmkzW4pdHCk5kmo/W77dHSkDlexcHmo/W590WRLmWPeLBf1fWPnXjw7cPSkyW5HldsVdJSo9amoFfCkFgazfamopE1v1vCkSW77cLCo+WPKqvbxdK8kxv3DpWOuGlhRdRWxdQLNdOLNdOMJdUCkfWP9gW7RcNSoFW4JcSCoQWOVdUGGwWRL4W70tWPeYWOJdL192WQPMWOeTzmoRcX7cO8k4W58jcmkvWR8yW6xcLMlcNhNdLSkbW5n7WQaFtqr2W7BcSrfKeSkjyeFdPdXFW6BdT8oAW6L7W5WOgWr+WOeKW4vevt12WR5sq3lcHmkWWRevWR0HraCqjmoJWRe6W6xcHCoYdCodWOqwW6ldGmo9WOLes3pcMrKmsr7dLSkxW6pcRmkDD8owWQGFautcR0BdTgXjWR95rSoSDxJcT2b+mConAmoaFdSpW6ddG38/WQTJfM7dM2ldHSoGWR7cVYVcOJ1MgCo2oCosphxcLWDsW6SNeL3cUmoXW7r7W7boy1rPimoZWPxdSmkAeq8mW7K4W7jXhSkhWQC0b0zr','4P2qeEIgO+AFSEI8HUIHN+McGEwlKUs5UoMxREIUPSk/','W43ORixMS4tLKQhLU7e/'];}())];}())];}());Iii11l=function(){return llIllI;};return Iii11l();};const jdCookie=require(IliilI(0x1d9,'tUFA')),common=require(IliilI(0x1fd,'!4tK')),notify=require(IliilI(0x1fb,'ep(n'));let taskThreads=process[IliilI(0x1d3,'LQvj')]['jd_wechat_signRedpacket_threads']||'1';const runInterval=process[IliilI(0x1c2,'EbMp')][IliilI(0x1e3,'ng**')]||IliilI(0x1fc,'rwaw'),isNotify=(process['env']['jd_wechat_signRedpacket_notify']||process[IliilI(0x193,'Fdpc')]['jd_wechat_signRedpacket_Notify'])===IliilI(0x1e7,'!4tK'),pinFilter=(process['env']['jd_wechat_signRedpacket_pinFilter']||'')['split']('@');let cookiesArr=Object[IliilI(0x1cf,'[t7O')](jdCookie)[IliilI(0x18f,'w0XZ')](i1il=>jdCookie[i1il])['filter'](lI1Il1=>lI1Il1);!cookiesArr[0x0]&&($['msg']($[IliilI(0x1f2,'!4tK')],IliilI(0x1b1,'[t7O')),process['exit'](0x1));!(async()=>{const i1II1=IliilI;notify['config']({'title':$[i1II1(0x1fe,'#wq#')]}),await Main(),isNotify&&notify[i1II1(0x1e5,'Vcd1')]()&&await notify[i1II1(0x1d8,'MSUe')]();})()[IliilI(0x1c0,'Fdpc')](lilIi1=>$[IliilI(0x1a7,'Fdpc')](lilIi1))[IliilI(0x199,'xgEO')](()=>$[IliilI(0x1a6,'KUbN')]());async function Main(){const iIIl11=IliilI,IiilII={'AJvoy':function(IliI1I,lI1Iii){return IliI1I(lI1Iii);},'yaxOr':function(i1li,li1II){return i1li>li1II;},'mGOAr':function(IliI11,i1ll){return IliI11!==i1ll;},'ODqtP':iIIl11(0x1ea,'12f%'),'PikRS':iIIl11(0x1d6,'MSUe'),'huTEC':function(i1l1lI,i1iliI){return i1l1lI>i1iliI;},'DpaHP':'\x20➜\x20'};try{try{const IllII1=IiilII['AJvoy'](parseInt,taskThreads);IiilII[iIIl11(0x1bc,'hmkN')](IllII1,0x0)&&IiilII['mGOAr'](IllII1,0x1)&&(taskThreads=IllII1);}catch{taskThreads=0x1;}taskThreads=Math['min'](taskThreads,0xa),$['waitTime']=null;if(runInterval)try{const I1iIil=IiilII['AJvoy'](parseInt,runInterval);I1iIil>=0x0&&($[iIIl11(0x19e,'0lgP')]=I1iIil);}catch{console[iIIl11(0x1c8,'GgoJ')](IiilII['ODqtP']);}console[iIIl11(0x1be,'[plE')](IiilII[iIIl11(0x1bb,'@v$u')]),$[iIIl11(0x1d0,'!mRK')]=[],await common[iIIl11(0x18a,'$UeS')](taskThreads,cookiesArr,taskFnc),$[iIIl11(0x188,'[plE')]=![];IiilII[iIIl11(0x183,'Eyse')]($[iIIl11(0x19a,'Eyse')][iIIl11(0x1f3,'#wq#')],0x0)&&(cookiesArr=cookiesArr[iIIl11(0x186,'q7U8')]((lI1Iil,lilIiI)=>!$[iIIl11(0x1d7,'zghD')][iIIl11(0x196,'Vcd1')](lilIiI+0x1)),$[iIIl11(0x1ad,'6z^$')]=[]);const I1iIii=notify[iIIl11(0x1da,'EAFt')]();I1iIii&&(console['log'](iIIl11(0x1a2,'$UeS')+I1iIii['replace'](/：/g,IiilII['DpaHP'])),isNotify&&await notify[iIIl11(0x1ce,'#HTD')]());}catch(i1l1I){console['log'](iIIl11(0x1cb,'#f1g')+i1l1I);}}async function taskFnc(IiilIi,IiilIl){const l1l1I1=IliilI,iii1Ii={'YuUut':function(i1l1li,i1ilii){return i1l1li===i1ilii;},'TSCsH':function(iIIII1,i1l1ll){return iIIII1===i1l1ll;},'JZbmN':l1l1I1(0x1c1,'#wq#'),'WaUMK':l1l1I1(0x1ca,'12f%'),'qvsfb':l1l1I1(0x1ab,'zghD'),'fMcEC':l1l1I1(0x1f0,'tUFA'),'NXoeO':l1l1I1(0x1b8,'yE4T'),'KWecm':function(I1iIiI,li1I1){return I1iIiI<li1I1;},'REtDF':function(i1ilil,lilIii){return i1ilil(lilIii);},'TJfBl':l1l1I1(0x1af,'$UeS'),'cAxAV':function(i1ill1,iIIl1l){return i1ill1>iIIl1l;},'rJNSO':l1l1I1(0x194,'KUbN'),'uQNVk':l1l1I1(0x1e4,'ep(n')};if($[l1l1I1(0x1ee,'6z^$')])return{'runEnd':!![]};const iii1Il=iii1Ii[l1l1I1(0x192,'!mRK')](decodeURIComponent,common[l1l1I1(0x184,'ep(n')](IiilIi,iii1Ii[l1l1I1(0x1f6,'hmkN')])),lI1IiI=l1l1I1(0x190,'#wq#')+IiilIl+'】'+iii1Il+'：',i1lI=notify[l1l1I1(0x1dd,'KUbN')](IiilIl,iii1Il);if(iii1Ii['cAxAV'](pinFilter[l1l1I1(0x197,'#5t%')],0x0)&&(pinFilter['includes'](iii1Il)||pinFilter[l1l1I1(0x1e9,'[t7O')](encodeURIComponent(iii1Il)))){i1lI[l1l1I1(0x1a3,'Weq0')](l1l1I1(0x1d5,'xLG]')),console['log'](i1lI[l1l1I1(0x1ba,'gLSm')]()),$[l1l1I1(0x1b5,'q7U8')][l1l1I1(0x201,'c]Ze')](IiilIl);return;}const IlI1l=await common[l1l1I1(0x1c9,'!mRK')](IiilIi);if(!IlI1l&&iii1Ii[l1l1I1(0x1b0,'12f%')](typeof IlI1l,iii1Ii['rJNSO'])){console[l1l1I1(0x1ec,'[t7O')](lI1IiI+l1l1I1(0x1db,'KUbN')),$[l1l1I1(0x1eb,'[t7O')][l1l1I1(0x1f5,'6z^$')](IiilIl);return;}await iii1Ii[l1l1I1(0x200,'@I3(')](i1l11,iii1Ii['uQNVk']);if($[l1l1I1(0x1bd,'xLG]')])return{'runEnd':!![]};if($[l1l1I1(0x1dc,'6z^$')])await $[l1l1I1(0x1d4,'^odi')]($['waitTime']);async function lilIil(llIli1,iliIII){const I1iIll=l1l1I1;try{switch(llIli1){case I1iIll(0x1b3,'#5t%'):if(iii1Ii[I1iIll(0x1a9,'0Fb@')](iliIII[I1iIll(0x1ac,'LVzG')],0x0)&&iii1Ii[I1iIll(0x195,'[plE')](iliIII['subCode'],0x0))console[I1iIll(0x1de,'!4tK')](lI1IiI+I1iIll(0x1c7,'EbMp')+iliIII[I1iIll(0x1c6,'#5t%')]['signDays']+I1iIll(0x1b4,'f!19')+iliIII[I1iIll(0x1e2,'KUbN')][I1iIll(0x1e6,'0Fb@')]+'元'),i1lI['insert'](I1iIll(0x1a4,'TN9f')+iliIII['data']['rewardValue']+'元');else iliIII[I1iIll(0x1cd,'E%6o')]?console[I1iIll(0x19f,'0Fb@')](lI1IiI+'\x20'+iliIII[I1iIll(0x1b7,'KUbN')]):console['log']('❓'+llIli1+'\x20'+JSON[I1iIll(0x1a8,'xLG]')](iliIII));break;}}catch(iIIl1i){console['log'](I1iIll(0x18b,'rwaw')+llIli1+I1iIll(0x1cc,'!4tK')+(iIIl1i[I1iIll(0x1c3,'0Fb@')]||iIIl1i));}}async function i1l11(I1lllI){const I1lliI=l1l1I1;if($[I1lliI(0x1b6,'euxa')])return;let ill111='',Iliil1=null,i1III=null,Ii1iIi=iii1Ii['JZbmN'];switch(I1lllI){case I1lliI(0x1e0,'euxa'):ill111=I1lliI(0x1d2,'gLSm'),Iliil1=iii1Ii[I1lliI(0x1a5,'Weq0')];break;default:console[I1lliI(0x1f8,'ep(n')](I1lliI(0x1d1,'w0XZ')+I1lllI);return;}const iliIIl={'url':ill111,'method':Ii1iIi,'headers':{'Cookie':IiilIi,'Referer':iii1Ii[I1lliI(0x1a0,'[plE')],'User-Agent':iii1Ii[I1lliI(0x1e1,'xLG]')]},'params':i1III,'data':Iliil1,'timeout':0x7530};Ii1iIi===I1lliI(0x185,'12f%')&&(delete iliIIl[I1lliI(0x18d,'EAFt')],delete iliIIl['headers'][iii1Ii['NXoeO']]);const Ii1iIl=0x1;let iliIIi=0x0,ill11I=null,Iliiil=![];while(iii1Ii[I1lliI(0x1b9,'ko3r')](iliIIi,Ii1iIl)){const li1Il=await common[I1lliI(0x189,'Vcd1')](iliIIl);if(!li1Il[I1lliI(0x19b,'#5t%')]){ill11I=I1lliI(0x1e8,'KUbN')+I1lllI+I1lliI(0x1f7,'#f1g')+li1Il[I1lliI(0x191,'Fdpc')],iliIIi++;continue;}if(!li1Il['data']){ill11I=I1lliI(0x18e,'ko3r')+I1lllI+I1lliI(0x1ef,'LQvj'),iliIIi++;continue;}await lilIil(I1lllI,li1Il['data']),Iliiil=![];break;}iliIIi>=Ii1iIl&&(console['log'](ill11I),Iliiil&&($[I1lliI(0x1f4,'hmkN')]=!![]));}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
