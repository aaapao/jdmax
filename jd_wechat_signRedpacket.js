/*
京东微信签到红包

红包仅可在微信小程序使用

cron:29 4 * * *

*/

const $ = new Env('京东微信签到红包')
var iｉl='jsjiami.com.v7';const i1l1Ii=iii1II;(function(lilIIi,i1l1Il,llIli,i1i11l,i1i11i,II11l1,Iil1lI){return lilIIi=lilIIi>>0x1,II11l1='hs',Iil1lI='hs',function(IiiliI,iii1iI,llIll,il1iII,iilli){const iIIiil=iii1II;il1iII='tfi',II11l1=il1iII+II11l1,iilli='up',Iil1lI+=iilli,II11l1=llIll(II11l1),Iil1lI=llIll(Iil1lI),llIll=0x0;const IlllIl=IiiliI();while(!![]&&--i1i11l+iii1iI){try{il1iII=-parseInt(iIIiil(0x149,'m55&'))/0x1*(parseInt(iIIiil(0x139,'uyOd'))/0x2)+-parseInt(iIIiil(0x1b4,'trtX'))/0x3+-parseInt(iIIiil(0x1ce,'8j9r'))/0x4*(parseInt(iIIiil(0x1d8,'E4vc'))/0x5)+parseInt(iIIiil(0x1e2,'RKwj'))/0x6+parseInt(iIIiil(0xe8,'m9E['))/0x7*(parseInt(iIIiil(0x17b,'8NWO'))/0x8)+parseInt(iIIiil(0x1cf,'hR7O'))/0x9+-parseInt(iIIiil(0x1a3,'hR7O'))/0xa*(-parseInt(iIIiil(0x190,'7RJK'))/0xb);}catch(II11lI){il1iII=llIll;}finally{iilli=IlllIl[II11l1]();if(lilIIi<=i1i11l)llIll?i1i11i?il1iII=iilli:i1i11i=iilli:llIll=iilli;else{if(llIll==i1i11i['replace'](/[bJPhBTpMHlVYXKGefLQICW=]/g,'')){if(il1iII===iii1iI){IlllIl['un'+II11l1](iilli);break;}IlllIl[Iil1lI](iilli);}}}}}(llIli,i1l1Il,function(lI1IIi,I1l11I,Ilil1l,iIIiii,iilll,il1iI1,IlllIi){return I1l11I='\x73\x70\x6c\x69\x74',lI1IIi=arguments[0x0],lI1IIi=lI1IIi[I1l11I](''),Ilil1l=`\x72\x65\x76\x65\x72\x73\x65`,lI1IIi=lI1IIi[Ilil1l]('\x76'),iIIiii=`\x6a\x6f\x69\x6e`,(0x16bd9c,lI1IIi[iIIiii](''));});}(0x184,0x36a4e,Iii11l,0xc4),Iii11l)&&(iｉl=Iii11l);const notify=$[i1l1Ii(0x115,'I&mD')]()?require(i1l1Ii(0x148,'caQ2')):'',jdCookieNode=$[i1l1Ii(0x112,'S7^@')]()?require(i1l1Ii(0x166,'7z#v')):'',{H5st}=require('./utils/Rebels_H'),common=require(i1l1Ii(0xf0,'zRIm'));let cookiesArr=[],cookie='',message;if($[i1l1Ii(0xf3,'DdsQ')]()){Object[i1l1Ii(0x1a2,'#!yJ')](jdCookieNode)[i1l1Ii(0x1e1,'8NWO')](ill11i=>{cookiesArr['push'](jdCookieNode[ill11i]);});if(process[i1l1Ii(0x177,'8Q8#')][i1l1Ii(0x1b0,'FaBL')]&&process[i1l1Ii(0x1b5,'zRIm')]['JD_DEBUG']===i1l1Ii(0x1f5,'THpx'))console['log']=()=>{};}else cookiesArr=[$['getdata'](i1l1Ii(0x1de,'tu*G')),$[i1l1Ii(0x145,'J2Nk')](i1l1Ii(0x17e,'bg71')),...jsonParse($[i1l1Ii(0xe1,'*L8T')](i1l1Ii(0x14c,'@Y]M'))||'[]')['map'](lllill=>lllill[i1l1Ii(0x194,'ofTx')])][i1l1Ii(0x1e3,')H4h')](ill11l=>!!ill11l);function Iii11l(){const IIii1l=(function(){return[...[iｉl,'WKXjPsLljBIHiQQMamiVh.Tcomb.TvpGe7fCQJQY==','W7bkDMy','WQreW7xdGCk7cwPRWRK','B8kFWQNcRSoV','mmoFjHuq','pfBcR20','pmkyre7dTG','WOxcTCo7','n0HDt3ZcQNK','WRDVW67cOL4','W5ztWR/cSSkRaSobW4pdH0O','W6HLWQtcMCkj','BCk6WRCqDq','W6xcTY7cPMXzWOdcSW','57Us5y2xWRVKURdPMQBLSORNQRZLU5FKVitNLkfl','W692pmozWRhdUSoAWQa','cSkPWRhdIgxcHvWoWRy','W7KNWPnLW6ldVHJcMudcGW','WOFdPmklWOhcJq','BSk3Dxj1W4hcLCkqWQZdICoxFSoV','W64SWPi','W4jPnmk1oSkCfcqGlHZcNH7cQqnsemkFCt8gW4NcKshdVbJcTfldN8kzsfTMWOLqemkrWOvbW4iba8keWOm','W41Df8ocWPFdKmoUWOKGkmkp','zSkvWOldRSoZ','WObXW51K','yXj8WR7cR2/dJ8oz','nmksrYlcSq','W6TcbNvl','vbNcPSkBW44','W5negSo5DW','W5pcLCkZW7KT','WQPnW4u','fmopjHBcLq','jCkPWRNdPN7cKG','57U95yYIaEs7JoMzGowZHoEOLEw7Ios+MEEvG8kOWQi','hq3cG8kOWQq','oSoBWRrTWRVdGdK9','zuxcUCkCW4C','BmkYWQhcImon','jCkPWRK','W7DaAa','W6eeW6q','j8kQuCkHaSkVEa','g8oCBSkutq','h29bW6K','FCkFWQ/dUx/cQ1O','WQrbW7lcKmoHrrnNWRZdR8knW5jQ','i8oVumkdEtBdTa','W7G3WOzhW7/dVJe','ECk6WRec','gfePW7BdMa','asldUHBcSq','ACkIWRug','fmkJnKq','ewfrW694','WQFdPN7dUHWjW4ZcQSkhwg7cJCor','W7JcVYtcRq','r8kTW7O5mu/cOSkM','xmkKlK9NW4dcVSoVWRKPW6rL','W53cG8oTnf7cLSoy','WOddGHvuWOi','q8oPmW3dJXLVWQO','ieuSW6NdIa','ySkfW6CXW7O','W5BcLmkXW4GRWPhdKG','BLVdL8okW7ZcLu7cTf3dLhRcTMG','amk4Ch/dPCkz','WP7dICkn','rmk2EMxdJCkRCmoajmktWOW8DG','emocWRPGWRG','mK5hye/dUtb3W4HB','iCo6rSkErZJdTCoVW4/cNrZdVYHuW4hdKCk9tLxdUCowWPL3l8oscSkXFmkFWPpdTmo3q0ZdQuum','W5LYh8op','lKu9W60','WOXXl8kIimoiB3iYlKddGHBcP0freCoFzGqsWPBcLNNdQG7dULhdHSoyrx5HWOHBhmoPWOfqW4uba8ke','WRROJANLV54','vmkkWQqAAq','dhnjWOdcQMBdIW','57QQ5y+jW53KUAxPM6RLSPpNQz7LUi3KVkBNL6VcTq','zmkJWPi','bSkcW5KJWQChC8kLW4u','W7HoE3yY','W45CAMCuA8khDa','oa/cKmkD','E8k6WQKqDq','c8o3mqKl','cmkCWRTYwq','e1rpW4zO','W5zgaSoPWOhdIW','DCkYuCk0','tCkAWQhcVSoZ','pSogWRa','jmoPWRn/BGhdREw/LEwNJEodT+s4MUs7MUI0R+woGa','gmkFW4uJWPzsnmoZWPiX','cxVcSxi3','W7KCWQldO8kHdG','W70lnM/dUWBcKbRdMa','WRpcReBcKN0','AaFcOSk6WP7dGWG'],...(function(){return[...['luf8W7r3','W4bWWQdcHSk8','WRNdJWnbWQG','tdysW7tdSJpdMSo9kCoggXG','yCkuWRNcR8o2umk2','WQX3W7BcKMi','ggnFWOVdShhdMG','p8oqWRLMWRRdJa','W6/OJBRLVQpKV7NMG7JLIP3VVB0','W6yXWOm','BSkfWRNcU8oKhSo4W7qpl8oWWQrqhmk/WQVcGmoslmk+ldJdK3VdNvdcUCkpkW7dR8k/WPpdK8oOlmoDEdtdLxtdMSo9','cmkUxxmDWP5hlG','wmoSrNutWPq','57UD5yYd77YX','W6a0WRddLSkv','W77dGJtcI8kudCk6WRi1wmoYW7lcSmktW4PGwCk6smolFKSHWPuJWQqUDqdcG8otbCkkWQa5lmkoW5/cSWRdMtaGlG7dICkMaCoRW7bmW7/cQ8kVW7tdPepdQa3dKWVcPx01','E0ddN8kxW5a','ySkqWRNcQG','sUInPUw+IW','WQvTWPfWW7NdTIFdN2hcKSkUqSkFsmkWhg7cNgddOSo6bmot','ASkEWQO','omkHWP/dJKm','yCk/WRVdJ8oEW7K','p8k+WQNdQey','WRDxW43cL28','pmk2yKDe','W78gWPnPW7y','hCk/W40oWPK','jCouWRnsWOG','b8koCahcTG','bCk+C2ddQCko','o0zDAa','5P2155U95BYs','jSo2ladcKa','tmkYW7GrkG','WPT/bmojDCk1xG/cKmkKWO8McCouW5bCWOddJCoZBLL+mNDMW7PeW4TOia','WPddICkoWPe','c8k0B3JdOCkmsq','W7b8cCo6WOe','W6HBFxW0Bq','WRdcGmo5h1O','f+ISRoMeIoAxK+EzQ+w8JoIpQEwmPK3cRX81hhm','W53cR8kPW4yl','aZVdTbVcOSoKW4qZ','W73dKYxcI8okvSo5W7qWwa','sqpcRG','WRpdHCknWRZcSq','yoIoLow9I+s8NEAcNowjSE+9Ua','lSk7aMnk','ku1GW59c','W7ldNZpcMmkiqSo7W6K','p0u9W6JdTq0wrq','BuZdUSkBW4yD','fxnRW6n0dG','c8kWBa','CutdT8kuW6CrW4ddSa','oSogWPLUWQRdGq','xCkQW747aeRcVSkM','cxnaW55XbCoWW5m','6k2h5yIe6zMm5OAc5z2IWRddLCoVlw7OVRtLHiVMOztKVOtMLPVLH4BLRBqw5BQ46k6a6yoz6l2G6iEK5PY75y6+6i+N5yYbiCoQW5fuWPxcLa','dLCSW7S','WP1KW5f1uCo+','bCoLpYdcMG','eCkVmwPQ','yoIoLow9IW','lSk8WRFdKYddGeSHWPtdVHtcTmosl8oCW5VdKW','xSkRWQCrFG','W5jtcSoP','AmkLrCk0eW','hCoRorxcK8oZjW','BCkKrG','o8oVnceQWOhdGSkE','WOeaW4ufWPK','57Us5y2x776j','WPRdKSkEWPJcQtmjW4ymymkjegZcKmkhW4qdW7pcVMb4WQLHavygWQT/cmoqwCk9irpdVKJcSbHirc/dHSkgsmkXW7dcJ8kSW5LuDZZcT8kebCkvW5jfWRaxW5JcUGCY','vJ7dVblcN8oRW6ajowayE3/cPq1Xm8oHlLNdS8kjq8odAW','W4XWlNbk','W4jPnmk1oSkCfWWsiLVcKuVcOWHvfSkEAbSqW5FcKxldVW','W6hcRqBcMxS','ifrGW6VdRW','A8kuWR7cUmo2q8kY','DHZLPBZOTQ3cOh3LJAtLMiNdLmoM','a8oyWRr2WPG','5AA8wU+/IEImKEw9Hos6MEs4QowLNUwqUE++PCon','W6lcPZNcRq','n8oYmZi2W47cG8ofWP3dR8o/a8oYWRquhmk3l8oxWRHwWQZcLdS7W59gW6VdOSoBk8kuWR7dKCo0xSkCW68atL7dMSoFxtuyj8kSx8oLWQ3dK8kcmq','ofRcRga','s8omsvuH','q8kbWQhdQSo+','W4tcGSkZW6G','ASouW6q5WQ8','nCormte9','W4BdJ8kSWQ7cI2Hu','l8kQsw1O','hJVdSb7cUmoKW5O9','WO3cS8oVdulcQmodCa','e8kIEvNdOCkfsXq','WPNcU8oUhuG','W7vjW5hdGZC','jCk3EMf4'],...(function(){return['W58SW5WOWOe','jSkDtW','jmkNWPTMBa','W50wi2JdLG7cLaZdJNT6W5q2nYVcGMBdGSoIrCkOW51/WQ4','W6KAmgldTbxcMa','f8kXpa','muHE','WOOzWRVcTSk3aSodW4xdGfFcTCoD','lHNcPSokWPLaW4ldNCkHWOBdGKq','lmklxgDOW5tdHa','lg9mWQ3cHM3dG8oNh8oKet/dTc/dRCkvW5RdP8oiaKXkFIGLfGa','mZ3dVb7cN8oGW4qspW','W7esWRhdHW','hSkDtxfhW4hdIcq','WPNdHaS','WOL2pa','WOtcV8oVhuZcUSoi','g2vrW4b/dmo+W5GkwdpcTmk6W78','WPtdMXX9WQzFl8koW6BdHCoXrSoTor5niSowW4JdNNHhW4S3q1viW6v3o8kpw0y','Dmo/lam','dem2W7NdJWuutJna','W5DzWQxcTG','aSkAzshcUrhdNW','WQZcMv7cQ2a','BeldUCkA','WP7dVttcUW','ECo1xf0M','ggLwW69/hSo5W4i','E8oSFgKe','WQHlW4hcIebIcZm','iCosWQzTWQ0','j8kbtW','WPVdRddcTSos','W4PxoW','WQhcHhpcOf0','W58NWObMtmo4WQNdGCo2','E8k4WPtdLmopW68','c0pcO8klW6WJg2fUW7bXy8oY','qSk6WRJdKSot','oq3cT8kqWOu','hmoPkcKSWPhdPSkU','W7hcPcdcUaqyWP3cPCk7wN/cGCoZWRm8W5ddRq','tqpcVCkPW4mTeW','W7SmivtdTa/cNHK','W6OYWPrOW7NdUtxcHfRcMmkIcmkzsmkagcBdV3VdQSoVh8ksWRtcR8kDWRxcVIRcSCoWsau','WOHQpa','aMqgW6xdSW','W6PlaSoQtq','kfK6W6NdSZNcT8kaWP3cSG','W4XcWRZcO8kQxmkIWOxdH1VcOCosFCkjqCokxqtcPIxcQrJdOmkQW4xcI8ogWRBcNKehbfRcOWdcO8kcwCoLWRBdPYywWO/cMCkDWQFcRI3dU1e8CColWOZdS8kizCohBL1RW6WC','gCkzW4WpWRSs','WR3dOGD5WRC','W7FcRJNcPefBWPJcTmk0wxddMSoUWRjRW4xdQh1UW7RdGJTYW7WwAxZcJCoNfvePW5W','sSo1kbxdLq','emoQoW','WOZcRfxcOL4','hgLeWQJcRgFLTzZLPQBMLlJcQLLX','WPldQdtcQSoek8kFW6XwW43cSKlcGmkIWP7cGSkLACkFWOldT38LWP3dI8oaaSoqW5aoWR7dLcmAW7FcRHLxFCoBlZf8jmoWW5jAW6BdQtmynZ/cQtqhhrzOy0fwW6Po','WOhdImoYWR57W4ddUmo7mw9uaG','WPBcVLhcK1BdHaRdVa','W6ylmhBdPLVdLLpdG3b+W5rSbwhcH1hcHCoMrmkrWPnUWQbjW7JcOvVcIYmRe8o7W7HvAsJcQSovCSkmW4pcUW','heHgyNNcRLqdW5q','6lAZ5y6e5PsL5PEU','W4WVW54oWP4','ovuRW7ldSq','W5rrWOfu','cCkRpe9aW5xcRSoZ','56YT5yQf5OUh5yQE','sW3cPmkk','xCkQW747f1/cPSkHC8ku','WPVdImkoWO3cOG','m0Ho','W5rrWOXg','5lQV5PsA5BEJ56Y75yUOtEEUKG','qSk/WOhdK8oj','CWNcOmkdW6a','5lQD5lQd6lsU5y+T','E8kVWO3dS8oS','W4bkeCoBWQ4','WQxcHNNdJmoqbSoHW7CFCCoVW40','WOddUItcSmow','W5L6gmonC8kUzai','neLOBfS','gCkTnePTW5e','WQ/cMConpxC','saNcUSkCW44Req','eCk9Ch7dTG','WQDI5AEv6lsHWRhcUUwpI+wyKaNdLW','fbtdUYdcKW','WQtcGhpcU1m','ACo2lJldPa','44ot5OYD56so44oWE8okcmoYWQPb5BEX5Aw25Psa','W5VcStpcOuruWPJdR8oOgc7dLCk+W7zmW5pdU2SOW5BdOan/W4y3jsJdLCoBtMP9WPGiv8o5keqvk8kyW4fyWPVdSrZdPgdcTmkgWOjcW7vfjCk3W7FdSSovW6hcS2tcSCkMpcRcISkObSkQdmolzsxcKmkRWRTYW7Xbec5dzCk6rCkLjs3dGmkQWQ8aWOzqW43cOSo+WO1ErmoKW6RdN8oMWR3cU8oilCoJW4ylW53cHgTcW7fSy8o+pWqKWPRdQsj1WRlcSmoXwsZdTmoHWOFdN8oNysddUurEeWtcHmkjWQD3hSkoW4dcH8o8kSkLW5q/W4ahlmoDB8omW40','W5HFWOfQW448W6GvCmoFW5y','cv4jW7pdJa','44kl5O+E56Ak44ki6k635yAn6i6e5yYa5lMq5lQX6lE65yYx5lMPrrXEm8o8WQhdREEAVEAnKUs/TEEvPSo/zspdOmopzUEBNos7KUs4HEEUM+wiLUIoQowoHW','WOqEW4i'];}())];}())];}());Iii11l=function(){return IIii1l;};return Iii11l();}function iii1II(_0x24a9fe,_0x1d739a){const _0x371886=Iii11l();return iii1II=function(_0x3eaf34,_0x13e494){_0x3eaf34=_0x3eaf34-0xe1;let _0x46ee6d=_0x371886[_0x3eaf34];if(iii1II['bNnEeR']===undefined){var _0x3fe99f=function(_0x4a45ee){const _0xc66b89='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x285297='',_0x3dcb00='';for(let _0x4888d8=0x0,_0x3f9b3f,_0x50d920,_0x4fed88=0x0;_0x50d920=_0x4a45ee['charAt'](_0x4fed88++);~_0x50d920&&(_0x3f9b3f=_0x4888d8%0x4?_0x3f9b3f*0x40+_0x50d920:_0x50d920,_0x4888d8++%0x4)?_0x285297+=String['fromCharCode'](0xff&_0x3f9b3f>>(-0x2*_0x4888d8&0x6)):0x0){_0x50d920=_0xc66b89['indexOf'](_0x50d920);}for(let _0x2d0b2a=0x0,_0x5e090c=_0x285297['length'];_0x2d0b2a<_0x5e090c;_0x2d0b2a++){_0x3dcb00+='%'+('00'+_0x285297['charCodeAt'](_0x2d0b2a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3dcb00);};const _0x4d5ba6=function(_0x56c0a6,_0x1cb106){let _0x328014=[],_0x22c3d2=0x0,_0x3842a1,_0x9b0f01='';_0x56c0a6=_0x3fe99f(_0x56c0a6);let _0x2a0856;for(_0x2a0856=0x0;_0x2a0856<0x100;_0x2a0856++){_0x328014[_0x2a0856]=_0x2a0856;}for(_0x2a0856=0x0;_0x2a0856<0x100;_0x2a0856++){_0x22c3d2=(_0x22c3d2+_0x328014[_0x2a0856]+_0x1cb106['charCodeAt'](_0x2a0856%_0x1cb106['length']))%0x100,_0x3842a1=_0x328014[_0x2a0856],_0x328014[_0x2a0856]=_0x328014[_0x22c3d2],_0x328014[_0x22c3d2]=_0x3842a1;}_0x2a0856=0x0,_0x22c3d2=0x0;for(let _0x3b0caf=0x0;_0x3b0caf<_0x56c0a6['length'];_0x3b0caf++){_0x2a0856=(_0x2a0856+0x1)%0x100,_0x22c3d2=(_0x22c3d2+_0x328014[_0x2a0856])%0x100,_0x3842a1=_0x328014[_0x2a0856],_0x328014[_0x2a0856]=_0x328014[_0x22c3d2],_0x328014[_0x22c3d2]=_0x3842a1,_0x9b0f01+=String['fromCharCode'](_0x56c0a6['charCodeAt'](_0x3b0caf)^_0x328014[(_0x328014[_0x2a0856]+_0x328014[_0x22c3d2])%0x100]);}return _0x9b0f01;};iii1II['HZXllJ']=_0x4d5ba6,_0x24a9fe=arguments,iii1II['bNnEeR']=!![];}const _0x3dfe77=_0x371886[0x0],_0x36252a=_0x3eaf34+_0x3dfe77,_0x4e5e85=_0x24a9fe[_0x36252a];return!_0x4e5e85?(iii1II['OUkBqW']===undefined&&(iii1II['OUkBqW']=!![]),_0x46ee6d=iii1II['HZXllJ'](_0x46ee6d,_0x13e494),_0x24a9fe[_0x36252a]=_0x46ee6d):_0x46ee6d=_0x4e5e85,_0x46ee6d;},iii1II(_0x24a9fe,_0x1d739a);};!(async()=>{const I1iIIi=i1l1Ii,I1lIiI={'ecSlJ':function(lllili,IliiiI){return lllili===IliiiI;},'zfdja':I1iIIi(0x17d,'J2Nk'),'KoJig':function(Ill11,liiIII){return Ill11<liiIII;},'BRvKc':I1iIIi(0x138,'trtX'),'LSlJP':function(li1i11,iI11I1){return li1i11+iI11I1;},'ScshJ':function(il1i1l,IlIlll,IIIl1I){return il1i1l(IlIlll,IIIl1I);},'vxwKJ':function(iil1ii,IlIlli){return iil1ii*IlIlli;}};if(!cookiesArr[0x0]){if(I1lIiI[I1iIIi(0x168,'RKwj')](I1iIIi(0xff,'Ef*U'),I1iIIi(0xfa,'eEIc'))){$[I1iIIi(0x142,'VHE8')]($[I1iIIi(0x1b9,'ZJe$')],'【提示】请先获取京东账号一cookie\x0a直接使用NobyDa的京东签到获取',I1lIiI[I1iIIi(0x191,'B5Ax')],{'open-url':I1iIIi(0xe7,'*L8T')});return;}else IilIll[I1iIIi(0x200,'hR7O')](lI11Ii,Iiill);}for(let lil111=0x0;I1lIiI['KoJig'](lil111,cookiesArr[I1iIIi(0xe4,'I&mD')]);lil111++){if(cookiesArr[lil111]){if(I1lIiI['ecSlJ'](I1iIIi(0x138,'trtX'),I1lIiI['BRvKc'])){cookie=cookiesArr[lil111],$[I1iIIi(0x110,'flKq')]=decodeURIComponent(cookie[I1iIIi(0x1d7,'S7^@')](/pt_pin=([^; ]+)(?=;?)/)&&cookie['match'](/pt_pin=([^; ]+)(?=;?)/)[0x1]),$[I1iIIi(0x187,'uyOd')]=I1lIiI[I1iIIi(0x1ac,'caQ2')](lil111,0x1),$['isLogin']=!![],$[I1iIIi(0x13b,'@Y]M')]='',message='',console['log'](I1iIIi(0x1fd,'Ef*U')+$[I1iIIi(0x121,'Ck8D')]+'】'+($[I1iIIi(0x114,'m55&')]||$['UserName'])+'*********\x0a');if(!$['isLogin']){$[I1iIIi(0x150,'@RFm')]($['name'],I1iIIi(0x19c,'A3X3'),I1iIIi(0x18d,'m9E[')+$[I1iIIi(0x1a4,'*L8T')]+'\x20'+($[I1iIIi(0x15e,'h0qS')]||$[I1iIIi(0x1f3,'#!yJ')])+'\x0a请重新登录获取\x0ahttps://bean.m.jd.com/bean/signIndex.action',{'open-url':I1iIIi(0x1eb,'@RFm')});$[I1iIIi(0xe9,'m9E[')]()&&await notify['sendNotify']($[I1iIIi(0x185,'7z#v')]+I1iIIi(0x179,'[Gid')+$[I1iIIi(0x14e,'VHE8')],'京东账号'+$['index']+'\x20'+$[I1iIIi(0x17c,'A3X3')]+I1iIIi(0x106,'THpx'));continue;}$['UA']=I1iIIi(0x19d,'E4vc'),await Main(),await $['wait'](I1lIiI[I1iIIi(0x181,'flKq')](parseInt,I1lIiI[I1iIIi(0xf4,'8j9r')](Math[I1iIIi(0x111,'m55&')](),0x3e8)+0x7d0,0xa));}else lI11I1();}}})()[i1l1Ii(0x1f2,'#!yJ')](ii1ii1=>{const I1iIIl=i1l1Ii;$[I1iIIl(0x1f0,'DdsQ')]('','❌\x20'+$[I1iIIl(0x1b9,'ZJe$')]+I1iIIl(0x198,'zRIm')+ii1ii1+'!','');})['finally'](()=>{$['done']();});async function Main(){const lI1IIl=i1l1Ii,llllI={'iprTB':function(lllil1,iil1il){return lllil1===iil1il;},'qMLAP':lI1IIl(0x17f,'hR7O'),'rgqlc':function(ilil1I){return ilil1I();},'exrFZ':function(i11il1,ii1iiI){return i11il1+ii1iiI;},'dUJzD':function(lllilI,ilil11){return lllilI*ilil11;},'HjTGQ':function(illlI1,IIIl11){return illlI1!==IIIl11;}};try{$[lI1IIl(0x16b,'7z#v')]=![];const I1lIi1=await common[lI1IIl(0x152,'S7^@')](cookie);if(!I1lIi1&&llllI[lI1IIl(0x19b,'tu*G')](typeof I1lIi1,'boolean')){console[lI1IIl(0x10a,'7z#v')](llllI[lI1IIl(0x1aa,'h0qS')]);return;}await llllI[lI1IIl(0x15f,'I&mD')](SignComponent_querySignList),!$[lI1IIl(0x122,'8Q8#')]&&llllI['iprTB']($['signStatus'],0x0)&&(await llllI[lI1IIl(0x1d3,'flKq')](SignComponent_doSignTask),await $[lI1IIl(0x120,'FaBL')](parseInt(llllI[lI1IIl(0x18f,'FaBL')](llllI['dUJzD'](Math['random'](),0x3e8),0x3e8),0xa)));}catch(liiIIi){llllI[lI1IIl(0x15b,'m9E[')](lI1IIl(0x10d,'ofTx'),'RhHwC')?console[lI1IIl(0x1a8,'QxWA')]('❌\x20脚本运行遇到了错误\x0a'+liiIIi):lIIii1[lI1IIl(0x123,'Ck8D')](''+ll1i1[lI1IIl(0x196,'7z#v')]);}}function jsonParse(Iliii1){const i1ilI=i1l1Ii,iIiIi={'ZIXEv':'账号无效','Kklud':function(iil1ll,iiilil){return iil1ll==iiilil;},'gzOQz':'YZeqw'};if(iIiIi[i1ilI(0x1fb,'*L8T')](typeof Iliii1,i1ilI(0x104,'#!yJ'))){if(i1ilI(0x105,'QxWA')===iIiIi['gzOQz'])try{return JSON[i1ilI(0x1ad,'THpx')](Iliii1);}catch(iil1li){return console[i1ilI(0x1c9,'#!yJ')](iil1li),$[i1ilI(0x146,'ofTx')]($[i1ilI(0x1d9,'E4vc')],'',i1ilI(0x118,'8NWO')),[];}else{lilIil['log'](iIiIi[i1ilI(0x1a7,')H4h')]);return;}}}async function SignComponent_doSignTask(){const iii1lI=i1l1Ii,iIiIl={'uiyEM':function(iiilii){return iiilii();},'CDMiL':function(li1i1i,IlIli1){return li1i1i===IlIli1;},'QmVgi':function(illIiI,lI1lli){return illIiI!==lI1lli;},'Cwmav':iii1lI(0x1be,'5ikd'),'TORtX':iii1lI(0x1c1,'8Q8#'),'IFMtl':iii1lI(0xf8,'CkI@'),'NHQph':iii1lI(0x137,'I&mD'),'mTjKA':iii1lI(0x144,'J2Nk'),'scxSV':'apple','NnYRe':iii1lI(0x1e0,'I&mD'),'xGssM':iii1lI(0x1a1,'hc@%'),'qpicG':iii1lI(0x16d,'zRIm'),'HIkhx':iii1lI(0x11e,'8j9r'),'dDana':iii1lI(0x1c6,'m55&'),'wsOQS':'keep-alive','FCwdb':iii1lI(0x1e8,'D1U$'),'jClCZ':iii1lI(0x1e7,'bg71'),'SraSo':function(Ill1l,llI1Il){return Ill1l*llI1Il;}};return new Promise(async ii1iii=>{const Iiilii=iii1lI,i11iil={'nbiPj':function(i11iii){const i1ilI1=iii1II;return iIiIl[i1ilI1(0x1dd,'5cy1')](i11iii);},'zSAOV':function(llI1Ii,lllI1i){return llI1Ii===lllI1i;},'Hvqgj':Iiilii(0x1f8,'S7^@'),'vadSF':function(li1i1l,II1i1){const Iil1li=Iiilii;return iIiIl[Iil1li(0x180,'PdEp')](li1i1l,II1i1);},'LdoPg':function(lI1lll,iIiII){const Iiilil=Iiilii;return iIiIl[Iiilil(0x1bb,'eEIc')](lI1lll,iIiII);},'MADde':iIiIl[Iiilii(0x1e6,'I&mD')],'uGupF':function(iil1lI,iiiliI){return iil1lI>iiiliI;},'EXmwK':'sLSpk','OaaCF':iIiIl['TORtX'],'lVtdK':Iiilii(0x1bf,'8NWO'),'VtOjQ':Iiilii(0xf7,'zRIm'),'peXnq':iIiIl['IFMtl']},Ill1i={'appId':iIiIl['NHQph'],'functionId':iIiIl[Iiilii(0x107,'8NWO')],'appid':Iiilii(0x1b7,'FaBL'),'clientVersion':'9.16.240','client':iIiIl[Iiilii(0x18e,'DdsQ')],'body':{'activityId':iIiIl[Iiilii(0x1f7,'TJg*')],'version':0x1},'version':iIiIl['xGssM'],'ua':$['UA']},ii1iil=await H5st[Iiilii(0xe3,'[Gid')](Ill1i);let lllI1l={'url':Iiilii(0x132,'trtX')+Date[Iiilii(0x1ca,'PdEp')]()+Iiilii(0x100,'5ikd')+ii1iil['params']+Iiilii(0x12a,'@RFm'),'headers':{'Accept':iIiIl[Iiilii(0x1d4,'@Y]M')],'Accept-Encoding':iIiIl[Iiilii(0x174,'5cy1')],'Accept-Language':iIiIl[Iiilii(0x13a,'VHE8')],'Connection':iIiIl[Iiilii(0x12b,'E4vc')],'Content-Type':Iiilii(0x175,'E4vc'),'Cookie':iIiIl['FCwdb']+cookie,'Referer':Iiilii(0x127,'uyOd'),'Origin':Iiilii(0x17a,'B5Ax'),'x-rp-client':iIiIl[Iiilii(0x1c7,'*L8T')],'User-Agent':$['UA']},'timeout':iIiIl[Iiilii(0xfe,'8Q8#')](0x14,0x3e8)};$['post'](lllI1l,async(li1i1I,illIii,ii1il1)=>{const iillI=Iiilii,lI1llI={'nYRbq':function(illIil,Ill1I){const Iil1ll=iii1II;return i11iil[Iil1ll(0x134,'m9E[')](illIil,Ill1I);}};try{if(li1i1I)console[iillI(0x160,'VHE8')](''+JSON['stringify'](li1i1I));else{if(i11iil['Hvqgj']!==iillI(0x158,'A3X3'))l1l11I[iillI(0x14f,'5cy1')](''+lilIl[iillI(0x102,')H4h')]),['签到红包发完',iillI(0xfd,'trtX')][iillI(0x159,'m55&')](lIli11=>Iiiil['message'][iillI(0x1da,'Ef*U')](lIli11))&&(Iiiii['hotFlag']=!![]);else{ii1il1=JSON[iillI(0x202,'A3X3')](ii1il1);if(i11iil[iillI(0xf9,'I&mD')](ii1il1['code'],0x0)&&ii1il1[iillI(0x1ee,'[Gid')]===0x0){if(i11iil[iillI(0x206,'5cy1')](i11iil['MADde'],i11iil['MADde']))i11iil['nbiPj'](lliiil);else{let lillI1=iillI(0x184,'I&mD');ii1il1[iillI(0x15a,'B5Ax')][iillI(0x116,'Ef*U')]>0x0&&(lillI1+=',第'+(ii1il1[iillI(0x119,'flKq')][iillI(0x1ae,'E4vc')]||0x0)+'天');if(ii1il1[iillI(0x182,'hc@%')]['rewardList']&&i11iil[iillI(0xeb,'hR7O')](ii1il1[iillI(0x1e9,'5ikd')][iillI(0x1ab,'caQ2')]['length'],0x0)){if(i11iil[iillI(0x1ff,'v1ul')]===i11iil[iillI(0x178,'A3X3')])l1il1I[iillI(0x10a,'7z#v')](''+Iiili['stringify'](IilIli));else for(let i1l1i1 of ii1il1[iillI(0x1d2,'THpx')]['rewardList']){if(i11iil['zSAOV'](i1l1i1[iillI(0x1d5,'THpx')],0x0))lillI1+=',获得'+i1l1i1['discount']+iillI(0x1ef,'DdsQ');else i1l1i1[iillI(0x1ea,'Ps&J')]===0x1&&(lillI1+=iillI(0xe5,'A3X3')+i1l1i1[iillI(0x117,'S7^@')]+'(满'+i1l1i1[iillI(0x1bd,'7z#v')]+'减'+i1l1i1['discount']+')');}}console[iillI(0x1e4,'uyOd')](lillI1);}}else ii1il1['message']?i11iil['lVtdK']===i11iil['VtOjQ']?I1i111+=iillI(0x11d,'v1ul')+ilI1li[iillI(0x124,'trtX')]+'红包(仅限小程序使用)':console[iillI(0x1c0,'h0qS')](''+ii1il1[iillI(0x1d0,'D1U$')]):console[iillI(0x162,'qeW5')](''+JSON[iillI(0x1f1,'CkI@')](ii1il1));}}}catch(iiillI){if(iillI(0x197,')H4h')!==i11iil['peXnq'])$[iillI(0x1c2,'8j9r')](iiillI,illIii);else{if(lI1llI[iillI(0x140,'VHE8')](ilI1lI[iillI(0x133,'v1ul')],0x0))ll1iI+=iillI(0xef,')H4h')+iI1lll[iillI(0x13c,'QxWA')]+'红包(仅限小程序使用)';else IlI1il[iillI(0x131,'E4vc')]===0x1&&(l1lIll+=',获得优惠券：'+I1l1II[iillI(0x13d,')H4h')]+'(满'+IIli1I['quota']+'减'+I1i11I[iillI(0x15c,'S7^@')]+')');}}finally{ii1iii();}});});}async function SignComponent_querySignList(){const lI1III=i1l1Ii,l1iIII={'FvHbR':'string','UMESR':'https://bean.m.jd.com/bean/signIndex.action','MyKrt':lI1III(0x11f,'THpx'),'MzZOS':function(llI1I1,IlIlil){return llI1I1===IlIlil;},'jDJSH':'coMEE','VeilO':function(lIli1I,II1il){return lIli1I!==II1il;},'dmKhy':lI1III(0x129,'qeW5'),'Ppmvx':'签到红包发完','WXiDQ':lI1III(0x204,'S7^@'),'yAxBh':'FCQSZ','BLQGt':lI1III(0x19e,'hc@%'),'kmjKn':lI1III(0x161,'B5Ax'),'oYaWU':lI1III(0x125,'hc@%'),'TqvKN':lI1III(0x16a,'E4vc'),'yqrKm':lI1III(0x172,'caQ2'),'XXKmr':lI1III(0x1fe,'CkI@')};return new Promise(async lllI11=>{const IIliIi=lI1III,I1lIll={'chQiw':function(IIIIII,lillII){return IIIIII==lillII;},'JvMri':l1iIII['FvHbR'],'JdyKB':IIliIi(0x169,'trtX'),'uBaiW':'CookieJD2','Jstss':function(ii1ilI,lI1ll1){return ii1ilI===lI1ll1;},'LxwOy':l1iIII[IIliIi(0x10e,'S7^@')],'ncfQA':'WUnDB','knAeK':IIliIi(0xf6,'VHE8'),'nYwNI':l1iIII['MyKrt'],'nGaZw':IIliIi(0xe2,'h0qS'),'qgAmO':function(iIiI1,liil1I){const IllIiI=IIliIi;return l1iIII[IllIiI(0x1bc,'qeW5')](iIiI1,liil1I);},'oDmat':l1iIII['jDJSH'],'PmcwV':function(i11ii1,IlIliI){const i1il1=IIliIi;return l1iIII[i1il1(0x18c,'7z#v')](i11ii1,IlIliI);},'dFhUe':IIliIi(0x1ed,'THpx'),'bUyFP':function(l1iII1,iiill1){return l1iII1===iiill1;},'AcgTk':l1iIII[IIliIi(0xed,'m55&')],'KMTJD':l1iIII['Ppmvx'],'UNjgu':l1iIII[IIliIi(0x170,'5ikd')],'gMGZK':function(lIli1i,IIIII1){return lIli1i!==IIIII1;},'bIGAE':l1iIII['yAxBh']},I1lIli={'functionId':IIliIi(0x14b,'[Gid'),'appid':l1iIII['BLQGt'],'clientVersion':IIliIi(0x1ba,'Ps&J'),'client':l1iIII[IIliIi(0x11c,'ofTx')],'body':{'activityId':l1iIII[IIliIi(0x1a5,'trtX')],'version':0x1}};let II1ii={'url':'https://api.m.jd.com/signTask/querySignList?g_ty=ls&g_tk='+Date[IIliIi(0x147,'bg71')]()+IIliIi(0x1db,'ofTx')+I1lIli[IIliIi(0x155,'flKq')]+IIliIi(0x1cb,'Ck8D')+I1lIli['appid']+IIliIi(0x1b6,'@RFm')+I1lIli['clientVersion']+'&&body='+encodeURIComponent(JSON[IIliIi(0x201,'J2Nk')](I1lIli[IIliIi(0x101,'uyOd')]))+IIliIi(0x128,'@Y]M'),'headers':{'Accept':IIliIi(0x153,'5cy1'),'Accept-Encoding':l1iIII[IIliIi(0x1f6,'trtX')],'Accept-Language':IIliIi(0x12c,'Ps&J'),'Connection':IIliIi(0x109,'7RJK'),'Content-Type':'application/x-www-form-urlencoded','Cookie':'open_id=oTGnpnEbVBxcRWonF3ePdFIOMSCY;'+cookie,'Referer':IIliIi(0xec,'7RJK'),'Origin':l1iIII['yqrKm'],'x-rp-client':l1iIII[IIliIi(0x16f,'Ps&J')],'User-Agent':$['UA']},'timeout':0x14*0x3e8};$['post'](II1ii,async(I1lIlI,ii1ill,II1iI)=>{const I1l111=IIliIi;try{if(I1lIll[I1l111(0x1df,'flKq')](I1lIll['ncfQA'],I1lIll[I1l111(0x193,'bg71')])){if(I1lIll[I1l111(0x19f,'flKq')](typeof iIIl1l,I1lIll[I1l111(0x167,'DdsQ')]))try{return iliIIi[I1l111(0x11b,'8Q8#')](ill11I);}catch(lIli1l){return Iliiii[I1l111(0x1c8,'8j9r')](lIli1l),i1illI[I1l111(0x1fc,'I&mD')](i1IIl['name'],'','请勿随意在BoxJs输入框修改内容\x0a建议通过脚本去获取cookie'),[];}}else{if(I1lIlI)I1l111(0x1cc,'D1U$')===I1lIll[I1l111(0x1b8,'DdsQ')]?lI1Iii=[i1li[I1l111(0x14a,'VHE8')](I1lIll['JdyKB']),li1II[I1l111(0x157,'eEIc')](I1lIll[I1l111(0x1b3,'uyOd')]),...IliI11(i1ll['getdata'](I1l111(0x1b1,'8j9r'))||'[]')[I1l111(0x113,')H4h')](illIi1=>illIi1[I1l111(0xfb,')H4h')])]['filter'](ii1ili=>!!ii1ili):console[I1l111(0x16e,'@RFm')](''+JSON['stringify'](I1lIlI));else{if(I1lIll[I1l111(0x13f,'R148')]===I1l111(0x141,'PdEp'))IiilIl[I1l111(0x188,'bg71')]('','❌\x20'+iii1Ii['name']+I1l111(0x12e,'Ps&J')+iii1Il+'!','');else{II1iI=JSON[I1l111(0x13e,'QxWA')](II1iI);if(II1iI[I1l111(0x1cd,'S7^@')]===0x0&&I1lIll[I1l111(0x176,'tu*G')](II1iI[I1l111(0x1d1,'zRIm')],0x0)){$[I1l111(0x186,'Ef*U')]=II1iI[I1l111(0x1f4,'RKwj')][I1l111(0x1f9,'FaBL')]||0x0;if(I1lIll[I1l111(0x15d,'m9E[')](II1iI['data'][I1l111(0x11a,'ZJe$')],0x1)||I1lIll[I1l111(0xf2,'8j9r')](II1iI[I1l111(0xee,'*L8T')][I1l111(0x165,'DdsQ')],0x2)){if(I1lIll['Jstss'](I1lIll['oDmat'],I1lIll['oDmat'])){let lI1lil='';for(let i1l1iI of II1iI[I1l111(0xfc,'bg71')][I1l111(0x108,'@Y]M')]){if(I1lIll[I1l111(0x18b,'DdsQ')](i1l1iI[I1l111(0x189,'hc@%')],II1iI[I1l111(0x14d,'hR7O')]['signDays']))for(let liil1l of i1l1iI[I1l111(0x1b2,'zRIm')]){if(I1lIll['Jstss'](liil1l[I1l111(0x154,'tu*G')],0x0)){if(I1lIll[I1l111(0x12f,'I&mD')](I1lIll[I1l111(0x199,'@Y]M')],I1lIll[I1l111(0x205,'caQ2')]))for(let Iiili1 of I1l1Il['data'][I1l111(0x171,'Ps&J')]){if(Iiili1['type']===0x0)l1lIii+=I1l111(0x1ec,'E4vc')+Iiili1['discount']+I1l111(0x1af,'@Y]M');else I1lIll['Jstss'](Iiili1[I1l111(0x136,'8NWO')],0x1)&&(I11iI1+=I1l111(0x10c,'v1ul')+Iiili1['useRange']+'(满'+Iiili1['quota']+'减'+Iiili1[I1l111(0x10f,'7RJK')]+')');}else lI1lil+=I1l111(0xea,'[Gid')+liil1l['discount']+'红包(仅限小程序使用)\x0a';}else{if(liil1l[I1l111(0x1fa,'Ck8D')]===0x1){if(I1lIll[I1l111(0x143,'TJg*')](I1lIll[I1l111(0x10b,'uyOd')],I1lIll[I1l111(0x1c4,'RKwj')]))lI1lil+='优惠券：'+liil1l[I1l111(0x16c,'J2Nk')]+'(满'+liil1l[I1l111(0xf5,'h0qS')]+'减'+liil1l[I1l111(0x13c,'QxWA')]+')\x0a';else{I1iIil[I1l111(0xe6,'zRIm')](lI1Iil[I1l111(0x1d6,'ofTx')],I1l111(0x1a0,'R148'),'https://bean.m.jd.com/bean/signIndex.action',{'open-url':I1lIll['LxwOy']});return;}}}}}console['log'](I1l111(0x18a,'eEIc')+II1iI['data'][I1l111(0x183,'ofTx')]+I1l111(0x130,'hR7O')+lI1lil);}else l1iIl+=I1l111(0x126,'@Y]M')+illIll[I1l111(0x192,'5ikd')]+I1l111(0x1c3,'bg71');}}else II1iI['message']?(console['log'](''+II1iI[I1l111(0x151,'QxWA')]),[I1lIll[I1l111(0x135,'DdsQ')],'未登录'][I1l111(0x156,'caQ2')](il1iIl=>II1iI[I1l111(0x12d,'*L8T')][I1l111(0x1c5,'I&mD')](il1iIl))&&($[I1l111(0x1a9,'bg71')]=!![])):console[I1l111(0xf1,'*L8T')](''+JSON['stringify'](II1iI));}}}}catch(iii1ii){I1lIll['PmcwV'](I1lIll[I1l111(0x103,'FaBL')],I1lIll['UNjgu'])?II1Ii[I1l111(0x1a6,'v1ul')](i1ii[I1iIl1]):$[I1l111(0x173,'CkI@')](iii1ii,ii1ill);}finally{I1lIll[I1l111(0x19a,'A3X3')](I1lIll[I1l111(0x163,'A3X3')],I1l111(0x195,'QxWA'))?llIIli['hotFlag']=!![]:lllI11();}});});}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
