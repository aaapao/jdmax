/*
活动名称：生日礼包（超级无线V2）
活动链接：https://lzkj-isv.isvjcloud.com/prod/cc/interaction/v2/<类型id>/1001/?activityId=xxxx&shopId=xxxx
环境变量：jd_lzkj_v2_birthday_url // 活动链接
		jd_lzkj_v2_birthday_opencard // 是否入会（true/false），默认不入会
        jd_lzkj_v2_birthday_notify // 是否推送通知（true/false），默认不推送
        jd_lzkj_v2_birthday_break // IP被限制后继续执行，默认退出运行（true/false）

支持的活动类型：20002 生日礼包

cron:1 1 1 1 *

*/

const $ = new Env('生日礼包（超级无线V2）')
var iｉl='jsjiami.com.v7';const l1l1iI=iii1II;(function(l1l1ii,Il1i1I,Ii1iii,iIIilI,il1l1,Ii1iil,Ilil1i){return l1l1ii=l1l1ii>>0x3,Ii1iil='hs',Ilil1i='hs',function(iili1,II11ii,Iil1iI,II11il,iIIil1){const I11i1i=iii1II;II11il='tfi',Ii1iil=II11il+Ii1iil,iIIil1='up',Ilil1i+=iIIil1,Ii1iil=Iil1iI(Ii1iil),Ilil1i=Iil1iI(Ilil1i),Iil1iI=0x0;const IlllII=iili1();while(!![]&&--iIIilI+II11ii){try{II11il=parseInt(I11i1i(0x306,'%C&i'))/0x1+parseInt(I11i1i(0x2a5,'yRr$'))/0x2*(-parseInt(I11i1i(0x272,'IBIv'))/0x3)+-parseInt(I11i1i(0x1be,'r7^F'))/0x4+-parseInt(I11i1i(0x227,'Va1m'))/0x5*(parseInt(I11i1i(0x30d,'yNr%'))/0x6)+parseInt(I11i1i(0x208,'5U0w'))/0x7*(-parseInt(I11i1i(0x2cc,'p*A9'))/0x8)+parseInt(I11i1i(0x345,'DaHo'))/0x9*(-parseInt(I11i1i(0x21f,'8NIo'))/0xa)+parseInt(I11i1i(0x20a,'5O2R'))/0xb;}catch(I1il1I){II11il=Iil1iI;}finally{iIIil1=IlllII[Ii1iil]();if(l1l1ii<=iIIilI)Iil1iI?il1l1?II11il=iIIil1:il1l1=iIIil1:Iil1iI=iIIil1;else{if(Iil1iI==il1l1['replace'](/[rUplSXJAqLxRteKWkwPC=]/g,'')){if(II11il===II11ii){IlllII['un'+Ii1iil](iIIil1);break;}IlllII[Ilil1i](iIIil1);}}}}}(Ii1iii,Il1i1I,function(II111,lI1l1I,lill11,liI1i1,I11i11,I1llII,Iil1il){return lI1l1I='\x73\x70\x6c\x69\x74',II111=arguments[0x0],II111=II111[lI1l1I](''),lill11=`\x72\x65\x76\x65\x72\x73\x65`,II111=II111[lill11]('\x76'),liI1i1=`\x6a\x6f\x69\x6e`,(0x16c6b8,II111[liI1i1](''));});}(0x638,0x975b2,Iii11l,0xc9),Iii11l)&&(iｉl=0x1c4c);const jdCookie=require(l1l1iI(0x258,'Lh]U')),common=require(l1l1iI(0x2c7,'Va1m')),notify=require('./utils/Rebels_sendJDNotify'),getToken=require('./utils/Rebels_Token'),{wuxianDefense}=require(l1l1iI(0x155,'1vp(')),{lzkjv2_savePrize}=require(l1l1iI(0x22f,'zH)5'));function iii1II(_0x5d17f1,_0x43d58a){const _0x5c6cfb=Iii11l();return iii1II=function(_0xc16bcc,_0x5e7d4c){_0xc16bcc=_0xc16bcc-0x14b;let _0xc131bd=_0x5c6cfb[_0xc16bcc];if(iii1II['ydGGQW']===undefined){var _0xedb0a3=function(_0x51393a){const _0x398d54='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x107649='',_0x146261='';for(let _0xe9c194=0x0,_0x38fb41,_0x49dd7b,_0x3a7858=0x0;_0x49dd7b=_0x51393a['charAt'](_0x3a7858++);~_0x49dd7b&&(_0x38fb41=_0xe9c194%0x4?_0x38fb41*0x40+_0x49dd7b:_0x49dd7b,_0xe9c194++%0x4)?_0x107649+=String['fromCharCode'](0xff&_0x38fb41>>(-0x2*_0xe9c194&0x6)):0x0){_0x49dd7b=_0x398d54['indexOf'](_0x49dd7b);}for(let _0x2f6247=0x0,_0x25bda1=_0x107649['length'];_0x2f6247<_0x25bda1;_0x2f6247++){_0x146261+='%'+('00'+_0x107649['charCodeAt'](_0x2f6247)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x146261);};const _0x4a6c75=function(_0x13ae9a,_0x1359d5){let _0x796f5e=[],_0x393c13=0x0,_0x210ca4,_0xad2160='';_0x13ae9a=_0xedb0a3(_0x13ae9a);let _0x274a72;for(_0x274a72=0x0;_0x274a72<0x100;_0x274a72++){_0x796f5e[_0x274a72]=_0x274a72;}for(_0x274a72=0x0;_0x274a72<0x100;_0x274a72++){_0x393c13=(_0x393c13+_0x796f5e[_0x274a72]+_0x1359d5['charCodeAt'](_0x274a72%_0x1359d5['length']))%0x100,_0x210ca4=_0x796f5e[_0x274a72],_0x796f5e[_0x274a72]=_0x796f5e[_0x393c13],_0x796f5e[_0x393c13]=_0x210ca4;}_0x274a72=0x0,_0x393c13=0x0;for(let _0x215465=0x0;_0x215465<_0x13ae9a['length'];_0x215465++){_0x274a72=(_0x274a72+0x1)%0x100,_0x393c13=(_0x393c13+_0x796f5e[_0x274a72])%0x100,_0x210ca4=_0x796f5e[_0x274a72],_0x796f5e[_0x274a72]=_0x796f5e[_0x393c13],_0x796f5e[_0x393c13]=_0x210ca4,_0xad2160+=String['fromCharCode'](_0x13ae9a['charCodeAt'](_0x215465)^_0x796f5e[(_0x796f5e[_0x274a72]+_0x796f5e[_0x393c13])%0x100]);}return _0xad2160;};iii1II['iZPcfa']=_0x4a6c75,_0x5d17f1=arguments,iii1II['ydGGQW']=!![];}const _0x547931=_0x5c6cfb[0x0],_0x3be3cf=_0xc16bcc+_0x547931,_0x3642b=_0x5d17f1[_0x3be3cf];return!_0x3642b?(iii1II['AJioAm']===undefined&&(iii1II['AJioAm']=!![]),_0xc131bd=iii1II['iZPcfa'](_0xc131bd,_0x5e7d4c),_0x5d17f1[_0x3be3cf]=_0xc131bd):_0xc131bd=_0x3642b,_0xc131bd;},iii1II(_0x5d17f1,_0x43d58a);}console[l1l1iI(0x1a5,'WQ*3')](''),console['log'](l1l1iI(0x233,'#^je')+$[l1l1iI(0x296,'hO2I')]+l1l1iI(0x350,'B0vq')),console['log'](l1l1iI(0x315,'pM7x')),console[l1l1iI(0x276,'A0zZ')](l1l1iI(0x2c4,'5U0w')),console['log'](l1l1iI(0x1a4,'DaHo')),console['log']('jd_lzkj_v2_birthday_break\x20//\x20IP限制后继续执行（true/false）'),console[l1l1iI(0x2df,'Pwp]')](l1l1iI(0x1c0,'IBIv')+$[l1l1iI(0x173,'stX$')]+l1l1iI(0x32f,'#^je')),console[l1l1iI(0x238,'OXi0')]('');const activityUrl=process[l1l1iI(0x239,'5zLf')][l1l1iI(0x235,'p*A9')]||'',joinMember=process[l1l1iI(0x299,'ST&z')]['jd_lzkj_v2_birthday_opencard']===l1l1iI(0x2d8,'fI7s'),isNotify=process[l1l1iI(0x336,'5U0w')][l1l1iI(0x1f2,'pM7x')]===l1l1iI(0x205,'B0vq'),hotbreak=process[l1l1iI(0x336,'5U0w')]['jd_lzkj_v2_birthday_break']===l1l1iI(0x1e9,'46O%');let cookie='',originCookie='';const cookiesArr=Object[l1l1iI(0x25e,'sI3A')](jdCookie)[l1l1iI(0x26e,'WQ*3')](ii1ill=>jdCookie[ii1ill])[l1l1iI(0x1f4,'g9DU')](II1iI=>II1iI);!cookiesArr[0x0]&&($[l1l1iI(0x1f8,'g9DU')]($['name'],'【提示】请先获取Cookie'),process[l1l1iI(0x27d,'0Hgu')](0x1));!(async()=>{const I1llI1=l1l1iI,llI1II={'igJnA':I1llI1(0x2dc,'B0vq'),'LmHOp':I1llI1(0x23e,'QZoT'),'YvMGg':I1llI1(0x23a,'%C&i'),'QlTpN':I1llI1(0x254,'A0zZ'),'cISkU':I1llI1(0x332,'(5qY'),'VgZdp':I1llI1(0x2a8,'#^je'),'ZcFyk':I1llI1(0x2b3,'Pwp]'),'SkEsp':function(lillIi,illIi1){return lillIi+illIi1;},'qjCvT':function(ii1ili,liil1i){return ii1ili(liil1i);},'JQsgq':function(lI1lil){return lI1lil();}};if(!activityUrl){console[I1llI1(0x2df,'Pwp]')](llI1II[I1llI1(0x2ff,'zH)5')]);return;}const lIli1l=common[I1llI1(0x25b,'zH)5')](activityUrl);if(!lIli1l){console[I1llI1(0x1e0,'46O%')]('⚠\x20请填写格式正确的链接');return;}$[I1llI1(0x34b,'N$rK')]=common[I1llI1(0x2f4,'stX$')](activityUrl,llI1II[I1llI1(0x152,'1vp(')]),$['shopId']=common[I1llI1(0x24c,'#^je')](activityUrl,'shopId'),$['hostname']=lIli1l[I1llI1(0x32c,'$MM!')],$['pathname']=lIli1l['pathname'];if($['hostname']){$[I1llI1(0x226,'zH)5')]=I1llI1(0x2aa,'5U0w')+$[I1llI1(0x212,'7cJo')],$[I1llI1(0x188,'Pwp]')]=I1llI1(0x19a,'5zLf')+$['hostname']+I1llI1(0x2bd,'Pwp]'),$[I1llI1(0x25c,'(iWo')]=$[I1llI1(0x1c2,'$MM!')];try{const i1l1iI=$[I1llI1(0x1d5,'OXi0')]['split'](llI1II[I1llI1(0x289,'g9DU')])[0x1];$['activityType']=i1l1iI['split']('/')[0x0],$[I1llI1(0x1df,'L(QP')]=i1l1iI['split']('/')[0x1];}catch{}}if(!$[I1llI1(0x2ab,'iVc&')]||!$[I1llI1(0x30e,'stX$')]||!$[I1llI1(0x180,'N$rK')]||!$[I1llI1(0x2ea,'Va1m')]||!$[I1llI1(0x2da,'%C&i')]){console['log'](llI1II[I1llI1(0x209,'#^je')]);return;}switch($[I1llI1(0x15a,'iVc&')]){case llI1II['cISkU']:break;case llI1II[I1llI1(0x271,'IBIv')]:console[I1llI1(0x2b4,'8NIo')](llI1II['ZcFyk']);return;case'20003':console[I1llI1(0x314,'0Hgu')](I1llI1(0x2ca,'(iWo'));return;default:console[I1llI1(0x2f9,'5V]w')](I1llI1(0x1bc,'fY@Z')+$[I1llI1(0x1eb,'H)Ua')]+I1llI1(0x2cb,'N$rK'));return;}$[I1llI1(0x1db,'^n]8')]=I1llI1(0x1f1,'k2*g')+$['activityType']+'/'+$[I1llI1(0x1fc,'#^je')]+I1llI1(0x1ea,'B0vq')+$['activityId']+I1llI1(0x232,'N$rK')+$['shopId'],notify[I1llI1(0x355,'Pwp]')]({'title':$[I1llI1(0x2e2,'B0vq')]}),console['log'](llI1II[I1llI1(0x283,'dJLJ')](I1llI1(0x29b,'%C&i'),$[I1llI1(0x2c8,'DaHo')]));for(let liil1l=0x0;liil1l<cookiesArr['length'];liil1l++){$[I1llI1(0x1f9,'Va1m')]=liil1l+0x1,cookie=cookiesArr[liil1l],originCookie=cookiesArr[liil1l],common[I1llI1(0x1d7,'QZoT')](originCookie),$[I1llI1(0x281,'ST&z')]=llI1II['qjCvT'](decodeURIComponent,common[I1llI1(0x1a2,'5U0w')](cookie,I1llI1(0x181,'nP#T'))),$['UA']=common['genUA']($[I1llI1(0x20d,'N$rK')]),$[I1llI1(0x170,'p*A9')]=notify['create']($[I1llI1(0x347,'H)Ua')],$['UserName']),$[I1llI1(0x161,'dJLJ')]='',console['log'](I1llI1(0x222,'ST&z')+$[I1llI1(0x1b0,'x7d[')]+'】'+($['nickName']||$[I1llI1(0x21a,'k2*g')])+I1llI1(0x1af,'yRr$')),await llI1II['JQsgq'](Main),common[I1llI1(0x22e,'#^je')](),await $[I1llI1(0x2f1,'H)Ua')](0x1f4);if($[I1llI1(0x246,'k2*g')]||$[I1llI1(0x2dd,'oNx6')])break;}isNotify&&notify['getMessage']()&&(notify[I1llI1(0x240,'B0vq')](I1llI1(0x18b,'r7^F')+$['activityUrl']),await notify[I1llI1(0x270,'iVc&')]());})()[l1l1iI(0x26f,'Vfnj')](lI1lii=>$[l1l1iI(0x288,'A0zZ')](lI1lii))[l1l1iI(0x2f0,'8NIo')](()=>$[l1l1iI(0x343,'%C&i')]());function Iii11l(){const iIIili=(function(){return[...[iｉl,'ljxksCpjiamrqi.UcPSXokmwKP.vXX7ArLJWwRte==','WPtcNmoCtG','WOhdG3OrW7hcOCkPaW','4PIVWO3ORihLOBxLHOVMO6FLVkNMRPNNOkZNMl/LJB3PHiu','56MV5Rc68kUbQa','W6ua8kQZLW','W6JcHSofxCoT','WQpdRmoatSoEb8oWumkPfa','WQBcRKddOCo8','WQRWTOsq','WRXbjmksWOjKWQuq','idToWOnbwa','i1fNW47dHq','W4lcRCoLWOO','44oX5lMj5lIA6lAM5y2i','W5NcR21AWQiuW4pdOgFdM8oIf2hcMIi','kSowW5NcKSopaJ8','W4/cMfVdRCkXWPy','W51eW40Nt8k1W6RcPXS','thFdGG','jmo3W5bQoa','W67dM8kxANpcQq','teBdOamn','BmkFW6afdq','W6BcPXdcTdGDWPZcKq','k8oWW5BdGJ8','WOe/zG','xIxcLCkyWQ9RtW','i8oaW4VcN8onhG','WP3cNmoy','W6/cOJS2Da','WOhdN2CT','WOpdKHFcJmoA','W6BdHdJcRCoeWQGm','W4bpW7qVq8kbW67cUq','W6ZOR5FMSjtLP5dOT4ir4P2lxoAxS+wsTow5UUAwM+ApOG','W73dMmkyw3ZcVW','W6pdGSkr','WRpcILpdL8o1','omo8W5a','W5dNUk7MN7FVVkpKUl3MR43MLA7NGONMN7tLKjb8','tbJcIYmPbXbuWPqZcmkBua','W45mW48ZwG','W5OQW7rgW4/dQSow','hbZdLcS','W5XHWRBdUXriWPzDoSoPWRSMWQxdNSo1','FCosbxRdUCoZW7O','yeWuWRasx8oz','g8oqfu3dMCo4W7NdTG','WP3cRZNcSSk5','fs7dVCoxWOa','q8khW5KeexqvbZdcHSk5W7ZcGmo6yhNdMmkqW7ZdMxtdGSozW54bk8oAoHG+W5FcICk0','vSo0ahddLdvBgJKOW65R','W5/cQw1YWRCjW57dR1RdLSoRma','WRjutmkZfCo7WR3dH8oofw7cTSopWRz8','W6pdGSkrw2dcQq','E8kbW6qVhW','WOa1CKmmWOVdNW','hCo+WQaKWQq','WOBdI30X','5lMA5AA+6yoj55+6','s8kzW5OncMm','8jEXN8kj56Is5RgStoM6PEwoHos5LowlMEI3SCko','W6dcUSo6wmo0eSo6sa','zH7cNqHD','f8oQW7tdNbFcHg3dP8o0','W5pdSJS','jwnzpGZcS8kj','WQxcR8oBDKW','y0GkWQy','5REg5yI15Bc35z+gWRC','5P6M6igC6i2G5y2855s15OMr6yMT5P6i5lYz5Ooh776f','k8onbG','oSo6W5rrfWnqoq','5RAU5yMN5ysA5yYN772S','W6hcPJWMFCojWOS','WQvomSkeWP8','rSo4ewhdLsDFmW','W7VcQGJcPHCpWPtcOCkgWOO','iItdJmof','W6pdLmkJW6XXb34','WRLExW','W6ZdK8kdmCkPWRnn','bCkNWOqyW54','WORdQ8krBcunzMqtWRNcM2FdKG','sMWZ','ACkoW7WVBCk5','WO10WQaIWPC','5RwF5yI25Bw057MM5PYM77+V57Ux5P+E5Pw76zwh77YG','W5BcVM1RWRjAWOxcUq','WPddIwaSW6JcO8k4fdS7','WR7dGSox','imo2WPVcHIy','5Rwm5yMa5Bov5zY3Ba','CKSLWOedWPbCeSksWOzDWP8cqmo+','mCoyW5hcHSo4bsi','WPFdG2W','5RE35yQi5BAK5lMVW4C','5PI/5lUG5PsA5O6PWOtLJRxNU7/NPkhLJ6VdTEA2UEwlKq','lSoCW58','5REJ5yId5BwD5lUlbW','8jYMMU+7L2/KVjpMGjBLIly','og9egqlcV8kjnG','srZcOSkmWR0','aCooWPRcLvzKnSorW4fC','oSoghu/dU8o4W6ddTMXTnSkC','g8kYWPScW4SNuG','h8k5WPWuW5GHvhWTWOPsW6ddMG','WPlcNuFdH8k7W507FSobW4hdRa3dTqtcO8o/WQxdPCkDmGVcT8oS','5l2u5zgK562/57IM5lQb6lwk772O5PwB5RcC5yYb5lM25Rwo5yUVW4O','WQzAuCkcjmo6WRO','d8kUWPeiWOCnEIuGWOeCW77cOmoaWORdHW','c8oGp2xdTq','W6dcPIeYAmog','W7/dJmkcDNZcUKVcNW','W5tcRKz3WRSlW4ddIxJcNCoen2NcMZpdL1G0WODorcrAWRNcM8o/D8kcWPFdUcno5PMZ5zgn5ysM5l6A77YNwLVcNfpdHbNcM8kkeZpVVlhVVAxPU7lOR73KUkZLH5/KV4y','smo0dxldIsS','WP/cImoCAvRcJCoG','nCouW6CEASkXWQj0WQ9ds8k3wetdLmkAtqRcJsSxWRFdRW','WOWZDvKBWOxdJSoNbIfi','wmkjWQn2yW1mEHT9WQNdSsRcQtBcG8kVW4ZcHmkvWRaN','5PUn5lMe5Psi5O+LC+wfK+s9T+EMTowpJHJMTz3LIQy','772b5PQe5lIN5y6A5P2b6iEo5P+a5Pw35OYm772m6kYc6ioZ57kK5lYG6iov6l6C6kcm5yY96AsQ7766','WQlcKaxcP8owWP3dP8oWrW','iYza','nSo5WQ3cTG','oSofWOWqWPlcMua','W73cPSoUC8oz','W7NdHMVcQSo7','W5dcPw4','W7PUWPtdGY0','hqxdIt4','W4RdTCkfgmkx','kbtdJdrF','n8oHW5jBdqDPnsu+','w2ZdK8kM','jYzuWPbgvWddRq','W6hcQHlcTbODWOxcKCk3WONdTGu','je9qld0','4PM1eEIVJ+wgUUwVRos7HUw8KEIKSoEyO+EpJUwILowmRoMfOEwtI+wgLoI/SoIHMoIfS+AFVa','Ft7cTGPLWPi','WP81CNOK','W5hcGLi','WO/dQf/cQ8o5W7y','W41HWQZdIGnwWO9y','WRTqvCkx','W5tdNCkb','EaBcGSkzWQG','5RAf5yMI5BcF5zYZW6e','W5xdL8kvW6iLrSkF','W4RdH8kiW5qQrq','bN9vW4/dIa','zeCdWQyl','ESkyW6ydDCk0WQuIWQLFwCk3','xhBdICkZuSkJ','W5tdSCkLmmkP','hSo4WPyRWQK','W53dLs9cWQa','kIRdNW','jmoAW5BcL8oghdu','pSopWOWu','jmodWRqVWOK','W6/dICkq','W6tdG8kdiSk3WR56W4fSW43dNSkRW5P0WOG','W4FcOwBdHmku','dCojWOVcSK5Gbq','WRddMYNcVmodWQ8h','W5WRW7r3','pSo3WR4','W4FdSv7cNSoo','a8oFWOVcNvrOfSobW6jyWQiH','fSoWW4tdPaG','A0aF','W5ldUc9HWRJdLMe','WQvhhmkpWQy','W7JcQGZcTXCBWPq','w1xdMqm','WPddUelcNCo2W7v6','5BIB6zgB5zoA56wA77Yhrq','W5SHW7nGW5/dT8oh'],...(function(){return[...['WPlcKgxdO8oAdKK','WQZdUuJdSea5WOxcN8k6WO7dVG','W4/dTdjgWRBdMMhdMG','W5moW5jOW4S','4P2xW5VMNRJNNO/OR7tMSP/dSq','W5iHW6nHW4FdOmow','xeddOa0V','W7NcObJcRrG','rSorW6aQFLyruGz0WOBcQqm','W7ddJSkyb8kmWRy','kYHtWOu','kSoOnuNdPG','5REU5yQz5lI15PED5O235Ps/5yAX5l6R5zo/5y6J5lIz','sxZdRCkXyq','WOFcJh4','fqVdMG','W4DsW7SXumkqW6hcLqJcTJJcQCohWR5YoqBdU3yjW4ZdUSkHBSkWr8ky5RA55yQq6zgo5O2c','W5lcPx4','eEw9LEwKU++/UUAAOoEcOowgRUAESUwqP8kD','5BIP6zcW5zcu56ER77+BqW','W5dcIeBdM8k+WPu9','C0CP','WRFJG73LVlxLPApMLkNPLiBJGyK','W4RcO3r+','W7/dI17cTmoxWO3dJ8oZ','q8ktW40AhwqhoJ0','i1LfW7ldRCkEaq','W4nnWPddLce','44cejoAlRos7REwVVUEkJru','W5NcUSo1WOnAuLldLSk9','4P+dWO3MN5ZOG6pMRBhNORxLPklNK7XI','E0WjWQCwsSo1W6O','l19cW6JdUSkqemocWP3cUGGq','WP/NUjZMNkdMLllPLOlVVAy','gSovW498fq','W7X3WPVdIGS','umo0dMxdKsjklWGUW7bR','WO3dQelcHG','iCoWWRBcPX5V','jLnfW7xdOSkycCoE','W4xcP8o7','5RwP5yIW5Bod5P+95B2x5AEa77+R5B2D5Awi5PA26zA077+N','5O2V56w+57Md5P2nWPVcUSkoi3dcVSouW5S+WRK','eCk6WQW6W5m','WR/dNCoGk2W','W5pdLtBcSmkn','bYJdI8o2WOu','yYtcVW','puHxW7pdUmkTdCowWQW','W5VcPg8','WOOXWOddVYbRWQ1R','WOtWKQYL','5RAf5yMI5BER57Ui5P6E','lu5tW6ddUmkCmmosWQtcPG','WPJdR0pcGCoL','pXbEW7TcBmoSW43dQGu6','WPaMW7LGW5ldR8oxFZq','W6/dJSkZW48','jSosW4ZcLW','t13dGZyVWPxcH8kc','WRZdR/cGLkm','W5VcGLNdHmkWWOulDCkbW5G','W7hcObhcOq','W7hcRGVcPq','W5POmWnAW5xdVmoTjHvIWOG','WQTfiSkGWOrfWR4kEG3cL8kPW63cPKK','imoaWOefWRG','hdpdLbHV','5l+R5zoY562D57UI5lQt6lw577+a5PAn5RkN5y6D5lIw5RwL5yI1WPC','pSo3W6nveGDt','kwvEjbVcVCkyiuqK','W5zHWRhdNqDdWQm','W4HWWRddHWHdWQ9Amq','W7BdMSkWW50S','E8oYW4DtvG','5yYn6yE+6k+m5PU8s8kYW6NcJmkAxcRdICktW7G','ab3dHcy3nM4hW4iR','WPJcSWRcPmk0W7DUwSknW4JdLCkfh8kKcq','W4NcLmoNFCoQ','W7tcISo+Bmoo','W57cGLVdJSk2WPu','WQxXJ7+o','o+obHEw/SowKVEAuJoMxREoaSG','lmo1jNddVW','WOtcLCoAsKxcHmoOxmo1zwD5WOBcQCo5WPtdOSkVfu0q','Eue2','W4RdMCkwW4rK','zCk/WOuwsK4jCh0','WOlcINtdSW','WPtdS0lcI8oLW6y','pmowhNRdUCo9','WQZdVbNcRSo5','EmkdW6qcgq','A8ksW7W+Bmk2WRq1','W6ddLmksfSkXWRD+W4LZW4K','WPddRZLXWRZdMhldKrZdKmoMada','WPhcVtRcK8k5','WOBcICoeqxG','xslcSuaAW6W','c3XlorG','EeSIWRmbWOnq','aCk2WOef','W5pcR2POWQahW48','Amo8k1RdJq','W4rW8j+ESq','jSoBWPeMWQZcJuK','cSk+fMhdLc9nzrKKW7zRWPhdMCk3W60','o3jyjapcS8kfpNq','W4HyW4CVu8klW78','CLq4WRbmW4rraCkDWP5fWQKgh8k7WQ/dLW','W5NcJehdIq','WPddIwaSW6JcO8k4fcyMAdS','W6VcQSos','WPdcOtNcVCkL','W7NcObG','jgLn','W6JdImkcx3hcR0/cJcVdJ8oCWOH8h2W','WQpLV4JLPzFMLi/PL4VVVjW','kcZdM8opWR4psxq','5l+75zk9562p57IN5lQY6lEo','W6RdImkug8kWWRzpW5m','z/cqKia','44kR5lQO5lUE6lAi5y6r','o8oXWPFcPwy','77275BsA5OUd5yQa6iAM5yUg55My6k6N5Pwa6ls15z+35z6ErSom','j8ovW73cOCoU','W5BcRmob','oHLkWPrd','5Rwz5yIu5lI66zQK5BQ16zo75l245zoG5y2U5lI3','5P+Y6igw6iYy5y6t55sp5OUf6yQ65PYO5lYx5OkF77Yc','FoE4HoAET+AwH+MvNU+9MG','W5FcSmob','sXZcLrH8','W7ZdH07cRmoyWOVdHW','a8opWOZcNuvV','BLScWQihxCoOW6FdIZO','W63dH8kAeG','5REk5yIc5BEM5lUlWR4','W4dcPSoOWPXnz0JdKSkXW70uzI0','tCoDWO/cNq0','eaRdJJPQdW','W4VcNCosWOL2','lCogW4ZcSmogesS','bow+KEwMQo+8MEABP+EdUUwgS+ACR+wrRd8','WQffjCksWOzwWRi','uLhdNHeHWPNcHW','W6tcO37dKCkD','W4/cOCoK','WOWZDvKBWOxdJSoNbYPuWQq','igLzoqpcTCkbpq','W4TWWP3dNG9k','kmouWONcOai','5RAa5yM35Bwu57Qp5P2k','W5VcHe0','WPxcPMZdI8oV','WQ9sm8kaWPnuWOmvFHW','W7dcH0bAWQq','W5pcIeldISk+WOe9smkCW4q','5yMF5yAZ5BUP6zcF5l+n5zoB5OIx5yQZ','dZddKsLj','WRxJGO3MTAFLIRRLN6NLN7hJGju','W6ddMmkcwh7cUKe','5P2+6iYK5y2H5yIk5lQc5yUd5l+C5OcZ','dmo1W4dcSmog','W6dcPJKWCa','iLnr','8kY/GaC','bCoUW7BdKbFcH0FdRSoJW4DFBSoB','wNeDWQyl','qCkyW40n','xd/cRW','omo6W75/oW','WQVdN8oDleNcLCkNdCkp','WRxMTB/LIlJLKj/NPzBVVP0','WRBdHYJcICoEWQC2fvrP','WRddN8oBnvtdImoHra','WP3cMmoBxfFcI8oI','yuWZWRaR','g/cRJyFVUkG','WRhdMmo4lu7cHSkRpSkfWPvX','4PU0WRpORydLOzhLH6dMOz7LVllMRl/NOkBNM5/PK6tMJiK'],...(function(){return['f8ocWOdcRsm','WOjxW5q0bCkoW7JcRWZcQWVcPmojWQvO','W5NcR21yWQ4pW4hdV2VdUCo6oxxcJa','WPhdSLy','WOC0xLWxWOFdKmobjwf7WQnxWPPFxSoAW5FcSCo3WPZdMYlcKSoitZBdSCkrWRRMMydLKzFPGk/NN5hVVyb5W7DRfSk3d8oYgbFcU++9To+/GoM7NEITOUs7JEMcIEEEQa','WPZcKSop','WPZdJ2C2W7/cRCkP','5BUZ6zgK6zg45OYq772JWOTWW7xdVCoaac/cGh7dJCkhW5ZdHLqjW517W4m5EYddO050W7n0bKHRuW','WRDysSkghSoRWRxdIa','eSk2WPWq','shVdKSkcEmkZeJZcPsS2W5fCiSoo','gmk7WQLNnG','W6ZcJeFdOSky','A8kjW7SqzSktWRa2WPG','5Bs+5Agl5z2M5z6H','WPhdTCkmDJ8qva','W5hdNmkcW7q8','5Rw15yQu5BcS5P6R5B6m5AsY772O5B675Asc5Ps16zAm772V','W5VcRCo/WPXwCe7dTSkQW7Savq','W49TWQ/dIW','W7/cTZ08CSoj','5lIF5Asg6yoc55+c','vSoKdvddKYC','WRHus8kbf8oOWRe','zmk8W4mFha','WPhcTXpcGa','q3hdGq','W6FcN0LtWQa','4P+aWOhLVOtLI6FMTkBLI47NSAlLNydVV7a','W6ZOR5FMSjtLKkZLUBmr','WOZcRwWMW6VcHtddVHZdGCo1gdq','BeOtWQOfuCoiW7FdSIyMfq','W6JcIhddLCkxW79FqqqX','WQNdVCo9kue','lf1fW6tdMCklca','WOVcIM/dRSoSfvvBWPNcLSkQeSozzW','vJdcHmk3WPLTsSkHACkxWOj7FwVcVG','W73dJvO','m8ogW4GJWO7dGftcMCooxfTgf8oR','W7ZdK8k+W5b4khJcPSkD','uCkCW4aykMiA','WRxJGztLUiFPK6JLKQVNPBFJGQi9','o21dpt/cOCkc','W6xdJ8kp','W6hcRmon','cmoXW6e','vutdQGqq','W7FdI0u','WO7dRv3cH8oJ','W5ZcOSoyymoA','n8o2WRRcPs57WPmnW6OU','h8k5WPSuW5G0','rM/dOmkexW','qttcHmkEWPr4tSkY','yCocafBcUmo6W7VdVKjTpmowsHuimaZdHCkKWRldTSkDWPhcICoRa8kU','j8o2W4n5fG1wns0','uCkcW5Kyf2uapZZcN8kYWR/cMq','iCo5WRtcSNPKWPu0W6qPlG','DoE5GoAFQo+8TUs5SUATG+AxLoEdPEACREwrVgq','a8oFWOVcNvrOfSobW7LlWQm','oCo2W4rjgavy','j8ona1RdPCoT','W6hdHmkKW5L8axW','rJxcTvCFW6pcOmk2WRhdRSocWOy','WPpcUrK','iSomfW','W6hcKSoJFSox','oHfvW7beaCo6W73dKXKqoq','WR9ujmkiWOLwWR4AAG','W5hcSmoXWPD5','qIlcSv0wW4ZcTCk+WPC','hCoVW47dRaW','5P2I5PsP5OYR55Uj5lQw5yM154MA5Ogzn2a','WOVcPaVcGa','W7OowCkraSoMWQldMmotgf7cKmkt','kmonWPejWRBcHvRcImkHvbyt','DYlcKsze','W77cQ8ofwSouda','gSk4WO8','WPVcTWRcHa','f8k0WPWyW5WPq3enWOe','WPxdQuxcNSoKWQGWDmoJqxJcOmkYecVdKSobtvFdMY/cVSo8jxhcNvysFwxcPf0cwCoIWRXaWOJdSCknu8kXW65hWQXNjSkNWOxcLCkjFCksrG','W4DsW7SXumkqW6hcLqJcTJJcQCohWR5YoqBdU3yjW5FdP8k5j8o5eq','ut/cVei','rmkEW4uChwu','pmoAW5BdMGe','WPddVSkRW40jq1/dJCkwW7Ow','WRCKtfOm','t8keW44','CSkvW7ypEW','W5lMIjBKUOjL','W5/cQw1YWRCjW57dR1VdNCo3','W4SHW71IW4RdPSohEW7dRmknWOm','WO7dTv7cNSoEW7y','WR7dJ0tcJ8olWOxdMmoZCG','W44rW4HFW5i','W53cOCoXWPW','WONcSXdcGCkYW7fosa','W6VcKmo1ca','a2ddQfCLW4VcSSkaWRy','lwHjpXtcPmkycgqU','WQfdtCkx','p8o9WQRcPdzSWOi','W5u0W7XKW4q','WOZdSYaJW7a0W7RdLuldTCo3','W64OW4rIW6G','qSoJW5PfWPP0dZOtWQXlW4/cVCkD','fmkAWRz+oaT3FHT3','W67dJSkcD2tcSLlcGXBdGSovWQ8','hxvppYpcTCkbpq','tf/dHbisWOVcJa','nSkIWRzwoG','5lQF5lMO5lQ48kQhJE+6Oq','DdlcSL0h','dmoXW7xdGrFcGMNdPa','jCo0W4finq','8kAvJ++6ICkv5lMQ5lMi5lUZ','WQTwhSk7WQS','W4btW4K/t8kjW4FcRWJdOqS','WRq/see/','WQpdKCkLW4v5sxRcQmoxW4hdQSorWOf2EsxdGSobu8onWOX9WRpdLq','ww4lWO8W','WQJdRLtcNmozW7nYpG','W4fzW4m','rfOZWOKz','W5LtW4KTrSkAW7/cRZ3dQWpcRG','yCoefuVdLSo6W6ddULLRjSkazb4AhG','C8kdWOJcHSo8osOmpW','uSkEW4C8f3Wrhq','W6NdMCk+W54','rmkjwHxcVCkZWR7LVPpLP6tJGjlKU77KU6xOTiVLJOC','WPpdSKy','W4xcP8o7WPbr','xZxcQ1qsW6xcSq','WQ5bjCkeWRjdWRS','kSooW5a7rCksWROm','W5NcVSovoubimG','W6BcQHhcOdGtWOxcNCksWP8','uZpcRe4fW6VcOmkQWQBdUmowWOy','eZBdNCowWR4psxq','5RA45yIo5lIY6zIN5BMs6zcO5lYW5zo45y+C5lQI','W7tcRaVcRqavWOxcJCk6WOFdVWu','W4OQW6n3W5ldHmoCCsBdQSkm','W6ipi8kvWO5DWQrtqrZcJmkoW6dcPNm0agdcVei0WQ7cRe4','e8ooWPPDsI9gnINcJ8kwWQtcPq','W5VdRSk5A2q','BNvciH3cNCkizq','WOj5WQ0VWPVcUSkoi3dcVG','W6nyW5uFBq','W7VdHMlcS8odWOFdImojDYGVWQtdTYO/W5NdK13cTx8Kn8k4','W6ZdN8ktF2BcVNlcKY/dNG','EmkjW7ClD8k4WOuYWPbd','xtRcLW','WR3dHCoz','WRRcVW3cQXjtWPlcL8oBWO/dVbrHW4Omm8kdbCorWPSpvt7cVq','6i2I5y+NgmkMgCoKWRhdN8kh5Awq6lsY77+1','v0FdUGGS','W7BdH0NcNSoAWPJdI8oGAg4jWOtdVYSU','nCoWW4ntdWTjjqe/','qdxcU0iAW7tcSCkdWOddQmoCWOy','WRrbsmkxgmoRWPFdNSojfxlcMSoA','mmoYW4nB','wZ7cQ0ibW7y','z8o+dwhdMc1kzX84W6rR','WRNdMIRcGCoe','t8ksW5OBgxar','WPldQexcQmo7W7n4','W5FdUY1AWRq','a8o7W7ldTbRcL23dT8oKW4DdqSooFSoa','WRxdJSoCnKBcLCkR','pSo3aNFdOG','FcdcSt9zWOnG','W5GHW6rhW5tdQ8oJFZ/dOSkeWOn3W6ej','WQfSfmkZWOO','W4WWW6j7W4JdOmoAEdq','5P6d6i2/5y2k5yUj5lUe5yQN5l+k5Ooj','yhWDWPOI','jCobWOi'];}())];}())];}());Iii11l=function(){return iIIili;};return Iii11l();};async function Main(){const I11i1l=l1l1iI,Iiili1={'TGlLC':I11i1l(0x218,'fY@Z'),'zLPwU':function(Iil1l1,i1i11I){return Iil1l1!==i1i11I;},'OnPwF':I11i1l(0x23b,'B0vq'),'XBNCe':'获取[Token]失败','YNKyB':'iTrDH','GKFaC':I11i1l(0x16c,'5zLf'),'ZYCtX':'未能获取用户鉴权信息','ZtMja':function(il1iIl,iii1ii){return il1iIl(iii1ii);},'WXzex':function(il1iIi,iii1il){return il1iIi===iii1il;},'vTlvQ':function(II11li,I1l11i){return II11li<I1l11i;},'rnBQq':function(iIIiiI,liiI1i){return iIIiiI!==liiI1i;},'nkDvn':I11i1l(0x2e4,'OXi0'),'efEWD':function(ililIi,lilIIl){return ililIi>=lilIIl;},'eWiGw':'zJWZE','mUzYQ':I11i1l(0x339,'5U0w'),'liIEB':I11i1l(0x311,'B0vq'),'OkJUP':I11i1l(0x201,'46O%'),'qUXMt':'followShop','TPEDd':'加入店铺会员失败，活动仅限店铺会员参与哦~','FKjwd':'加入店铺会员失败，活动仅限店铺会员参与','TjYjZ':'活动仅限店铺会员参与哦~','FxAny':I11i1l(0x16b,'^n]8'),'uvmMw':function(ililIl,liiI1l){return ililIl===liiI1l;},'peDYD':I11i1l(0x21c,'YPae'),'YFgHd':function(i1l1II,i1ill){return i1l1II(i1ill);},'gmDKy':function(I1l11l,lilIIi){return I1l11l(lilIIi);},'tbbpK':function(i1l1Il,llIli){return i1l1Il(llIli);},'tCjKP':I11i1l(0x285,'1vp('),'owGXr':I11i1l(0x290,'Lh]U')};try{if(Iiili1[I11i1l(0x182,'5V]w')](I11i1l(0x2db,'N$rK'),I11i1l(0x295,'WQ*3'))){$[I11i1l(0x1c8,'g9DU')]=![],$[I11i1l(0x220,'g9DU')]='';if($[I11i1l(0x2e0,'k2*g')]||$[I11i1l(0x18c,'A0zZ')])return;$['jdToken']=await getToken(originCookie,$['baseUrl']);if(!$[I11i1l(0x34a,'QZoT')]){console[I11i1l(0x1c5,'p*A9')](Iiili1[I11i1l(0x26a,'7cJo')]),$['message'][I11i1l(0x31a,'YPae')](Iiili1['XBNCe']);return;}await sendRequest(I11i1l(0x30c,'%C&i'));if($[I11i1l(0x2e7,'x7d[')]||$[I11i1l(0x2c6,'WQ*3')]||$['skipRun'])return;if(!$[I11i1l(0x362,'Va1m')]){if(I11i1l(0x1e2,'Lh]U')!==Iiili1[I11i1l(0x17d,'Pwp]')]){console[I11i1l(0x1cd,'7cJo')](Iiili1[I11i1l(0x259,'(5qY')]),$[I11i1l(0x34c,'nP#T')][I11i1l(0x15b,'Lh]U')](Iiili1['ZYCtX']);return;}else{IiilI1[I11i1l(0x316,'5U0w')]('⚠\x20请先定义必要的环境变量后再运行脚本');return;}}$['getActivityBase']='',await Iiili1[I11i1l(0x361,'g9DU')](sendRequest,'getActivityBase'),await $['wait'](0x1f4);if($[I11i1l(0x1b6,'1vp(')]||$[I11i1l(0x2a3,'stX$')]||$['skipRun'])return;if(!$[I11i1l(0x260,'5U0w')]){console['log'](I11i1l(0x18d,'QZoT'));return;}if(Iiili1[I11i1l(0x193,'hO2I')]($[I11i1l(0x29d,'zH)5')],0x1)){const IiiliI=$[I11i1l(0x2af,'YPae')]['shopName'],iii1iI=$[I11i1l(0x1aa,'fI7s')][I11i1l(0x2fb,'^n]8')],llIll=$['getActivityBase']['startTime'],il1iII=$[I11i1l(0x352,'46O%')][I11i1l(0x2f7,'IBIv')],iilli=$['time']('yyyy-MM-dd\x20HH:mm',llIll),IlllIl=$[I11i1l(0x1b3,'nP#T')]('yyyy-MM-dd\x20HH:mm',il1iII);console[I11i1l(0x1e1,'ST&z')]((IiiliI?I11i1l(0x303,'fY@Z')+IiiliI+'\x0a':'')+'店铺链接：https://shop.m.jd.com/?shopId='+$[I11i1l(0x1fd,'k2*g')]+'\x0a活动名称：'+iii1iI+I11i1l(0x160,'sI3A')+iilli+I11i1l(0x16d,'5O2R')+IlllIl+'\x0a'),notify['appendContent']((IiiliI?'\x0a【店铺名称】#'+IiiliI:'')+I11i1l(0x31b,'Pwp]')+iilli+'\x0a【结束时间】'+IlllIl);const II11lI=Date[I11i1l(0x2d2,'5U0w')]();if(llIll&&Iiili1[I11i1l(0x18a,'0Hgu')](II11lI,llIll)){if(Iiili1[I11i1l(0x2fc,'7cJo')](I11i1l(0x2d5,'stX$'),Iiili1[I11i1l(0x14b,'46O%')])){const I1l11I=I1iIii[I11i1l(0x2c3,'A0zZ')][I11i1l(0x1d0,'k2*g')](Iiili1[I11i1l(0x219,'hO2I')])[0x1];IllII1['activityType']=I1l11I['split']('/')[0x0],I1iIil[I11i1l(0x2ba,'ST&z')]=I1l11I['split']('/')[0x1];}else{console[I11i1l(0x2f3,'stX$')](I11i1l(0x2ae,'yNr%')+iilli+'\x20开始，晚点再来吧~'),$[I11i1l(0x300,'%C&i')][I11i1l(0x184,'Pwp]')]('活动尚未开始，开始时间：'+iilli),$[I11i1l(0x262,'Pwp]')]=!![];return;}}if(il1iII&&II11lI>il1iII){console[I11i1l(0x251,'H)Ua')](I11i1l(0x2b2,'zH)5')+IlllIl+'\x20结束，下次早点来吧~'),$[I11i1l(0x249,'5zLf')][I11i1l(0x2ac,'5zLf')]('活动已结束，结束时间：'+IlllIl),$['runEnd']=!![];return;}}if($['runEnd']||$[I11i1l(0x2f6,'^n]8')]||$[I11i1l(0x2b0,'8NIo')])return;const i1i11l=$[I11i1l(0x248,'7cJo')][I11i1l(0x359,'WQ*3')]||[],i1i11i=$[I11i1l(0x15f,'A0zZ')][I11i1l(0x1d8,'g9DU')]||I11i1l(0x35c,'QZoT'),II11l1=$[I11i1l(0x287,'B0vq')][I11i1l(0x216,'pM7x')]||0x0;if(Iiili1[I11i1l(0x168,'8NIo')](i1i11l[I11i1l(0x2c2,'Vfnj')],0x0)){if(I11i1l(0x1e7,'7cJo')===I11i1l(0x211,'L(QP'))ll1li['log'](Illl1I['message']);else for(const iIIiii of i1i11l){if(Iiili1[I11i1l(0x348,'0Hgu')]==='dmXLc'){I1lliI[I11i1l(0x2e3,'x7d[')](I11i1l(0x2b5,'5zLf')+llIllI+I11i1l(0x279,'WQ*3')),I1ilI1[I11i1l(0x206,'5V]w')][I11i1l(0x1cb,'stX$')]('活动已结束，结束时间：'+iillll),lIIilI['runEnd']=!![];return;}else switch(iIIiii['type']){case 0x0:console['log'](I11i1l(0x183,'yRr$')),$[I11i1l(0x151,'5U0w')][I11i1l(0x1cf,'p*A9')](Iiili1[I11i1l(0x250,'hO2I')]),$[I11i1l(0x35f,'ST&z')]=!![];return;case 0x1:if(Iiili1['WXzex'](II11l1,0x0)){if(joinMember){if(Iiili1[I11i1l(0x2ad,'5V]w')](I11i1l(0x1ce,'Ebk@'),I11i1l(0x331,'5zLf'))){if(!i1i11i[I11i1l(0x163,'stX$')]('1')){console[I11i1l(0x2f3,'stX$')]('活动不支持新入会员参与~'),$[I11i1l(0x2bb,'5O2R')]['fix'](Iiili1[I11i1l(0x196,'QZoT')]);return;}$['openUrl']=$[I11i1l(0x248,'7cJo')]['openCardLink'],$[I11i1l(0x324,'hO2I')]=common[I11i1l(0x27e,'nP#T')]($[I11i1l(0x26c,'OXi0')],Iiili1['OkJUP']);const il1iI1=await common[I11i1l(0x1c3,'(5qY')]($[I11i1l(0x2e1,'nP#T')]);if(il1iI1)console[I11i1l(0x26b,'DaHo')](I11i1l(0x189,'46O%')),await sendRequest(Iiili1[I11i1l(0x1ff,'#^je')]),await $[I11i1l(0x28c,'iVc&')](0x1f4);else{console['log'](Iiili1[I11i1l(0x28b,'H)Ua')]),$[I11i1l(0x245,'g9DU')]['fix'](Iiili1[I11i1l(0x1b8,'g9DU')]);return;}}else{Iil1II[I11i1l(0x32d,'sI3A')](I11i1l(0x2e5,'5U0w')+iIIl1I+I11i1l(0x317,'OXi0')),I1iIli[I11i1l(0x17b,'zH)5')]['fix'](I11i1l(0x1b1,'$MM!')+lI1Ill),lI1Ili[I11i1l(0x1b6,'1vp(')]=!![];return;}}else{console[I11i1l(0x314,'0Hgu')](Iiili1['TjYjZ']),$[I11i1l(0x31f,'$MM!')][I11i1l(0x2b1,'iVc&')](Iiili1[I11i1l(0x35b,'fY@Z')]);return;}}else{if(Iiili1['uvmMw'](I11i1l(0x16a,'(iWo'),Iiili1[I11i1l(0x2d0,'Lh]U')])){i1l1li[I11i1l(0x190,'$MM!')](I11i1l(0x24f,'sI3A'));return;}else{console[I11i1l(0x2ef,'dJLJ')](I11i1l(0x349,'iVc&')),$['message']['fix'](I11i1l(0x162,'(5qY'));return;}}break;case 0x2:await Iiili1['YFgHd'](sendRequest,'followShop'),await $[I11i1l(0x150,'5O2R')](0x1f4);break;default:console[I11i1l(0x26b,'DaHo')]('未适配的活动参与条件：'+JSON['stringify'](iIIiii));break;}}}if($['runEnd']||$[I11i1l(0x2a1,'fY@Z')]||$[I11i1l(0x2cf,'H)Ua')])return;await Iiili1[I11i1l(0x330,'5O2R')](sendRequest,'birthday'),await $['wait'](0x1f4);if($[I11i1l(0x2bf,'B0vq')])return;await Iiili1[I11i1l(0x19c,'YPae')](sendRequest,Iiili1[I11i1l(0x185,'(5qY')]),await $[I11i1l(0x2f1,'H)Ua')](0x1f4),await Iiili1[I11i1l(0x1f7,'DaHo')](sendRequest,Iiili1[I11i1l(0x15c,'46O%')]);}else IilIli['log'](li1['message']),illIl1[I11i1l(0x20e,'Ebk@')]=!![];}catch(I1iIIi){console[I11i1l(0x2f9,'5V]w')]('❌\x20脚本运行遇到了错误\x0a'+I1iIIi);}}async function handleResponse(I1iIIl,lI1IIl){const il1il=l1l1iI,i1ilI={'NhVLh':il1il(0x19f,'QZoT'),'VScAw':il1il(0x298,'fY@Z'),'lJBzm':'未能获取用户鉴权信息','WWRGl':il1il(0x2c0,'5O2R'),'NhImu':il1il(0x2be,'$MM!'),'ctMoo':'活动仅限店铺会员参与哦~','GsYdm':il1il(0x22c,'stX$'),'byGWn':'rRjRs','vtlnN':il1il(0x277,'(5qY'),'QarJG':function(iii1lI,i1ilI1){return iii1lI!==i1ilI1;},'mmQOI':function(Iiilii,Iil1li){return Iiilii===Iil1li;},'bHsPy':il1il(0x27a,'0Hgu'),'aKcFg':function(Iiilil,Iil1ll){return Iiilil===Iil1ll;},'xxmnF':function(iillI,lI1III){return iillI===lI1III;},'NFxFl':function(IIliIi,IllIiI){return IIliIi!==IllIiI;},'AJeIv':'OBwBr','hfqHm':il1il(0x23f,'L(QP'),'qgvrL':'VYpJz','QpqkG':'gCaBQ','JUMlj':function(i1il1,I1l111){return i1il1==I1l111;},'gvHZL':il1il(0x255,'YPae'),'Xqfnh':function(IIii1l,I1iIII){return IIii1l===I1iIII;},'YoIqR':'yyyy-MM-dd\x20HH:mm:ss','NMYAe':il1il(0x2b6,'oNx6'),'NnqBG':'优惠券🗑️','pdgPA':function(liiI11,ililI1){return liiI11(ililI1);},'pTrHu':function(IIii1i,i1ili){return IIii1i&&i1ili;},'iUEGV':il1il(0x214,'7cJo'),'ECOZb':'LaQBE','XDPox':il1il(0x353,'Lh]U'),'HCcND':il1il(0x2d3,'nP#T'),'TwAQf':il1il(0x312,'fI7s')};try{if(i1ilI[il1il(0x282,'46O%')]!==i1ilI[il1il(0x14c,'WQ*3')]){if(lI1IIl['data']&&typeof lI1IIl[il1il(0x30f,'(iWo')]===il1il(0x1b4,'Vfnj'))try{if(i1ilI[il1il(0x1ac,'Pwp]')](il1il(0x2ed,'H)Ua'),'CUsYa')){const Iiill1=wuxianDefense[il1il(0x2bc,'5O2R')][il1il(0x304,'#^je')](lI1IIl[il1il(0x2a0,'dJLJ')]);lI1IIl['data']=Iiill1;}else IllI1l[il1il(0x171,'^n]8')](i11I1i['headers'],{'Activity-Id':IillIl['activityId'],'Activity-Type':llliil[il1il(0x325,'$MM!')],'Pin-Token':liIl1[il1il(0x340,'Ebk@')],'Shop-Id':II1lll['shopId'],'Template-Code':II1lli['templateCode']});}catch{}switch(I1iIIl){case il1il(0x244,'IBIv'):if(i1ilI[il1il(0x2f2,'H)Ua')](lI1IIl[il1il(0x2f8,'#^je')],0xc8)&&lI1IIl[il1il(0x301,'Ebk@')]){const lilII1=i1ilI[il1il(0x2ee,'r7^F')][il1il(0x2a4,'5O2R')]('|');let iill1=0x0;while(!![]){switch(lilII1[iill1++]){case'0':$[il1il(0x31d,'p*A9')]=lI1IIl[il1il(0x1a9,'5O2R')][il1il(0x29a,'QZoT')];continue;case'1':$[il1il(0x1d2,'5V]w')]=lI1IIl[il1il(0x252,'WQ*3')][il1il(0x204,'N$rK')];continue;case'2':$[il1il(0x18f,'Vfnj')]=lI1IIl[il1il(0x33f,'8NIo')]['level'];continue;case'3':$['isWhiteUser']=lI1IIl[il1il(0x241,'QZoT')][il1il(0x19e,'5zLf')];continue;case'4':$[il1il(0x2b7,'N$rK')]=lI1IIl[il1il(0x33f,'8NIo')]['pinToken'];continue;case'5':$['avatar']=lI1IIl[il1il(0x2ce,'5V]w')][il1il(0x266,'A0zZ')];continue;case'6':$['cid']=lI1IIl[il1il(0x2d4,'0Hgu')][il1il(0x264,'fI7s')];continue;}break;}}else lI1IIl[il1il(0x28a,'DaHo')]?(console[il1il(0x190,'$MM!')](lI1IIl[il1il(0x1dc,'QZoT')]),$[il1il(0x24b,'oNx6')]=!![]):i1ilI[il1il(0x1d1,'Lh]U')](il1il(0x358,'ST&z'),il1il(0x178,'sI3A'))?console[il1il(0x16e,'yRr$')]('❓'+I1iIIl+'\x20'+JSON['stringify'](lI1IIl)):(l1iIi[il1il(0x1a5,'WQ*3')](l1l11i[il1il(0x1de,'fY@Z')]),l1iIl[il1il(0x1ca,'N$rK')]=!![]);break;case'followShop':if(i1ilI['aKcFg'](lI1IIl[il1il(0x33e,'fY@Z')],0xc8)&&i1ilI[il1il(0x1e5,'sI3A')](lI1IIl[il1il(0x1ef,'46O%')],null)){}else lI1IIl[il1il(0x280,'hO2I')]?console[il1il(0x26b,'DaHo')](lI1IIl[il1il(0x14f,'YPae')]):console[il1il(0x251,'H)Ua')]('❓'+I1iIIl+'\x20'+JSON[il1il(0x1e4,'zH)5')](lI1IIl));break;case il1il(0x346,'zH)5'):if(i1ilI['mmQOI'](lI1IIl['code'],0xc8)&&lI1IIl[il1il(0x344,'%C&i')]){if(il1il(0x360,'IBIv')!==il1il(0x354,'Lh]U')){i1ili1[il1il(0x21b,'pM7x')](i1ilI[il1il(0x34e,'x7d[')]);return;}else $[il1il(0x346,'zH)5')]=lI1IIl['data'];}else{if(lI1IIl[il1il(0x1a6,'iVc&')])console[il1il(0x278,'QZoT')](lI1IIl['message']),$['skipRun']=!![];else{if(i1ilI[il1il(0x327,'QZoT')](i1ilI[il1il(0x20f,'yNr%')],'OBwBr')){IlI1l[il1il(0x15d,'%C&i')](i1ilI[il1il(0x2fa,'p*A9')]),lilIil['message']['fix'](i1ilI[il1il(0x308,'#^je')]);return;}else console['log']('❓'+I1iIIl+'\x20'+JSON['stringify'](lI1IIl));}}break;case il1il(0x29e,'1vp('):if(i1ilI[il1il(0x25d,'$MM!')](lI1IIl[il1il(0x1f3,'L(QP')],0xc8)){}else lI1IIl[il1il(0x319,'Pwp]')]?(console[il1il(0x334,'oNx6')](lI1IIl[il1il(0x30a,'#^je')]),$['skipRun']=!![]):console[il1il(0x1cc,'Lh]U')]('❓'+I1iIIl+'\x20'+JSON[il1il(0x292,'7cJo')](lI1IIl));break;case i1ilI[il1il(0x247,'r7^F')]:if(lI1IIl['code']===0xc8){}else{if(lI1IIl['message'])console[il1il(0x2e3,'x7d[')](lI1IIl['message']+'\x0a');else{if(i1ilI[il1il(0x213,'QZoT')]!==i1ilI[il1il(0x2d6,'0Hgu')])console[il1il(0x1cd,'7cJo')]('❓'+I1iIIl+'\x20'+JSON[il1il(0x197,'5zLf')](lI1IIl));else{const ililII=Ii1iIi[il1il(0x23d,'p*A9')][il1il(0x269,'%C&i')],lI1II1=iliIIl[il1il(0x1c4,'OXi0')][il1il(0x22d,'%C&i')],i1ilII=Ii1iIl[il1il(0x248,'7cJo')][il1il(0x335,'$MM!')],iIIii1=iliIIi['getActivityBase'][il1il(0x27c,'#^je')],IllIi1=ill11I['time'](i1ilI[il1il(0x2ec,'stX$')],i1ilII),lilIII=Iliiil[il1il(0x200,'sI3A')](i1ilI['WWRGl'],iIIii1);li1Il[il1il(0x2cd,'(iWo')]((ililII?il1il(0x318,'5U0w')+ililII+'\x0a':'')+il1il(0x1a7,'7cJo')+li1Ii['shopId']+il1il(0x198,'#^je')+lI1II1+'\x0a开始时间：'+IllIi1+il1il(0x326,'%C&i')+lilIII+'\x0a'),Iliiii[il1il(0x192,'7cJo')]((ililII?il1il(0x1c9,'#^je')+ililII:'')+il1il(0x357,'OXi0')+IllIi1+'\x0a【结束时间】'+lilIII);const Ii1ilI=i1illI[il1il(0x195,'L(QP')]();if(i1ilII&&Ii1ilI<i1ilII){Iil1I1['log'](il1il(0x297,'k2*g')+IllIi1+il1il(0x17a,'1vp(')),Ii1iII[il1il(0x300,'%C&i')]['fix'](il1il(0x32e,'5V]w')+IllIi1),l1i11I[il1il(0x2a7,'Va1m')]=!![];return;}if(iIIii1&&Ii1ilI>iIIii1){II11II[il1il(0x32d,'sI3A')](il1il(0x174,'iVc&')+lilIII+il1il(0x1da,'QZoT')),Ii1iI1['message']['fix'](il1il(0x2a9,'7cJo')+lilIII),lilIli['runEnd']=!![];return;}}}}break;case il1il(0x273,'pM7x'):if(lI1IIl[il1il(0x194,'g9DU')]===0xc8){if(i1ilI[il1il(0x18e,'8NIo')](il1il(0x207,'#^je'),il1il(0x27b,'pM7x'))){if(i1ilI['JUMlj'](lI1IIl[il1il(0x159,'Pwp]')][il1il(0x2c5,'1vp(')],0x0))console[il1il(0x2ef,'dJLJ')](il1il(0x28f,'g9DU')),$[il1il(0x28a,'DaHo')][il1il(0x35e,'k2*g')](i1ilI[il1il(0x215,'zH)5')]);else{if(i1ilI['Xqfnh'](il1il(0x14e,'N$rK'),il1il(0x267,'Ebk@')))lilIl1[il1il(0x169,'yRr$')](i1l1ii['name'],'【提示】请先获取Cookie'),i1l1[il1il(0x221,'fY@Z')](0x1);else for(let iliIil of lI1IIl['data']){$['createTime']=$['time'](i1ilI[il1il(0x217,'DaHo')],iliIil[il1il(0x20b,'yNr%')]);switch(iliIil[il1il(0x322,'sI3A')]){case'0':case'4':case'11':console['log']('🗑️\x20'+iliIil[il1il(0x1e6,'L(QP')]+'('+$[il1il(0x363,'stX$')]+')\x20🎟️'),$[il1il(0x2e6,'x7d[')]['insert'](iliIil['prizeName']+'('+$[il1il(0x199,'IBIv')]+il1il(0x19d,'L(QP'));break;case'1':console[il1il(0x278,'QZoT')](i1ilI[il1il(0x187,'5U0w')]),$['message'][il1il(0x242,'L(QP')](i1ilI[il1il(0x234,'pM7x')]);break;case'2':console['log']('🎉\x20'+iliIil['prizeName']+'('+$[il1il(0x172,'hO2I')]+il1il(0x256,'zH)5')),$[il1il(0x294,'N$rK')][il1il(0x1dd,'ST&z')](iliIil[il1il(0x1ad,'Va1m')]+'('+$[il1il(0x236,'A0zZ')]+il1il(0x164,'$MM!'));break;case 0x3:const iliIii=iliIil[il1il(0x31e,'g9DU')],lill1i=iliIil['activityPrizeId'],il1li=iliIil['prizeName'];$['prize'][il1il(0x32a,'k2*g')]('🎉\x20恭喜获得实物,奖品名称：'+il1li);const iIIill={'baseUrl':$[il1il(0x228,'yRr$')],'newbaseUrl':$[il1il(0x29f,'%C&i')],'ua':$['UA'],'token':$[il1il(0x307,'r7^F')],'activityId':$['activityId'],'shopId':$[il1il(0x2eb,'fI7s')],'activityType':$[il1il(0x286,'5U0w')],'prizeName':il1li,'addressId':iliIii,'activityPrizeId':lill1i,'activityUrl':$['activityUrl']},iilii=await i1ilI[il1il(0x265,'QZoT')](lzkjv2_savePrize,iIIill);i1ilI[il1il(0x24a,'ST&z')](!isNotify,iilii)&&await notify['sendNotify']($['name']+il1il(0x1b5,'L(QP'),il1il(0x165,'nP#T')+index+il1il(0x321,'YPae')+il1li+il1il(0x167,'yNr%')+$[il1il(0x1fb,'5U0w')]);$[il1il(0x17c,'Ebk@')][il1il(0x177,'0Hgu')](il1li+'('+(iilii?il1il(0x1ae,'zH)5'):'未填地址')+il1il(0x338,'pM7x'));break;case'5':console[il1il(0x293,'r7^F')](i1ilI[il1il(0x291,'oNx6')]),$['message'][il1il(0x1d3,'5O2R')](il1il(0x210,'Vfnj'));break;case'6':console[il1il(0x1ba,'fI7s')](il1il(0x191,'(iWo')+iliIil[il1il(0x263,'pM7x')]+'('+$[il1il(0x2d7,'QZoT')]+il1il(0x341,'%C&i')),$[il1il(0x19b,'WQ*3')]['insert'](iliIil['prizeName']+'('+$[il1il(0x33a,'$MM!')]+il1il(0x25a,'stX$'));break;case'7':case'8':case'9':case'10':case'12':console[il1il(0x2a2,'B0vq')]('🎉\x20恭喜获得'+iliIil['prizeName']+'('+$[il1il(0x2b9,'^n]8')]+il1il(0x153,'DaHo')),$[il1il(0x319,'Pwp]')][il1il(0x28e,'g9DU')](iliIil[il1il(0x1c7,'fY@Z')]+'('+$[il1il(0x186,'zH)5')]+il1il(0x356,'Vfnj'));if(!isNotify){if('LaQBE'!==i1ilI[il1il(0x2c1,'ST&z')]){i1l1I[il1il(0x15e,'N$rK')](il1il(0x254,'A0zZ'));return;}else await notify[il1il(0x229,'%C&i')]($[il1il(0x1b9,'46O%')]+il1il(0x28d,'yNr%'),il1il(0x25f,'(5qY')+$[il1il(0x2e9,'hO2I')]+'】'+$[il1il(0x22b,'dJLJ')]+il1il(0x1fa,'5zLf')+iliIil['prizeName']+'('+$[il1il(0x237,'Va1m')]+')\x0a\x0a'+$['activityUrl']);}break;default:console[il1il(0x1ee,'5O2R')](il1il(0x1e8,'N$rK')+JSON[il1il(0x24e,'#^je')](iliIil));break;}}}}else{lIIiil['log'](i1ilI[il1il(0x268,'g9DU')]),l1lIii[il1il(0x30a,'#^je')][il1il(0x17e,'sI3A')]('会员等级不足');return;}}else lI1IIl[il1il(0x1dc,'QZoT')]?il1il(0x16f,'oNx6')===i1ilI[il1il(0x1f5,'7cJo')]?(console['log'](lI1IIl[il1il(0x225,'L(QP')]),$['skipRun']=!![]):l1iIIl[il1il(0x35a,'YPae')]('❓'+iiilll+'\x20'+lI11Il[il1il(0x156,'N$rK')](lIII1i)):console['log']('❓'+I1iIIl+'\x20'+JSON[il1il(0x34d,'nP#T')](lI1IIl));break;default:break;}}else{I1l1Il['log'](i1ilI[il1il(0x30b,'Ebk@')]),llIll1[il1il(0x1b7,'B0vq')][il1il(0x2fd,'hO2I')](i1ilI[il1il(0x328,'nP#T')]);return;}}catch(i1ilIi){i1ilI[il1il(0x2e8,'$MM!')]!==i1ilI['TwAQf']?console[il1il(0x21b,'pM7x')](il1il(0x323,'A0zZ')+I1iIIl+il1il(0x1bd,'zH)5')+(i1ilIi[il1il(0x1a6,'iVc&')]||i1ilIi)):(l1il1i[il1il(0x1cd,'7cJo')](ll1),iI1llI&&(!l1llIl&&(iI1li1[il1il(0x154,'H)Ua')]=!![],lllii1[il1il(0x302,'k2*g')]&&IilIi1[il1il(0x151,'5U0w')][il1il(0x313,'(5qY')](iI1liI))));}}async function sendRequest(l1l1i1){const Il1i1i=l1l1iI,i1iiI={'zLSlK':Il1i1i(0x1aa,'fI7s'),'eEowp':Il1i1i(0x1d6,'ST&z'),'YGwdQ':Il1i1i(0x342,'Pwp]'),'YUPHa':Il1i1i(0x2c9,'yNr%'),'YgVkq':Il1i1i(0x351,'0Hgu'),'AmsRu':Il1i1i(0x1b2,'sI3A'),'oSzxz':'myPrizes','PGkFT':Il1i1i(0x284,'g9DU'),'hsWjl':'keep-alive','gCisw':'empty','xiIiO':'iqFGD','EZYzt':Il1i1i(0x243,'1vp('),'UmGfd':function(il1lI,IliIIl){return il1lI<IliIIl;},'dKEvq':function(I1il1l,lI1l1l){return I1il1l!==lI1l1l;},'mLBRm':Il1i1i(0x320,'nP#T'),'bGCwR':Il1i1i(0x2d1,'p*A9'),'TCOuv':'KHMts','resJI':'YMhQD'};if($[Il1i1i(0x275,'A0zZ')]||$[Il1i1i(0x2f6,'^n]8')])return;let i1ilIl=$['newbaseUrl'],llI11I=null,Il1i11=null,iii1li=null,Iil1i1=Il1i1i(0x202,'yRr$');switch(l1l1i1){case Il1i1i(0x224,'sI3A'):i1ilIl+=Il1i1i(0x1a1,'pM7x'),llI11I={'token':$['jdToken'],'source':'01','activityType':$[Il1i1i(0x17f,'DaHo')],'templateCode':$[Il1i1i(0x21d,'pM7x')],'activityId':$[Il1i1i(0x1f0,'5O2R')],'shopId':$[Il1i1i(0x32b,'5V]w')],'uuid':'','timestamp':Date[Il1i1i(0x223,'k2*g')]()};break;case i1iiI[Il1i1i(0x2f5,'Pwp]')]:i1ilIl+=i1iiI[Il1i1i(0x257,'Lh]U')],llI11I=undefined;break;case i1iiI['YGwdQ']:i1ilIl+=i1iiI[Il1i1i(0x1bb,'5U0w')],llI11I=undefined;break;case'getActivityInfo':i1ilIl+='/api/'+$[Il1i1i(0x22a,'L(QP')]+Il1i1i(0x21e,'ST&z'),llI11I=undefined;break;case Il1i1i(0x1a8,'B0vq'):i1ilIl+=Il1i1i(0x176,'^n]8')+$['activityType']+Il1i1i(0x33d,'#^je'),llI11I={'birthday':$[Il1i1i(0x31c,'5U0w')](i1iiI['YgVkq'],Date['now']())};break;case i1iiI[Il1i1i(0x333,'dJLJ')]:i1ilIl+=Il1i1i(0x34f,'QZoT')+$[Il1i1i(0x1bf,'hO2I')]+Il1i1i(0x364,'r7^F'),llI11I=undefined;break;case i1iiI[Il1i1i(0x1ab,'yNr%')]:i1ilIl+='/api/'+$['activityType']+Il1i1i(0x1fe,'p*A9'),llI11I=undefined;break;default:console['log'](Il1i1i(0x309,'Va1m')+l1l1i1);return;}Il1i11=wuxianDefense[Il1i1i(0x175,'sI3A')][Il1i1i(0x157,'pM7x')](llI11I);const IIii11={'url':i1ilIl,'method':Iil1i1,'headers':{'Accept':i1iiI['PGkFT'],'Accept-Encoding':Il1i1i(0x158,'YPae'),'Accept-Language':Il1i1i(0x1c6,'H)Ua'),'Connection':i1iiI[Il1i1i(0x23c,'Ebk@')],'Content-Type':'application/json;\x20charset=UTF-8','Cookie':'','Host':$[Il1i1i(0x2d9,'(iWo')],'Origin':$[Il1i1i(0x14d,'L(QP')],'Referer':$['activityUrl'],'Sec-Fetch-Dest':i1iiI['gCisw'],'Sec-Fetch-Mode':Il1i1i(0x35d,'(5qY'),'Sec-Fetch-Site':Il1i1i(0x1d9,'5V]w'),'User-Agent':$['UA']},'params':iii1li,'data':Il1i11,'timeout':0x7530};$['pinToken']&&(Il1i1i(0x1d4,'fI7s')===i1iiI[Il1i1i(0x1ec,'oNx6')]?Object[Il1i1i(0x26d,'8NIo')](IIii11[Il1i1i(0x261,'8NIo')],{'Activity-Id':$[Il1i1i(0x23e,'QZoT')],'Activity-Type':$[Il1i1i(0x20c,'A0zZ')],'Pin-Token':$[Il1i1i(0x253,'iVc&')],'Shop-Id':$[Il1i1i(0x1ed,'Lh]U')],'Template-Code':$[Il1i1i(0x329,'1vp(')]}):ii1li[Il1i1i(0x1cd,'7cJo')]('❓'+IIll1+'\x20'+ll1il[Il1i1i(0x1e4,'zH)5')](IiiIiI)));Iil1i1===Il1i1i(0x2a6,'hO2I')&&(delete IIii11[Il1i1i(0x1a9,'5O2R')],delete IIii11['headers'][i1iiI[Il1i1i(0x1a0,'5V]w')]]);const iliIl1=0x3;let Ii1il1=0x0,iii1ll=null,IIliI1=![];while(i1iiI['UmGfd'](Ii1il1,iliIl1)){if(i1iiI[Il1i1i(0x310,'ST&z')](Il1i1i(0x2b8,'OXi0'),i1iiI[Il1i1i(0x24d,'zH)5')]))IiiIli['log']('❌\x20脚本运行遇到了错误\x0a'+iillli);else{Ii1il1>0x0&&await $['wait'](0x3e8);const Ill11I=await common['request'](IIii11);if(!Ill11I[Il1i1i(0x305,'(5qY')]){iii1ll=l1l1i1+'\x20请求失败\x20➜\x20'+Ill11I[Il1i1i(0x33b,'k2*g')],Ii1il1++;continue;}if(!Ill11I['data']){iii1ll=l1l1i1+Il1i1i(0x274,'zH)5'),Ii1il1++;continue;}await handleResponse(l1l1i1,Ill11I['data']),IIliI1=![];break;}}Ii1il1>=iliIl1&&(i1iiI['bGCwR']===Il1i1i(0x1c1,'5zLf')?iIII11[Il1i1i(0x17c,'Ebk@')]['fix'](IiI1i):(console[Il1i1i(0x251,'H)Ua')](iii1ll),IIliI1&&(!hotbreak&&(i1iiI[Il1i1i(0x231,'A0zZ')]!==i1iiI['TCOuv']?l11i1i[Il1i1i(0x1a3,'k2*g')]('❓'+lI11I1+'\x20'+l1il11[Il1i1i(0x24e,'#^je')](IiI1)):($[Il1i1i(0x179,'8NIo')]=!![],$[Il1i1i(0x2fe,'r7^F')]&&(i1iiI[Il1i1i(0x2de,'DaHo')]===Il1i1i(0x166,'^n]8')?$[Il1i1i(0x29c,'Vfnj')]['fix'](iii1ll):iIli11['log']('❓'+Iiiil+'\x20'+Iiiii['stringify'](l11i1I))))))));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
