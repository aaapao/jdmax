/*
Ê¥ªÂä®ÂêçÁß∞Ôºö‰∫¨Ë±ÜÁ∫¢ÂåÖÈõ® ÔºàÊµãËØïÔºâ
ÁéØÂ¢ÉÂèòÈáèÔºöjd_redRain2021_threads // ÊéßÂà∂Âπ∂ÂèëÁ∫øÁ®ãÊï∞ÔºàÊ≠£Êï¥Êï∞ÔºâÔºåÈªòËÆ§1ÔºåÊúÄÂ§ß10ÔºåÂ∞ΩÈáè‰ΩøÁî®ÈªòËÆ§ÂÄºÔºåÂê¶ÂàôËØ∑ÂºÄÂêØ‰ª£ÁêÜËøêË°å
        jd_redRain2021_interval // Ëá™ÂÆö‰πâËøêË°åÈó¥ÈöîÊó∂ÈïøÔºàÊï¥Êï∞ÔºåÂçï‰ΩçÊØ´ÁßíÔºâÔºåÈªòËÆ§500
        jd_redRain2021_notify // ÊòØÂê¶Êé®ÈÄÅÈÄöÁü•Ôºàtrue/falseÔºâÔºåÈªòËÆ§‰∏çÊé®ÈÄÅ
        jd_redRain2021_pinFilter // Ë¥¶Âè∑pinËøáÊª§ÔºåÂ§ö‰∏™Áî®@ËøõË°åÂàÜÂâ≤

È´òÂπ∂ÂèëËÑöÊú¨ÔºåË∞®ÊÖé‰ΩøÁî®Âπ∂Âèë
Ê¥ªÂä®ÈôêÂà∂IP‰∏•ÈáçÔºåÂª∫ËÆÆ‰ΩøÁî®‰ª£ÁêÜ
ÂÆöÊó∂ËØ∑Ëá™Ë°å‰øÆÊîπ

cron:1 1 1 1 *

*/

const $ = new Env('‰∫¨Ë±ÜÁ∫¢ÂåÖÈõ®')
var iÔΩâl='jsjiami.com.v7';const lIIill=iii1II;if(function(lilil,ll1ll,Illl11,ii1lI,I1ilIl,I11iII,I1ilIi){return lilil=lilil>>0x1,I11iII='hs',I1ilIi='hs',function(IiiiI,llIlli,llIlll,lliii1,Iiii1){const ii1l1=iii1II;lliii1='tfi',I11iII=lliii1+I11iII,Iiii1='up',I1ilIi+=Iiii1,I11iII=llIlll(I11iII),I1ilIi=llIlll(I1ilIi),llIlll=0x0;const lIIili=IiiiI();while(!![]&&--ii1lI+llIlli){try{lliii1=-parseInt(ii1l1(0x250,'Qi[H'))/0x1*(parseInt(ii1l1(0x1ff,'NAy@'))/0x2)+-parseInt(ii1l1(0x1d3,'m7cH'))/0x3+parseInt(ii1l1(0x24b,'kzGR'))/0x4*(parseInt(ii1l1(0x1a3,'iDL#'))/0x5)+-parseInt(ii1l1(0x198,'Rkmg'))/0x6*(-parseInt(ii1l1(0x1e4,'0Z@i'))/0x7)+parseInt(ii1l1(0x21c,'gUN7'))/0x8*(-parseInt(ii1l1(0x26e,'iDL#'))/0x9)+-parseInt(ii1l1(0x23f,'dqUh'))/0xa*(-parseInt(ii1l1(0x18a,'NBgJ'))/0xb)+-parseInt(ii1l1(0x23d,'l(!F'))/0xc*(-parseInt(ii1l1(0x193,'%MsW'))/0xd);}catch(IiiIil){lliii1=llIlll;}finally{Iiii1=lIIili[I11iII]();if(lilil<=ii1lI)llIlll?I1ilIl?lliii1=Iiii1:I1ilIl=Iiii1:llIlll=Iiii1;else{if(llIlll==I1ilIl['replace'](/[tPfbJpRTEMYWkqSwUBVDK=]/g,'')){if(lliii1===llIlli){lIIili['un'+I11iII](Iiii1);break;}lIIili[I1ilIi](Iiii1);}}}}}(Illl11,ll1ll,function(IiiIii,IIlll,liliI,ll1lI,l1iii,IIlli,l1iil){return IIlll='\x73\x70\x6c\x69\x74',IiiIii=arguments[0x0],IiiIii=IiiIii[IIlll](''),liliI=`\x72\x65\x76\x65\x72\x73\x65`,IiiIii=IiiIii[liliI]('\x76'),ll1lI=`\x6a\x6f\x69\x6e`,(0x16a1a3,IiiIii[ll1lI](''));});}(0x192,0x64d84,Iii11l,0xcb),Iii11l){}const jdCookie=require('./jdCookie'),common=require(lIIill(0x1b2,'Qi[H')),notify=require(lIIill(0x276,'XshL'));console[lIIill(0x1df,')X%r')](''),console[lIIill(0x19d,'^]Z#')]('=========='+$[lIIill(0x228,'0Z@i')]+'ÂèòÈáèËØ¥Êòé=========='),console[lIIill(0x19d,'^]Z#')](lIIill(0x16e,'eH(V')),console[lIIill(0x277,'6b*y')](lIIill(0x1b3,'l(!F')),console[lIIill(0x1ee,'2QaL')]('jd_redRain2021_notify\x20//\x20ÊòØÂê¶ÈÄöÁü•(true/false)ÔºåÈªòËÆ§‰∏çÊé®ÈÄÅ'),console['log']('jd_redRain2021_pinFilter\x20//\x20Ë¥¶Âè∑pinËøáÊª§ÔºåÂ§ö‰∏™Áî®@ËøõË°åÂàÜÂâ≤'),console['log']('=========='+$[lIIill(0x228,'0Z@i')]+lIIill(0x1a2,'m7cH')),console[lIIill(0x210,'O#u@')]('');function Iii11l(){const Iiil1=(function(){return[...[iÔΩâl,'RfjsbjktibDaKwmSUiYKY.JcVWoqTmBEk.pvM7PP==','WPtcG8oK','BmooWOvNW4DXrCoaW6jciCkZlmoAWOCjWODnWQpcUmkF','W5rapSkwW63cTmkEydNcUW','rx9bi8kn','WRmIW7ddQq','WRxcPCkRWPnsjXXFWPbe','WOrGW7hcSYpdUCo3WOT1','WR/cUSkpamkaW7JdR0NdMM1+WOzRgIjxW5RcGWjq','jtGzW4C','g8ktWQvM','W7hdM2JcQ8k9W77dMmoKW5ZcJJJdM8kNrsOr','iqvLtmoE','C1tdKCkf','p2RcHGHdsJ7cUq/cOSoz','4PQNhEIfLUwTUUs5T+I/OUIGUUMwSUMAVEAxREMuKUIVLEE/PUMvJoISJq','WQCJWQK','uXFdMWJcU1uTaNfbrSkDvCkcWP0TdYRcPW','W6RdS8o5','BeddLCkLoW','W48XW7SIoa','gSktWQPGrCksCSosWQpdKmouosTL','W5jComklymkjq8klaa','5RAD5yQn5BA757IK5P+a5OUg5lUD5A2z5z28','sbdcStVdNSkzfmo7','WQZcLNO','W63dSCoSW5nl','EsnY','W6yLwYlcKW','sLa6v3mvWPRcI8k4xeJdUYTxWRiv','nZ0FW4WLWQ3dT2a8A2fS','W4DlW4fWW7vHvHldSCo1msPlmhWRvKpdKqpdTW','amo/W6O','WQxcHJVcN8k+W5/dUSowW7y','W7GCnX3dTmkMu8kKWPJcVmoHWPNcR8oOz8oNWQhcRb8','W7RcKSkgWQFdUSknWQTpWRVcNsq','WQNcQ8okd8kP','tanxhSoTW5ddKq','WO7dQrW2W6FcGCoVpw8nW6xdOwGAdSkEE8kKW6BcHc4dW74','WOlcTmo3j8kw','imoEW7BcSZPQW4FcMmkMgHxcLmk3W7jtW4G8WQ4ekNtdMrJdHG','W7PmneBdU8kPDmkOWRy','WOTIW73cSctdKCo7WOS','W5ZdPCo1W4X8','y8oPWRX/W6C','WOfkWONdNMdcRSoVDmoYzq','ocvJ','WOVdRYKHW6hcKq','WRqpW6RdRSow','w1CTsw8','W7eDmW','W6/dSSo9W4Pngrvl','44kf5O6f56sn44gA6kYq5ywJ6i2H5y2bW5XyiuhdJN0','wqnsjSoTW5ddLSo5W7ZdJG','eeBdOMFcMSopsmo6WQLWcmkiWRy','W7pdJ2lcQCoOWQ7dImorW4JcJtpdISkHhumxW5K','WPBcISk5h8kb','hCkiAhtcRSkR','W7JdMMW','iSkoksay','WPtcICoTg10N','n8kxmIC','nmkyW68GWPCIiCofW79EA8oWFq','o8o8lxldQSoUW6ddK3SPsNtdKs56rq','WPddPfRdGKxcS8kBWO5MwW0','WPBcSdmNh8o9','W6uGrcm','WPNcUI8Z','DuJdKSkLufy','W7vmifZdTmkAEa','oMhcNaPfqW','E3rYf8kTWPVcNCkfWQZcJG','mmo3k2tdGCo7W7NdRh8Jy37dNtfArguPlqSi','W7RcJ8kZWRddUSknWRe','W6JdVCoZW4m','ChZdQ8kRza','6lAb5y+f5PA85PAM','oSkBlYmoAKe4eSo8W5NdOSkbrmoYW444gCo3rq','dmoAEG','W5ewaaFdMW','WRiIW6pdQmo5WR3dIwv0W7CJ','WQiIWRPGWPbmWOJdUmkgW6jk','mqtcJSknBeeIdeS','W5mCW5ZcMh/cICoPtCoLA8kBWOvsW7PcrG','WOdcMSoQgv59mCoxkSoLWP3dKa','v8osWRekW6S','W74rW4q0u8oDWRW','yfJdImkJuv0Dl0XndaFdVta','jI91s8okiGq','W7NdLhS','b8oVq3RcMW','A35Kbmk7WQ/cSSkwWQdcHSov','Exb3bCk6','nmo4W4tdVSodfmklgCkHfCoOArWiomksW6inWPS'],...(function(){return[...['W6ecW5KftCkcWPRdMSoriCkKW5e','W5/dPqb0W53dVCk1zmk/lIxcJCo0','WPFdTsWPW7y','fZvkWQxcSSkjDMLC','W7VdIwlcH8kD','A8ozWR0','8j2kUIu','BmkGEZxcPSkPWQldP300wgldKq','xaLjb8oTW4ldIW','tCoNWP8hW7uMWQbWnSonW7fiwCoRgx7cU8kmWQtdTCku','WOJcOdmfbCoX','veS3WPNcKG','6lsV5y+M5PEL5Ps+','oeFcKsLi','5P2W5lMl6lgA57Q35y+y6zIO','W6hdT8ojhCkHWRhcLcZdIa','W6tcVCkLWONdKG','tfe3q2mc','44cx6lsB5y2l','r0KWFfm','WPFcJd1MhryBuComW70','iI4fW5OZW7JdKq','W4XaW4DMW550tZZdTmoJgYjknNaGA2tdKq','W49lkSkBW6RcTmk1CG','eW9q','fdFcSCkdmv1MWPhcIW','W6VcISkBWQFdV8oEWOTuWRZcLcnf','WOFOR4xMSj7LP5/OTkpdGokESCoo','jxtcNGrf','zhHR','WR/cQSoFh8kr','i3BcNG','W6KbW4mi','gSk0W4HqWP51W7LMj8olW5PfyG','8ykTQrpLH5/ORRBdTG','n8ksW6SIWPOJyCoMW65VASoS','B+s5OEs7MUIZR+E7SowoMUMzNoA0TowlUGC','sfSTBgqjWOFcTCkVCe3dSdXgWPuf','nCo3k3dcVSo/W7JdQN8J','jYjTw8odnsjhztRcIde','4P66WQxMNjNNNyVOR6dMSPtdJa','W55pW41GW7nTvHG','hmoQfMJdMW','oSkkoJCyiH0','WPRdQLq','aCksWR1Zu8oBlSkVWQFdL8oCzsi4rLFcKCoDW7ebW5ffW4dcOwK4W7XlWR89W7lcI8o1W6m','DWVcGJxdVW','W4qhW5hcR2JcNq','FqLih8oTW43dKCk1W4/dKSortG','kCoZj3tdH8o3W7NdPG','CWypuZFcMCkkDa','4P+yWPxMNkhNNlZORlpMS4ZcJa','tbhcLtlcO0SQBKf8fmklbSoEW5rJhG3dRSkGsmorhSonWPFcGSkyhCoLhmkljZJdLSoovSkFWPWtW5tdOCohW7hdINK','WQddItNcPCo0W7lcN8oiWP/cNwFdGSoY','dmkiWR8','W7qhW5C','E3rYf8kTWPVcOmkTWQ/cJCoj','WPb5W7lcUq','WOGkpmkdW7BcVmkJlGBcU8o+W5udWQzzWOO6WRtcLmkyW41osLTaWQhdUG','uGLb','W4HhkmkOASkbsG','5lI56lct6zUF','W78sW58yiCkTWPxcJNBdU0ldPSkWW7LLW4tcVSkXWO7cMCkUW7fVW5BcLSozW6ZdMmkKWPzlW6mz','bSkHnIS2','WO3cLmoMbSoOBCoeW5BcKCkefSkbv8kLidJcKG','WO0DDG','WP/cNmoJ','WPFcSc4ZcSoYsa','w8o0WPmgW5bXWO5WlSooW5Ta','5Pw15zky5BQJ5Ps75O6j','8kQ6R8os','4P26wEIgOUADLUI8KUIHQEMaNUwjS+s6HoMuQ+IVGmoW','W7WcjapdPmk1rSkrWOlcOmoMW5hcUCkODCo+WQldIb3dP8o/W5ekW6z4W7tcI8kvWRhcH8k7FrG','W5OxW5hcJxlcKq','WQGNewii','y3vAbmk6WPVcGCkfWQJcHCkuW5FdGIBcLmkuaWBdTXiqWO0mW6NcKu/MJ6tLI5hLU7FLJz/NUkNNQPhMLzdVVklPUyFORieH77YW5PY85AEAmSoo','vLddRafgW4q','CCk/WPFcUCo7bSk6cCkUcG','ymodWQi','WRdcMfepWPa','W6y6wI4','WOxdPf7dIZRcUCkEWOzZvHa','imkAnrytna','WOxdSvldMMlcPq','8lwkHCke','quddQYm','hCkgAhq','W4tdLx8ZkYaDua','k8oDl3ldOG','5P+m6i2K5B6L5Asr5zcL77+h5y2U6ioG5BsQ5PAT5BUE5A63','xqDscmoG','kYqyW4W','dx7dK8kpvvSt5PAM5PwH5OIn5BAF6l6S5P6x772z5y295zIZ772l','W5CJW70Taq','dmk1t0lcTa'],...(function(){return['oc9QwCoBoq','WRpcR8kpeq','jghcHqXdtY7cHaJcQ8oy','57M+5y2Y6zQY','W7NcK8oRhmkNsYTFE3f/bxtdRHjP','W7GFjbVdTa','q2iEWOlcJSkGxG','8yE6P8k+','WQKryHJcRColA8kcWRBdP8k0sG','oSoZoMhdG8o/W6ddQW','W6dcICkrWQhdRCkFWRS','pmo+r0y','WPpcTc0xgG','W4TepCkuW7C','WQ4+WRXQWPa','W4O3W6etpa','W7ldRSoRW4m','hqGxAN0nWP7cQq','W7OBW54dBSorWQRdNG','WQ8coeGRWRJdLW','rgKDWR/cICkzuNv9','W7VdG0tcVW','D8k5WPhdHmoId8kudmkY','tmoxla','WOJcJCoXd0W','jmo9W5hdOmotjmkEh8kHfmoHeHK0nCkwWQToWPSuc8kRbqPmWPtcTmoeEhhcISkQFq','trVcVdddN8kv','oMVcLq','AhjXh8kPWPO','W7VdGh/cN8kOW6/dIW','sNy1WOhcGW','aCkrDxdcQSoYW5pdKmkgxvVdGW','5O6o56AO57QD5P2FWQ7cO8kPWR40EX0SWO9N','DGXChJpcLCkhDCoQWOq','W4lOR7VMS5ZLKjhLU4xcLq','AmopWR9XW7bWESooW71jumoSCCkaWRecWQfxWQ7cU8kE','W77dQSo3W4nptZnxWQDaW4tdMq','W6BdO8ouWRFdUgi','WO/cVveRWPhcR8oKBG','rXFcQG','W5tdRCoQW69A','WODIW73cRIJdHCoQWRLYWRvZASkzm0jDb8kDDa','j8oIW5xdUmovkSkRdSkWdW','rr/cPJy','WRaypq','W7WMDJNcLuRcRW','W7FcNCkgWQm','WPxcJCo3h0e','WO7cM34MeI0Af8o7W7NcGLRdUbtcQ8ozWPBcK8kui8kqoZq','WOZcT201WOhcR8otFmkXi3/dN8ksxdJdRSoWW4BcL8ksfftcLv3dPSohW73OHBFLRB7KUlROV4dOOlJPLOZPMkpMLRRPLidVV7xPUBRORR4pWPWh','mCoNoKBdV8o/W7m','BxbXfW','i8oLwLxcGq','svCH','WODkW5RcKKpcTmovFG','W7OgW5ubtSov','WRasngWWWRq','o3FcLq','zEITUUAZO+wMVEI2N2FINAnl5PsO5zk25BIB5Pwn5OYD','q1e+','iSkDpHCsjWbBdCoVW5lcGmkfgCoS','FuGFqwK','WOpcRcq5rSoyybrRW5xcJM94FmkoWRW','W7JdH0tcLmkpW7C','8k6gL8kb5lIG6lo857UL5y+66zQd5Bs657Q057MC5P2I','W7G0qYJcJW','4PYjWQ3MNOVOGBhMR5NNOkNLP7VNKA3dQa','CthcGqm','W7CrW5ueAmovWRtdMSojiSkoW5LjWOxcLCk3yb8SWPZcSq','s3TDb8kS','n8kblq','FhjdWPW4W4xdMgGlBW','t8oTWP0','W6ZcHCo1','W5ldGwuxfsu','W70vW4qb','n3tcM0nCbtFcQuJcRSoyW4u','kCoIW4y','WRNcQmkcoCkM','nSoMoNddOmkKWRVcRgG2st/dN3rzrqiKjGm','WPpcOv4','B8kQFJdcOSkSWQ3dSxGYEfpdOW','DeNdJSkjufuFifa','sMZdPG','w8oqWODmv8kjCCoY','Ddz4hG','8lAZH2K','gSksWRTQtSkgAmoMWR8','WOVcKfq/WOS','W51ACCkTsmomv8kgx8o+W4GYh8o9lCo0W6vIW7tdGCkdWR/cQmkyxWzjWRldRGdcImkChSoOWOqNW6GdWONcI8oIlGGKW6ZcOmks','gmoZaG','W67cI8o/aa','yh92e8kTWOS'];}())];}())];}());Iii11l=function(){return Iiil1;};return Iii11l();};let taskThreads=process['env']['jd_redRain2021_threads']||'1';const runInterval=process[lIIill(0x1c8,'*LPe')][lIIill(0x204,'t&]$')]||lIIill(0x199,'sREX'),isNotify=(process['env'][lIIill(0x1e0,'gUN7')]||process[lIIill(0x272,'65yK')]['jd_redRain2021_Notify'])===lIIill(0x192,'0Z@i'),pinFilter=(process['env'][lIIill(0x206,'[Xt3')]||'')[lIIill(0x1fa,'WO7G')]('@');interaction=[];let cookiesArr=Object['keys'](jdCookie)[lIIill(0x237,'NAy@')](iIIl1i=>jdCookie[iIIl1i])['filter'](I1lllI=>I1lllI);!cookiesArr[0x0]&&($[lIIill(0x241,'gUN7')]($['name'],lIIill(0x212,'WO7G')),process[lIIill(0x21b,'*LPe')](0x1));!(async()=>{const I11iIi=lIIill,ill111={'YWwUS':function(Iliil1){return Iliil1();}};notify[I11iIi(0x24d,'%MsW')]({'title':$[I11iIi(0x1dd,'ukwJ')]}),await ill111['YWwUS'](Main),isNotify&&notify[I11iIi(0x213,'6b*y')]()&&await notify[I11iIi(0x178,'r!te')]();})()[lIIill(0x17d,'6b*y')](i1III=>$['logErr'](i1III))['finally'](()=>$[lIIill(0x17e,'wd7K')]());async function Main(){const I1ilII=lIIill,Ii1iIi={'sxomt':function(iliIIl,Ii1iIl){return iliIIl>Ii1iIl;},'QKVaY':function(iliIIi,ill11I){return iliIIi!==ill11I;},'LpmHU':function(Iliiil,li1Il){return Iliiil(li1Il);},'nCcDy':I1ilII(0x1ed,'UjPR'),'eCfjE':I1ilII(0x279,'WO7G'),'ZykjD':I1ilII(0x19e,'eH(V'),'RqtIb':function(li1Ii,Iliiii){return li1Ii(Iliiii);},'lzOWd':I1ilII(0x186,'ukwJ'),'uOarq':function(i1illI,i1IIl){return i1illI>i1IIl;},'hztgO':function(I1lll1,i1IIi){return I1lll1>i1IIi;},'BjXqs':function(IIII1I,Iii111){return IIII1I<Iii111;},'dBhtK':I1ilII(0x271,'NAy@')};try{try{const l1l1II=parseInt(taskThreads);Ii1iIi[I1ilII(0x23e,'t&]$')](l1l1II,0x0)&&Ii1iIi['QKVaY'](l1l1II,0x1)&&(taskThreads=l1l1II);}catch{taskThreads=0x1;}taskThreads=Math[I1ilII(0x259,'eH(V')](taskThreads,0xa),$[I1ilII(0x265,'ZVS^')]=null;if(runInterval)try{const Iil1I1=Ii1iIi['LpmHU'](parseInt,runInterval);Iil1I1>=0x0&&($[I1ilII(0x26d,'m7cH')]=Iil1I1);}catch{console['log'](Ii1iIi[I1ilII(0x249,'^]Z#')]);}$[I1ilII(0x1a1,'sREX')]='',await Ii1iIi[I1ilII(0x238,'R8H(')](sendRequest,I1ilII(0x256,'WWN]'));if($[I1ilII(0x1a6,'0Z@i')])for(let Ii1iII of $[I1ilII(0x1fc,'wd7K')]['targets']||[]){for(let l1i11I of Ii1iII[I1ilII(0x1a7,'gpx&')]||[]){if([I1ilII(0x185,'k0H4'),Ii1iIi[I1ilII(0x20a,'gUN7')]][I1ilII(0x173,'WO7G')](II11II=>l1i11I['name'][I1ilII(0x253,'XshL')](II11II))){let Ii1iI1=l1i11I['renderData'][I1ilII(0x27e,'!8u@')],lilIli=l1i11I[I1ilII(0x1be,'*LPe')][0x0][I1ilII(0x25b,'^]Z#')],Iliili;for(let Iliill of[Ii1iI1,lilIli]){if(Iliill[I1ilII(0x1a8,'l(!F')](Ii1iIi['ZykjD'])){Iliili=Iliill;break;}}if(!Iliili&&Ii1iI1['includes'](I1ilII(0x1e7,'wd7K')))try{ss=await Ii1iIi[I1ilII(0x1aa,'0Z@i')](jsonurl,Ii1iI1);for(let IIII11 of ss['tpl']['elementList']){if(IIII11[I1ilII(0x17a,'Qi[H')][I1ilII(0x1d2,'l(!F')][I1ilII(0x208,'jpXP')](Ii1iIi[I1ilII(0x209,'0Z@i')])){Iliili=IIII11[I1ilII(0x18b,'m7cH')]['url'];break;}}}catch(i1illi){}if(Iliili){if(l1i11I['rule'][I1ilII(0x196,'dqUh')]){let i1illl=l1i11I[I1ilII(0x1e8,'65yK')][I1ilII(0x207,'NBgJ')],I1llil=l1i11I[I1ilII(0x275,'jpXP')][I1ilII(0x188,'dqUh')];const I1llii=$[I1ilII(0x1eb,'UjPR')](Ii1iIi[I1ilII(0x1a0,'dqUh')],i1illl),lilIll=$['time'](I1ilII(0x1c0,'^7RY'),I1llil);let l1i111=new Date()[I1ilII(0x234,'$D5w')]();if(Ii1iIi[I1ilII(0x17b,'m7cH')](l1i111,I1llil))console[I1ilII(0x1f0,'0Z@i')](I1ilII(0x1c2,'Rkmg'));else Ii1iIi[I1ilII(0x1b6,'R8H(')](l1i111,i1illl)?(console['log']('üì¢\x20ÂèëÁé∞‰∫¨Ë±ÜÁ∫¢ÂåÖÈõ®ÔºåÂç≥Â∞ÜÂºÄÂßãËøêË°å\x0a'),await redRainurl(Iliili)):console[I1ilII(0x1bd,'%MsW')](I1ilII(0x1d8,'XshL')+I1llii+'Ëá≥'+lilIll+I1ilII(0x24a,'sREX'));}}}}}if(Ii1iIi[I1ilII(0x1ea,'cB39')](interaction[I1ilII(0x182,'cB39')],0x0))console[I1ilII(0x20c,'cB39')](I1ilII(0x25e,'u$6i')+interaction[I1ilII(0x19c,'AkK9')]+I1ilII(0x260,'wd7K'));else return;for(let iliII1=0x0;Ii1iIi[I1ilII(0x1c7,'eH(V')](iliII1,interaction[I1ilII(0x21f,'^7RY')]);iliII1++){const II11I1=Ii1iIi[I1ilII(0x20e,'z6IL')][I1ilII(0x258,'^]Z#')]('|');let Iii11I=0x0;while(!![]){switch(II11I1[Iii11I++]){case'0':$[I1ilII(0x252,'ZVS^')]=interaction[iliII1][I1ilII(0x200,'O#u@')];continue;case'1':$[I1ilII(0x26b,'(Y&M')]=![];continue;case'2':$[I1ilII(0x21d,'m7cH')]=interaction[iliII1][I1ilII(0x1fb,'%MsW')];continue;case'3':await common[I1ilII(0x194,'$D5w')](taskThreads,cookiesArr,taskFnc);continue;case'4':$[I1ilII(0x1fd,'ZVS^')]=[];continue;case'5':Ii1iIi['QKVaY'](iliII1,interaction[I1ilII(0x21a,')X%r')]-0x1)&&console['log']('');continue;case'6':$[I1ilII(0x1a5,'gUN7')][I1ilII(0x224,'^]Z#')]>0x0&&(cookiesArr=cookiesArr['filter']((Iil1II,iIIl1I)=>!$[I1ilII(0x245,'bnxx')]['includes'](iIIl1I+0x1)),$[I1ilII(0x226,'m7cH')]=[]);continue;}break;}}}catch(I1iIli){console['log'](I1ilII(0x16a,'Je$Q')+I1iIli);}}function iii1II(_0x4f3617,_0x424e57){const _0x60b453=Iii11l();return iii1II=function(_0x344989,_0x51bac5){_0x344989=_0x344989-0x168;let _0x1091c6=_0x60b453[_0x344989];if(iii1II['ORYIJd']===undefined){var _0x4093fb=function(_0x3c1237){const _0x2476cb='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2af0bf='',_0xaa4cd9='';for(let _0x453290=0x0,_0x3c7668,_0x15270f,_0x405fcd=0x0;_0x15270f=_0x3c1237['charAt'](_0x405fcd++);~_0x15270f&&(_0x3c7668=_0x453290%0x4?_0x3c7668*0x40+_0x15270f:_0x15270f,_0x453290++%0x4)?_0x2af0bf+=String['fromCharCode'](0xff&_0x3c7668>>(-0x2*_0x453290&0x6)):0x0){_0x15270f=_0x2476cb['indexOf'](_0x15270f);}for(let _0x5dd323=0x0,_0x15e86a=_0x2af0bf['length'];_0x5dd323<_0x15e86a;_0x5dd323++){_0xaa4cd9+='%'+('00'+_0x2af0bf['charCodeAt'](_0x5dd323)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xaa4cd9);};const _0x38b72b=function(_0x684f35,_0x5d034b){let _0x58ddd6=[],_0x2914cb=0x0,_0x553514,_0x5204de='';_0x684f35=_0x4093fb(_0x684f35);let _0x1395e2;for(_0x1395e2=0x0;_0x1395e2<0x100;_0x1395e2++){_0x58ddd6[_0x1395e2]=_0x1395e2;}for(_0x1395e2=0x0;_0x1395e2<0x100;_0x1395e2++){_0x2914cb=(_0x2914cb+_0x58ddd6[_0x1395e2]+_0x5d034b['charCodeAt'](_0x1395e2%_0x5d034b['length']))%0x100,_0x553514=_0x58ddd6[_0x1395e2],_0x58ddd6[_0x1395e2]=_0x58ddd6[_0x2914cb],_0x58ddd6[_0x2914cb]=_0x553514;}_0x1395e2=0x0,_0x2914cb=0x0;for(let _0x36ba86=0x0;_0x36ba86<_0x684f35['length'];_0x36ba86++){_0x1395e2=(_0x1395e2+0x1)%0x100,_0x2914cb=(_0x2914cb+_0x58ddd6[_0x1395e2])%0x100,_0x553514=_0x58ddd6[_0x1395e2],_0x58ddd6[_0x1395e2]=_0x58ddd6[_0x2914cb],_0x58ddd6[_0x2914cb]=_0x553514,_0x5204de+=String['fromCharCode'](_0x684f35['charCodeAt'](_0x36ba86)^_0x58ddd6[(_0x58ddd6[_0x1395e2]+_0x58ddd6[_0x2914cb])%0x100]);}return _0x5204de;};iii1II['COyvwn']=_0x38b72b,_0x4f3617=arguments,iii1II['ORYIJd']=!![];}const _0x29143b=_0x60b453[0x0],_0x520a48=_0x344989+_0x29143b,_0xafcfd7=_0x4f3617[_0x520a48];return!_0xafcfd7?(iii1II['MPWpNP']===undefined&&(iii1II['MPWpNP']=!![]),_0x1091c6=iii1II['COyvwn'](_0x1091c6,_0x51bac5),_0x4f3617[_0x520a48]=_0x1091c6):_0x1091c6=_0xafcfd7,_0x1091c6;},iii1II(_0x4f3617,_0x424e57);}async function taskFnc(lI1Ill,lI1Ili){const I11iIl=lIIill,IliilI={'QSTVp':I11iIl(0x217,'sREX'),'tPKiL':function(II1li1,l1lIlI){return II1li1===l1lIlI;},'kmrus':I11iIl(0x20d,'t&]$'),'VKcHt':I11iIl(0x1f4,'sj3D'),'mHruh':function(IiiIl1,lIIil1){return IiiIl1(lIIil1);},'LnDUR':I11iIl(0x19b,'Rkmg'),'rGMOu':I11iIl(0x1db,'sj3D'),'xkkVK':I11iIl(0x262,'m7cH'),'kSvXt':I11iIl(0x27a,'2)8^'),'oezOs':I11iIl(0x1e6,'kzGR'),'JCTnR':'h5_1.0.0','uRSWi':I11iIl(0x221,'^7RY'),'znbDk':I11iIl(0x174,'u$6i'),'nfyIU':I11iIl(0x254,'cB39'),'Uuopr':function(IIli1,II1liI){return IIli1>=II1liI;},'BjwtD':function(IlI1i1,l1lIl1){return IlI1i1(l1lIl1);},'iapWq':'pt_pin','xsDvr':function(IiiIlI,Iilli1){return IiiIlI>Iilli1;},'IARYI':function(I1l1Il,llIll1){return I1l1Il(llIll1);},'LdThV':'Â∑≤ËÆæÁΩÆË∑≥ËøáËøêË°åÂΩìÂâçË¥¶Âè∑'};if($[I11iIl(0x222,'UjPR')])return{'runEnd':!![]};const i1II1=IliilI['BjwtD'](decodeURIComponent,common[I11iIl(0x235,'UjPR')](lI1Ill,IliilI[I11iIl(0x18e,'^7RY')])),iIIl11=I11iIl(0x24e,'UjPR')+lI1Ili+'„Äë'+i1II1+'Ôºö',l1l1I1=notify[I11iIl(0x1b9,'$D5w')](lI1Ili,i1II1);if(IliilI['xsDvr'](pinFilter[I11iIl(0x1ba,'k0H4')],0x0)&&(pinFilter[I11iIl(0x211,'0Z@i')](i1II1)||pinFilter[I11iIl(0x1f6,'AkK9')](IliilI[I11iIl(0x180,'2)8^')](encodeURIComponent,i1II1)))){l1l1I1[I11iIl(0x1b7,'%MsW')](IliilI[I11iIl(0x22d,'O#u@')]),console[I11iIl(0x1ae,'k0H4')](l1l1I1[I11iIl(0x261,'%MsW')]()),$[I11iIl(0x1c6,'$D5w')][I11iIl(0x220,'WO7G')](lI1Ili);return;}const I1iIll=await common['getLoginStatus'](lI1Ill);if(!I1iIll&&typeof I1iIll===I11iIl(0x244,'6b*y')){console[I11iIl(0x1cb,'ukwJ')](iIIl11+I11iIl(0x22a,'sj3D')),l1l1I1[I11iIl(0x171,'gUN7')](I11iIl(0x248,'eH(V')),$['needRemoveCookieIndex']['push'](lI1Ili);return;}const I1lliI=common['genUA'](i1II1),llIllI=common[I11iIl(0x16f,'r!te')](i1II1),I1ilI1=common[I11iIl(0x1c1,'Bj43')]();if($['runEnd'])return{'runEnd':!![]};await lIIilI(IliilI[I11iIl(0x1f2,'2)8^')]);if($[I11iIl(0x246,'^7RY')])return{'runEnd':!![]};if($['waitTime'])await $['wait']($['waitTime']);function iillll(Illl1l,Illl1i){const l1l11l=I11iIl;try{switch(Illl1l){case IliilI['QSTVp']:if(Illl1i&&Illl1i[l1l11l(0x195,'k0H4')]==0x0){const lIIiil=Illl1i[l1l11l(0x274,'eH(V')]?.[l1l11l(0x1f3,'65yK')],l1lIii=Illl1i[l1l11l(0x184,'^]Z#')]?.[l1l11l(0x21e,'u$6i')];if(lIIiil&&IliilI[l1l11l(0x16d,'k0H4')](typeof lIIiil,IliilI[l1l11l(0x1f8,'0Z@i')])&&Array[l1l11l(0x227,'WWN]')](lIIiil[0x3])&&lIIiil[0x3][l1l11l(0x16c,'(Y&M')]>0x0){const I11iI1=lIIiil[0x3][0x0];let l1lIil=''+I11iI1[l1l11l(0x225,'eH(V')];console[l1l11l(0x1df,')X%r')](iIIl11+'['+l1lIil+']'),l1l1I1[l1l11l(0x1de,'eH(V')](l1lIil);}else typeof l1lIii!==IliilI[l1l11l(0x172,'l(!F')]&&Array[l1l11l(0x1af,'WO7G')](l1lIii)?l1lIii['forEach'](function(IiiIli){const IilIil=l1l11l;console[IilIil(0x210,'O#u@')](''+iIIl11+IiiIli[IilIil(0x273,'$D5w')]+'['+IiiIli[IilIil(0x1e1,'XshL')]+']');}):console[l1l11l(0x1cb,'ukwJ')](iIIl11+l1l11l(0x17c,'l(!F'));}else Illl1i[l1l11l(0x1bb,'^]Z#')]?console[l1l11l(0x1ee,'2QaL')](''+iIIl11+Illl1i[l1l11l(0x1dc,'o)*3')]):console[l1l11l(0x218,'NAy@')]('‚ùì'+Illl1l+'\x20'+JSON[l1l11l(0x1d4,'UjPR')](Illl1i));break;}}catch(iillli){console[l1l11l(0x1cf,'Rkmg')]('‚ùå\x20Êú™ËÉΩÊ≠£Á°ÆÂ§ÑÁêÜ\x20'+Illl1l+'\x20ËØ∑Ê±ÇÂìçÂ∫î\x20'+(iillli['message']||iillli));}}async function lIIilI(I1l1Ii){const l1iIi=I11iIl;if($[l1iIi(0x175,'*LPe')])return;let I1i11i='',I1i11l=null,llIlii=null,llIlil=l1iIi(0x22c,'R8H(');switch(I1l1Ii){case'dotask':I1i11l={'completionFlag':!![],'sourceCode':'acehby20210924','encryptProjectId':$[l1iIi(0x1e9,'NAy@')],'encryptAssignmentId':$[l1iIi(0x1ab,'jpXP')]},I1i11i='https://api.m.jd.com/client.action?client=wh5&clientVersion=1.0.0&appid=redrain-2021&functionId=doInteractiveAssignment&body='+IliilI['mHruh'](encodeURIComponent,JSON[l1iIi(0x1d9,'65yK')](I1i11l));break;default:console['log'](l1iIi(0x264,'u$6i')+I1l1Ii);return;}const IIlil={'url':I1i11i,'method':llIlil,'headers':{'Accept':IliilI[l1iIi(0x1e2,'eH(V')],'Accept-Encoding':l1iIi(0x27c,'!8u@'),'Accept-Language':IliilI[l1iIi(0x247,'dqUh')],'Connection':IliilI['xkkVK'],'Content-Type':IliilI['kSvXt'],'Cookie':lI1Ill,'J-E-H':I1ilI1,'J-E-C':llIllI,'Origin':IliilI['oezOs'],'Referer':l1iIi(0x22b,'*LPe'),'x-rp-client':IliilI[l1iIi(0x1f1,'pkCt')],'Sec-Fetch-Dest':l1iIi(0x187,'O#u@'),'Sec-Fetch-Mode':IliilI[l1iIi(0x181,'sREX')],'Sec-Fetch-Site':IliilI['znbDk'],'User-Agent':I1lliI},'params':llIlii,'data':I1i11l,'timeout':0x7530};IliilI[l1iIi(0x233,'bnxx')](llIlil,IliilI[l1iIi(0x1d0,'kzGR')])&&(delete IIlil['data'],delete IIlil['headers'][l1iIi(0x26c,'6b*y')]);const ilI1lI=0x1;let IiiIll=0x0,IIlii=null,IlI1il=![];while(IiiIll<ilI1lI){const IilliI=await common['request'](IIlil);if(!IilliI['success']){IIlii=l1iIi(0x169,'^]Z#')+I1l1Ii+'\x20ËØ∑Ê±ÇÂ§±Ë¥•\x20‚ûú\x20'+IilliI[l1iIi(0x190,'2QaL')],IiiIll++;continue;}if(!IilliI[l1iIi(0x183,'kzGR')]){IIlii=l1iIi(0x177,'ZVS^')+I1l1Ii+l1iIi(0x1bc,'Rkmg'),IiiIll++;continue;}iillll(I1l1Ii,IilliI[l1iIi(0x179,'sREX')]),IlI1il=![];break;}IliilI['Uuopr'](IiiIll,ilI1lI)&&(console['log'](IIlii),IlI1il&&($[l1iIi(0x1b4,'m7cH')]=!![]));}}async function handleResponse(IlI1ii,lIIiii){const l1l11i=lIIill,iI1lli={'LoHae':function(ll1iI,iI1lll){return ll1iI===iI1lll;}};try{switch(IlI1ii){case l1l11i(0x280,'bnxx'):iI1lli['LoHae'](lIIiii['code'],0x0)&&lIIiii[l1l11i(0x1ad,'AkK9')]?$[l1l11i(0x23c,'$D5w')]=lIIiii['data']:console[l1l11i(0x268,'u$6i')]('Ëé∑ÂèñÊ¥ªÂä®‰ø°ÊÅØÂ§±Ë¥•');break;}}catch(l1lIll){console[l1l11i(0x1ca,'bnxx')](l1l11i(0x1c4,'Rkmg')+IlI1ii+l1l11i(0x1a4,'jpXP')+(l1lIll[l1l11i(0x251,'wd7K')]||l1lIll));}}async function sendRequest(I1l1II){const l1iIl=lIIill,IIli1I={'hwiYY':l1iIl(0x1c5,'AkK9'),'wAWKZ':'xview2Config','qWjbS':'1.1.0','hZxQR':l1iIl(0x27d,'sj3D'),'CEEym':l1iIl(0x270,'Je$Q'),'jYYjH':'keep-alive','UDPiU':l1iIl(0x16b,'O#u@'),'TUNgt':l1iIl(0x1d1,'m7cH'),'RvFdc':'empty','ZtLTL':'same-origin','cSgfz':'GET','BxXhH':'Content-Type','ADBor':function(l1lIli,lIIiiI){return l1lIli>lIIiiI;}};if($['runEnd']||$['outFlag'])return;let I1i11I='',llIliI=null,I1l1I1=null,I1i111=IIli1I[l1iIl(0x24f,'%MsW')],ilI1li={};switch(I1l1II){case IIli1I[l1iIl(0x229,'UjPR')]:I1i11I=l1iIl(0x269,'65yK'),ilI1li={'body':{'api-version':IIli1I['qWjbS']}},I1l1I1={'functionId':l1iIl(0x232,')X%r')},llIliI=common[l1iIl(0x23b,'Rkmg')](await common['getSign'](IIli1I[l1iIl(0x24c,'WWN]')],ilI1li));break;default:console['log'](l1iIl(0x26f,'NAy@')+I1l1II);return;}const IIliI={'url':I1i11I,'method':I1i111,'headers':{'Accept':IIli1I[l1iIl(0x205,'!8u@')],'Accept-Encoding':l1iIl(0x215,'NAy@'),'Accept-Language':IIli1I[l1iIl(0x202,'!8u@')],'Connection':IIli1I['jYYjH'],'Content-Type':IIli1I[l1iIl(0x25a,'!8u@')],'J-E-H':$[l1iIl(0x1f7,'l(!F')],'J-E-C':$[l1iIl(0x1fe,'[Xt3')],'Host':l1iIl(0x1ce,'^]Z#'),'Origin':IIli1I[l1iIl(0x191,'2)8^')],'Sec-Fetch-Dest':IIli1I[l1iIl(0x1bf,'%MsW')],'Sec-Fetch-Mode':l1iIl(0x1e3,'z6IL'),'Sec-Fetch-Site':IIli1I['ZtLTL'],'User-Agent':$['UA']},'params':I1l1I1,'data':llIliI,'timeout':0x7530};I1i111===IIli1I['cSgfz']&&(delete IIliI[l1iIl(0x197,'Bj43')],delete IIliI[l1iIl(0x267,'*LPe')][IIli1I[l1iIl(0x266,'m7cH')]]);const ilI1ll=0x1;let Iillii=0x0,IlI1iI=null,Iillil=![];while(Iillii<ilI1ll){IIli1I[l1iIl(0x216,'kzGR')](Iillii,0x0)&&await $[l1iIl(0x18d,'R8H(')](0x3e8);const II1lil=await common['request'](IIliI);if(!II1lil[l1iIl(0x18c,'WWN]')]){IlI1iI=l1iIl(0x189,'jpXP')+I1l1II+l1iIl(0x257,'sj3D')+II1lil['error'],Iillii++;continue;}if(!II1lil['data']){IlI1iI=l1iIl(0x242,'eH(V')+I1l1II+'\x20ËØ∑Ê±ÇÂ§±Ë¥•\x20‚ûú\x20Êó†ÂìçÂ∫îÊï∞ÊçÆ',Iillii++;continue;}await handleResponse(I1l1II,II1lil[l1iIl(0x1b0,'WWN]')]),Iillil=![];break;}Iillii>=ilI1ll&&(console[l1iIl(0x218,'NAy@')](IlI1iI),Iillil&&($[l1iIl(0x278,'sj3D')]=!![],$[l1iIl(0x27f,'^7RY')]&&$[l1iIl(0x223,'NBgJ')][l1iIl(0x1a9,'AkK9')](IlI1iI)));}async function jsonurl(IIli1l){const illIll=lIIill,II1lii={'TNmxK':'GET','VuPbT':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_2_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.3\x20Mobile/15E148\x20Safari/604.1\x20Edg/87.0.4280.88'},lIIii1=await common[illIll(0x236,'cB39')]({'url':IIli1l,'method':II1lii[illIll(0x27b,'*LPe')],'headers':{'User-Agent':II1lii[illIll(0x26a,'AkK9')]},'proxy':null,'debug':![],'timeout':0x7530}),ll1i1=lIIii1['data'];return ll1i1;}async function redRainurl(IIli1i){const iIli1I=lIIill,I1iIi1={'mCfxo':iIli1I(0x1f9,'6b*y'),'dkRYW':function(IllIIl,IiiIi1){return IllIIl>IiiIi1;},'kVJzS':iIli1I(0x1f5,'XshL')},lliil1={'url':IIli1i,'method':I1iIi1[iIli1I(0x1da,'l(!F')],'headers':{'Cookie':cookiesArr[0x1],'User-Agent':$['UA']},'timeout':0x7530},IIllI=0x5;let lliilI=0x0,lili1=null,ll1l1=![];while(lliilI<IIllI){I1iIi1[iIli1I(0x240,'Bj43')](lliilI,0x0)&&await $['wait'](0x3e8);const l1ii1=await common[iIli1I(0x203,'6b*y')](lliil1);if(!l1ii1['success']){lili1=''+l1ii1['error'],lliilI++;l1ii1[iIli1I(0x176,'u$6i')]&&([0x193,0x1ed]['includes'](l1ii1['status'])&&(ll1l1=!![]));continue;}if(!l1ii1[iIli1I(0x1cd,'$D5w')]){lili1=iIli1I(0x168,'WO7G'),lliilI++;continue;}l1ii1[iIli1I(0x1b5,'eH(V')][iIli1I(0x1b1,')X%r')](/(Ê¥ªÂä®Â∑≤ÁªèÁªìÊùü)/)&&l1ii1['data'][iIli1I(0x18f,'XshL')](/(Ê¥ªÂä®Â∑≤ÁªèÁªìÊùü)/)[0x1]&&($[iIli1I(0x1cc,'Qi[H')]=!![],console[iIli1I(0x1d5,'pkCt')](I1iIi1['kVJzS']));let ii1ll=l1ii1[iIli1I(0x1b5,'eH(V')]?.[iIli1I(0x1c3,'WO7G')](/__api_data__ *= *(\{.*?\});/);if(!ii1ll){lili1='\x0aÊï∞ÊçÆÊú™Ëé∑ÂèñÊàêÂäüÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúÊòØÂê¶Ê≠£Â∏∏ÔºåCookieÊòØÂê¶ÊúâÊïà',lliilI++;continue;}if(ii1ll){let IliI1l=JSON[iIli1I(0x219,'*LPe')](ii1ll[0x1]);for(let lliiil of IliI1l?.[iIli1I(0x1e5,'jpXP')]||[]){if(lliiil?.[iIli1I(0x239,'eH(V')]?.[iIli1I(0x22f,'2QaL')]){let lliiii=JSON[iIli1I(0x23a,'eH(V')](lliiil[iIli1I(0x22e,'z6IL')][iIli1I(0x201,'WWN]')]);if(lliiii?.[iIli1I(0x231,'(Y&M')]&&lliiii?.[iIli1I(0x1ef,'Je$Q')]){$[iIli1I(0x1ec,'^]Z#')]=lliiii,interaction[iIli1I(0x25c,'$D5w')]($['interaction']);break;}}}if(!$['interaction']){var IllIIi=JSON[iIli1I(0x19a,')X%r')](IliI1l[iIli1I(0x263,'cB39')]['evContent']);console['log'](IllIIi);IllIIi&&IllIIi[iIli1I(0x1ac,'Rkmg')]&&(title=IllIIi[iIli1I(0x20f,'%MsW')],bottomText=IllIIi['bottomText']);lili1=iIli1I(0x17f,'UjPR')+title+iIli1I(0x1d7,'cB39')+bottomText,lliilI++;continue;}}break;}lliilI>=IIllI&&(console['log'](lili1),ll1l1&&($[iIli1I(0x19f,'NAy@')]=!![]));}var version_ = 'jsjiami.com.v7';

// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`üîî${this.name}, ÂºÄÂßã!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t.stack):this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`üîî${this.name}, ÁªìÊùü! üïõ ${s} Áßí`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
