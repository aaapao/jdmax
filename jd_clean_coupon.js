/*
Âà†Èô§‰ºòÊÉ†Âà∏
ÁéØÂ¢ÉÂèòÈáèÔºöJD_COUPON_PIN_FILTER_GOODS // ÈúÄÂà†Èô§‰ºòÊÉ†Âà∏ÁöÑË¥¶Âè∑ÔºàÂ°´ÂÖ•pinÔºåÂ§ö‰∏™Áî®@ÂàÜÂâ≤Ôºâ
          JD_COUPON_PIN_FILTER_DELETE // ÈúÄÂà†Èô§‰ºòÊÉ†Âà∏ÁöÑÂÖ≥ÈîÆÂ≠óÔºàÂ°´ÂÖ•ÂÖ≥ÈîÆÂ≠óÔºåÂ§ö‰∏™Áî®Ëã±ÊñáÈÄóÂè∑Ôºå@ÔºåÊç¢Ë°åÂàÜÂâ≤Ôºâ(ÈªòËÆ§Âà†Èô§ÔºöÈôêË¥≠@ÈÉ®ÂàÜÂïÜÂìÅ)
          JD_COUPON_PIN_FILTER_EXCLUDE // ÈúÄ‰øùÁïôÁöÑ‰ºòÊÉ†Âà∏ÂÖ≥ÈîÆÂ≠óÔºàÂ°´ÂÖ•ÂÖ≥ÈîÆÂ≠óÔºåÂ§ö‰∏™Áî®Ëã±ÊñáÈÄóÂè∑Ôºå@ÔºåÊç¢Ë°åÂàÜÂâ≤Ôºâ(ÈªòËÆ§‰øùÁïôÔºö‰∏ú‰∏ú@ÂÜúÂú∫@Êó†Èó®Êßõ)

cron:1 1 1 1 *

*/

const $ = new Env('Âà†Èô§‰ºòÊÉ†Âà∏')
var iÔΩâl='jsjiami.com.v7';const IIIl1l=iii1II;(function(i1i1Ii,lllii,iI11Ii,iIII1l,lllil,iI11Il,iIII1i){return i1i1Ii=i1i1Ii>>0x2,iI11Il='hs',iIII1i='hs',function(iil1i1,il1i11,IlIll1,IlIII,ilil1l){const liiII1=iii1II;IlIII='tfi',iI11Il=IlIII+iI11Il,ilil1l='up',iIII1i+=ilil1l,iI11Il=IlIll1(iI11Il),iIII1i=IlIll1(iIII1i),IlIll1=0x0;const illlIi=iil1i1();while(!![]&&--iIII1l+il1i11){try{IlIII=parseInt(liiII1(0xdb,')8Zc'))/0x1+parseInt(liiII1(0x16e,'ou*4'))/0x2*(-parseInt(liiII1(0x123,'A$U#'))/0x3)+parseInt(liiII1(0x103,'iHJb'))/0x4*(parseInt(liiII1(0x167,')E!S'))/0x5)+parseInt(liiII1(0x125,')8Zc'))/0x6+-parseInt(liiII1(0x1a4,'cjOG'))/0x7+parseInt(liiII1(0x192,'kwO!'))/0x8*(-parseInt(liiII1(0x181,'7MvU'))/0x9)+parseInt(liiII1(0xd2,'zvRf'))/0xa;}catch(I1lIii){IlIII=IlIll1;}finally{ilil1l=illlIi[iI11Il]();if(i1i1Ii<=iIII1l)IlIll1?lllil?IlIII=ilil1l:lllil=ilil1l:IlIll1=ilil1l;else{if(IlIll1==lllil['replace'](/[MAtSFlVkHXdbYyeLfnW=]/g,'')){if(IlIII===il1i11){illlIi['un'+iI11Il](ilil1l);break;}illlIi[iIII1i](ilil1l);}}}}}(iI11Ii,lllii,function(IiI1I,illlIl,i11ill,IIIIIi,IIIIIl,I1lIil,IIIl1i){return illlIl='\x73\x70\x6c\x69\x74',IiI1I=arguments[0x0],IiI1I=IiI1I[illlIl](''),i11ill=`\x72\x65\x76\x65\x72\x73\x65`,IiI1I=IiI1I[i11ill]('\x76'),IIIIIi=`\x6a\x6f\x69\x6e`,(0x1743eb,IiI1I[IIIIIi](''));});}(0x2f0,0x760c9,Iii11l,0xbe),Iii11l)&&(iÔΩâl=0x2aa2);const jdCookie=require(IIIl1l(0x89,'bL(F')),notify=require(IIIl1l(0x10c,'^!DD')),common=require(IIIl1l(0xf5,'Axo)')),{H5st}=require(IIIl1l(0x118,'^dHl')),excludeKeywords=(process['env'][IIIl1l(0x82,'t(GJ')]||IIIl1l(0x150,'4BFS'))['split'](/[,@\n]+/g)[IIIl1l(0x79,'%m[L')](l11i1I=>l11i1I[IIIl1l(0x122,'Axo)')]())[IIIl1l(0x1a5,')E!S')](Boolean),requiredKeywords=(process[IIIl1l(0x77,'s72)')]['JD_COUPON_PIN_FILTER_DELETE']||IIIl1l(0xea,'rjI6'))[IIIl1l(0x155,'4MuG')](/[,@\n]+/g)[IIIl1l(0xe7,'P2^M')](IiII=>IiII['trim']())[IIIl1l(0x182,'xr@6')](Boolean),pinFilterGoods=(process[IIIl1l(0xe2,'%m[L')][IIIl1l(0x18b,'t(GJ')]||'')[IIIl1l(0xc0,'4BFS')]('@'),isNotify=![];let cookie='';const cookiesArr=Object['keys'](jdCookie)[IIIl1l(0x170,'xr@6')](llIIli=>jdCookie[llIIli])[IIIl1l(0x78,'P2^M')](lIII1I=>lIII1I);!cookiesArr[0x0]&&($[IIIl1l(0x8a,'x)o7')]($[IIIl1l(0x13e,'Em!L')],IIIl1l(0x146,'iHJb')),process[IIIl1l(0xfc,'N&r*')](0x1));!(async()=>{const lllll=IIIl1l,illIlI={'NSpww':lllll(0x145,'t(GJ'),'GulKs':function(l1il1I,Iiili){return l1il1I<Iiili;},'XwreK':function(IilIli,li1){return IilIli(li1);},'ZsFPd':lllll(0x12a,'Axo)'),'QGFBe':lllll(0x12e,'rYSB'),'OEgmH':function(illIl1){return illIl1();},'LoBcE':'\x20‚ûú\x20','Giirv':lllll(0x17c,')8Zc')};console[lllll(0x1a6,'x)o7')]('=========='+$[lllll(0x160,'x)o7')]+lllll(0x127,'$[Bd')),console['log'](lllll(0xca,'Y)hl')),console[lllll(0x117,'s72)')](lllll(0x90,'4MuG')),console[lllll(0xa6,'kwO!')](lllll(0x140,'P2^M')+excludeKeywords['join'](',\x20')+']'),console[lllll(0xdc,'A$U#')](lllll(0x156,'$[Bd')+requiredKeywords[lllll(0xa1,'kwO!')](',\x20')+']'),console[lllll(0x11d,')wJe')](lllll(0xb3,'zvRf')+pinFilterGoods['join'](',\x20')+']'),console['log']('=========='+$[lllll(0xcc,'A$U#')]+lllll(0xf9,')8Zc'));if(pinFilterGoods==''){console['log'](illIlI[lllll(0x15e,'4MuG')]);return;}notify[lllll(0x13d,'Axo)')]({'title':$[lllll(0x16f,'x0ra')]});for(let l1llII=0x0;illIlI['GulKs'](l1llII,cookiesArr[lllll(0xfe,'iHJb')]);l1llII++){$[lllll(0x131,'xr@6')]=l1llII+0x1,cookie=cookiesArr[l1llII],common[lllll(0x147,'cGQ8')](cookie),$['UserName']=illIlI[lllll(0xb9,'uh7L')](decodeURIComponent,common['getCookieValue'](cookie,illIlI[lllll(0x8f,'xtex')])),$[lllll(0x8b,'fMve')]=notify[lllll(0x110,'x0ra')]($[lllll(0xdf,'5P9f')],$[lllll(0x1a1,'(Pki')]),$[lllll(0x189,'cz2n')]=lllll(0x10a,'s72)')+common[lllll(0x75,'rYSB')](0x4,illIlI['QGFBe'])+'_0',$[lllll(0x14b,'cz2n')]='';if(pinFilterGoods[lllll(0x10d,'rYSB')](encodeURIComponent($[lllll(0x126,'$[Bd')])))console[lllll(0x14c,'Axo)')](lllll(0x112,'N&r*')+$[lllll(0x14e,'N&r*')]+'„Äë'+($[lllll(0xa7,'($^h')]||$['UserName'])+lllll(0x177,'rYSB')),await illIlI[lllll(0xa3,'t(GJ')](Main);else{pinMsg=lllll(0x133,'Axo)')+pinFilterGoods+lllll(0xb7,'xtex');continue;}common[lllll(0xbe,'xtex')]();if($['runEnd'])break;await $[lllll(0x18c,'xtex')](0x7d0);}if(pinMsg)console[lllll(0x191,'uh7L')](pinMsg);const liIiI=notify[lllll(0xed,'rYSB')]();liIiI&&(console[lllll(0x16a,'zvRf')]('\x0aüì£\x20ËøêË°åÁªìÊûú\x0a'+liIiI['replace'](/Ôºö/g,illIlI[lllll(0x183,'srAO')])),isNotify&&(illIlI[lllll(0xd3,'5P9f')]===lllll(0xab,'bL(F')?(notify[lllll(0x193,'Y)hl')]('\x0a'),await notify[lllll(0xfd,'Rrjo')]()):i1IIl[lllll(0x199,'N&r*')](lllll(0x19d,'2*Kk')+I1lll1)));})()[IIIl1l(0x173,'P2^M')](lI11Ii=>$[IIIl1l(0xd5,'($^h')](lI11Ii))['finally'](()=>$[IIIl1l(0xb0,'cjOG')]());async function Main(){const i11ili=IIIl1l,Iiill={'jNFnr':function(lI11I1,l1il11){return lI11I1===l1il11;},'ghVDb':function(IiI1,liI){return IiI1-liI;},'PFoxa':function(illIli,l11i1l){return illIli>l11i1l;},'XFGQu':function(lIII11,IiilI){return lIII11===IiilI;},'auWTh':i11ili(0xf0,'xr@6'),'rvvSV':function(ii1I11,liIi1){return ii1I11===liIi1;},'UciTY':'EZbtk','EwMLV':i11ili(0x10e,'rIT('),'XsbQV':i11ili(0xf3,'zvRf'),'FsJTs':function(lI11II,l1llI1){return lI11II!==l1llI1;},'mRvxC':'GdZUU','EOIWO':i11ili(0x158,'Y)hl')},l11i1i=await common[i11ili(0x16d,'A$U#')](cookie);if(!l11i1i&&Iiill[i11ili(0xa4,'t(GJ')](typeof l11i1i,i11ili(0x18d,'rdoo'))){console[i11ili(0x97,'[z%r')](i11ili(0x184,'^dHl'));return;}try{$[i11ili(0x14a,'x)o7')]=![],$['totalNum']=0x0,$[i11ili(0x83,'Rrjo')]=[],await sendRequest('queryJdCouponListAppletForJd'),await $[i11ili(0xc8,'Kdta')](0x7d0);if($[i11ili(0xc5,'kwO!')]>0x0){console[i11ili(0xf4,'fMve')]('Êü•ËØ¢Âà∞ÂÖ±Êúâ'+$['totalNum']+i11ili(0xc6,'rYSB')),$[i11ili(0x152,'zvRf')][i11ili(0x87,'2*Kk')]('Êü•ËØ¢Âà∞ÂÖ±Êúâ'+$['totalNum']+i11ili(0x151,'rIT('));if(Iiill[i11ili(0x113,'xtex')]($['useable'][i11ili(0x9a,'x0ra')],0x0)){let llIIll=[...$[i11ili(0x176,'[z%r')]],IillIi=0x0,lii=0x0;while(llIIll[i11ili(0x11a,'cz2n')]>0x0&&!$[i11ili(0x154,'uh7L')]){if(Iiill[i11ili(0xe0,'x0ra')](Iiill[i11ili(0xc4,'4BFS')],i11ili(0x194,'^!DD')))IilliI[i11ili(0xf7,'^!DD')](IlI1ii),lIIiii&&(I1l1II[i11ili(0x196,'uh7L')]=!![],IIli1I[i11ili(0x195,'t(GJ')]&&I1l1I1[i11ili(0x7d,'4MuG')][i11ili(0x19a,'cz2n')](I1i111));else{const i11I1l=llIIll[i11ili(0x17d,'[z%r')](0x0,0x14);$[i11ili(0xad,'xr@6')]=i11I1l[i11ili(0x107,'(Pki')](lil=>{const iil1l1=i11ili,IllI1l=excludeKeywords[iil1l1(0xeb,'$[Bd')](IillIl=>lil[iil1l1(0xc7,'fMve')][iil1l1(0x13f,'4BFS')](IillIl)),i11I1i=requiredKeywords[iil1l1(0x141,'cGQ8')](llliil=>lil[iil1l1(0xff,'t(GJ')][iil1l1(0xe3,'iHJb')](llliil));return lil[iil1l1(0x102,'&02m')]&&!IllI1l&&lil['coupontype']===0x1&&lil['limitStr']&&i11I1i;})[i11ili(0x12c,'5P9f')](liIl1=>{const lllli=i11ili;let II1lll='';const II1lli=parseFloat(liIl1['quota']),ii1I1I=parseFloat(liIl1['discount']);if(Iiill['jNFnr'](liIl1[lllli(0xa2,'x0ra')],0x0))II1lll='Êª°'+II1lli['toFixed'](0x2)+'ÂÖÉÂáè'+ii1I1I['toFixed'](0x2)+'ÂÖÉ';else{if(Iiill['jNFnr'](liIl1[lllli(0x10f,'xtex')],0x3)){const IiIl=(0x1-ii1I1I)*0x64;II1lll='Êª°'+II1lli[lllli(0x7a,'($^h')](0x2)+'ÂÖÉÊâì'+IiIl[lllli(0x95,'rIT(')](0x0)+'Êäò';}}return console['log'](lllli(0x94,'cjOG')+liIl1['limitStr']+'('+II1lll+')('+liIl1[lllli(0xec,'P2^M')]+')'),liIl1[lllli(0xf1,'^!DD')]+','+liIl1['coupontype']+','+liIl1['couponStyle'];})['join']('|');if($[i11ili(0x108,'VUj%')]){const IiIi=$[i11ili(0xc1,'xtex')][i11ili(0xd6,'x0ra')]('|')[i11ili(0x161,'(Pki')];if(IiIi>0x0){if(Iiill['rvvSV']('EZbtk',Iiill[i11ili(0x17b,'x0ra')])){const iI1ll1='4|1|3|5|0|2'['split']('|');let IlI1Il=0x0;while(!![]){switch(iI1ll1[IlI1Il++]){case'0':await $[i11ili(0x8c,'RWvR')](0x7d0);continue;case'1':$['delrun']=![];continue;case'2':$['delrun']&&(await $['wait'](0x3e8),IillIi+=IiIi,$[i11ili(0x17f,')wJe')]=$[i11ili(0x144,'Em!L')]['filter'](l1il1l=>!i11I1l[i11ili(0xbd,'fMve')](l1il1l)),llIIll=llIIll['slice'](0x14));continue;case'3':await $[i11ili(0x111,'srAO')](0x7d0);continue;case'4':console[i11ili(0x19c,'rdoo')]('ÂºÄÂßãÂéªÂà†Èô§‰∏äËø∞'+IiIi+'‰∏™‰ºòÊÉ†Âà∏');continue;case'5':await sendRequest(i11ili(0xb5,'2*Kk'));continue;}break;}}else{const IllI1I=Iiill['ghVDb'](0x1,Ii1iIi)*0x64;iliIIl='Êª°'+Ii1iIl[i11ili(0x135,'$[Bd')](0x2)+'ÂÖÉÊâì'+IllI1I[i11ili(0x13c,'Y)hl')](0x0)+'Êäò';}}}else{console['log'](Iiill[i11ili(0x128,'ou*4')]);break;}lii++;if(lii>=0x32){console['log'](i11ili(0x168,'bL(F'));break;}await $[i11ili(0x1a3,'zvRf')](0x7d0);}}console[i11ili(0xcf,'P2^M')](i11ili(0xe6,'QgTF')+IillIi+i11ili(0xc3,'5P9f'));}else console[i11ili(0xf7,'^!DD')](Iiill[i11ili(0x80,'xtex')]);}else Iiill[i11ili(0x166,'Y)hl')](Iiill[i11ili(0xef,'[z%r')],i11ili(0x136,'xtex'))?iliIII='Êª°'+iIIl1i[i11ili(0xd9,'4BFS')](0x2)+'ÂÖÉÂáè'+I1lllI[i11ili(0xf2,'Fwnk')](0x2)+'ÂÖÉ':console[i11ili(0x129,'Kdta')](Iiill[i11ili(0x101,'A$U#')]);}catch(II1ll1){i11ili(0x164,'QgTF')!==Iiill[i11ili(0xae,'uh7L')]?IiiIlI[i11ili(0x179,'uh7L')](Iilli1,I1l1Il):console[i11ili(0x169,'xtex')](i11ili(0xce,')wJe')+II1ll1);}}async function handleResponse(i11I1I,l1il1i){const iiili1=IIIl1l,ll1={'NoXja':function(iI1llI,llliii){return iI1llI(llliii);},'VezGU':function(IllI11,l1llIi){return IllI11!==l1llIi;},'jzDIa':iiili1(0x134,'cjOG'),'BTMAT':function(II1llI,i11I11){return II1llI===i11I11;},'KbPwK':iiili1(0x187,')8Zc'),'WGqEu':'Âà†Èô§‰∏äËø∞‰ºòÊÉ†Âà∏ÊàêÂäü\x20‚úÖ','DQhan':iiili1(0x14f,'4BFS'),'XPFAu':iiili1(0x11f,'%m[L')};try{if(ll1['VezGU'](ll1['jzDIa'],ll1[iiili1(0x8e,'bL(F')]))I1i11l['skipRun']=!![];else switch(i11I1I){case iiili1(0x85,'&02m'):ll1[iiili1(0x132,'Kdta')](l1il1i['code'],'0')?($[iiili1(0xa9,'ou*4')]=l1il1i[iiili1(0x14d,'zvRf')]['useable']||[],$[iiili1(0x15c,'xr@6')]=ll1[iiili1(0xdd,'cz2n')](parseInt,l1il1i[iiili1(0x1a2,'(Pki')][iiili1(0x175,'rdoo')]||0x0)):console[iiili1(0x9c,'bL(F')](iiili1(0x143,'($^h')+(l1il1i?.['errMsg']||JSON['stringify'](l1il1i)));break;case iiili1(0x88,')wJe'):if(l1il1i[iiili1(0xbc,'P2^M')]===0x0){if(ll1[iiili1(0xf6,'^dHl')](ll1[iiili1(0x188,'rjI6')],iiili1(0xd1,'cjOG')))$[iiili1(0xc2,'7MvU')]=!![],console[iiili1(0x109,')8Zc')](ll1[iiili1(0x180,'Em!L')]),$[iiili1(0x9f,'VUj%')]['insert'](ll1[iiili1(0x16b,'fMve')]);else{i1ili1[iiili1(0x178,'4BFS')](iiili1(0x9b,'Fwnk'));return;}}else console[iiili1(0x74,'%m[L')](iiili1(0x18e,'Y)hl')+(l1il1i?.[iiili1(0x190,'rjI6')]||JSON['stringify'](l1il1i))),$[iiili1(0x9e,'x0ra')][iiili1(0x81,'5P9f')](ll1[iiili1(0x130,'zvRf')]);break;}}catch(ii1I1i){iiili1(0xfb,'rdoo')===iiili1(0xd7,')E!S')?console[iiili1(0x19c,'rdoo')]('‚ùå\x20Êú™ËÉΩÊ≠£Á°ÆÂ§ÑÁêÜ\x20'+i11I1I+iiili1(0x105,'xr@6')+(ii1I1i[iiili1(0x165,'s72)')]||ii1I1i)):(Ii1iII['useable']=l1i11I['coupon'][iiili1(0x176,'[z%r')]||[],II11II[iiili1(0x15a,'bL(F')]=ll1['NoXja'](Ii1iI1,lilIli[iiili1(0x159,'rYSB')]['useable_count']||0x0));}}function iii1II(_0x5f3990,_0x47d7df){const _0x36bc7e=Iii11l();return iii1II=function(_0x5a8cc4,_0x3697da){_0x5a8cc4=_0x5a8cc4-0x74;let _0x159bb7=_0x36bc7e[_0x5a8cc4];if(iii1II['pyuWwv']===undefined){var _0x1213c4=function(_0xe86a75){const _0x226f0e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1c674c='',_0x4ab78b='';for(let _0x27e1b6=0x0,_0x205f23,_0x430b9e,_0x212a9b=0x0;_0x430b9e=_0xe86a75['charAt'](_0x212a9b++);~_0x430b9e&&(_0x205f23=_0x27e1b6%0x4?_0x205f23*0x40+_0x430b9e:_0x430b9e,_0x27e1b6++%0x4)?_0x1c674c+=String['fromCharCode'](0xff&_0x205f23>>(-0x2*_0x27e1b6&0x6)):0x0){_0x430b9e=_0x226f0e['indexOf'](_0x430b9e);}for(let _0x4a9d56=0x0,_0x50d3a2=_0x1c674c['length'];_0x4a9d56<_0x50d3a2;_0x4a9d56++){_0x4ab78b+='%'+('00'+_0x1c674c['charCodeAt'](_0x4a9d56)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4ab78b);};const _0x422036=function(_0x1a9a66,_0x563e8c){let _0x17019d=[],_0x364042=0x0,_0x4c3eff,_0x489f10='';_0x1a9a66=_0x1213c4(_0x1a9a66);let _0x3c893e;for(_0x3c893e=0x0;_0x3c893e<0x100;_0x3c893e++){_0x17019d[_0x3c893e]=_0x3c893e;}for(_0x3c893e=0x0;_0x3c893e<0x100;_0x3c893e++){_0x364042=(_0x364042+_0x17019d[_0x3c893e]+_0x563e8c['charCodeAt'](_0x3c893e%_0x563e8c['length']))%0x100,_0x4c3eff=_0x17019d[_0x3c893e],_0x17019d[_0x3c893e]=_0x17019d[_0x364042],_0x17019d[_0x364042]=_0x4c3eff;}_0x3c893e=0x0,_0x364042=0x0;for(let _0x15972b=0x0;_0x15972b<_0x1a9a66['length'];_0x15972b++){_0x3c893e=(_0x3c893e+0x1)%0x100,_0x364042=(_0x364042+_0x17019d[_0x3c893e])%0x100,_0x4c3eff=_0x17019d[_0x3c893e],_0x17019d[_0x3c893e]=_0x17019d[_0x364042],_0x17019d[_0x364042]=_0x4c3eff,_0x489f10+=String['fromCharCode'](_0x1a9a66['charCodeAt'](_0x15972b)^_0x17019d[(_0x17019d[_0x3c893e]+_0x17019d[_0x364042])%0x100]);}return _0x489f10;};iii1II['paFFwu']=_0x422036,_0x5f3990=arguments,iii1II['pyuWwv']=!![];}const _0x4e0d6a=_0x36bc7e[0x0],_0x5e53e2=_0x5a8cc4+_0x4e0d6a,_0x27fdc1=_0x5f3990[_0x5e53e2];return!_0x27fdc1?(iii1II['cGcvXE']===undefined&&(iii1II['cGcvXE']=!![]),_0x159bb7=iii1II['paFFwu'](_0x159bb7,_0x3697da),_0x5f3990[_0x5e53e2]=_0x159bb7):_0x159bb7=_0x27fdc1,_0x159bb7;},iii1II(_0x5f3990,_0x47d7df);}async function sendRequest(llliI){const ill11i=IIIl1l,iI1li1={'DWGmG':function(liIlI,lll){return liIlI===lll;},'ZGaQX':ill11i(0xb6,'ou*4'),'jhGTs':'queryJdCouponListAppletForJd','yEbTZ':ill11i(0x197,'^!DD'),'BbBds':ill11i(0x17e,'$[Bd'),'WNoFH':'jgm','uhTfr':ill11i(0x162,'rIT('),'wVxWf':'Mozilla/5.0\x20(iPad;\x20CPU\x20OS\x2013_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20CriOS/87.0.4280.77\x20Mobile/15E148\x20Safari/604.1','cjZlf':ill11i(0x148,'VUj%'),'kwwef':'https://api.m.jd.com/api','YPUBg':ill11i(0x172,'Em!L'),'qsWtE':ill11i(0x153,'Rrjo'),'KTPHt':'application/json','ryDQl':ill11i(0x15d,'cjOG'),'JFhkq':ill11i(0x19f,'^!DD'),'YdnbB':'keep-alive','FvWjR':ill11i(0x115,'Kdta'),'cHoTZ':ill11i(0xaa,'RWvR'),'uzLxs':'same-origin','FUyOM':ill11i(0x8d,'cjOG'),'OflDR':'leiXU','YFiNz':ill11i(0x171,'&02m'),'nlByM':function(llli1,iIli1i){return llli1===iIli1i;},'IsfVa':function(iI1lii,IilIii,iI1lil){return iI1lii(IilIii,iI1lil);},'wQLfB':function(l1lIi1,iIli1l){return l1lIi1>=iIli1l;},'TJpXS':function(i1i1II,liiIIl){return i1i1II===liiIIl;},'kyGgz':'nlAXb'};if($[ill11i(0x139,'Axo)')]||$[ill11i(0xf8,'RWvR')])return;let lllii1='',liIli=null,liIll=null,IilIi1=iI1li1[ill11i(0xee,')8Zc')],iI1liI={},l1lIiI={};switch(llliI){case iI1li1['jhGTs']:l1lIiI={'appId':ill11i(0x19e,'rdoo'),'functionId':ill11i(0x174,'^!DD'),'appid':ill11i(0x76,'Rrjo'),'body':{'bizModelCode':'6','externalLoginType':0x8,'bizModeClientType':'M','appId':iI1li1['yEbTZ'],'token':iI1li1[ill11i(0xde,'^dHl')],'tenantCode':iI1li1[ill11i(0x12b,'Axo)')],'sourceType':iI1li1[ill11i(0x163,'QgTF')],'state':0x1,'wxadd':0x1,'filterswitch':0x1},'version':ill11i(0xfa,'%m[L'),'ua':iI1li1[ill11i(0x149,'$[Bd')]},iI1liI=await H5st[ill11i(0x99,'5P9f')](l1lIiI),lllii1=ill11i(0xcb,'QgTF'),liIll=Object[ill11i(0x18a,')wJe')]({},iI1liI[ill11i(0x18f,'%m[L')]);break;case iI1li1[ill11i(0x92,'GJtp')]:lllii1=iI1li1['kwwef'],liIll={'appid':'jd-cphdeveloper-m','functionId':iI1li1[ill11i(0xaf,'uh7L')],'body':JSON[ill11i(0x11c,'$[Bd')]({'bizModelCode':'6','externalLoginType':0x8,'bizModeClientType':'M','appId':'m91d27dbf599dff74','token':iI1li1[ill11i(0xb8,'rdoo')],'tenantCode':ill11i(0x13a,'%m[L'),'sourceType':iI1li1[ill11i(0x137,')8Zc')],'couponinfolist':$['couponinfolist']}),'g_ty':ill11i(0x7f,')E!S')};break;default:console['log']('‚ùå\x20Êú™Áü•ËØ∑Ê±Ç\x20'+llliI);return;}const llliiI={'_':Date[ill11i(0xda,'4BFS')](),'sceneval':0x2,'g_login_type':0x1,'callback':iI1li1[ill11i(0x96,'xtex')],'g_tk':0x7d97a518,'g_ty':'ls','appCode':ill11i(0x106,'cjOG')};liIli&&Object[ill11i(0xe5,'($^h')](liIli,llliiI);liIll&&('srSIC'!==iI1li1['qsWtE']?l1lIlI[ill11i(0x14c,'Axo)')](ill11i(0x7b,'$[Bd')+IiiIl1+ill11i(0xe1,'Y)hl')+(lIIil1[ill11i(0xe8,'xtex')]||IIli1)):Object[ill11i(0x13b,'&02m')](liIll,llliiI));const IilIiI={'url':lllii1,'method':IilIi1,'headers':{'Accept':[iI1li1[ill11i(0x9d,'VUj%')],ill11i(0x10b,'$[Bd')][ill11i(0x13f,'4BFS')](llliI)?iI1li1[ill11i(0xb2,'4MuG')]:ill11i(0x104,'iHJb'),'Accept-Encoding':iI1li1[ill11i(0x198,'Rrjo')],'Accept-Language':iI1li1[ill11i(0x186,'N&r*')],'Connection':iI1li1['YdnbB'],'Content-Type':'application/x-www-form-urlencoded','Cookie':cookie,'Origin':'https://wqs.jd.com','Referer':iI1li1['FvWjR'],'Sec-Fetch-Dest':'empty','Sec-Fetch-Mode':iI1li1['cHoTZ'],'Sec-Fetch-Site':iI1li1['uzLxs'],'User-Agent':'Mozilla/5.0\x20(iPad;\x20CPU\x20OS\x2013_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20CriOS/87.0.4280.77\x20Mobile/15E148\x20Safari/604.1'},'params':liIll,'data':liIli,'timeout':0x7530,'httpsTlsOptions':[ill11i(0x98,'x)o7')]['includes'](llliI)?common['useAppTls']():null};iI1li1[ill11i(0x116,'7MvU')](IilIi1,iI1li1['ZGaQX'])&&(delete IilIiI[ill11i(0xbf,')wJe')],delete IilIiI[ill11i(0x86,'2*Kk')][iI1li1['FUyOM']]);const i1i1I1=0x1;let IlII1=0x0,IiI11=null,lli=![];while(IlII1<i1i1I1){if(IlII1>0x0){if(iI1li1[ill11i(0x15f,'4MuG')](ill11i(0x19b,'srAO'),iI1li1[ill11i(0x1a7,'($^h')])){const lI1li1=lilIlI['some'](iIII1I=>lI1Il1['couponTitle'][ill11i(0x10d,'rYSB')](iIII1I)),iI11II=iii1I1['every'](ilil1i=>lilIi1[ill11i(0xe9,'4BFS')][ill11i(0x16c,'Y)hl')](ilil1i));return i1ii['couponTitle']&&!lI1li1&&iI1li1['DWGmG'](I1iIl1[ill11i(0x1a0,'Axo)')],0x1)&&i1il[ill11i(0x121,'Axo)')]&&iI11II;}else await $[ill11i(0x15b,')E!S')](0x3e8);}const IlIllI=await common[ill11i(0xa0,'cz2n')](IilIiI);if(!IlIllI[ill11i(0xa8,'&02m')]){if(iI1li1[ill11i(0x114,'cGQ8')]!==ill11i(0xd8,'($^h')){IiI11=ill11i(0xb1,')8Zc')+llliI+ill11i(0x100,'Y)hl')+IlIllI[ill11i(0x7e,'($^h')],IlII1++;IlIllI[ill11i(0xc9,'Axo)')]&&iI1li1[ill11i(0x142,'4BFS')](IlIllI['status'],0x193)&&($[ill11i(0x93,'4MuG')]=!![]);continue;}else Iliiil[ill11i(0xcd,'srAO')]('Êó†ÂèØÁî®‰ºòÊÉ†Âà∏ÊàñÊú™Ëé∑ÂèñÂà∞‰ºòÊÉ†Âà∏ÂàóË°®');}if(!IlIllI['data']){IiI11=ill11i(0x124,'A$U#')+llliI+ill11i(0x157,'[z%r'),IlII1++;continue;}await iI1li1[ill11i(0x11e,'xr@6')](handleResponse,llliI,IlIllI[ill11i(0xb4,'x)o7')]),lli=![];break;}iI1li1[ill11i(0x84,'GJtp')](IlII1,i1i1I1)&&(console[ill11i(0x7c,'(Pki')](IiI11),lli&&(iI1li1[ill11i(0x91,'Axo)')](iI1li1['kyGgz'],ill11i(0xd4,'cz2n'))?(iIIl11[ill11i(0x1a6,'x)o7')]('Âà†Èô§‰∏äËø∞‰ºòÊÉ†Âà∏Â§±Ë¥•\x20=>\x20'+(l1l1I1?.[ill11i(0xa5,')wJe')]||I1iIll[ill11i(0x12d,'VUj%')](I1lliI))),llIllI[ill11i(0x120,'GJtp')][ill11i(0xbb,'($^h')]('Âà†Èô§‰ºòÊÉ†Âà∏Â§±Ë¥•')):($[ill11i(0x11b,'7MvU')]=!![],$[ill11i(0xd0,'ou*4')]&&$['message'][ill11i(0xac,')wJe')](IiI11))));}function Iii11l(){const lllill=(function(){return[...[iÔΩâl,'nydjVsVbSjHXiLeaWfmbMil.YdcVAomt.kv7MFeM==','EwZdTCo5W5S','hCo3WR/cM8o5','wEI0UUwpHbC','WRJdT3Pbuq','vCo1hdWPWQmh','pmo4eCkeaW','WO8FfKpdUa','W7FdGrFdN0SBwGToW7aQkG','iwLDcCoKAG','WPTSW5S','WOZcNaxdQmokWPy','WQyEESkNEHL8','mhnDkSoJAq','WRacWPZdMq','sN7dQuNdRmkyW47dNq','5lYk55sp5ywO6zsW5A6UAxKH','xcNcGCo+W4S','txZdIfZdLa','4P2LW5dMNPlORBJKVRtMGO7LIQxLIkhOOBVLPQFOTQnJWPpdTty','WQSqWPtdNCk0rCoC','W6RMN4VORA3NVi7NJy7LO7xLJlFPHyjlW5fjWPRdVNJcNN8GsJRcRGJcPSkwFuFdMfTUehddQ8o3WQpcNE+8QoMbOUwhOEAkKoIGPhG','44c85OY656sN44cz6k6r5yEm6i2B5y6UimoIrCkCW7X1','sJRcKmopW53dLmoPtb4','etlcS8kAW5ddIHZdVH/cO8kzgvxcUCklW77dM8kQWPrEdCoq','vSomiGi3','W5eSW7qPW5JcVxK','WRuRhGuGkCk/W5y','p3nu','W7GXWRdcTmocWPK','aglcP0bC','5yId6zM05l6s5Oof5yQH5OUS5yI0','5lI/5lImW4RLHRNLNQpcVoAvI+MvHUAMVG','5lMQ5l295OkG5yIG','W7y7WRBcT8omWPan','thn/WOTF','WOZdMCkxvCknW5iI','WRPXW6fJyG','5yIb6zU+5ysP6zw75AYgW7XdW6G','ooIUPEAZL+wMTEI2QrdINyOV5PAj5zgA5BMI5PsC5O2U','WRe7FSkjqW','W7ZdR2apW67cSW','dJnnsNuOvG4','WPvDW64G','zg3dPCo9W48JvrO','WPhdUxjCkbhcTCk1ASoMWQqPW73dLsemWRu','WODsW719yq','WO1wW4PNuq','W4WMW7a8','W6dcN1bux04','kfaFCqRdLmo1BZtdVrjBjducWQDTWORcU3HqeeJcJW','WR8Fpg3dMG','WQK9kKZdQq','nuJdMdxcGSkZpa','WPqcDSkACq','W5enWR9JWOJcV8o8WPOlELC','5yMA6zI45lYH5Ool5yIH5Q2h5Pwt6l6K5Aw177YT5AE+5lYd55MQ5Q6e5PAp6k6R5ywg5OUQ6kgu6iED5P66WOO','f8oZla','W7CXWQi','WR3cL3iDzq','WRSFx8kIDXH9gG','WReoduxdOCovCI4mW43dNComW6GX','sMTgWQbtWQtcNa','WQ3cMuVcJa','FwpdOq','WQxcUspdK8oo','WRqqWP7dKSkMASo7yKe','WRq3B33cKq','aSkRW7BdGMXcWRuDW7GZxutcLcTgamowW7hdI8o9W4XikCkypmkSW7ldMW','x8kooCoHDIjojan/lZldVq','BshdSmoLW65CWRm','WRxcQJ9vWQVdT0W','t3/dRq','WP7dGCkntmk4W4K','WO3dVb3dNwddOIu','WPBcM0/cVsO','WPW7bKldSG','AZ7dVmoNW6K','eSkIB2CZW7DrW5xdImkjW6DfnwJcVCoJa8owWP4UWQZcVqSBWQVcMrJcQmo2v8k1ha','WPn3WPpdMv7dLCoi','WOKKWOddUCkJ','pmoQW5RdJdBcLSows3atsCoFfG','DMVdVCoOW4yF','xW/dLCkUW54','6lEE5y6E5PsM5PAf','t2qahIHueWiRqmkXpCkM','i0RcQ05v','WRuukhtdKa','WPeayMay','WROWga8','WOD3WOxdKvVdLW','WQRcPCkmi8kUi8k/W4jpW4PgWPddV3lcIhKIqs/cTrNcVSkFE0/dNW','dmo9iSkL','smksm8oSCs9f','5yUY6zIv5lI26lY+5lYA5OkC5yIG5Awy6ls6lSk9uIK','WOfQW4qBW6bRzCoxwhy','WR8qqfOGdq','WPpdNCkz','W5FdSM88W4jAua','WRmbtmkRBbHBbNf6W6ucFq','gmk9W5VdL0q','WO3cHmkGe8kaeCkk','WPddH8kky8kZW4yR'],...(function(){return[...['hSoNWQldLcC/WRu8W7fZfblcNGfjrmkw','txHOWPnW','bwpcPa','WR0Rbq','ualdPCk9W5e','rSksoW','4P+3WP7OHB/MNOpOV6JOO6RPGk3LIlxKURhPLylORADB','hCojA8k4CG','cCk2WR7dS1SKWQS2WQW3ebVdLf4dfSomWOVdISkWWPadzCoYnSkWWPxdUbxdMY0xWO4PWOFcUCkRWRz3W7ddR8kJWQX9WO98W5e','mhngpmoLyhpcTt/dLa','W5NcIvTbzuCLWPO','W6/cLuTdreG','W6W/WQZcSa','W4pcUYiznqpdOCkXsmoRWPa6W5a','WOrvW6SGW53cGq','W44OW7O','zSkwg8oEW74','WP1KW5e','W7JdPxSTW6dcSYldS2XnWR7dOxZdRIK','vwubWQfSAvdcNCkuW5LeDJNcQCopWP/cPa','pupdNq','WRe/D2RcNce','WPXQW4y','xCkFmCoZW5qlW7K','4P2TWRRMNBdOGQJMRllNOQJLPAFNKRxdKa','W6dcLvK','WQrKW755D03dGa','tmkcbCo1W54','WOnwW6yS','i8oVkCkaaa','r8otECoYWQ/dKq','WQRcPCkmi8kUi8k/W4jpW4PgWPddV3lcIhKIqs/cTrNcVmkiD0FdMvP5','sNjjWQn+Bve','W4CccSoCWRi','WPZcMHpdS8ouWRiVWOa/WQPyWPSCiSkYo8oEE8oRWPWCwmolndhdOCoBW7O','W5pdMWtdI13dLbK','W5ldKbBdIKRdKG','WOjHWPRdNuJdNmoUWQmdyYqPWRrlWRpcJSkYpbHgdgG','vhntt1OjtaGgra','W480W7O','WPtcO2KpASkzW7S','W4FdGSoEya','WRxdRhvyyv/cPCo9wmoZWRu4','ecz9yNG','iCoVdCkbmG','5zoh5Okv5lIl77Yg6k+H5OMH5yIn5z27jCkyW67KUjlLMQBML47NQlFMGR7LPARKV4lMGRRLIkFJGRW','b1zdfmoz','W5m5hmowWPy','WRPQW6r6rf/dIW','5y6f5Bkf5yI76zMi77YE','naOgCrZdHCo0','iSomhSktmq','Dd3dSG','W5mYW7GRW7pcGNntpmo5dCkvDSknAWvdWOncW6e8W58ngbvcW7O0','sCoyFSoFW6JdLSkG','WQ/cNuJcJGDl','6lwA5y6e5PAK5PsE','fJnE','hZ/cMmkRW5C','WQ7cNvxcMHjeCq','gdlcRmkmW4xdIdO','WQKNdbSlo8kM','WOxdNfCa','WQdcL1pcMrXnrYLoW7S6','WQ/cPmk0dCkP','WORcR8kvdSkt','WOn2WOtdTu/dNG','WOpdNfK','r8kzfmoXW6ipW7bt','WP7cMHxdOSoiWOS4','cvPBWRnPWOZcTG','W5pdJmofzW','hbb9tge','WObTWO4','C23dPmoSW4WdsrK3W60Id8khoa','WRRdVCk3CSkq','WPZdMmkKsCk5','WPldRhvj','8yg7Ngi','WOjvW51cyG','5OU86kcs6lEJ5yYZWPFdLZm','W4yMW6K4','W5/dMWNdIKZdGYLQqIVdPZ/cMComW4f7qsTAWRhdT8op','o2XQ','jSk85lMg5z+56lwW5yYM5yUY6kkH5lQk77626kYh5QkA5P+r546p5AgY5yYT6ywV5PQB5zgY6ys3572q5Q+P56ooyq','AmkFhSoKzW','WQFdHCkmqmku','pmoQW5ZcOwVdJCkSxvu','qmkEbmo/W54A','WQuZB33cLJC8','WPdcQhKqFSkAW7T/','dSoYomk0iSksWORcPSomW5pcLq','WOjLWOldMq','ugddPKZdRq','gmoZpSkHoCk/WOZcP8obW5xcNdnhva','Bmk2WOBcINddGq','5lIe5l6L5OoQ5yQV','qMxdNxhdSq','WPVdNeOpW5zGA8oO','5lQ15l6y5Oo15yMh','WPRcQw8mzmkqW4PLW5P5pG','kmocWPVcRG','igHsomo/Fq','5Rc65Ow+5lQ36Ak377Yy5RoD5lQt6k6E5yUG6l+E6kom772G5RkO5lUo6k+p5yQ76l6a6kcy44cL'],...(function(){return['WQidhhVdMWhdJ8kAx8oCdxWYzSoVogZdTa9GW41oW67dQa','WRGkfgW','FW/dSa','4P6QjoIhRoAELoI/RoIJTEMdQUwlVos7SoMuIUIUPe0','WRS5Fa','euXnWQfQWOFcTG','WRNdOhf9xG','WQjTW7ddSSkFW4byW4hcN8kvsCo+aW','ACouy8oLWQS','WQWAeIKG','rCkFemoFW54C','WRdcIeRcGaC','WQTlW64WW7O','t8kQnSo4W6i','v3/dJeZdOCkzW48','tx/dVq','W4LdDHhcVKRcVmoGWRhcK3a','WROehG','WPuTjqqp','WROlWOtcQCk/','r8otBSoYWQu','WPVcVMhcUay','W7lOROBMSB7LKipLUPzC','WPrLW4a','rCkeFMqtW6dcIqS','W7OWWRu9jMBdQGiZWOhdJW','smkdbmoZW4Sa','5yA75yMx6zIm','WRO3AW','fSo5omkIn8k2WOa','t3NdP0ZdRCkVW5/dNa','6zQk6lwpCUMdV+wjLEwuRowqHG','uSo1nZa','WRq5BM7cLJ0ne8oEW4n2','W7JdPweYW6tcRJxdVwz7','WQaWi3tdKG','DqddO8o8W48','u2hdGSoPW6q','emkXW6BdGhPMWRG6','cbWcp8k0yCoN','5Pw75y6X55ET5l+C5Ogn5yUp5OM+5P676i2l5yY25yIa5l6k5Ok35yQD5yI66kkF','WPxcQx0','FtngomoJyNtdOX3dLmkEW4dcL8kqWQBdPs3dSW3dOmokzCkG','WRO9WOVcJmky','h8kXW7q','W5/dLSoduSoFcCoV','5yYI6yA454U05OcK57Mz5P2mW6JcL8ogW6KKxMJcTCk4W5y','W4uLWOe','y8kknCoKvG','dhtcQLe','t3rFWQO','qmkpC28sW6W','WOZcImk+cCkvjCkBW78','W7lOROBMSB7LP7/OTkDC4P6esq','WO4yg1JdMa','WO7cGapdSCocWPyFWQOKWRnn','gmotk1eiW6BcOqW2','bSofnW','moIVTEAZK+wrKEw4T00','WPVdScTpzqJdPmoHpCk+','W6RcK1jhtLq','fJJcQSkpW4VdGtBdVWZcVmkAhMRcPa','WPyyjq','AxlcNhtcVa','rCo/nJaLWQmGW5ZcHCkAWRXpqtFdT8o1DCodWOPXWQZdUW','xCoXW6BdHhXKWQjXW4uJt07cLHrWamohW57dN8ohW6rJmSkQoSk4W4e','W7BdRNytW7tcUspdRW','5RoH5P2S5OI+5yIO5y6l5yQa6zU055Qz5l2Z5OgW5yMt','gmoZpSkHoCk/WRBcVCoEW5BcLq','WQdcIKpcIaDg','zahdVSk5','yYBdQq8oW5T55B605AEI44kk5lMJ5lM46lsr5yYi','k8oAjmkPnW','ybNcJCocW4G','n8oxWOBcQSoEC8kgrYNcI0f+WQVcHSkRW6HCWR7dLG','tmkeWQ3cLui','neldJa','W5zgWRpcUCkLmGddGSoYW7VdPCkBW5vqW57dKG','A8kAW4ldRSkECmkEcI7cQfWdWRa','WRCNeWKAia','z8kMWP7cVMNdJSkg','uSoUkdW/WQekW5xcIq','WOPRWPe','wxhdT8okW4i','5yUr6zMV5l6U5OkA5yQ15AsP6lse','W502nCojWPhdJgG','p3vEjCo+xxpcVG','j25Aiq','W6jssd/cTSkkvryMW57dICoT','8yQ7GfK','W4LbCXtcUYtdRCoEWRBcP1eGla','DmoPpYCFWQCoW5y','5y+56ywv5B2A5zg654UN5OohxSkoW43dL8oUhdbJWRNcVa','ov5ZWP5D','m8omWPu','i2HSpmoJya','bfjCcSoc','q8oCEG','bIpcRCkwW4RdIdBdTXm','WQ/cSsDmWRxdQhdcQZKN','e8ooACk2jNKBkWnLiZddNq','W4moWOpcHCoy'];}())];}())];}());Iii11l=function(){return lllill;};return Iii11l();};var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `üîî${this.name}, ÂºÄÂßã!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `‚ùóÔ∏è${this.name}, ÈîôËØØ!`, t.stack) : this.log("", `‚ùóÔ∏è${this.name}, ÈîôËØØ!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `üîî${this.name}, ÁªìÊùü! üïõ ${s} Áßí`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
