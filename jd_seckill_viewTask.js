/*
Ê¥ªÂä®ÂêçÁß∞ÔºöÁßíÊùÄÊµèËßàÈ¢Ü‰∫¨Ë±Ü
ÁéØÂ¢ÉÂèòÈáèÔºöjd_seckill_viewTask_interval // Ëá™ÂÆö‰πâËøêË°åÈó¥ÈöîÊó∂ÈïøÔºàÊï¥Êï∞ÔºåÂçï‰ΩçÊØ´ÁßíÔºâÔºåÈªòËÆ§1000
        jd_seckill_viewTask_notify // ÊòØÂê¶Êé®ÈÄÅÈÄöÁü•Ôºàtrue/falseÔºâÔºåÈªòËÆ§‰∏çÊé®ÈÄÅ
        jd_seckill_viewTask_pinFilter // Ë¥¶Âè∑pinËøáÊª§ÔºåÂ§ö‰∏™Áî®@ËøõË°åÂàÜÂâ≤

ÂÆöÊó∂ÈöèÊú∫

*/

const $ = new Env('ÁßíÊùÄÊµèËßàÈ¢Ü‰∫¨Ë±Ü')
var iÔΩâl='jsjiami.com.v7';const liil1I=iii1II;function iii1II(_0x4539f9,_0x177620){const _0x5d7874=Iii11l();return iii1II=function(_0x4c9535,_0x4771a8){_0x4c9535=_0x4c9535-0x6e;let _0x58d6ed=_0x5d7874[_0x4c9535];if(iii1II['aFSrVj']===undefined){var _0x243a5c=function(_0x4bd24f){const _0x2a3ad4='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2871af='',_0x5081f4='';for(let _0x105c04=0x0,_0x5aa625,_0x4a7d3c,_0x2055cf=0x0;_0x4a7d3c=_0x4bd24f['charAt'](_0x2055cf++);~_0x4a7d3c&&(_0x5aa625=_0x105c04%0x4?_0x5aa625*0x40+_0x4a7d3c:_0x4a7d3c,_0x105c04++%0x4)?_0x2871af+=String['fromCharCode'](0xff&_0x5aa625>>(-0x2*_0x105c04&0x6)):0x0){_0x4a7d3c=_0x2a3ad4['indexOf'](_0x4a7d3c);}for(let _0x46f0a4=0x0,_0x36e6b4=_0x2871af['length'];_0x46f0a4<_0x36e6b4;_0x46f0a4++){_0x5081f4+='%'+('00'+_0x2871af['charCodeAt'](_0x46f0a4)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5081f4);};const _0x2def06=function(_0x4ea732,_0x33e709){let _0x2c6739=[],_0x59503a=0x0,_0x4ffc94,_0xf18619='';_0x4ea732=_0x243a5c(_0x4ea732);let _0xe2775b;for(_0xe2775b=0x0;_0xe2775b<0x100;_0xe2775b++){_0x2c6739[_0xe2775b]=_0xe2775b;}for(_0xe2775b=0x0;_0xe2775b<0x100;_0xe2775b++){_0x59503a=(_0x59503a+_0x2c6739[_0xe2775b]+_0x33e709['charCodeAt'](_0xe2775b%_0x33e709['length']))%0x100,_0x4ffc94=_0x2c6739[_0xe2775b],_0x2c6739[_0xe2775b]=_0x2c6739[_0x59503a],_0x2c6739[_0x59503a]=_0x4ffc94;}_0xe2775b=0x0,_0x59503a=0x0;for(let _0x531e12=0x0;_0x531e12<_0x4ea732['length'];_0x531e12++){_0xe2775b=(_0xe2775b+0x1)%0x100,_0x59503a=(_0x59503a+_0x2c6739[_0xe2775b])%0x100,_0x4ffc94=_0x2c6739[_0xe2775b],_0x2c6739[_0xe2775b]=_0x2c6739[_0x59503a],_0x2c6739[_0x59503a]=_0x4ffc94,_0xf18619+=String['fromCharCode'](_0x4ea732['charCodeAt'](_0x531e12)^_0x2c6739[(_0x2c6739[_0xe2775b]+_0x2c6739[_0x59503a])%0x100]);}return _0xf18619;};iii1II['iMbooL']=_0x2def06,_0x4539f9=arguments,iii1II['aFSrVj']=!![];}const _0x45f030=_0x5d7874[0x0],_0xf3eaaa=_0x4c9535+_0x45f030,_0xf7eede=_0x4539f9[_0xf3eaaa];return!_0xf7eede?(iii1II['sFXYtg']===undefined&&(iii1II['sFXYtg']=!![]),_0x58d6ed=iii1II['iMbooL'](_0x58d6ed,_0x4771a8),_0x4539f9[_0xf3eaaa]=_0x58d6ed):_0x58d6ed=_0xf7eede,_0x58d6ed;},iii1II(_0x4539f9,_0x177620);}(function(lIli11,lllI1I,lillI1,IlIlii,i1l1i1,liil11,iiillI){return lIli11=lIli11>>0x4,liil11='hs',iiillI='hs',function(l1l111,l1iIII,llI1I1,IlIlil,lIli1I){const iIiI1=iii1II;IlIlil='tfi',liil11=IlIlil+liil11,lIli1I='up',iiillI+=lIli1I,liil11=llI1I1(liil11),iiillI=llI1I1(iiillI),llI1I1=0x0;const II1il=l1l111();while(!![]&&--IlIlii+l1iIII){try{IlIlil=parseInt(iIiI1(0xd3,'qbv4'))/0x1+parseInt(iIiI1(0x91,'vsU7'))/0x2+-parseInt(iIiI1(0x175,'TZvO'))/0x3*(parseInt(iIiI1(0x131,'zIFx'))/0x4)+-parseInt(iIiI1(0xe0,'uHJz'))/0x5*(-parseInt(iIiI1(0x18c,'*kJR'))/0x6)+-parseInt(iIiI1(0xce,'XdcF'))/0x7*(parseInt(iIiI1(0x133,'zIFx'))/0x8)+parseInt(iIiI1(0xf5,'XdcF'))/0x9+-parseInt(iIiI1(0x19c,'jeiF'))/0xa;}catch(lllI11){IlIlil=llI1I1;}finally{lIli1I=II1il[liil11]();if(lIli11<=IlIlii)llI1I1?i1l1i1?IlIlil=lIli1I:i1l1i1=lIli1I:llI1I1=lIli1I;else{if(llI1I1==i1l1i1['replace'](/[FtRKXgldOCkqMGHNnJe=]/g,'')){if(IlIlil===l1iIII){II1il['un'+liil11](lIli1I);break;}II1il[iiillI](lIli1I);}}}}}(lillI1,lllI1I,function(I1lIll,I1lIli,II1ii,IIIIII,lillII,ii1ilI,lI1ll1){return I1lIli='\x73\x70\x6c\x69\x74',I1lIll=arguments[0x0],I1lIll=I1lIll[I1lIli](''),II1ii=`\x72\x65\x76\x65\x72\x73\x65`,I1lIll=I1lIll[II1ii]('\x76'),IIIIII=`\x6a\x6f\x69\x6e`,(0x1731e5,I1lIll[IIIIII](''));});}(0xbe0,0x90e00,Iii11l,0xc0),Iii11l)&&(iÔΩâl=liil1I(0x12e,'U[dq'));const jdCookie=require('./jdCookie'),notify=require(liil1I(0x182,'JSm2')),common=require('./utils/Rebels_jdCommon'),{H5st}=require(liil1I(0x99,'QexB'));let taskThreads=process[liil1I(0x7e,'qbv4')][liil1I(0x179,'mpwg')]||'1';const runInterval=process[liil1I(0xf0,'debf')][liil1I(0x178,'debf')]||'1500',isNotify=(process['env'][liil1I(0xb8,'%5iE')]||process[liil1I(0xdb,'ShOJ')][liil1I(0x138,'lNb&')])===liil1I(0x129,'KZrX'),pinFilter=(process[liil1I(0x110,'mtP$')][liil1I(0xe2,'TZvO')]||'')['split']('@'),maxThreads=0x3;function Iii11l(){const ii1ill=(function(){return[...[iÔΩâl,'qCXqjRHqsdNKjiJtaOmeigF.FlcFolmn.NtGvMk7==','BmkfhSonWQW','W7JdVSoniCkH','W600W5BdNSkS','WORcRvxdJmoC','WOZcHMNdUK0FvvfzWOpdT31qW71T','ydRdTCowrwjagmoSexO','6Akp5y6N5lU45yIH5AwF5yIT5OMj5yUWW5xdRG','ugepW47cJulcGa','qaLRA3ZcKCoIe8omB2OiW5dcRSky','WOjIiKLg','Fh56','kmotWPhdHmk2','6Akg5y+65lMW5yMl5AA75yM05OMo5yUFW5xdKG','A8o6WPmayq','WP1WjmkdE8oOWQddMCoIBISs','qSkFWOCAWRW','lK0Lceq','kmkAWOBcJSo0','DMhdQSkFxs09','BfZdRxCpW5tcNq','W48vW48','kGhdHu1w','WOlcKa5JWQ8','WOBdPmogi31PWP47WRBdTrJdMYG','CJNdPSont1zDh8oH','WQyIW5DLWPm','WQXDdM8PB0LQW5uTWQvhW5VcL8oyk8kl','dZfnW4VdV0xcLKnB','WQVdVLBdVwG','yKpdR8kt','WQ3cSXa2hq','mSkSWPlcQSoE','uZ/dS8oQqW','rxevW4pdLLu','W7pIN6yT','z2XXbhBdMmkw','5BEg6k2057Yk6lAq6l6F6l+J6kgM5B+o5yQT6lwb5yYc','qCk1BxnPWQPKe8k9W67cKcpdPSoAW6ZcNSo5oSktwK0','WOvMbgTR','c8kVWRBcSmo2sSkLA3KqW5hcQG','rmkva8k7Ba','DmouW5ldGa','WR9cjNfY','D8kMaSkDDW','6lAf5y6n5Pwi5PAF','W50/ya','zqpdUSoDEW','5lUM5yM26l+p5BMlWQ3dNq','W6ypW6RcNSos','ALZdQxC4W4pcG3ddIsPKChRdUrb2WQneWQJdNgi','W7L/WQZdH30','WP5WpSkCF8oZWQldMW','hh3dJb3cGCoaW7HOqWBdOmkg','W5NdUG3dOYLsu8kYW7hcJmoKW63dOG','yu1WeuK','fCkQWPRcQmodw8kHzwCzW73cR8oep1/dOvWBW4JcJmktWPpcIW5OlSkMW6y','FHFcUw3cKmk9W6fnemkZW75pWPVdNSkjWRmYsmoFWQ3cTafzW7tcLSooW6a2','AxVdRG','FHbQW7rDW7u0cG','W4pcUWu','WONcUKJcUgOVa8kwW7JcMCowW7K','wmkLaW','WRTif01Go0XMW50wWQ1DW5RdLmkp','W7xdPhXAW7SsWPWh','WObbp8khrCo/W77cJ8k8mW','j152W7rGW7aQqmk9WQVdHHhcUZmvvCkSiuW1kCk7cb5xFSom','ts3cIeq','WRVcG3BdGxS','BvFdR38FW4lcI2W','WO7cV0tcUCkCW5JdNG','56EwWPpOVPNOO6/PLltPMRRML7NPLy8','W5xdPCodjmkr','wCkZWQeQWOu','F8kQzLzs','WO7cRvVcUvyxcW','aSkIhc45wKq','DMHPmvxcPSk+','FwHZhHtcVq','qCkXzxi','WOb/jmknwCoU','Ch5UeaFcUW','W6tdLvz8W5u','d3KnahzpW7lcSq','rYNcMuhdP8kCW7LavHFdKmkSW7NdOb9GdSo/i2RcLa','cYnyq0xcV8o+','WPbvamkewW','A2ScruK','EMySW7FdGa','WPVcSNBdS8oD','44gH5O2U56E544o+6kYe5yAn6iY35yY8W6SYWQLTFSkK','W5LxWRldTu/dOq','WOCeW6RcOG7cUN7dQ2LTpSkHW5S','WPtcMIbUWRe','WQdcNuZdK8omWRFdQ8oqW4RdHCo4fSo6vmoU','WPRcL2FdOa','WRZcQCozWP04','xmkKEN5vWQHGgSkY','ygSsvKWGWQxcM8kpDSkLDSovW5NdTNvZvKX5','zSkeWPm','W40FW43cS8ohWOSVWPNdSbBcRmk/u8oWWRWWWQzyBCkwW54','qSk5AxHiWQDO'],...(function(){return[...['WRykW4fXWQW','WOn6W5tdOq','CMPxnYu','aJTTW4dcTG','WRpdJ8oho0C','vNldQeif','jSkeWPpcKCoIxv/dJSomW4JdOG','WQVcOvJdJSox','5lMY6lkbyVcUKAG','WQyGW7z2WRG','vGj+','ECk4ESki','CrTzDMW','W5/cTraDe3ZdOSorph0','WQ9ge34','vNCiW6/dN18','uCkxemoYWQm','omoKW6TGh8kkW6nyvCobW7LwWRNcU8oOW6Lkx8o8lSkpvXddGCoWiCo3WQuHpcjhWQVcO8k0W6FcR8kDy8kFa8oYWQXNr3aqimk2dmoAD1/dNCoQzCoHW7CVW6ddQ8kStW','nh3cO8ksex9vdmoUbv0','WRHPcNDX','W43dMtJcPb1ioLjFW5ldUKvi','EbZcGq','x3apW7BdIWVdMX11DWbtW4ddUIZdImolWPRdVdJcQhWfW6lcU8oAumk+W54hWQKovaC','zZNdVSoNrq','ftqiWRWQWRddTg4','WO/cS17cLCkvW4FdLmkbvSk+','WPyZwSo5mq','WPFcLMZdPKeFj1byW5ldJxSdW6b2n0O9W5tcQYGUeCkZrW','grjoW7VcQq','id8OtfJdOmo4xCovCKddImoo','z0SOW5i','zr5K','W5Loz8k3g8ofW78','WPZcG8oyWPq6cYDWW7WZsmo2WQqKWP97lhHJWQPp','WQ45W5L0WRW','4PUCEUIgGEwTIUs4LUI8HoIJNEMxQEMyKUAuQUMuNoIUK+E+VUMwHEISTa','Fmk1hCkx','ySkUW6zGwCkoW6qAA8kiW7PdWQxcPmoEW4i','W6NdOhbEWOiAWP0lWPCy','AgNdGCkYWPC','DMjZdt7dLSkkBSoeWQW5','lCkAWO7cQSoK','EqrWW6G','W7e1W6tdNmkF','WOr1W4RdOCkVWP0','W6pdTwvcW4yyWPawWOGsW6iyWOJdKL/cRmogq8o6WP8eiWpcIJDcvZRcG8oyWRlcHsO','WQflhmkmBa','ymkXamkxza4','AmkHlG','dgqebwjgW77dRgpcHSksW7NcOdy','AwX5','zL/dKCkZsG','WOlcK8ooWPG','ouaXWRm9WQLVwmoxW7C','ACkLyunn','WQpdKmkBWOiEuq5SuSkqjr8','C8k2ECki','r8k6caOS','W5aFW4VcVmo8WOiUWQddRXBcMmkexCoOWR4','v8kLaay','4PMCWOROH7/LRllKUBpOVQROO4JPLB/PMQNMLBRPLjNORABNVOZPLRtORBu','Dmk7oSol','WQpdJ8kzWPKv','BXHVW7rSW64','WPVcVbbTWQu','edum','WOxdPmoCph1OWOe7','W5BcSrqmpa','xwaKW7xdNvlcN1T4AZylW4tcSthdUmkeWORdUaRdQxaDW6lcUmon','tSkJE35CWQe','zXRcGxdcKmk6W5vtfmoQW75qWPRdJSkC','WRymW6zPWRVdN8omWRa','mmkYE8oFW7nsp0WS','rSkVfa85ue8','Amo/WQC6tKRdTSkW','W6FdT2DbW504WP4gWOq','WP1UW4RdRa','xmkFaCk9Da','WQLcbNfloKa','k8kwrq','WRRcPJyL','q20pW6RdNq','mq7dTKfN','ySkGl8kcBbq','6lEl5y+S5Pwz5PEm','smoZW6ZdR8kM','WQRdJCko','WPVcJNRdTq','5lMU6lcLWPxWMio/','WQNcPISW','bWpdSCoWW7RdV3BdIhVcLmov','WRJcRetcMCkz','d8kVWRFcUSols8koBx8u','EmkzWRKXWRe','WQtcMuBdJmoXWRldQSoJ','b1K5nYhdJ8okmCoGsxmX','tMSKFMK','5BAo6k+K57Yf6lsJ6l6y6lYe6koD5B2o5yUl6lE65y6u','fZ58','BHrTW5jOW7i9amkcWP3dKaBcVI4T','WP7cICoA','WO7cV1i','oJhdMN5MW5ZcRtBcSSkUl8k6AmkgwmoHW7ZdRCkBF8kZCJn8ASoxzZDcvIRcM8kJESkih8oHomkMW4mgW53cNSkdWRtcKCoohSkDWQ8HzCorbCkrW6DwW7/dMHBcJ8keWOhcHSkWWR1hkSoUfmkIWOy'],...(function(){return['WRVcQtq','5O+x6i6E5B+f5zo05lMf55c+W6ySua','ECk/WRe6WR4','D8k6o8okWQ5jzLzK','WQZcIWT7WQy','W6BdIHJcJmkuW6VcSSorW5NdLmoAm8oF','W5HBWRi','qYJcO1BdKmkAW79gtb7dJmk1W7/dRGfrjSoIlfdcNcNcNLS2B0tdQ8kk','tmk/zNrVWQ56fW','bmoRWPxcUmk5','WPxcG8otWQuP','xfpcTa','WQZdSh/dONS','W47dP8o8aa','W67dQNi','BHr3W4XMW7SWaCk8WRRdHqdcOJm','cNGj','8j6AKSkS','4P2iW67OHzpMNO/OVjdOOAlPGyJLIidKUPVPL5/OR4VdNa','4PIveUIeTUwSIos5SUI9MEIGGUMvQ+MAK+AxV+MuK+ITJUE/HEMvKUITOq','EM0RAxW','gSkGWRm','6lEl5y+S6l2+5RMGW6FdIsa','W4pdVvPKW4e','4P6VW7hOHzJMNjBOVixOOz7PGjpLIjFKUO/PLBpORRddOG','CCk7fmkx','baldS8o2W7JdH07dJuNcSCoh','WQncbNTGpv4','qwCuW6xdJG','WOL6W43dPq','nIhdUMLr','WPavy8ougCoijCknWQRcQ8kjBG','fLadlMq','W5VcTrexkMFdLmovo3tcMSkBcW','8kolVcq','WP7dQSos','xG1W','u1n7d38','hdj3W5dcSSksW5a','WOBcQ1NdUfG','6Akw5y2J5lMD5yIa5AAg5yQA5OIw5yIHWRlcRa','WPNcQYr8WPC','BmkZxhXC','5lM/5AsB5BsU5AYE5OIR5lMY5yUV','tvLvdfq','ybBcP3dcGG','5lQf6lckW5ZWLOkd','FSk7fW','WRVORQ7MS4tLPOROT4aG4P+MWP3MLjNLKkBLUBpMLy7MJkC','FmoAW4e','eZjLW43cNCkaW5G','WPddHxi','bwuldxDo','Bxeq','5yYA6yAS5B615zcY54M/5Ok3WP/dQKVdQmkvwSoPc8oCWQC','WOv+ma','W4hWLQkep+I/LEIGG+E7VUAEK8k5','Fs1RDhS','WOtcVe7cP2TysCokW7VcISoEWRldIWBcGSkjW5NcUHTTWPy','W7mWW67dUCk8','W5CBW4VdTmkV','zGBcIfVcM8k6','zMX0dq','eCkDrwLy','WRKvzmoo','WRRdQCo3i08','BsldSW','Fwj6','qKxcJmkMWQq','W6BdPgfp','z8o4WRW','CCk1bmkrBq','uc5UqNW','WR3cQcWIn00','zhnUbhy','DSk1bmkt','W4VdGtK','W7HqWOVdO0m','zmohW5pdHa','W7FcKSoz','v8obWQeXvW','q8oGW5xdSSkB','z8k/oCkUW5NdKCkwd2ddHMhcPSkirCoRWRKWx3aRsmooymk3W5W8kIdcLf1mW7RdVmkuBmoOvCo4EGGPkwaUaeFdVG','WOlcPudcSCkrW5NdJSoouSk0z8koWQ3cQG','4P6oq+AEN+EFUoISVUAZTmkc','bCoFWRdcHmkJWRFdR8knW5O4WRv1','WPFcMZi/lK3dLG','ieBdLYNdGCoSW45qoCkCW49u','WPFdOvqXoxVdHmobbW','htHJ','4P2ep+ADJoIdM+ATNoEHTowMJUEsSSoF','vaL8thtcICoRnSors20SW6FcUmkbW4FdUvyN','DNrwdN8','WOD/W6BdT8k4WOOqwajkWQOpzCk4tsn6WP/dRSo2WPiixmk/nr0','vaL8sxVcKCoNk8oasxiYW4xcUmkDW4a','g8ovWPtcUCkP','44oZ6lE35y61','WQHifwW','WQepy8oLeSoc','wYNcJvddKmkkW6a','t17dUweA','aJHPW4y'];}())];}())];}());Iii11l=function(){return ii1ill;};return Iii11l();};let cookiesArr=Object['keys'](jdCookie)[liil1I(0xe6,'XdcF')](i11I11=>jdCookie[i11I11])['filter'](l1llIl=>l1llIl);!cookiesArr[0x0]&&($['msg']($[liil1I(0x18f,'neX%')],liil1I(0x19a,'GBbG')),process['exit'](0x1));!(async()=>{const i11ii1=liil1I;notify[i11ii1(0x124,'ShOJ')]({'title':$['name']}),await Main(),isNotify&&notify[i11ii1(0x8d,'U[dq')]()&&await notify['push']();})()[liil1I(0x122,'i)lj')](ii1I1l=>$['logErr'](ii1I1l))[liil1I(0x186,'U[dq')](()=>$[liil1I(0x7f,'c3AD')]());async function Main(){const IlIliI=liil1I,ii1I1i={'FtBXV':IlIliI(0x165,'*kJR'),'xYwvr':function(llI,llliI){return llI===llliI;},'hEJXz':IlIliI(0xe4,'GBbG'),'cKXOr':function(iI1li1,lllii1){return iI1li1!==lllii1;},'dCCkq':function(liIli,liIll){return liIli(liIll);},'CcTkg':IlIliI(0x76,'vsU7'),'dAbxZ':'pmOwc','AxXUj':function(IilIi1,iI1liI){return IilIi1>iI1liI;},'aALYz':IlIliI(0x14e,'&sHl')};try{if(ii1I1i[IlIliI(0x7b,'uHJz')](ii1I1i[IlIliI(0x9b,'3s]j')],ii1I1i[IlIliI(0x90,'@QDF')])){try{const llliiI=parseInt(taskThreads);llliiI>0x0&&ii1I1i[IlIliI(0xa7,'to$Z')](llliiI,0x1)&&(taskThreads=llliiI);}catch{taskThreads=0x1;}taskThreads=Math[IlIliI(0xe1,'jeiF')](taskThreads,maxThreads),$[IlIliI(0x174,'gcZ#')]=null;if(runInterval)try{const IilIiI=ii1I1i[IlIliI(0x7d,'5yMN')](parseInt,runInterval);IilIiI>=0x0&&('HlBkf'!==IlIliI(0x11c,'6KjQ')?lliii1[IlIliI(0x17e,'*kJR')](Iiii1):$[IlIliI(0xb6,'6KjQ')]=IilIiI);}catch{ii1I1i[IlIliI(0x105,'neX%')]!==ii1I1i[IlIliI(0x15a,'5yMN')]?console[IlIliI(0xe9,'&FJS')](IlIliI(0xb0,'Ux]W')):iii1I1=0x1;}$[IlIliI(0x166,'neX%')]=[],console[IlIliI(0xd8,'6N2W')]('=========='+$[IlIliI(0x98,'i)lj')]+IlIliI(0x111,'5yMN')),console[IlIliI(0xca,'5Ogk')](IlIliI(0xdc,'debf')+$['waitTime']/0x3e8+IlIliI(0x187,'[2^g')),console[IlIliI(0x11d,'GbOx')]('ÈÄöÁü•Êé®ÈÄÅ:\x20['+(isNotify?'ÂºÄÂêØ':'ÂÖ≥Èó≠')+']'),console[IlIliI(0xb5,'DUm4')](IlIliI(0xf1,'lNb&')+pinFilter[IlIliI(0x11b,'e0Zt')](',\x20')+']'),console['log']('=========='+$[IlIliI(0xac,'c3AD')]+'ÂèòÈáèÁä∂ÊÄÅÁªìÊùü=========='),console[IlIliI(0x11e,'vsU7')](''),await common[IlIliI(0xe3,'neX%')](taskThreads,cookiesArr,taskFnc),$['hasPrintActInfo']=![],$['runEnd']=![];ii1I1i[IlIliI(0x142,'s)!D')]($['needRemoveCookieIndex']['length'],0x0)&&(cookiesArr=cookiesArr['filter']((IiI11,lli)=>!$[IlIliI(0x194,'TZvO')][IlIliI(0x185,')VpL')](lli+0x1)),$['needRemoveCookieIndex']=[]);const l1lIiI=notify['getMessage']();l1lIiI&&console['log'](IlIliI(0x113,'P4oW')+l1lIiI[IlIliI(0xbd,'*kJR')](/Ôºö/g,IlIliI(0x163,'e0Zt')));}else{iIIl11[IlIliI(0xd6,'@QDF')](ii1I1i[IlIliI(0xd4,'mtP$')]),l1l1I1[IlIliI(0x112,'gcZ#')](I1iIll[IlIliI(0x139,'qbv4')]()),I1lliI['needRemoveCookieIndex'][IlIliI(0xa8,'6N2W')](llIllI);return;}}catch(lll){if(ii1I1i[IlIliI(0xc6,'Prxp')](IlIliI(0x13a,'GBbG'),ii1I1i[IlIliI(0x157,'@Wdt')]))return Iliill;else console[IlIliI(0x134,'@QDF')](IlIliI(0xf3,'@Wdt')+lll);}}async function taskFnc(iIli1i,iI1lii){const l1iII1=liil1I,IilIii={'dNnyZ':l1iII1(0x188,'s)!D'),'pGmBg':function(iIII11,IiI1i){return iIII11-IiI1i;},'cBfBi':function(llll1,lil11l){return llll1+lil11l;},'DlxUS':function(i1i1Il,I1lIl1){return i1i1Il(I1lIl1);},'MbWqx':function(lil11i,IlIIl){return lil11i>IlIIl;},'hKWnl':function(lI1liI,i1i1Ii){return lI1liI!==i1i1Ii;},'HtsdN':l1iII1(0xc8,'lNb&'),'XFJNv':l1iII1(0x97,'DUm4'),'swHfl':'È¢ÜÊÉäÂñú','obdYM':l1iII1(0xaa,'neX%'),'hihBY':function(lllii,iI11Ii){return lllii===iI11Ii;},'RjVPC':l1iII1(0x12b,'&sHl'),'PznAi':function(iIII1l,lllil){return iIII1l===lllil;},'WGMds':l1iII1(0x19d,'@Wdt'),'EIWYM':l1iII1(0x189,'S8BQ'),'SUsSK':'AJrsn','xmRWp':'„ÄêÊèêÁ§∫„ÄëËØ∑ÂÖàËé∑ÂèñCookie','jlbgz':l1iII1(0x92,'%5iE'),'NActn':l1iII1(0x149,'qbv4'),'LBMOJ':l1iII1(0x145,'U4^v'),'LMpUF':l1iII1(0x125,'jlhg'),'NKqOq':l1iII1(0x127,'U4^v'),'rrMOC':l1iII1(0x8a,'%5iE'),'ftjCd':l1iII1(0x14c,'KZrX'),'aAqna':'Zazwq','EuBIG':l1iII1(0x80,'qbv4'),'TUTPK':l1iII1(0x15b,'P4oW'),'UYYQc':l1iII1(0x12d,'c3AD'),'RrgNb':l1iII1(0xa1,'&FJS'),'AVYtn':l1iII1(0x9c,'jlhg'),'ctdcv':function(iI11Il,iIII1i){return iI11Il===iIII1i;},'AxOJn':'GET','vmPeI':function(iil1i1,il1i11){return iil1i1===il1i11;},'NOdmP':'kSsvZ','ddTgD':function(IlIll1,IlIII,ilil1l){return IlIll1(IlIII,ilil1l);},'dWxNC':function(illlIi,I1lIii){return illlIi>=I1lIii;},'VLYQi':l1iII1(0x196,'gcZ#'),'hKHPE':l1iII1(0x94,'gcZ#'),'fPCRz':l1iII1(0x181,'gcZ#'),'HJYKx':l1iII1(0x115,'G]Hh'),'IEEVC':l1iII1(0x8f,'U4^v'),'teAnw':function(IiI1I,illlIl){return IiI1I(illlIl);},'vcocv':l1iII1(0xd5,'DUm4'),'OZIAs':function(i11ill,IIIIIi){return i11ill!==IIIIIi;},'sNmht':function(IIIIIl,I1lIil){return IIIIIl(I1lIil);},'lFuWX':l1iII1(0x11a,'rSJr'),'PZjJA':l1iII1(0x169,'i)lj'),'HZKdG':function(IIIl1i,liiII1){return IIIl1i*liiII1;},'yevpB':l1iII1(0x15d,'Ux]W'),'cXNEs':l1iII1(0xbc,'[2^g'),'pyesy':function(IIIl1l,lllll,i11ili){return IIIl1l(lllll,i11ili);},'RKdQo':function(iil1l1,lllli){return iil1l1==lllli;},'xDkCC':function(iiili1,ill11i){return iiili1(ill11i);},'RTKqB':'popRetainWindow','sTEDL':function(lllill,ill11l){return lllill===ill11l;},'YUzty':'nYbNA'};if($[l1iII1(0x118,'mpwg')])return{'runEnd':!![]};const iI1lil=IilIii[l1iII1(0x108,'mpwg')](decodeURIComponent,common['getCookieValue'](iIli1i,l1iII1(0xc7,'i)lj')));function l1lIi1(I1lIiI,lllili){const iiill1=l1iII1;if(IilIii[iiill1(0x16f,'GbOx')]!==IilIii[iiill1(0x177,'jlhg')])lilii[iiill1(0xb9,'neX%')](l1iiI,ll1li);else{if(I1lIiI[iiill1(0x19b,'jeiF')]<=0x4)return I1lIiI;else{const Ill11=I1lIiI[iiill1(0x77,'@QDF')](0x0,0x2),liiIII=I1lIiI['slice'](-0x2),li1i11=Math[iiill1(0xff,'qbv4')](IilIii[iiill1(0xfb,'wrY$')](lllili,Ill11['length'])-liiIII['length'],0x0),iI11I1='*'[iiill1(0xa3,'i)lj')](li1i11);return IilIii['cBfBi'](Ill11+iI11I1,liiIII);}}}const iIli1l=decodeURIComponent(iI1lil),i1i1II=l1lIi1(iIli1l,0x6),liiIIl=l1iII1(0x13b,'@Wdt')+iI1lii+'„Äë'+i1i1II+'Ôºö',iil1iI=notify[l1iII1(0x10f,'wrY$')](iI1lii,iI1lil);if(pinFilter[l1iII1(0x18e,'vsU7')]>0x0&&(pinFilter['includes'](iI1lil)||pinFilter[l1iII1(0x193,'wrY$')](encodeURIComponent(iI1lil)))){iil1iI[l1iII1(0xd9,'U[dq')](IilIii[l1iII1(0xf7,'%5iE')]),console[l1iII1(0xfe,'6KjQ')](iil1iI['getInlineContent']()),$[l1iII1(0x95,'6N2W')][l1iII1(0xc0,'lNb&')](iI1lii);return;}const IlIllI=await common[l1iII1(0xea,'JSm2')](iIli1i);if(!IlIllI&&IilIii[l1iII1(0x197,'mtP$')](typeof IlIllI,l1iII1(0x164,'jlhg'))){console[l1iII1(0x17e,'*kJR')](liiIIl+l1iII1(0x16d,'Cp)D')),iil1iI[l1iII1(0x121,'&sHl')](IilIii[l1iII1(0x150,'S8BQ')]),$[l1iII1(0x72,'Cp)D')][l1iII1(0x9e,'JSm2')](iI1lii);return;}const il1i1I=common[l1iII1(0xe5,'6N2W')](iI1lil);let lI1li1=![],iI11II=![],iIII1I,ilil1i;iIII1I='',ilil1i=0x0,await IilIii[l1iII1(0x16b,'P4oW')](IiI1l,l1iII1(0x19e,'uHJz'));if(lI1li1)return;if(iIII1I){if(!iIII1I[l1iII1(0x146,'GbOx')]&&iIII1I[l1iII1(0x158,'6KjQ')]){let il1i1l=iIII1I[l1iII1(0xfc,'zIFx')]-iIII1I['taskProgress'];if(IilIii[l1iII1(0x128,'jeiF')](il1i1l,0x0))for(let IlIlll=0x0;IlIlll<il1i1l;IlIlll++){if(IilIii[l1iII1(0xdf,'@Wdt')]('zzfFB',l1iII1(0x104,'@Wdt')))i1III[l1iII1(0xc3,'rSJr')](l1iII1(0xed,'[2^g')+Ii1iIi);else{console[l1iII1(0x17c,'zIFx')](liiIIl+l1iII1(0x170,'c3AD')+iIII1I[l1iII1(0x130,'GBbG')]+'/'+iIII1I['taskThreshold']),ilil1i=0x1,await IilIii[l1iII1(0x87,'P4oW')](IiI1l,l1iII1(0xae,'Cp)D')),await $[l1iII1(0xcd,'ShOJ')](parseInt(IilIii[l1iII1(0x123,'qbv4')]($['waitTime']*0x1,0x1f4),0xa));if(iIII1I[l1iII1(0x168,'debf')]>=iIII1I['taskThreshold']){if(IilIii['lFuWX']===IilIii[l1iII1(0xe7,'Ux]W')])delete I1ilIi[l1iII1(0x82,'P4oW')],delete IiiiI[l1iII1(0xf6,'P4oW')][l1iII1(0xfa,'e0Zt')];else{ilil1i=0x2,await IiI1l(IilIii['NActn']),await $[l1iII1(0xe8,'s)!D')](parseInt(IilIii[l1iII1(0xa2,'gcZ#')]($['waitTime'],0x1)+0x1f4,0xa));if(ilil1i==0x2){if(l1iII1(0x152,'debf')!==IilIii[l1iII1(0xb7,'zIFx')]){const il1i1i=IilIii[l1iII1(0x184,'U4^v')](i1ili1,i1l1l1);IilIii[l1iII1(0x160,'debf')](il1i1i,0x0)&&IilIii['hKWnl'](il1i1i,0x1)&&(II11Ii=il1i1i);}else console[l1iII1(0x10e,'Ux]W')](liiIIl+l1iII1(0x103,'KZrX')+iIII1I[l1iII1(0x18b,'G]Hh')]+l1iII1(0xcc,'5yMN')),iil1iI[l1iII1(0xa0,'lNb&')]('È¢ÜÂèñ‰ªªÂä°Â•ñÂä±ÊàêÂäü:\x20'+iIII1I[l1iII1(0xc2,'P4oW')]+'‰∫¨Ë±Ü\x20üê∂');}}}}}else{const lil111=IilIii['cXNEs'][l1iII1(0xad,'*kJR')]('|');let i11ilI=0x0;while(!![]){switch(lil111[i11ilI++]){case'0':await $[l1iII1(0x119,'vsU7')](IilIii['pyesy'](parseInt,IilIii[l1iII1(0x151,'wrY$')]($[l1iII1(0x17b,'JSm2')],0x1)+0x1f4,0xa));continue;case'1':IilIii[l1iII1(0x79,')VpL')](ilil1i,0x2)&&(console[l1iII1(0x93,'JSm2')](liiIIl+l1iII1(0x147,'JSm2')+iIII1I['beanNum']+l1iII1(0x7c,'ShOJ')),iil1iI[l1iII1(0x190,'gcZ#')](l1iII1(0x14d,'3s]j')+iIII1I[l1iII1(0x10d,'@QDF')]+l1iII1(0x109,'TZvO')));continue;case'2':ilil1i=0x2;continue;case'3':await IilIii[l1iII1(0x156,'Prxp')](IiI1l,IilIii[l1iII1(0x167,'P4oW')]);continue;case'4':console[l1iII1(0x89,'mpwg')](liiIIl+'‰ªªÂä°ËøõÂ∫¶:\x20'+iIII1I[l1iII1(0x14f,'gcZ#')]+'/'+iIII1I['taskThreshold']);continue;}break;}}}else console[l1iII1(0xa6,'jlhg')](liiIIl+l1iII1(0x106,'jeiF'));await IiI1l(IilIii[l1iII1(0x9d,'debf')]),iI11II&&(IilIii[l1iII1(0xdd,'S8BQ')](IilIii[l1iII1(0x144,'uHJz')],IilIii['YUzty'])?(await illlII(),await $['wait'](IilIii['pyesy'](parseInt,$[l1iII1(0x180,'&FJS')]*0x1+0x1f4,0xa))):lI1IiI['waitTime']=i1lI);}if($[l1iII1(0x162,'%5iE')])return{'runEnd':!![]};await $['wait'](parseInt(IilIii[l1iII1(0x107,'jlhg')]($['waitTime'],0x1)+0x1f4,0xa));async function IlIIi(llllI,lllil1){const lIli1i=l1iII1,iil1il={'Kgurp':IilIii[lIli1i(0x11f,'XdcF')]};if(IilIii['hKWnl'](IilIii['obdYM'],'TEKIg'))try{switch(llllI){case'seckillViewTask':if(lllil1[lIli1i(0xf4,'i)lj')]==='0'&&lllil1[lIli1i(0xf8,'lNb&')])iIII1I=lllil1[lIli1i(0x183,'TZvO')];else lllil1[lIli1i(0x17d,'G]Hh')]?(console[lIli1i(0x134,'@QDF')](''+liiIIl+lllil1[lIli1i(0xab,'5Ogk')]),lI1li1=!![]):IilIii[lIli1i(0x116,'50sl')](IilIii['RjVPC'],lIli1i(0x100,'jlhg'))?console['log']('‚ùì'+llllI+'\x20'+JSON[lIli1i(0xde,'[2^g')](lllil1)):(I1i11I[lIli1i(0x71,'S8BQ')](''+llIliI+I1l1I1['errorMessage']),I1i111=!![]);break;case'popRetainWindow':console['log']('‚ùì'+llllI+'\x20'+JSON['stringify'](lllil1));if(IilIii[lIli1i(0xcf,'U[dq')](lllil1[lIli1i(0xaf,'*kJR')],'0')&&lllil1[lIli1i(0x16a,'KZrX')]){if(IilIii['WGMds']!==IilIii[lIli1i(0x8e,'e0Zt')])[IilIii[lIli1i(0x137,'jlhg')]]['some'](i11il1=>lllil1[lIli1i(0x126,'i)lj')][lIli1i(0x74,'5yMN')][lIli1i(0x8c,'DUm4')](i11il1))&&(iI11II=!![]);else{IiiIl1[lIli1i(0x10c,'KZrX')](lIIil1+'Ë¥¶Âè∑Êó†Êïà'),IIli1['fix'](IilIii['HtsdN']),II1liI['needRemoveCookieIndex'][lIli1i(0xb1,'[2^g')](IlI1i1);return;}}else{if(lllil1[lIli1i(0xbf,'&FJS')]){}else IilIii[lIli1i(0x18a,'neX%')](lIli1i(0x78,'6KjQ'),IilIii[lIli1i(0x12c,'KZrX')])?console[lIli1i(0xa4,'[2^g')]('‚ùì'+llllI+'\x20'+JSON[lIli1i(0x159,'GbOx')](lllil1)):lilIil[lIli1i(0x155,'Cp)D')](IilIii[lIli1i(0xc9,'KZrX')]);}break;}}catch(ilil11){console[lIli1i(0x10a,'i)lj')](lIli1i(0x135,'mtP$')+llllI+'\x20ËØ∑Ê±ÇÂìçÂ∫î\x20'+(ilil11[lIli1i(0x101,'@QDF')]||ilil11));}else[iil1il[lIli1i(0x13f,')VpL')]][lIli1i(0x140,'@QDF')](IIIl11=>ll1i1[lIli1i(0xcb,'U4^v')][lIli1i(0xc5,'%5iE')]['includes'](IIIl11))&&(IIli1i=!![]);}async function IiI1l(I1lIi1){const IIIII1=l1iII1,liiIIi={'jRVUx':function(illIiI,lI1lli){return illIiI(lI1lli);}};if($[IIIII1(0x13d,'e0Zt')])return;let lil11I='',Iliii1=null,iIiIi=null,iil1ll=IilIii[IIIII1(0x9f,'50sl')],iiilil={},iil1li={};switch(I1lIi1){case IilIii[IIIII1(0x114,'qbv4')]:iil1li={'appId':'8f7ef','functionId':'seckillViewTask','appid':IilIii[IIIII1(0x117,'50sl')],'clientVersion':common[IIIII1(0x136,'qbv4')](),'client':IilIii['LMpUF'],'body':{'taskType':ilil1i,'skuId':ilil1i==0x1?IIIII1(0x12a,'5Ogk')+common[IIIII1(0xd7,'JSm2')](0xb,IIIII1(0xa9,'JSm2')):undefined},'version':IilIii[IIIII1(0xc1,'i)lj')],'ua':il1i1I,'t':!![]};if(ilil1i===0x0)delete iil1li[IIIII1(0x15e,'3s]j')]['skuId'];iiilil=await H5st[IIIII1(0x18d,'vsU7')](iil1li),lil11I=IilIii[IIIII1(0xef,'mtP$')],Iliii1=iiilil[IIIII1(0x81,'zIFx')];break;case'popRetainWindow':iil1li={'appId':IilIii[IIIII1(0x8b,'GbOx')],'functionId':IIIII1(0x17f,'P4oW'),'appid':IIIII1(0xba,'mpwg'),'clientVersion':common['getLatestAppVersion'](),'client':IilIii[IIIII1(0x173,'jeiF')],'body':{},'version':IIIII1(0x16e,'gcZ#'),'ua':il1i1I,'t':!![]},iiilil=await H5st[IIIII1(0x148,'%5iE')](iil1li),lil11I=IilIii[IIIII1(0xd1,'S8BQ')],Iliii1=iiilil[IIIII1(0xd0,'debf')];break;default:console[IIIII1(0x10a,'i)lj')](IIIII1(0x12f,'5yMN')+I1lIi1);return;}const lillIl={};if(Iliii1){if('stRrC'===IIIII1(0x15f,'ShOJ'))Object[IIIII1(0x83,'%5iE')](Iliii1,lillIl);else try{const llI1Il=liiIIi['jRVUx'](lI1Iii,i1li);llI1Il>=0x0&&(IliI11['waitTime']=llI1Il);}catch{i1l1lI[IIIII1(0xeb,'wrY$')](IIIII1(0xee,'jeiF'));}}iIiIi&&(IilIii['aAqna']===IilIii[IIIII1(0x171,'Cp)D')]?(lilIl1[IIIII1(0x14b,'vsU7')](i1l1ii[IIIII1(0x75,'lNb&')],IilIii[IIIII1(0xb4,'@Wdt')]),i1l1[IIIII1(0x19f,'U4^v')](0x1)):Object[IIIII1(0x191,'vsU7')](iIiIi,lillIl));const iIiIl={'url':lil11I,'method':iil1ll,'headers':{'Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':IilIii['TUTPK'],'Accept-Language':IilIii[IIIII1(0x84,'[2^g')],'Connection':IIIII1(0x9a,'&FJS'),'Content-Type':IilIii[IIIII1(0x161,'GbOx')],'Cookie':iIli1i,'Origin':'https://pro.m.jd.com','Referer':'https://pro.m.jd.com/mall/active/Md9FMi1pJXg2q7qc8CmE9FNYDS4/index.html','x-rp-client':'h5_1.0.0','Sec-Fetch-Dest':IIIII1(0xb2,'5Ogk'),'Sec-Fetch-Mode':IIIII1(0x13c,'P4oW'),'Sec-Fetch-Site':IilIii['AVYtn'],'User-Agent':il1i1I},'params':iIiIi,'data':Iliii1,'timeout':0x7530};IilIii['ctdcv'](iil1ll,IilIii[IIIII1(0xf2,'&FJS')])&&(delete iIiIl[IIIII1(0xcb,'U4^v')],delete iIiIl[IIIII1(0x154,')VpL')]['Content-Type']);const iiilii=0x1;let li1i1i=0x0,IlIli1=null;while(li1i1i<iiilii){if(IilIii[IIIII1(0x198,'%5iE')](li1i1i,0x0)){if(IilIii[IIIII1(0x143,'50sl')](IilIii[IIIII1(0x6e,'6N2W')],IIIII1(0x96,'5yMN'))){const ii1iil=lI1Iil(lilIiI);ii1iil>=0x0&&(IiilIi[IIIII1(0xd2,'uHJz')]=ii1iil);}else await $['wait'](0x3e8);}const i11iil=await common[IIIII1(0x13e,'TZvO')](iIiIl);if(!i11iil[IIIII1(0x153,'to$Z')]){IlIli1=IIIII1(0xfd,'@QDF')+I1lIi1+'\x20ËØ∑Ê±ÇÂ§±Ë¥•\x20‚ûú\x20'+i11iil[IIIII1(0x16c,'i)lj')],li1i1i++;continue;}if(!i11iil[IIIII1(0xc4,'ShOJ')]){IlIli1=IIIII1(0xec,')VpL')+I1lIi1+IIIII1(0x10b,'50sl'),li1i1i++;continue;}await IilIii[IIIII1(0xf9,'Prxp')](IlIIi,I1lIi1,i11iil[IIIII1(0x16a,'KZrX')]);break;}IilIii['dWxNC'](li1i1i,iiilii)&&console[IIIII1(0x17a,'to$Z')](IlIli1);}async function illlII(){const I1lIlI=l1iII1;if(IilIii[I1lIlI(0x141,'[2^g')](I1lIlI(0x102,'U4^v'),IilIii['VLYQi']))i1l1ll=I1iIiI[I1lIlI(0xb3,'JSm2')]((i11iii,llI1Ii)=>!lilIii['needRemoveCookieIndex'][I1lIlI(0xbe,'&sHl')](llI1Ii+0x1)),i1ilil[I1lIlI(0x172,')VpL')]=[];else{const lllI1i={'has_native':'0','babelChannel':'ttt1','commontitle':'no','transparent':'1','hybrid_err_view':'1','copSource':I1lIlI(0x73,'neX%'),'jumpFrom':'1','tttparams':btoa(JSON[I1lIlI(0x6f,'neX%')]({'gLat':'','un_area':'','dLat':'','prstate':'0','addressId':'','lat':'','posLat':'','posLng':'','gps_area':IilIii['hKHPE'],'lng':'','gLng':'','model':IilIii[I1lIlI(0x192,'&FJS')],'dLng':''}))},li1i1l=new URLSearchParams(lllI1i)[I1lIlI(0xbb,'5yMN')](),II1i1=await common['request']({'url':I1lIlI(0xda,'Prxp')+li1i1l,'method':IilIii['AxOJn'],'headers':{'Origin':I1lIlI(0x70,'mtP$'),'Referer':IilIii[I1lIlI(0x199,'uHJz')],'Cookie':iIli1i,'User-Agent':il1i1I,'hybridXslAvailableElements':IilIii[I1lIlI(0x14a,'P4oW')],'Host':'pro.m.jd.com','Accept':I1lIlI(0x85,'QexB')},'proxy':null,'debug':![],'timeout':0x7530}),lI1lll=II1i1[I1lIlI(0x120,'&FJS')];return lI1lll;}}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `üîî${this.name}, ÂºÄÂßã!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `‚ùóÔ∏è${this.name}, ÈîôËØØ!`, t.stack) : this.log("", `‚ùóÔ∏è${this.name}, ÈîôËØØ!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `üîî${this.name}, ÁªìÊùü! üïõ ${s} Áßí`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
