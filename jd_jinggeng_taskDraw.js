/*
活动名称：幸运抽奖 · 京耕
活动链接：https://jinggeng-isv.isvjcloud.com/ql/front/showTaskDraw?id=<活动id>&user_id=<店铺id>
环境变量：jd_jinggeng_taskDraw_url // 活动链接
         jd_jinggeng_taskDraw_opencard // 是否入会（true/false），默认不入会
         jd_jinggeng_taskDraw_Notify // 是否通知（true/false），默认不通知


cron:1 1 1 1 *
============Quantumultx===============
[task_local]
#幸运抽奖 · 京耕
1 1 1 1 * jd_jinggeng_taskDraw.js, tag=幸运抽奖 · 京耕, enabled=true

*/

const $ = new Env('幸运抽奖（京耕）')
var iｉl='jsjiami.com.v7';const il1li=iii1II;(function(ililI1,IIii1i,i1ili,Iiill1,I1iII1,lilII1,iill1){return ililI1=ililI1>>0x2,lilII1='hs',iill1='hs',function(iii1l1,IIliIl,II11ll,liiI1I,ililII){const lill1i=iii1II;liiI1I='tfi',lilII1=liiI1I+lilII1,ililII='up',iill1+=ililII,lilII1=II11ll(lilII1),iill1=II11ll(iill1),II11ll=0x0;const lI1II1=iii1l1();while(!![]&&--Iiill1+IIliIl){try{liiI1I=parseInt(lill1i(0x362,'58Lu'))/0x1*(parseInt(lill1i(0x20e,'aAX1'))/0x2)+-parseInt(lill1i(0x30a,'u6VW'))/0x3*(-parseInt(lill1i(0x29b,'FcO1'))/0x4)+parseInt(lill1i(0x360,'aAX1'))/0x5*(-parseInt(lill1i(0x2b6,'6Et$'))/0x6)+parseInt(lill1i(0x3c9,'eyV&'))/0x7*(-parseInt(lill1i(0x26c,'[pD8'))/0x8)+-parseInt(lill1i(0x379,'ArUi'))/0x9*(-parseInt(lill1i(0x1e6,'FcO1'))/0xa)+-parseInt(lill1i(0x2aa,'3PIb'))/0xb*(parseInt(lill1i(0x256,'tbbJ'))/0xc)+parseInt(lill1i(0x23e,'[pD8'))/0xd*(parseInt(lill1i(0x316,'OUWF'))/0xe);}catch(i1ilII){liiI1I=II11ll;}finally{ililII=lI1II1[lilII1]();if(ililI1<=Iiill1)II11ll?I1iII1?liiI1I=ililII:I1iII1=ililII:II11ll=ililII;else{if(II11ll==I1iII1['replace'](/[kfICHVYhlFBXDKbLQpgN=]/g,'')){if(liiI1I===IIliIl){lI1II1['un'+lilII1](ililII);break;}lI1II1[iill1](ililII);}}}}}(i1ili,IIii1i,function(iIIii1,IllIi1,lilIII,Ii1ilI,II11i1,iliIil,iliIii){return IllIi1='\x73\x70\x6c\x69\x74',iIIii1=arguments[0x0],iIIii1=iIIii1[IllIi1](''),lilIII=`\x72\x65\x76\x65\x72\x73\x65`,iIIii1=iIIii1[lilIII]('\x76'),Ii1ilI=`\x6a\x6f\x69\x6e`,(0x16f5f8,iIIii1[Ii1ilI](''));});}(0x2f8,0x48f89,Iii11l,0xc0),Iii11l)&&(iｉl=0x1120);const jdCookie=require(il1li(0x30b,'M%NB')),common=require(il1li(0x3b2,'mP@G')),notify=require('./utils/Rebels_sendJDNotify'),getToken=require('./utils/Rebels_Token'),{jinggeng_savePrize}=require(il1li(0x30e,'XbV*'));console['log'](''),console[il1li(0x2c8,'mP@G')](il1li(0x31c,'[pD8')+$[il1li(0x355,'E7id')]+il1li(0x302,'6Et$')),console[il1li(0x2d9,'uE)P')](il1li(0x27d,'fZfu')),console[il1li(0x2c8,'mP@G')](il1li(0x2df,'6Et$')),console[il1li(0x212,'WMqf')](il1li(0x262,'3b(A')),console[il1li(0x2fd,'E7id')](il1li(0x381,'58Lu')),console['log']('=========='+$['name']+il1li(0x29e,'U*x#')),console[il1li(0x21b,'eyV&')]('');const activityUrl=process[il1li(0x368,'fwWw')][il1li(0x332,'ag])')]||'',joinMember=process[il1li(0x397,'^BsB')][il1li(0x398,'vZdk')]===il1li(0x26f,'aAX1'),isNotify=process['env'][il1li(0x3dc,'^BsB')]==='true',max_draw=process[il1li(0x350,'uE)P')]['jd_jinggeng_taskDraw_draw']||'5';let sid=common[il1li(0x3cf,'ArUi')](0x20,il1li(0x21a,'aAX1')),un_area=common[il1li(0x21e,'@nXw')](0x1,'1234567890')+'-'+common[il1li(0x329,'!S5z')](0x4,'1234567890')+'-'+common[il1li(0x280,'$P&L')](0x4,'1234567890')+'-'+common[il1li(0x33d,'58Lu')](0x5,'1234567890');const prize_type={'JD_BEAN':'[京豆]','JD_POINT':il1li(0x229,'E7id'),'JD_GOODS':'[实物]','JD_COUPON':il1li(0x219,'u6VW'),'JD_J_COUPON':'[优惠券]','JD_D_COUPON':il1li(0x34e,'tr[*'),'JD_AIQIYI':'[爱奇艺]','JD_PLUS':il1li(0x2a1,'uE)P'),'JD_E_CARD':il1li(0x3f1,'cw)c'),'JD_REDBAG':il1li(0x2e8,'TeId'),'-1':'[谢谢参与]'};function iii1II(_0x5d2af7,_0x49bb92){const _0x231161=Iii11l();return iii1II=function(_0x563abe,_0x110ff2){_0x563abe=_0x563abe-0x1e3;let _0x3b8413=_0x231161[_0x563abe];if(iii1II['awMuwO']===undefined){var _0xcdd3b3=function(_0x37a4c4){const _0x5741ad='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1e8426='',_0xa88b74='';for(let _0x240e29=0x0,_0x2c3e51,_0x1d7f36,_0x4bfe34=0x0;_0x1d7f36=_0x37a4c4['charAt'](_0x4bfe34++);~_0x1d7f36&&(_0x2c3e51=_0x240e29%0x4?_0x2c3e51*0x40+_0x1d7f36:_0x1d7f36,_0x240e29++%0x4)?_0x1e8426+=String['fromCharCode'](0xff&_0x2c3e51>>(-0x2*_0x240e29&0x6)):0x0){_0x1d7f36=_0x5741ad['indexOf'](_0x1d7f36);}for(let _0x3ceb28=0x0,_0x248acb=_0x1e8426['length'];_0x3ceb28<_0x248acb;_0x3ceb28++){_0xa88b74+='%'+('00'+_0x1e8426['charCodeAt'](_0x3ceb28)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xa88b74);};const _0x567fff=function(_0x463d4a,_0x3dea55){let _0x2940ed=[],_0x65d373=0x0,_0x59b241,_0x5008d2='';_0x463d4a=_0xcdd3b3(_0x463d4a);let _0x1320d3;for(_0x1320d3=0x0;_0x1320d3<0x100;_0x1320d3++){_0x2940ed[_0x1320d3]=_0x1320d3;}for(_0x1320d3=0x0;_0x1320d3<0x100;_0x1320d3++){_0x65d373=(_0x65d373+_0x2940ed[_0x1320d3]+_0x3dea55['charCodeAt'](_0x1320d3%_0x3dea55['length']))%0x100,_0x59b241=_0x2940ed[_0x1320d3],_0x2940ed[_0x1320d3]=_0x2940ed[_0x65d373],_0x2940ed[_0x65d373]=_0x59b241;}_0x1320d3=0x0,_0x65d373=0x0;for(let _0x39fe7b=0x0;_0x39fe7b<_0x463d4a['length'];_0x39fe7b++){_0x1320d3=(_0x1320d3+0x1)%0x100,_0x65d373=(_0x65d373+_0x2940ed[_0x1320d3])%0x100,_0x59b241=_0x2940ed[_0x1320d3],_0x2940ed[_0x1320d3]=_0x2940ed[_0x65d373],_0x2940ed[_0x65d373]=_0x59b241,_0x5008d2+=String['fromCharCode'](_0x463d4a['charCodeAt'](_0x39fe7b)^_0x2940ed[(_0x2940ed[_0x1320d3]+_0x2940ed[_0x65d373])%0x100]);}return _0x5008d2;};iii1II['mCKsjH']=_0x567fff,_0x5d2af7=arguments,iii1II['awMuwO']=!![];}const _0x42679a=_0x231161[0x0],_0x448e56=_0x563abe+_0x42679a,_0x409a17=_0x5d2af7[_0x448e56];return!_0x409a17?(iii1II['uQcEOa']===undefined&&(iii1II['uQcEOa']=!![]),_0x3b8413=iii1II['mCKsjH'](_0x3b8413,_0x110ff2),_0x5d2af7[_0x448e56]=_0x3b8413):_0x3b8413=_0x409a17,_0x3b8413;},iii1II(_0x5d2af7,_0x49bb92);}let JSDOM=null,cookie='',activityCookie='',originCookie='';const cookiesArr=Object['keys'](jdCookie)[il1li(0x311,'OUWF')](Iliii1=>jdCookie[Iliii1])[il1li(0x1e5,'dgnA')](iIiIi=>iIiIi);!cookiesArr[0x0]&&($[il1li(0x2ea,'WMqf')]($['name'],'【提示】请先获取Cookie'),process[il1li(0x390,'vZdk')](0x1));!(async()=>{const iIIill=il1li,iil1ll={'ldeZX':iIIill(0x24f,'3b(A'),'GPgJp':iIIill(0x276,'6Et$'),'XrWhJ':iIIill(0x35e,'OUWF'),'FGwJw':iIIill(0x24e,'OUWF'),'ldoUS':'user_id','GeQjR':function(iil1li,lillIl){return iil1li===lillIl;},'BILXh':'LaUHM','ddzyv':iIIill(0x23a,'VDvQ'),'oRikX':function(iIiIl,iiilii){return iIiIl+iiilii;},'HiFeJ':iIIill(0x3db,'PLo2'),'CRCYx':function(li1i1i,IlIli1){return li1i1i!==IlIli1;},'WAezv':iIIill(0x38d,'eyV&'),'VFIsP':'pt_pin','ZiXYn':iIIill(0x3a9,'8)qD'),'MkNDi':function(illIiI,lI1lli){return illIiI+lI1lli;}};if(!activityUrl){console[iIIill(0x3d9,'tbbJ')](iil1ll[iIIill(0x2bb,'Bqx)')]);return;}const iiilil=common['parseUrl'](activityUrl);if(!iiilil){console['log'](iil1ll[iIIill(0x3d0,'vZdk')]);return;}$['activityUrl']=activityUrl,$[iIIill(0x301,'^BsB')]=common['getUrlParameter'](activityUrl,'id'),$[iIIill(0x335,'aAX1')]=common[iIIill(0x38c,'U*x#')](activityUrl,iil1ll[iIIill(0x39c,'!S5z')]),$['hostname']=iiilil['hostname'],$[iIIill(0x3c3,'[pD8')]=iiilil['pathname'],$['baseUrl']='https://'+$[iIIill(0x2dc,'tr[*')];if(!$[iIIill(0x247,'!S5z')]||!$['venderId']||!$[iIIill(0x3e0,'dgnA')]){if(iil1ll[iIIill(0x28d,'Bqx)')](iIIill(0x3c5,'58Lu'),iil1ll['BILXh'])){console[iIIill(0x322,'3b(A')](iil1ll[iIIill(0x383,'3PIb')]);return;}else lIII1l[iIIill(0x287,'$4Wy')]('❌\x20未能正确处理\x20'+l1iIIi+iIIill(0x274,'WMqf')+(lilIi['message']||l1l11I));}notify[iIIill(0x22b,'3b(A')]({'title':$[iIIill(0x3ee,'uGqs')]}),console['log'](iil1ll[iIIill(0x319,'2Lg6')](iil1ll['HiFeJ'],$[iIIill(0x21c,'U*x#')]));for(let llI1Il=0x0;llI1Il<cookiesArr[iIIill(0x242,'2Lg6')];llI1Il++){if(iil1ll[iIIill(0x27e,'dgnA')](iIIill(0x2c2,'nLBS'),iil1ll[iIIill(0x3ac,'vZdk')]))l11i1I['headers'][iil1ll['ldeZX']]=iil1ll[iIIill(0x3bd,'3b(A')];else{$[iIIill(0x29f,'fwWw')]=llI1Il+0x1,cookie=cookiesArr[llI1Il],originCookie=cookiesArr[llI1Il],common[iIIill(0x2ce,'fZfu')](originCookie),$[iIIill(0x24b,'U*x#')]=decodeURIComponent(common[iIIill(0x3e3,'fZfu')](cookie,iil1ll[iIIill(0x215,'M%NB')])),$['UA']=common[iIIill(0x395,'5Ewp')]($['UserName']),$[iIIill(0x23c,'nLBS')]=common['genUuid'](iil1ll[iIIill(0x208,'M%NB')]),$['te']=iil1ll[iIIill(0x289,'y[W7')](Math[iIIill(0x388,'u6VW')](Math[iIIill(0x273,'mP@G')]()*0x2328),0x3e8),$[iIIill(0x290,'K7ik')]=notify['create']($['index'],$[iIIill(0x3ea,'3PIb')]),$[iIIill(0x333,'*Q4I')]='',console[iIIill(0x3e2,'$P&L')](iIIill(0x27c,'Bqx)')+$[iIIill(0x2de,'eyV&')]+'】'+($['nickName']||$[iIIill(0x2d5,'@nXw')])+iIIill(0x359,'$P&L')),await Main(),common[iIIill(0x2d4,'*Q4I')]();if($[iIIill(0x225,'@nXw')]||$[iIIill(0x3ad,'eyV&')])break;}}isNotify&&notify['getMessage']()&&(notify['appendContent'](iIIill(0x2a3,'eyV&')+$[iIIill(0x2a7,'5KEt')]),await notify[iIIill(0x298,'3PIb')]());})()[il1li(0x3dd,'M%NB')](i11iil=>$[il1li(0x356,'eMlC')](i11iil))[il1li(0x1f7,'OUWF')](()=>$[il1li(0x28f,'jKD[')]());function Iii11l(){const Ill11l=(function(){return[...[iｉl,'NjBsjBliaIfHmVhYiKQ.YCcLbXomkD.hvpFg7YbD==','f35JmCoBkgpcOLaDW7BdMG','8kgMVo+4ISoX5l+f5Ok/5yIo','8jwxJ++7OSke5l+A5Okt5yUQ','vWDlW5pcO8oc','6yoj5yQ55lYR5zkO','lCkwW64','8ywxLE+7NSow','WO1yxH40DHJcTwKRW5LlzCkYW4Kexa','WQv0WPFcSCk3hCkdWQJdSvLOxa','W7tcKtxcVCoxWPRdJCkB','wmoEvG','W5KoDq','W71sWQFcIsLfWPzJ','jf5T','kfddSSkcWOXxCNu','CCoUfSkTWOG9WRVdIaTLha','iLvvWOKMimo6o3pdP8ozWRLZWQ/dPCoeWOy4WRhdLdVcPNbDW4rcWRyPpHJcJUAyS+wtPEMbPUEDJU++VwtdLmoPBMxdU8oyW4tcGNdVV4JVViNPUyxORRZKU7pPG6pNNk8','mSkdW50','WR3cRrWkWRG','vSoEwmke','W50uCqOFW55KWRbsiCozr8omrq','r8oqxCkCW4VdTe/dNmkUW44','5Bsu5y6/5A+6','oSkAW58RWPa','WPCNW5ldIZ/cVq','imkoW6GSqramcmoM','5BQs6l+T5OQx5AsA','W7Daw8kgDwyUW7VcVsGtWQGyxSkN','W70ZEsa/','W78UW5BdO8o9wG','lmkxW4i3WOC','uCojwmk5','WQzZeSkRWP/cUCoZha','wGzBW4pcVmotACoj','WPapgSoMW5K','WQ4hWP1Egq','W77cP0FcUSo/','W4RLVl3LP6hVVydMMiVNGRZLH6xMNR/LKkaM','smkfza','xSovBSkNvSk4WQRdVL8Zt0BdR2BdM8oAW63cNbldOx5Vw8krrGbkgae','WRjhWP8wjG','W7JcTuJcNCoAjSo8f8kasmkGkW','F8oFW4iHbW','WOrGWR7cO1m','dEISNoAXKowqOow5McC','e3H3kSolaKpcOLahW6RdMSky','A3hcG8oqWQCDWQyspSoUW6/dLG','p0ldVCkuWO1w','e+w+NUwNV++8PEABMUEdPowfRUAENUwrJhS','W5RJGRVLUiVPKjVLKAZNP6NJGPKU','W65CWQ3cIa','8jkmUbe','sCk3Da','rmo3wK3dRYO','WQpdG8oZWPeVEmoLAa','WODotq','WPKUWOvTa8kNg8oSWOmUrmoqWRisW5xcVbldSrFcGmkhWO7cHSkoySoUWR9Jb8ofWOJcQYhcLCkjBSkvwupcQW','eSkSW68tDG','kNVcJCooWPa','y8oWvmk3sq','W5ObxXuhFq','6i6f5y2iW4BcMSoUWP41umk35AwJ6lAb776G','W4ddI8kn','W7T0WPfAWQldKSkh','chZcGmkfW75CE1VcNZ/cMmkmWRu','WOrmy8k3cLW0kCkWW5xdPmoWgCkUWRdcIceoWO/cLZz0W7K','W7rHWRbCWR3dJSkSW6FcSayUyte','W75PWQBcKba','WRq+ma','yCkIyCkgWPO','5AAa5B6i5lQq','xSo7r1RdOtRcHG','uXPF','W7zmvW','fmkuW6eWFW','i8kxWRRdIvFcSmoN','WOHnfSknWPO','WQO5jxu6W6dcVSkOW74','WQj4aSk0WOVcUSoZ','WPFcSNO4vmoRyxZdPsr1','5BwI5y+05A6J','W7BcT13cQCosfmo+','WOHaWP0ubXxdIc8','8lwVQJBcHUwmGU+8QG','bfbFWQSc','W5VcM0BcImoX','W7hcJYdcSSo+','pe1DamoWlLBcG3O','WP5ecwnExWOpWQXkta','awbSj8oqda','WQdcSc8DWOu','W5OEAXCTW5fU','ymooF2tdTG','W7G1W4G','W7eLW4VdLmoUqmksWQddMg9nDe5VWQO','CSo2rSkhsa','qmo1xvNdKIJcJq','i8kkWRBdMNZcOSo5WQK','zmkHEmkzWQe','e/c4Sii','W5pNUjRMNlNMLOxPLlRVV7y','qxdcJSoiWRCxWRDm','W78UW4BdQSo6sSktWRW','rx/cMCohWQO','WPRcVMK','i/cwNj4','5Rwa5yUf5ywG5yYY77+h','r8kptCkhWQvPWQxcS8oQW6VdMmoMWP1DsupdJmoWW6fXWPFcJmkPWPNcT8ouW4C','xqHmW5xcUq','5lU05AsB6ygn55+5','8jkmUbhNI7ZLPBJOIQW','hMzXn8orgMVcQq','WPO/W5q','WRZdHmo7','vmo7qgRdRZlcImksdLpdKYBcHmkb','WProWO4','W5LHfCklWQC','WOzstq','uSoPvvVdPa7cHSkvd0VdHYC','W7P+WQVcMIK','WOqWWPPHdG','WOZcUGmbWOdcJCo7W4S','FSoKy1/dHG','WRJcVGCbWQRcUmoVW57cUW','4P+CW57MNBZNNk3ORy3MSR3cGW','W4ldHCkhta','CCopW6q','WOKBo0GZ','nKJLJPtcSq','5P2R6ice6iY+5y6i55sn5OMP6yIz5PYM5l2I5Oga77+W','vqNcRIdcKq','dX9SWRW','egbUn8oAcq','qWVdUSoyWOmXi1RcVG','q8o/rLRdPq','fSkHW6aZDa','avtcO8ojWQypbG','rw3cIG','W540W6BdHdtdTwXCW6pcIWC','W71wsa','WRFdJSoOWQqnFmoLAmkiWOmKW6FcJLi','WOddM8kSEXBcGmoe','WO11WQtcN3tdPf9MW53cJsf8lG','WRTrWRFcU1m','W51zeCkDWQHobW','z1BdUa','W6zXWQXb','W7tcO13cJmow','C8ojW7CRamoygG','WPeKWPrVhSkad8o9WOGI','tNFcG8ofWQ4FWQS','W6aLW4VdOSoQxmkPWQBdKq','FCo3z1/dSq','W4iqz8kKda','f8kNWO0','WQZdNCk8BqFcKW','eMzHnSoshMJcUa','qmopqCkCW43dOh3dGmkOW5fbwCk2W54TlaPkW5/cIvSaW71Yh8kNW7nqWOldUmk0FCoT','WOJdJ8kQyqpcNSo1W5q4BW','WQXWWPe+eq','5P2h5AgM5z+f5z6S','WPmIW4hdLIK','Dc1NW6tcLmoYrCo8aq','B04yW6JdRG','ofRcRmkFW7i','tNFcLq','ffBcSG','zabGW6/cVW','kLRdT8kdWOC','WOmFa8o6W4H1t14CkMRdIga','r2CGW6pdICoQW55ivG','5RAt5yUC5BEd57Qd5PY277Yv57Q85PYA5Psy6zEA77YJ','WO3dR0ddKG','W4nLWOhcGg3dUSo3h8kHkKTm','WQRdKCk1vSkNsrRdMb7dR20'],...(function(){return[...['W497WPtcRba','WPjfWR0taHhdIW','WPrUWOq','WQOLogWlW7pcVSk6W6Ta','qMyP','Ac9XW4xcGq','WPWJW5FdLJy','mSkFW5mVWQZdRgddOG','aMfSeSoP','b+s/RUAbKowjVmk/','W4DIWOdcJw7dUmkHy8o0D2nDW4LIW48GW7NdJCk/W7CSxh3cVxmrkc5Qe8kxnmooqColrG','W4qBvG','W7fgw8k6CwmkW6pcMJSs','W6VMTA3LIzxLT6FKU7xdVW','n8khWRFdUfpcRCoWWQm3W5GnbK55WP0','fCo6rKJdTX7cJmkobxhdVd/cNmkIhmoWo8owESozuCoKzq','WP/dRuldG8oDW5hcSYNcR8kWBre','Cmk0wq','W4SaySkQfvKZF8kRW5q','5RwL5yQD5P+95lIq77+Z5Q+Q5PEE5OQS5AAF5P6V5AEUWQO','qCo2WONcVSopWPq9wW','p8kxWQ3dRf7cOSoZ','yb7cRXVcPXnWutdcVG','W57dKCkeBcpdRa','W4KnvIOz','W6NNP4pLIApcHG','WOy/W4ddJr3cVmo5nCk5e3nzW4DuW4K4W7S','WQXYh8kHWOpcUG','WR7dISoXWOq','W5Dem8kRWOO','fWjI','qCoRwMZdRJK','WRxcPGe','WOqNWOH8d8kMjSo6WP8cvCofWQ8','WOvzlSkxWQxcLmoyoW','WP7dVmojWQmc','W6dLVl3LP6hMLRRPLQxVVj8','u8oPWOFcVmoLWRSXu8oY','WRKMW5FdQCoHwSozWQNdMLbvAvbsWQuTW5W','s8olo8kAWRi','lSkjW5yFl8oremoz','WO3dSuRdGCoRW7FcUa','4PQBWORORR7LOOlLHy7MOylLV7VMR77NOlxNMQ7LJORPHkm','5P+k5lQ45AA8','W4xcQX/cJa','WQaHWPv3iG','W4KrW5XiwIxdKdb0ASkL','tmomvG','WObRWQlcGM7dVhDT','W4fzbSk4','WRuOoxSGW68','qmoiumkcW4ddJx3dMCkK','W6jqqCkwAw4','W7hcSvJcImor','WRJcUryFWQFcJ8o3W5RcT8o4W44AnhpcHmoDgGbnWRVcLG5+b8oKrZddJWJdISk+WPtdTIfvW6DlwmoOEmkaWQhdPmkVWPhcTaVcQW','WOLNWQxcN3BdTg5XW7dcVq','W6VdOmkYytK','8jsDOJlcVCkauSkr5l+o5zox','j8klWRFdJL3cTa','W4vwsSkHswStW78','WOXjWOCTpW','w1tdUmo5W78','4PQipUISMUwJJ+wfM+AHJ+w/NEATNoEGHoEyK+MrOEAmLG','WO5+eSkIWPRcQq','A8ovW60ja8oo','W6dLUQRPK5dPKRlMJ7tVVj8aWQ5ZkmopmIxdSSorbvydWP/dPCo0W7pcHgxdL8ooWRxdMCkWb1NdQ8kpvNGChSop','oCkhW4uTWPBdTf7dS8kOBmkdh8ojWRLU','sCkXymkneqRdOsxdImks','5AAp5zkm5BAL5yw06yk85y2w5A2B5lMi776l5lIU5QY+5PwA54o15PYw5zo+CW','WOhdOSklBSkCrdtdOcS','W4FdO3yRDmo2tu0','W6lMTl/LIBNLS7dLNkJcVq','8jgLU++5HSoj5l+p5OkE5yUm','WOfQWQlcK3ldQq','aaxcVW','5zwd5A+zWQ4DWRGpsUI/R+ADNW','WRi/dSorW4q','8kIzNCkq','WRKEWOHwfG','W6tdT8knqIa','WO8aeSo2W4q','WOldI8kRtHVcHSog','WQv5lSkTWOpcS8oXcmkXWOtcICkvCCoPaSomsCoJWPjzW5RdQ0RcLmkyWRJcGMjpWR83h8k75PMV5zot5yAX5l6y772LWOtcGSoiW4TrsCkYWObwuE+9KE+8NEM6MEIUQos4RowhPUs8Gq','8ygoImod5OcR5zwu6i6P5B6Z5AYc54UMWPa','WP7cLCoyehxcSmoHB38TW4pdQW','nCktWQZdG0BcUSohWRG7W7Knie56WP8','i07cPCo/WPe','5RsX5yQn5BwT57MJ5P+x','WPBdSmkeEmkDEbZdQq','5BM36zgV5zoN56ES77+Ikq','k+AiGUs4NowTRUElJCkJ','WPLIWPCzWQf6gq','W4StWPameb3dOW4','5Bsm5y2l5A6V','oLRdV8ktWOravwu','WOiIW4BdNa','WR3cPGugWQpcICo4W5O','WPJcPgm','vCk6FSkuWRy','W5GcEmkNdf0','W5JOR7BMSQhLKOVLUzW+','W65uWQRcMcTx','w8k7DmkvurxdHIddI8oowGn9bmoWAN1iW6/dJ8o9q8kdzNFdI8kchSkAW79sqCkgrSkvWPf7sCkQaSkhW71bvSoJW5ZcTvpdS8k5otOvcCkUBmkjzCkzvSkPWRez','WPLjWRqdWO8','WRW8iNuGW77cHmk6W6zxA8oNjr7cVa','WQ5+bCkjWOVcSmoZ','x8kEFmkOWQjJ','egb6','W6axagz7l0lLV5RLP4ZJGyJKUjdKUjtOTkZLJkO','wCo6A0pdQtpcHmkCdMVdLrxcHCkfa8o6gmkzFCopySoICGWnvLpcIUA2PowiLoMrUUAoNW','nvTbgSoh','W4RdJCks','WRFdJSoYWRmaD8oSySklWQqsW6ZcRLJcKW','mCkAWOJdIv0','WQfvjSkYWOq','bCkgW58UWOa','WPq9WQrclq','uWXlW4xcSmoryG','WO53WPKhWOK','WOObeq','WRJcUqWPWQS','w8k2BZaT','lhFdQ8kbWR0','WQGpWRZcHHjuWQbF','WPRMTj7LIOFLPOxLK4BVVja','WQ1yEYyd','WPpdV1ddGSoyW6xcSW','BKRdSCov','AaRcQqhcSG1b','ECoZvSkduq','xSoTuW','F8ktsSkmnq','W73cMYxcU8oBWPJdHG','vCoFja','WPveWPOpcbpdGa','8lwpVE+4VNdNU4VLJjZVVBu','WQNcVbuB','W5i3W5hdKCoM','W67dLmk4xIu','ra/dVCklW4ashLFcPSoAmW','fGXXWRlcTq','WRxdMSoPWOGvymony8kcWQmpW7pcOG','5O2a56sF57U85P6moJDdWQFdSNrdW7brbG','n1VdUmkdWPe','ySoqW6ZcNNxcPCoGWR4rW7e','W6WRvdeF5l6S5zgtWP0','5AwT5zgR5zge56sz77+n','WQlJGAtMTiRLI7JLNzNLNzNJGB4','W6bxrSkPyLusW7pcVd0','W4flhCkYWRm','WRJcVGCbWQRcOSo3W4pcUW','W7HEWRdcLtjjWOXUWQBcMCoE','WPS1W4ddIJRcQCoZ','W57cPgxcTCo2','W6ZdVfngW73dMSkLW5ZcKmohW6Tbbq','xSoXWOe','W5v1WRfHWPG','WPzuWOq','FSo1BSkkCmkzWONdIG','w13dRSoeW4u','WRldK8omWQmy','WPpcJamWWOO','W6W9vZ0k','5As75zom5Bsh5yY95AYg','W71LWPlcRHe','WQL0cq','hCoVpSoyrKxdNcldS8k3qru','5P+m6ikt6i+b5y2f55Au5OI76yM+5P2Z5l6z5Ocr77Yc','WQPSbmkUWP7cPmoydSk5WO8','ESkYrG','tgyQW78','WRjpFsqB','W73cNYlcQ8os','c2ZdMSkUWQC','8ygsQCod56I85RoC','nSkeW7ySWOy','W4arudqmAXW'],...(function(){return['8yMlPNC','W4xcUr7cUmoS','chZcGmkfW75CBuhcMHNcHCk1WRK1fG','WQCWWPvydxumW7NdOa','BSo6W486iG','W7vuwSk6C3mTW67cRJSkWPKfvSkW','W4eADbeP','W4ymCq','WQiLWOTebG','W7ZMTAVLIjVLSR/LNBpdRG','hMxcMSkCW5vrv0hcLW4','gs7dMmkqW7eIWQDfjmoCW5i','5Rwj5yQx5lIp6zUP5BMJ6zka5l2Y5zgB5yY+5lQg','qmo7qgRdRZlcImksdG','iLvEWOWKk8oZ','W6lJGjtMT6RLIz7LPzBLKzZJGiS','WP/dI8kXtrNcGW','WQldNSoYWQqpFq','oSkFW4G','w2C9W6pdJ8oHW6vQCwVdVq','bCkrWRZdMhZcOSo5WQK','W7LVDCkDqG','CCk4vteOv0riW7HzW6/cGHddGq','WOrRWRy','W5SuFW','8jwoL8onW6hLJQpVVAK','ymkFvrmW','DmotW7azaSoyemoO','qCo1WO/cVSotWOa+','W4eAvtur','rCk6u8klfXpdLsRdGSkmxcX5cCoQyLHoW6FdL8omcmkjB3tcHSobgSoc5P6s5Asz5OUq5AAX5QYx5PAv77+X6BUk6k6oW6TdW47MRRm','z0mKW7ldLG','5AEH5zk65BEQ5y615A+a','W77cQcFcPSo5','WPNdV1FdTmovW6FcUYlcPCkkwGvmWPu','rxVcNSoxWQmuWRC','W4CgzCkWaLCI','jmkiW7W3usC+eCoIxCkfgSoLhSoE','v8oflG','gUE5M+woJam','W6RcP0FcI8oWgSoTemkcFW','WPvYWOq','WOJdV03dLCoCW7dcNYm','smoXymkbW5u','r8kSrJ0Z','fCkAW4epWQC','W5/dSSkLrYu','WOPuWOC5bXa','s8kcAG','WQ8OoxGXW7xcNSkQ','5Rwn5yQH5BEW57Qq5P+G772357Uv5P6t5PEc6zAN776z','W4Kxrr4iDaO','g3PL','kLb5WOyApmoX','z0ddRmodW6NdQGK','fSkYW68bWR3dJKZdLCkn','DmokDmkXW4G','e1ZcVSoqWOithhRcTCoS','WQyXWOL0dxy','W7tcP1RcNmoFeSo8','W55daG','WQWQd1eA','hUATIdlLVRBLPjRMLydPL7pVVQC','muXw','tmkizSkeWRPUWRBcRCogW6e','5y+36ysr6k+45PUVq0dcJ3dcMSoFbK4Wvq','W5bheCkdWPm','WPmEe1mz','WRuIma','8kg/Pcu','WPG2W6hdSdm','vSozlG','WRuZWOzdb1WeW7ldVa','BCodW7miWPxdOwxdQG','eezsW5lcKSozAmowl8kE','nCkyW4mHWPddUq','ySk4wqbRwL1aW7ObW4ZcIYNdIvhcVtdcMGu8WQDRW7/cNK3cNIqhxCoZWRDvW4LKWPTRW7W8WRxcSIPeWOJdQLRcImomamkviCkoWOCtAIXzW5OeWO/dHLBdKX8','hmkXWPpcUSoOWPKJeCofn8ogW4qKW5tcINFdMhGrjmkuWQpdP8oB','5yQ85yEz5BIu6zkx5l225zoH5Awm6lAO77+G5Rwr5yQw5lMz6zIo5BU66zg65l2J5zcK5y6X5lIO','D8k+vtOLx0W','rx/cNq','tmodj8knWRGj','W7ziWRdcUIHbWP8','AqdcVq','gG5XWRJcQZzcWPFdMmoxWRi','gIZdMmkqWOuvWQzniCoT','WRX4bCkkWOpcPCoybSk3WOe','WPpcVsWzWPq','WRyFpNCm','jujT','5AAz5zoC5BAd5yAV6ycc5yYm5AYA5lUP77+y5lUH5Q+p5PsJ54k85P+T5zgwW5K','W4uCW5rbveNcMhChha','WPTwWRi+WR4','W5BWQ4YS77Q2','5REt5yQS5lIu6zQM5BQx6zgN5lYa5zgq5y275lUx5zkUBW','W5Ggz8k2bKmZ','lCozW5qDnmoVpa','WQnYfG','w8kkFSkyWQK','W5RdQCkysJu','WO8abCo2W454','WOtcPgautmoM','8ygoIo+7RgBNUARLJjVVVl4','8kInV8kqfmkUW5HE5l6D5zkr','WO9HWR/cPghdS35NW5tcIJXJiJjP','m0BdUW','WQ12WP/cOLi','zSosW6hcMqxcHCoXWOyyW68m','WOhdKCk4','nCkAWRddNG','CCozW7aEdCoEga','WOCzf8oHW5HFB14CmhBdIa','q8kXAW','WORdSCk1DSkrzdldQIVdJKtdI8kKWQfLW7ZdIwm7AuqwW6/cRW','qgaTW63dTCodW6DG','bgpcHSkjW7Hr','WOa1W53dNt7cVmoFpW','WOFdGCosWQ0S','W4uwySkfd1eG','bwjRm8oTdMG','W6fcWPfVWO0','8lUhGE+7IHxKV5hMGzFLI5e','WRGRWOa','WRhdImoOWQ8aDmoT','l1rKWReUimo5m3VdMSokWPrUWQddSq','m1ddR8kvWOHcxG','W7rQWRZcUHq','t8kkyCkiWPL1WQ4','W57dOSkMFGm','8js9LYZNI5dLPlNOIiC','sCojW4ySaa','6iYM5y+gW6vHWQBdNmkmW6FdTowLO+I1OU+8Jq','6i+N5yY0WOldVL3cQmoXWQih5AA66lwC','E8ogW6ODqmkzgCoOWOOgx8oOo0hcObSo','x8o7wK7dTdu','zSknub4d','xSoBpmkaWQmhWQFdQtPyjSk4W7mkbG','W5KlECkZlveQyW','W5nUWOdcSWK','rCkZDCkgha','WPrFdmk/W7K','r+s+PoAbO+wjLte','W7hcItFcUSoEWQZdHSkbCCk2WRP7','W5ivBG','vsdcIsy','W54rxZqmAZaSWOO','WP5OWPS','WPVdM8kXBblcLCoOW4K','W5Xncmk+','W71/WQjWWRVdHq','WPBdTu7dLa','qhWJ','W7RcGCk2W4Tlm8kc','W67dVCkftGi','mLRdUW','W4NdLCkFqdNdSCokBK8SW5ddOfK','W5XaWO5WWOG','4PQipUISMUwhRowTMos4UUw8L+IMVUEBRUEmUowGNownQ+MgPUwtREweGoI+TEIHKUIgMoADVW','mSknW7S3sZKea8o6','W4rLW6BdIXJcPSo7dW','WQveEImO','EvrDWPmxgmoC','WPzaWOqz','8lQ2KE+6QSkM5l6x5Ooo5yUo','W4Wvrte','rhhcIG','W4zddSk+WQO','o1VdQG','B8oQW4Wdba','va7cId/cSa','W6D1WQTrWQZdHCkGW60','776K5BAg5OIH5yUp6iAd5yQX55Iu6k+15PEy6lsj5zYj5z25imoW','WOZWTO2177IM','WPTSWR7cHK7dVhDT','EuddQ8o9W6hdTslcKxX4','WPL2WOi0WQXqrCoXW6O'];}())];}())];}());Iii11l=function(){return Ill11l;};return Iii11l();};async function Main(){const iilii=il1li,Ill1i={'jrFhd':iilii(0x2f4,'eyV&'),'GpVeO':'⚠\x20请先定义必要的环境变量后再运行脚本','PMFmK':iilii(0x344,'eMlC'),'wqYeU':'⚠\x20请填写格式正确的链接','IjMsX':iilii(0x2b8,'3b(A'),'JEeCD':iilii(0x1ff,'&tci'),'VFPPT':'availableQuantity','IJjtm':iilii(0x252,'u6VW'),'yyInK':function(ii1iil,lllI1l){return ii1iil>=lllI1l;},'cWQxv':function(i11iii,llI1Ii){return i11iii===llI1Ii;},'UuEAl':'\x0a\x20\x20谢谢参与','lEcwk':function(lllI1i,li1i1l){return lllI1i>=li1i1l;},'PVlTg':iilii(0x3c1,'U*x#'),'apjZe':iilii(0x2e2,'nLBS'),'AwhbY':function(II1i1,lI1lll,iIiII){return II1i1(lI1lll,iIiII);},'QqgIw':function(iil1lI,iiiliI){return iil1lI(iiiliI);},'zUhUI':'未能获取用户鉴权信息','jmygb':iilii(0x357,'#Wr@'),'QqoFe':function(li1i1I,illIii){return li1i1I===illIii;},'nfRIh':'comEC','mWxFP':function(ii1il1,lI1llI){return ii1il1<lI1llI;},'rBwgT':'equityEndTime','JfvjO':function(illIil,Ill1I){return illIil!==Ill1I;},'vvzAA':iilii(0x299,'ArUi'),'MPKEA':iilii(0x39b,'tr[*'),'LIskV':function(i11iiI,lIli11){return i11iiI>=lIli11;},'Ypojb':iilii(0x38b,'Bqx)'),'aHWEG':function(lllI1I,lillI1){return lllI1I===lillI1;},'sgxiw':function(IlIlii,i1l1i1){return IlIlii!==i1l1i1;},'vEkWS':'NFSGx','axQco':iilii(0x361,'Bqx)'),'QaRMc':iilii(0x31b,'3b(A')};try{if(Ill1i[iilii(0x288,'3PIb')]!=='QsQRt'){$[iilii(0x1e9,'FcO1')]=![],activityCookie='';if($[iilii(0x2f0,'[pD8')]||$[iilii(0x313,'5KEt')])return;$[iilii(0x211,'[pD8')]=await Ill1i[iilii(0x23d,'8)qD')](getToken,originCookie,$['baseUrl']);if(!$[iilii(0x2cf,'58Lu')]){console[iilii(0x3e1,'aAX1')](iilii(0x3ae,'XbV*')),$[iilii(0x3b8,'fZfu')][iilii(0x3a5,'6Et$')](iilii(0x345,'@nXw'));return;}await Ill1i[iilii(0x2ed,'y[W7')](sendRequest,'setMixNick');if($[iilii(0x244,'U*x#')]||$[iilii(0x1f5,'tr[*')]||$['skipRun'])return;if(!$['token']){console[iilii(0x214,'*Q4I')](iilii(0x2b7,'$4Wy')),$['message'][iilii(0x206,'OUWF')](Ill1i['zUhUI']);return;}await sendRequest(Ill1i[iilii(0x34c,'6Et$')]);if($['runEnd']||$[iilii(0x337,'mP@G')]||$['skipRun'])return;await $[iilii(0x384,'b[Hd')](0x3e8);if(Ill1i[iilii(0x266,'FcO1')]($[iilii(0x260,'$4Wy')],0x1)){if(Ill1i[iilii(0x307,'aAX1')]!=='MMkIp'){const liil11=$['prize_list'];let iiillI=![],l1l111='';for(let llI1I1=0x0;Ill1i[iilii(0x33f,'5KEt')](llI1I1,liil11[iilii(0x347,'fZfu')]);llI1I1++){const IlIlil=liil11[llI1I1][Ill1i['IjMsX']],lIli1I=liil11[llI1I1][iilii(0x226,'K7ik')],II1il=liil11[llI1I1][Ill1i[iilii(0x210,'5KEt')]];$['equityStartTime']=liil11[0x0][Ill1i[iilii(0x2e0,'*Q4I')]],$['equityEndTime']=liil11[0x0][Ill1i[iilii(0x28a,'fwWw')]];if(II1il>=0x1){if(Ill1i[iilii(0x399,'[pD8')](Ill1i[iilii(0x286,'WMqf')],Ill1i[iilii(0x35d,'eMlC')]))iiillI=!![];else{let I1lIll=ilI1li['match'](/(活动已结束)/)&&IIliI[iilii(0x1f4,'5Ewp')](/(活动已结束)/)[0x1]||'';if(I1lIll){ll1l1['runEnd']=!![],IllIIi[iilii(0x3af,'uGqs')]('活动已结束，下次早点来吧~'),IllIIl['message'][iilii(0x206,'OUWF')]('活动已结束');return;}let I1lIli=Iillil[iilii(0x2bc,'nLBS')](/每日抽奖最多 (\d+) 次/);I1lIli?IiiIi1[iilii(0x3ce,'ArUi')]=I1lIli[0x1]:l1ii1[iilii(0x271,'tbbJ')]=ii1ll;if(!IIli1l)II1lii=lIIii1(iilii(0x216,'aAX1'))?.[iilii(0x34b,'5KEt')];const II1ii=new ll1i1(IIli1i);I1iIi1[iilii(0x2a4,'U*x#')]=lliil1[iilii(0x1e7,'fZfu')](II1ii['window'][iilii(0x392,'M%NB')]['getElementById'](iilii(0x389,'aAX1'))?.[iilii(0x20b,'*Q4I')]||'[]'),IIllI[iilii(0x279,'3b(A')]=II1ii[iilii(0x24a,'@nXw')][iilii(0x1fd,'dgnA')][iilii(0x2d7,'y[W7')](Ill1i[iilii(0x2bf,'u6VW')])?.[iilii(0x393,'$4Wy')]||'',lliilI[iilii(0x34a,'mP@G')]=II1ii[iilii(0x3ca,'dgnA')][iilii(0x270,'3PIb')]['getElementById'](iilii(0x2cb,'cw)c'))?.[iilii(0x2c9,'To0M')]||'',lili1[iilii(0x36b,'eMlC')]=II1ii['window'][iilii(0x26e,'fwWw')][iilii(0x1ed,'$P&L')](iilii(0x1f8,'ArUi'))?.[iilii(0x323,'^BsB')]||'';}}lIli1I==='-1'?l1l111+=Ill1i[iilii(0x343,'tr[*')]:l1l111+=iilii(0x25a,'jKD[')+IlIlil+prize_type[lIli1I]+'['+(Ill1i[iilii(0x3b6,'^BsB')](II1il,0x1)?'剩余'+II1il+'件':iilii(0x387,'$4Wy'))+']';}console['log'](($[iilii(0x3d2,'@nXw')]&&iilii(0x269,'ag])')+$['shopName']+'['+($['actName']||Ill1i[iilii(0x283,'u6VW')])+']')+iilii(0x251,'Bqx)')+$[iilii(0x268,'ag])')]),console[iilii(0x314,'K7ik')](iilii(0x223,'fwWw')+$[iilii(0x295,'VDvQ')]+iilii(0x2ff,'M%NB')+$['equityStartTime']+iilii(0x3d5,'3PIb')+$[iilii(0x3b3,'eMlC')]+iilii(0x28c,'U*x#')+l1l111+'\x0a'),notify['appendContent'](($[iilii(0x224,'XbV*')]?iilii(0x3a2,'$P&L')+$[iilii(0x3a7,'$P&L')]:'')+iilii(0x234,'Bqx)')+$[iilii(0x278,'2Lg6')]+'\x0a结束时间：'+$[iilii(0x39e,'dgnA')]+iilii(0x2d0,'!S5z')+l1l111+'\x0a');const l1iIII=Date['now']();if($[iilii(0x2e6,'TeId')]&&l1iIII<$[iilii(0x265,'@nXw')]){if(Ill1i[iilii(0x277,'WMqf')](iilii(0x336,'$P&L'),iilii(0x1e3,'K7ik'))){IiilI1['log'](Ill1i['GpVeO']);return;}else{console[iilii(0x33b,'To0M')](iilii(0x257,'!S5z')+$[iilii(0x2c3,'cw)c')]+iilii(0x396,'Bqx)')),$[iilii(0x296,'[pD8')][iilii(0x3a5,'6Et$')]('活动尚未开始，开始时间：'+$[iilii(0x278,'2Lg6')]),$[iilii(0x22f,'fZfu')]=!![];return;}}if($[iilii(0x35c,'uGqs')]&&l1iIII>$[iilii(0x231,'8)qD')]){console['log'](iilii(0x21d,'8)qD')+$[iilii(0x29d,'$P&L')]+'\x20结束，下次早点来吧~'),$['message'][iilii(0x221,'y[W7')](iilii(0x20c,'eyV&')+$[iilii(0x3b1,'cw)c')]),$[iilii(0x326,'tbbJ')]=!![];return;}if(!iiillI){if(Ill1i[iilii(0x2a5,'E7id')](Ill1i['vEkWS'],Ill1i[iilii(0x281,'@nXw')])){console[iilii(0x305,'2Lg6')](Ill1i[iilii(0x36a,'K7ik')]),$[iilii(0x3cc,'uE)P')][iilii(0x207,'FcO1')](iilii(0x2e1,'uE)P')),$['runEnd']=!![];return;}else{IlI11[iilii(0x3e4,'[pD8')](Ill1i[iilii(0x293,'6Et$')]),iIIIIl['message'][iilii(0x3a5,'6Et$')]('获取[Token]失败');return;}}if($[iilii(0x2d2,'$P&L')]||$[iilii(0x261,'&tci')]||$[iilii(0x239,'#Wr@')])return;}else I1iIli[iilii(0x37e,'58Lu')](''+lI1Ill[iilii(0x2f5,'dgnA')]);}await Ill1i[iilii(0x24d,'jKD[')](sendRequest,iilii(0x386,'b[Hd')),await $['wait'](0x3e8);while($[iilii(0x382,'u6VW')]-->0x0&&!$['skipRun']){if('efgtu'===iilii(0x3e9,'8)qD'))await Ill1i['QqgIw'](sendRequest,'postFrontTaskDraw'),await $[iilii(0x3a3,'5KEt')](0xfa0);else{i1ili1[iilii(0x35b,'fwWw')](Ill1i['wqYeU']);return;}}}else{const liil1I=i1iliI[I1iIii][Ill1i['IjMsX']],i11ii1=IllII1[I1iIil][Ill1i[iilii(0x2b1,'3PIb')]],IlIliI=lI1Iil[lilIiI][Ill1i['VFPPT']];i1l1I['equityStartTime']=IiilIi[0x0][Ill1i[iilii(0x3d3,'^BsB')]],IiilIl[iilii(0x20a,'$4Wy')]=iii1Ii[0x0][iilii(0x1ef,'!S5z')],Ill1i[iilii(0x3cb,'3PIb')](IlIliI,0x1)&&(lilIil=!![]),Ill1i[iilii(0x31d,'WMqf')](i11ii1,'-1')?i1l11+=Ill1i[iilii(0x2f9,'b[Hd')]:i1l1li+='\x0a\x20\x20'+liil1I+i1ilii[i11ii1]+'['+(Ill1i['lEcwk'](IlIliI,0x1)?'剩余'+IlIliI+'件':Ill1i[iilii(0x3f0,'2Lg6')])+']';}}catch(l1iII1){console[iilii(0x305,'2Lg6')]('❌\x20脚本运行遇到了错误\x0a'+l1iII1);}}async function handleResponse(iiill1,lIli1i){const Ill11i=il1li,IIIII1={'jqBHa':Ill11i(0x3f2,'TeId'),'UELuR':function(I1lIlI,ii1ill){return I1lIlI===ii1ill;},'uopKU':Ill11i(0x324,'uGqs'),'UYFHN':Ill11i(0x233,'$P&L'),'hXgiP':'followShop','xQlyz':Ill11i(0x204,'*Q4I'),'pEzZD':'home','MzWvF':Ill11i(0x3a0,'fwWw'),'BpRwh':Ill11i(0x232,'3b(A'),'UWYsx':Ill11i(0x2ae,'vZdk'),'HDsKe':function(II1iI,llI1II){return II1iI&&llI1II;},'SPKMv':'已填地址','bxPBy':Ill11i(0x201,'cw)c'),'zCzoz':Ill11i(0x380,'VDvQ'),'ehVpN':'JD_AIQIYI','iNQqq':'JD_PLUS','ESIsI':Ill11i(0x2f8,'u6VW'),'xywQF':Ill11i(0x318,'3PIb'),'OicvM':Ill11i(0x375,'b[Hd'),'ZvrSe':Ill11i(0x2b2,'eyV&'),'aqvzD':Ill11i(0x228,'eyV&'),'XDGwd':function(lIli1l,lillIi){return lIli1l!==lillIi;},'nHWun':function(illIi1,ii1ili){return illIi1===ii1ili;},'pPqjG':Ill11i(0x35a,'uGqs'),'vBtgt':'加入店铺会员失败，活动仅限店铺会员参与哦~','IlqKE':Ill11i(0x30f,'tr[*'),'cCofm':function(liil1i,lI1lil){return liil1i===lI1lil;},'aqdQO':Ill11i(0x284,'8)qD')};try{if(IIIII1['UELuR'](IIIII1['uopKU'],IIIII1[Ill11i(0x2bd,'fwWw')]))Illl1i[Ill11i(0x27a,'^BsB')]=!![];else switch(iiill1){case IIIII1['hXgiP']:if(lIli1i&&lIli1i[Ill11i(0x20d,'#Wr@')]){}else lIli1i[Ill11i(0x3ef,'tr[*')]?console[Ill11i(0x214,'*Q4I')](''+lIli1i[Ill11i(0x3ef,'tr[*')]):($['skipRun']=!![],console['log']('❓'+iiill1+'\x20'+JSON['stringify'](lIli1i)));break;case'setMixNick':if(lIli1i&&lIli1i[Ill11i(0x241,'E7id')])$[Ill11i(0x367,'E7id')]=lIli1i[Ill11i(0x1f2,'jKD[')];else lIli1i['msg']?IIIII1[Ill11i(0x272,'^BsB')]===Ill11i(0x3bb,'TeId')?llliil[Ill11i(0x3bf,'3b(A')][Ill11i(0x3ba,'U*x#')](liIl1):(console[Ill11i(0x3af,'uGqs')](''+lIli1i[Ill11i(0x31a,'58Lu')]),[Ill11i(0x25b,'K7ik')]['includes'](lIli1i[Ill11i(0x1ec,'U*x#')])&&($['runEnd']=!![])):($['skipRun']=!![],console[Ill11i(0x32d,'&tci')]('❓'+iiill1+'\x20'+JSON[Ill11i(0x3be,'2Lg6')](lIli1i)));break;case IIIII1['pEzZD']:if(lIli1i){let lI1lii=lIli1i[Ill11i(0x3d8,'OUWF')](/(活动已结束)/)&&lIli1i[Ill11i(0x1f4,'5Ewp')](/(活动已结束)/)[0x1]||'';if(lI1lii){$['runEnd']=!![],console[Ill11i(0x230,'3PIb')]('活动已结束，下次早点来吧~'),$[Ill11i(0x294,'nLBS')][Ill11i(0x27f,'uGqs')](Ill11i(0x267,'jKD['));return;}let Iiili1=lIli1i[Ill11i(0x29c,'PLo2')](/每日抽奖最多 (\d+) 次/);Iiili1?$[Ill11i(0x37c,'uE)P')]=Iiili1[0x1]:$['num']=max_draw;if(!JSDOM)JSDOM=require('jsdom')?.[Ill11i(0x304,'2Lg6')];const Iil1l1=new JSDOM(lIli1i);$[Ill11i(0x1f6,'8)qD')]=JSON[Ill11i(0x237,'VDvQ')](Iil1l1[Ill11i(0x250,'tr[*')][Ill11i(0x37a,'nLBS')]['getElementById'](IIIII1[Ill11i(0x3eb,'fZfu')])?.['innerHTML']||'[]'),$[Ill11i(0x33c,'$P&L')]=Iil1l1[Ill11i(0x312,'VDvQ')]['document']['getElementById'](Ill11i(0x310,'y[W7'))?.[Ill11i(0x2c7,'uE)P')]||'',$[Ill11i(0x36e,'!S5z')]=Iil1l1[Ill11i(0x275,'5KEt')][Ill11i(0x37d,'5KEt')]['getElementById'](Ill11i(0x213,'2Lg6'))?.['value']||'',$['venderId']=Iil1l1[Ill11i(0x3a6,'fZfu')][Ill11i(0x1fd,'dgnA')][Ill11i(0x2e3,'#Wr@')](Ill11i(0x352,'eyV&'))?.['value']||'';}else console[Ill11i(0x37b,'vZdk')]('❓'+iiill1+'\x20'+JSON[Ill11i(0x2c4,'To0M')](lIli1i));break;case Ill11i(0x22a,'aAX1'):if(lIli1i&&lIli1i['succ']){let i1i11I=JSON[Ill11i(0x237,'VDvQ')](lIli1i[Ill11i(0x1ea,'OUWF')])?.['drawAwardDto'],il1iIl=i1i11I?.[Ill11i(0x3ec,'3PIb')];switch(il1iIl){case'JD_BEAN':console[Ill11i(0x2d9,'uE)P')](Ill11i(0x306,'PLo2')+i1i11I?.[Ill11i(0x370,'WMqf')]+'\x20🐶'),$['message'][Ill11i(0x38e,'ArUi')](Ill11i(0x3a4,'vZdk')+i1i11I?.[Ill11i(0x38a,'TeId')]+Ill11i(0x3d4,'fZfu'));break;case IIIII1[Ill11i(0x29a,'uGqs')]:console[Ill11i(0x3e6,'Bqx)')]('🗑️\x20'+i1i11I?.[Ill11i(0x39a,'5Ewp')]+i1i11I?.[Ill11i(0x309,'To0M')]+Ill11i(0x36d,'uGqs')),$['message'][Ill11i(0x325,'$4Wy')](Ill11i(0x377,'!S5z')+i1i11I?.[Ill11i(0x330,'$4Wy')]+i1i11I?.['awardName']+Ill11i(0x31e,'aAX1'));break;case Ill11i(0x3c8,'dgnA'):console[Ill11i(0x376,'TeId')](Ill11i(0x372,'PLo2')),$[Ill11i(0x28e,'#Wr@')][Ill11i(0x259,'!S5z')]('🗑️\x20优惠券');break;case IIIII1[Ill11i(0x205,'cw)c')]:const iii1ii=JSON[Ill11i(0x38f,'u6VW')](lIli1i[Ill11i(0x23f,'b[Hd')])['actLogId'],il1iIi=i1i11I[Ill11i(0x243,'b[Hd')];console['log'](Ill11i(0x263,'WMqf')),console[Ill11i(0x287,'$4Wy')](Ill11i(0x2a2,'VDvQ')+il1iIi);const iii1il={'baseUrl':$['baseUrl'],'cookie':activityCookie,'ua':$['UA'],'venderId':$[Ill11i(0x2eb,'#Wr@')],'prizeName':il1iIi,'orderCode':iii1ii,'activityUrl':$[Ill11i(0x315,'PLo2')]},II11li=await jinggeng_savePrize(iii1il);IIIII1['HDsKe'](!isNotify,II11li)&&await notify[Ill11i(0x2e9,'5Ewp')]($[Ill11i(0x22c,'$P&L')]+Ill11i(0x3de,'2Lg6'),'【京东账号'+$['index']+'】'+$[Ill11i(0x217,'u6VW')]+Ill11i(0x26a,'b[Hd')+il1iIi+Ill11i(0x36c,'eyV&')+$[Ill11i(0x3c0,'tbbJ')]);$[Ill11i(0x33e,'fwWw')]['insert'](il1iIi+'('+(II11li?IIIII1[Ill11i(0x3cd,'fZfu')]:IIIII1[Ill11i(0x2b0,'$P&L')])+Ill11i(0x3da,'jKD['));break;case Ill11i(0x20f,'ag])'):console[Ill11i(0x22e,'PLo2')](Ill11i(0x373,'OUWF')),$['message'][Ill11i(0x30c,'u6VW')](Ill11i(0x258,'VDvQ'));break;case IIIII1[Ill11i(0x394,'To0M')]:console[Ill11i(0x32d,'&tci')](Ill11i(0x364,'ArUi')),$[Ill11i(0x1ee,'&tci')]['insert'](Ill11i(0x33a,'eMlC'));break;case IIIII1[Ill11i(0x22d,'E7id')]:console['log'](Ill11i(0x3df,'vZdk')),$[Ill11i(0x3b8,'fZfu')]['insert'](Ill11i(0x342,'6Et$'));break;case IIIII1[Ill11i(0x2ec,'b[Hd')]:console[Ill11i(0x3e2,'$P&L')](Ill11i(0x249,'^BsB')),$[Ill11i(0x2a8,'aAX1')][Ill11i(0x374,'M%NB')](Ill11i(0x328,'u6VW'));break;case IIIII1['ESIsI']:console[Ill11i(0x37e,'58Lu')](Ill11i(0x2da,'OUWF')+i1i11I?.[Ill11i(0x34f,'nLBS')]+i1i11I?.['awardName']),$['message']['insert'](Ill11i(0x3c4,'mP@G')+i1i11I?.[Ill11i(0x220,'#Wr@')]+i1i11I?.[Ill11i(0x235,'XbV*')]);break;case Ill11i(0x203,'M%NB'):console['log'](Ill11i(0x327,'WMqf')+i1i11I?.[Ill11i(0x3e7,'fZfu')]+i1i11I?.[Ill11i(0x255,'ag])')]),$['message']['insert'](Ill11i(0x297,'eyV&')+i1i11I?.[Ill11i(0x371,'dgnA')]+i1i11I?.[Ill11i(0x2a6,'3PIb')]);break;default:console['log'](i1i11I);break;}}else{lIli1i[Ill11i(0x32a,'fwWw')]['includes'](Ill11i(0x23b,'ag])'))?(console[Ill11i(0x366,'OUWF')](Ill11i(0x2be,'WMqf')),$['message']['insert']('💨\x20空气')):(console[Ill11i(0x2ab,'XbV*')](''+lIli1i[Ill11i(0x3a8,'Bqx)')]),$['message'][Ill11i(0x334,'cw)c')](''+lIli1i[Ill11i(0x292,'fZfu')]));err=lIli1i[Ill11i(0x3b9,'M%NB')];for(let I1l11i of['不足','火爆','上限','次数']){if(err['includes'](I1l11i)){if('JtJjZ'===IIIII1['xywQF']){$[Ill11i(0x338,'dgnA')]=!![];break;}else{II11II[Ill11i(0x2d8,'!S5z')]('\x0a活动已于\x20'+Ii1iI1['equityEndTime']+'\x20结束，下次早点来吧~'),lilIli[Ill11i(0x1ee,'&tci')][Ill11i(0x3ba,'U*x#')](Ill11i(0x2f3,'dgnA')+Iliili[Ill11i(0x35c,'uGqs')]),Iliill[Ill11i(0x227,'uGqs')]=!![];return;}}}for(let liiI1i of[IIIII1['OicvM']]){if(IIIII1['UELuR'](IIIII1['ZvrSe'],IIIII1[Ill11i(0x3c7,'nLBS')])){iIIIIi[Ill11i(0x3e1,'aAX1')](IIIII1['jqBHa']),iii1I1[Ill11i(0x285,'M%NB')][Ill11i(0x2b5,'3b(A')]('未能获取用户鉴权信息');return;}else{if(err[Ill11i(0x3d7,'ArUi')](liiI1i)){if(IIIII1[Ill11i(0x3ab,'FcO1')]('yuWIb',Ill11i(0x3e5,'E7id'))){if(joinMember){if(IIIII1[Ill11i(0x282,'3b(A')](Ill11i(0x2c5,'tr[*'),Ill11i(0x341,'uGqs'))){const lilIIl=await common[Ill11i(0x385,'uE)P')]($[Ill11i(0x2f2,'2Lg6')]);if(lilIIl)IIIII1[Ill11i(0x348,'y[W7')]!==Ill11i(0x3c6,'5Ewp')?(lilIl1[Ill11i(0x308,'VDvQ')](i1l1ii[Ill11i(0x363,'[pD8')],'【提示】请先获取Cookie'),i1l1[Ill11i(0x32e,'@nXw')](0x1)):($[Ill11i(0x3ce,'ArUi')]+=0x1,console[Ill11i(0x214,'*Q4I')]('加入店铺会员成功'));else{$[Ill11i(0x2dd,'XbV*')]=!![],console[Ill11i(0x331,'6Et$')](IIIII1[Ill11i(0x2db,'y[W7')]),$[Ill11i(0x32f,'tr[*')][Ill11i(0x27b,'dgnA')](IIIII1[Ill11i(0x2ee,'u6VW')]);return;}}else I11iIi['num']+=0x1,I1ilII[Ill11i(0x2b9,'y[W7')]('加入店铺会员成功');}else{if(IIIII1[Ill11i(0x3e8,'5KEt')](IIIII1['aqdQO'],IIIII1['aqdQO'])){$[Ill11i(0x3d1,'fZfu')]=!![],console[Ill11i(0x376,'TeId')](Ill11i(0x31f,'!S5z')),$['message']['fix'](Ill11i(0x2cd,'FcO1'));return;}else lilii[Ill11i(0x2ad,'[pD8')]=l1iiI[0x1];}break;}else l1lIlI[Ill11i(0x209,'fwWw')]=IiiIl1[Ill11i(0x3b5,'2Lg6')];}}}for(let I1l11l of['休息',Ill11i(0x3b7,'mP@G')]){if(err[Ill11i(0x3d6,'OUWF')](I1l11l)){$[Ill11i(0x358,'*Q4I')]+=0x1;break;}}}break;}}catch(lilIIi){console[Ill11i(0x32d,'&tci')]('❌\x20未能正确处理\x20'+iiill1+Ill11i(0x39d,'^BsB')+(lilIIi[Ill11i(0x2fc,'5Ewp')]||lilIIi));}}async function sendRequest(i1l1Il){const iilil=il1li,llIli={'ugXMN':iilil(0x254,'2Lg6'),'TQxBx':function(iilli,IlllIl){return iilli>=IlllIl;},'WbTDA':iilil(0x26d,'#Wr@'),'NiSvq':iilil(0x351,'K7ik'),'MBgNn':'home','GDXHt':'postFrontTaskDraw','bktXW':iilil(0x1fe,'b[Hd'),'GfLZH':iilil(0x346,'tr[*'),'kawuq':'keep-alive','hsqgo':function(II11lI,lI1IIi){return II11lI===lI1IIi;},'iJZNE':iilil(0x39f,'OUWF'),'WXimQ':function(I1l11I,Ilil1l){return I1l11I===Ilil1l;},'ErNTR':iilil(0x1fc,'&tci'),'HSgkm':function(iIIiii,iilll){return iIIiii<iilll;},'ZlBUG':function(il1iI1,IlllIi){return il1iI1!==IlllIi;},'YDFKt':iilil(0x218,'dgnA'),'pRTZD':iilil(0x25e,'To0M'),'DetTQ':'NfsIt','gTblT':iilil(0x36f,'jKD['),'sVOnh':iilil(0x2b4,'5KEt')};if($[iilil(0x2fb,'To0M')]||$[iilil(0x1f1,'E7id')])return;let i1i11l=$[iilil(0x2f6,'58Lu')],i1i11i={},II11l1=llIli[iilil(0x1f9,'fZfu')];switch(i1l1Il){case iilil(0x317,'3b(A'):i1i11l+='/front/setMixNick',i1i11i='strTMMixNick='+$[iilil(0x3b0,'eMlC')]+'&userId='+$['venderId']+'&source=01';break;case iilil(0x253,'6Et$'):i1i11l+=iilil(0x236,'ArUi'),i1i11i='userId='+$['venderId'];break;case llIli[iilil(0x291,'vZdk')]:II11l1=iilil(0x300,'dgnA'),i1i11l+='/ql/front/showTaskDraw?id='+$[iilil(0x2fa,'FcO1')]+'&user_id='+$[iilil(0x37f,'fwWw')]+iilil(0x34d,'E7id')+sid+'&un_area='+un_area;break;case llIli[iilil(0x248,'uGqs')]:i1i11l+='/ql/front/postFrontTaskDraw',i1i11i=iilil(0x26b,'WMqf')+$[iilil(0x222,'mP@G')]+'&user_id='+$[iilil(0x354,'&tci')]+iilil(0x21f,'fZfu');break;default:console['log'](iilil(0x3ed,'nLBS')+i1l1Il);return;}const Iil1lI={'url':i1i11l,'method':II11l1,'headers':{'Accept':llIli[iilil(0x303,'E7id')],'Accept-Encoding':llIli[iilil(0x2a9,'5Ewp')],'Accept-Language':'zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7,en-GB;q=0.6','Connection':llIli['kawuq'],'Content-Type':iilil(0x246,'3PIb'),'Cookie':activityCookie[iilil(0x1e4,'PLo2')](),'Host':$[iilil(0x240,'!S5z')],'Origin':$[iilil(0x340,'^BsB')],'Referer':$['activityUrl'],'User-Agent':$['UA']},'body':i1i11i,'timeout':0x7530};llIli[iilil(0x1fa,'mP@G')](II11l1,iilil(0x1fb,'@nXw'))&&(delete Iil1lI[iilil(0x2ba,'*Q4I')],delete Iil1lI['headers'][llIli[iilil(0x2d6,'U*x#')]]);llIli[iilil(0x1e8,'TeId')](i1l1Il,'home')&&(Iil1lI[iilil(0x2c0,'eyV&')][llIli[iilil(0x32b,'!S5z')]]=iilil(0x30d,'y[W7'));const IiiliI=0x5;let iii1iI=0x0,llIll=null,il1iII=![];while(llIli[iilil(0x25f,'uGqs')](iii1iI,IiiliI)){if(llIli['ZlBUG'](llIli['YDFKt'],iilil(0x24c,'[pD8'))){I1llil[iilil(0x2e7,'VDvQ')](llIli[iilil(0x2fe,'2Lg6')]),I1llii[iilil(0x2e5,'mP@G')][iilil(0x353,'WMqf')](iilil(0x2b3,'cw)c')),lilIll['runEnd']=!![];return;}else{if(iii1iI>0x0){if(llIli[iilil(0x339,'eMlC')]!==iilil(0x2af,'jKD['))await $[iilil(0x1f3,'eMlC')](0x3e8);else{i1illI['log'](iilil(0x2ca,'aAX1')+i1IIl[iilil(0x349,'VDvQ')]+iilil(0x3a1,'fZfu')),I1lll1['message'][iilil(0x2d3,'u6VW')]('活动尚未开始，开始时间：'+i1IIi[iilil(0x2c6,'U*x#')]),IIII1I[iilil(0x2d1,'&tci')]=!![];return;}}const i1l1Ii=await common[iilil(0x320,'mP@G')](Iil1lI);if(!i1l1Ii[iilil(0x3bc,'@nXw')]){llIll=iilil(0x2c1,'2Lg6')+i1l1Il+'\x20请求失败\x20➜\x20'+i1l1Ii[iilil(0x202,'aAX1')],iii1iI++;continue;}if(!i1l1Ii?.[iilil(0x365,'eyV&')]){if(llIli['DetTQ']!==llIli[iilil(0x2ac,'eMlC')])Iliil1+='\x0a\x20\x20'+i1III+Ii1iIi[iliIIl]+'['+(llIli[iilil(0x200,'[pD8')](Ii1iIl,0x1)?'剩余'+iliIIi+'件':llIli['WbTDA'])+']';else{llIll=iilil(0x25d,'u6VW')+i1l1Il+'\x20请求失败\x20➜\x20无响应数据',iii1iI++;continue;}}const I1iIIi=common[iilil(0x378,'Bqx)')](i1l1Ii,activityCookie);[llIli[iilil(0x3b4,'5KEt')]][iilil(0x391,'3b(A')](i1l1Il)&&(llIli[iilil(0x245,'5Ewp')](iilil(0x3aa,'TeId'),iilil(0x1f0,'!S5z'))?activityCookie=I1iIIi:I11iII['log']('❓'+I1ilIi+'\x20'+IiiiI[iilil(0x35f,'TeId')](llIlli)));handleResponse(i1l1Il,i1l1Ii['data']),il1iII=![];break;}}llIli[iilil(0x25c,'$4Wy')](iii1iI,IiiliI)&&(console['log'](llIll),il1iII&&(llIli[iilil(0x369,'tr[*')]===llIli[iilil(0x2ef,'uGqs')]?($[iilil(0x3c2,'5Ewp')]=!![],$[iilil(0x2e4,'OUWF')]&&$[iilil(0x2f7,'jKD[')][iilil(0x2f1,'^BsB')](llIll)):i1ilil=!![]));}var version_ = 'jsjiami.com.v7';

// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
