/*
活动名称：卡点618赢手机

cron:1 1 1 1 *
*/

const $ = new Env('卡点618赢手机')
var iｉl='jsjiami.com.v7';function iii1II(_0x74da4b,_0x299683){const _0x1875be=Iii11l();return iii1II=function(_0x33c1a9,_0x468fea){_0x33c1a9=_0x33c1a9-0xe4;let _0x9e797a=_0x1875be[_0x33c1a9];if(iii1II['ZmDTNc']===undefined){var _0x2d87c5=function(_0x41c034){const _0x52dd0d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3d794e='',_0x1dbf29='';for(let _0x13070f=0x0,_0x2c3c7f,_0x5986c5,_0x3f544f=0x0;_0x5986c5=_0x41c034['charAt'](_0x3f544f++);~_0x5986c5&&(_0x2c3c7f=_0x13070f%0x4?_0x2c3c7f*0x40+_0x5986c5:_0x5986c5,_0x13070f++%0x4)?_0x3d794e+=String['fromCharCode'](0xff&_0x2c3c7f>>(-0x2*_0x13070f&0x6)):0x0){_0x5986c5=_0x52dd0d['indexOf'](_0x5986c5);}for(let _0x5dcfb8=0x0,_0x3e08eb=_0x3d794e['length'];_0x5dcfb8<_0x3e08eb;_0x5dcfb8++){_0x1dbf29+='%'+('00'+_0x3d794e['charCodeAt'](_0x5dcfb8)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1dbf29);};const _0x4b4f3a=function(_0x6b33bf,_0x4cab67){let _0x2d2e60=[],_0x35cd6d=0x0,_0x1ed8ad,_0x3c490f='';_0x6b33bf=_0x2d87c5(_0x6b33bf);let _0x1cbd36;for(_0x1cbd36=0x0;_0x1cbd36<0x100;_0x1cbd36++){_0x2d2e60[_0x1cbd36]=_0x1cbd36;}for(_0x1cbd36=0x0;_0x1cbd36<0x100;_0x1cbd36++){_0x35cd6d=(_0x35cd6d+_0x2d2e60[_0x1cbd36]+_0x4cab67['charCodeAt'](_0x1cbd36%_0x4cab67['length']))%0x100,_0x1ed8ad=_0x2d2e60[_0x1cbd36],_0x2d2e60[_0x1cbd36]=_0x2d2e60[_0x35cd6d],_0x2d2e60[_0x35cd6d]=_0x1ed8ad;}_0x1cbd36=0x0,_0x35cd6d=0x0;for(let _0xb01636=0x0;_0xb01636<_0x6b33bf['length'];_0xb01636++){_0x1cbd36=(_0x1cbd36+0x1)%0x100,_0x35cd6d=(_0x35cd6d+_0x2d2e60[_0x1cbd36])%0x100,_0x1ed8ad=_0x2d2e60[_0x1cbd36],_0x2d2e60[_0x1cbd36]=_0x2d2e60[_0x35cd6d],_0x2d2e60[_0x35cd6d]=_0x1ed8ad,_0x3c490f+=String['fromCharCode'](_0x6b33bf['charCodeAt'](_0xb01636)^_0x2d2e60[(_0x2d2e60[_0x1cbd36]+_0x2d2e60[_0x35cd6d])%0x100]);}return _0x3c490f;};iii1II['jleizG']=_0x4b4f3a,_0x74da4b=arguments,iii1II['ZmDTNc']=!![];}const _0x33157e=_0x1875be[0x0],_0x3ba0e3=_0x33c1a9+_0x33157e,_0x31cd95=_0x74da4b[_0x3ba0e3];return!_0x31cd95?(iii1II['qnurDD']===undefined&&(iii1II['qnurDD']=!![]),_0x9e797a=iii1II['jleizG'](_0x9e797a,_0x468fea),_0x74da4b[_0x3ba0e3]=_0x9e797a):_0x9e797a=_0x31cd95,_0x9e797a;},iii1II(_0x74da4b,_0x299683);}const II1iI=iii1II;(function(llI1I1,IlIlil,lIli1I,II1il,lllI11,I1lIll,I1lIli){return llI1I1=llI1I1>>0x7,I1lIll='hs',I1lIli='hs',function(II1ii,IIIIII,lillII,ii1ilI,lI1ll1){const ii1ill=iii1II;ii1ilI='tfi',I1lIll=ii1ilI+I1lIll,lI1ll1='up',I1lIli+=lI1ll1,I1lIll=lillII(I1lIll),I1lIli=lillII(I1lIli),lillII=0x0;const iIiI1=II1ii();while(!![]&&--II1il+IIIIII){try{ii1ilI=parseInt(ii1ill(0x109,')JaW'))/0x1*(-parseInt(ii1ill(0x1e9,'nL5U'))/0x2)+-parseInt(ii1ill(0x196,'5&GG'))/0x3*(parseInt(ii1ill(0x1a1,'fJeV'))/0x4)+parseInt(ii1ill(0x15d,'S@1L'))/0x5*(-parseInt(ii1ill(0x132,'ZEqS'))/0x6)+-parseInt(ii1ill(0x163,'K1&5'))/0x7*(-parseInt(ii1ill(0xf2,'&*Jq'))/0x8)+parseInt(ii1ill(0x1b1,'nvM3'))/0x9+parseInt(ii1ill(0x212,'nu!W'))/0xa*(parseInt(ii1ill(0x12f,'HNaH'))/0xb)+parseInt(ii1ill(0x137,'xVRx'))/0xc*(parseInt(ii1ill(0x19d,'LIOG'))/0xd);}catch(liil1I){ii1ilI=lillII;}finally{lI1ll1=iIiI1[I1lIll]();if(llI1I1<=II1il)lillII?lllI11?ii1ilI=lI1ll1:lllI11=lI1ll1:lillII=lI1ll1;else{if(lillII==lllI11['replace'](/[wxreLRNnyDHtlJdqATGbpYV=]/g,'')){if(ii1ilI===IIIIII){iIiI1['un'+I1lIll](lI1ll1);break;}iIiI1[I1lIli](lI1ll1);}}}}}(lIli1I,IlIlil,function(i11ii1,IlIliI,l1iII1,iiill1,lIli1i,IIIII1,I1lIlI){return IlIliI='\x73\x70\x6c\x69\x74',i11ii1=arguments[0x0],i11ii1=i11ii1[IlIliI](''),l1iII1=`\x72\x65\x76\x65\x72\x73\x65`,i11ii1=i11ii1[l1iII1]('\x76'),iiill1=`\x6a\x6f\x69\x6e`,(0x16d6c9,i11ii1[iiill1](''));});}(0x5e00,0x7d3b0,Iii11l,0xbe),Iii11l)&&(iｉl=0x1493);const jdCookie=require(II1iI(0x1ae,'dfGH')),common=require('./utils/Rebels_jdCommon'),notify=require(II1iI(0x157,')JaW')),getToken=require('./utils/Rebels_Token'),isNotify=![];let domains=II1iI(0x20d,'4rf$'),cookie='',originCookie='';const cookiesArr=Object[II1iI(0x184,'nu!W')](jdCookie)[II1iI(0x101,'ksWw')](iI11Ii=>jdCookie[iI11Ii])[II1iI(0x13a,'V%6v')](iIII1l=>iIII1l);!cookiesArr[0x0]&&($['msg']($[II1iI(0x1cd,'h(QM')],II1iI(0x117,'nL5U')),process[II1iI(0x165,'scLr')](0x1));!(async()=>{const llI1II=II1iI,lllil={'VqWTh':llI1II(0x11f,'fJeV'),'QkQaA':'phone-618-api','afXaR':function(iI11Il,iIII1i){return iI11Il<iIII1i;},'kZqRG':function(iil1i1,il1i11){return iil1i1!==il1i11;},'oGHTP':function(IlIll1,IlIII){return IlIll1+IlIII;},'ppFTD':function(ilil1l,illlIi){return ilil1l(illlIi);},'JQfDb':llI1II(0x231,'*JLs'),'kZiPc':function(I1lIii){return I1lIii();}};$['activityUrl']=llI1II(0x1e4,'ZEqS'),$['act_type']=lllil['QkQaA'],$[llI1II(0x13b,'tZ*H')]=llI1II(0x14f,')JaW'),notify[llI1II(0x1c4,'ksWw')]({'title':$[llI1II(0xfc,'pbzM')]});for(let IiI1I=0x0;lllil[llI1II(0x14e,'u#Gt')](IiI1I,cookiesArr['length']);IiI1I++){if(lllil['kZqRG'](llI1II(0x239,'a4fj'),llI1II(0x189,'lOqM'))){$[llI1II(0x204,'71*F')]=lllil[llI1II(0x1c1,'qjPM')](IiI1I,0x1),cookie=cookiesArr[IiI1I],originCookie=cookiesArr[IiI1I],common[llI1II(0x152,')JaW')](originCookie),$['UserName']=lllil[llI1II(0x1ce,'JJMM')](decodeURIComponent,common[llI1II(0x135,'K1&5')](cookie,lllil[llI1II(0x225,'nu!W')])),$['UA']=common[llI1II(0x1db,'Mh#8')]($[llI1II(0x1ad,'nvM3')]),$[llI1II(0x20a,'$vRQ')]=notify[llI1II(0x175,'xVRx')]($[llI1II(0x10a,'h)cD')],$[llI1II(0x147,'JJMM')]),$[llI1II(0xfb,'dfGH')]='',console[llI1II(0xeb,'#1At')](llI1II(0x16f,'JuUT')+$['index']+'】'+($[llI1II(0x1b5,'J1(U')]||$[llI1II(0xff,'$vRQ')])+llI1II(0x18c,'[z(z')),await lllil['kZiPc'](Main),common[llI1II(0x162,'fJeV')]();if($[llI1II(0x166,'qjPM')]||$[llI1II(0x14c,'rIwb')])break;await $['wait'](0x3e8);}else{IIII1l[llI1II(0x100,')iQz')](lllil['VqWTh']),i1ili1['message'][llI1II(0x1dd,'ksWw')](llI1II(0x237,'LIOG'));return;}}isNotify&&notify[llI1II(0x1c6,'#1At')]()&&(notify[llI1II(0x19c,'nu!W')](llI1II(0xfd,'LIOG')+$['activityUrl']),await notify['push']());})()[II1iI(0x17b,')V9V')](i11ill=>$[II1iI(0x194,'fJeV')](i11ill))['finally'](()=>$[II1iI(0x183,'K1&5')]());async function Main(){const lIli1l=II1iI,IIIIIi={'FasNk':function(IIIIIl,I1lIil,IIIl1i){return IIIIIl(I1lIil,IIIl1i);},'aTHmU':function(liiII1,IIIl1l){return liiII1(IIIl1l);},'WOSWA':'auth','DFRJU':'未能获取用户鉴权信息','cWpdz':'OyjWM','VFSNx':lIli1l(0x140,'71*F'),'cTTgf':function(lllll,i11ili){return lllll>=i11ili;},'vmOHT':function(iil1l1,lllli){return iil1l1===lllli;},'eKIxk':lIli1l(0x142,'*JLs'),'AokJH':function(iiili1,ill11i){return iiili1==ill11i;},'IKwue':lIli1l(0x156,'a@O['),'gBeLt':function(lllill,ill11l){return lllill(ill11l);},'mEKwM':function(I1lIiI,lllili){return I1lIiI(lllili);},'aGNEl':'xAoHw','ZIYEj':lIli1l(0x149,'#1At'),'lYEPq':lIli1l(0x1d8,'JuUT'),'ItELo':'end_game','LtVtw':function(IliiiI,Ill11){return IliiiI>Ill11;}};try{$[lIli1l(0x1c2,'#[Dk')]=![],$['drawStop']=![],$['mapsign']=![],$[lIli1l(0x16d,'h)cD')]='';if($['runEnd']||$[lIli1l(0x160,'w!yU')])return;$[lIli1l(0x1a5,'ksWw')]=await IIIIIi[lIli1l(0x180,'nu!W')](getToken,originCookie,domains);if(!$[lIli1l(0x1e2,'scLr')]){console[lIli1l(0x19b,'reJJ')](lIli1l(0x113,'h)cD')),$[lIli1l(0x122,'a4fj')][lIli1l(0x10e,'&*Jq')](lIli1l(0x17c,'*JLs'));return;}await IIIIIi[lIli1l(0x126,'tZ*H')](sendRequest,IIIIIi[lIli1l(0x1e6,'tHuc')]);if($['runEnd']||$['outFlag']||$[lIli1l(0x215,'ZEqS')])return;if(!$[lIli1l(0x1af,')iQz')]){console[lIli1l(0x1aa,'u#Gt')]('未能获取用户鉴权信息！'),$[lIli1l(0x1c5,'ZEqS')][lIli1l(0x120,')V9V')](IIIIIi[lIli1l(0x150,'Mh#8')]);return;}$[lIli1l(0x12d,'43M1')]='',await IIIIIi[lIli1l(0x1ff,'5&GG')](sendRequest,'get_user_info');if($['runEnd']||$['outFlag']||$[lIli1l(0x144,'xVNY')])return;await $[lIli1l(0x1ee,'xVNY')](0x3e8);!$[lIli1l(0x230,'V%6v')]&&(IIIIIi['cWpdz']==='tmvQK'?(IiII[lIli1l(0x114,'ksWw')]=!![],llIIli[lIli1l(0x210,')JaW')](''+lIII1I[lIli1l(0x11d,'5&GG')][lIli1l(0x235,'h(QM')])):($[lIli1l(0x1f4,'F^08')]=!![],console[lIli1l(0x1a8,'Gqd$')](lIli1l(0x14b,'*JLs')),notify[lIli1l(0x223,'JJMM')](lIli1l(0x1fc,'lWt6'))));$['task_list']=[],await sendRequest(IIIIIi[lIli1l(0x11c,'S@1L')]);for(let li1i11 of $['task_list']||[]){if(IIIIIi['cTTgf'](li1i11[lIli1l(0x216,'nvM3')],li1i11[lIli1l(0x1de,'u#Gt')]))continue;for(let iI11I1 of(li1i11?.['item_list']||[])['filter'](il1i1l=>il1i1l[lIli1l(0xe9,'ksWw')]==0x0)){if(IIIIIi[lIli1l(0x21c,'fJeV')](lIli1l(0x12e,'V%6v'),IIIIIi['eKIxk']))li1II[lIli1l(0x15e,'fJeV')](''+IliI11[lIli1l(0x107,'tZ*H')]);else{$['task']=li1i11,$[lIli1l(0x1b6,'JJMM')]=iI11I1;if(IIIIIi['AokJH'](li1i11[lIli1l(0x168,'lWt6')],0x5)){const IIIl1I=IIIIIi[lIli1l(0x1fd,'ZEqS')]['split']('|');let iil1ii=0x0;while(!![]){switch(IIIl1I[iil1ii++]){case'0':if(li1i11[lIli1l(0x10d,'scLr')])await $[lIli1l(0x12c,'43M1')](li1i11[lIli1l(0x208,'rIwb')]*0x3e8);continue;case'1':await $[lIli1l(0x186,'nL5U')](0x3e8);continue;case'2':await IIIIIi['gBeLt'](sendRequest,'catch_task');continue;case'3':await sendRequest(lIli1l(0x1ec,'F^08'));continue;case'4':await $[lIli1l(0x228,'JuUT')](0x3e8);continue;}break;}}await sendRequest(lIli1l(0x1ec,'F^08')),await $[lIli1l(0x186,'nL5U')](0x3e8);}}}await IIIIIi['mEKwM'](sendRequest,lIli1l(0x1dc,'fJeV'));if($[lIli1l(0x22c,'pbzM')]||$[lIli1l(0x1e5,'lWt6')]||$['skipRun'])return;await $[lIli1l(0x220,'fJeV')](0x3e8),$['num']=$[lIli1l(0x201,'w!yU')][lIli1l(0x21a,'&*Jq')],console['log'](lIli1l(0x164,')iQz')+$[lIli1l(0x1ef,'$vRQ')]+'次');while($[lIli1l(0x14d,'*JLs')]-->0x0){IIIIIi[lIli1l(0x177,'scLr')]===IIIIIi['ZIYEj']?iliIIi[lIli1l(0x100,')iQz')](''+ill11I['msg']):(await sendRequest(IIIIIi[lIli1l(0xee,'nu!W')]),await $[lIli1l(0x1a0,'ZEqS')](0x3e8),$['is_key']&&(await sendRequest(IIIIIi['ItELo']),await $[lIli1l(0x1cb,'S@1L')](0x3e8)));}await sendRequest(lIli1l(0x201,'w!yU'));if($[lIli1l(0x108,'J]3q')]||$['outFlag']||$['skipRun'])return;await $[lIli1l(0x1ee,'xVNY')](0x3e8),$[lIli1l(0x238,'nL5U')]=Math['floor']($['get_user_info']['star']/0x64),console['log'](lIli1l(0x143,'LIOG')+$['star']+'次');while(IIIIIi[lIli1l(0x18d,'J]3q')]($[lIli1l(0x238,'nL5U')]--,0x0)&&!$[lIli1l(0x13c,')JaW')]){await sendRequest(lIli1l(0x129,'#1At')),await $[lIli1l(0xf1,'reJJ')](0x3e8);}}catch(il1i1i){console['log']('❌\x20脚本运行遇到了错误\x0a'+il1i1i);}}async function handleResponse(lil111,i11ilI){const lillIi=II1iI,ii1ii1={'XIpcD':function(llllI,lllil1){return llllI!==lllil1;},'nTrbc':lillIi(0x123,'h(QM'),'TifSD':'RMacX','dJOrp':function(iil1il,ilil1I){return iil1il===ilil1I;},'PUuBY':function(i11il1,ii1iiI){return i11il1!==ii1iiI;},'Iruuv':lillIi(0x112,'Mh#8'),'gNamN':lillIi(0x1a4,'xVNY'),'Epvic':'catch_task','KTNOk':lillIi(0x21d,'JuUT'),'btCap':lillIi(0x11e,'w!yU'),'EfgGn':lillIi(0x15b,'lWt6'),'cVqor':'opMWJ','eDBqr':'lottery','kOFDW':lillIi(0x154,'qjPM'),'GIkAa':lillIi(0x1eb,'lWt6')};try{switch(lil111){case lillIi(0x15c,'J1(U'):if(i11ilI)$[lillIi(0x1a3,'41!8')]=i11ilI;else i11ilI[lillIi(0x110,'nvM3')]?ii1ii1[lillIi(0xf8,'a4fj')](lillIi(0x1f9,'h(QM'),ii1ii1[lillIi(0x12b,'#[Dk')])?console[lillIi(0xed,'a@O[')](''+i11ilI['msg']):I1iIll['is_key']=I1lliI?.[lillIi(0x1be,'*JLs')](/"/g,''):ii1ii1[lillIi(0x1bc,'h)cD')]===lillIi(0x10f,')JaW')?lIIiii[lillIi(0x1d2,'J]3q')](''+iI1lli[lillIi(0x229,'[z(z')]):($['skipRun']=!![],console['log']('❓'+lil111+'\x20'+JSON['stringify'](i11ilI)));break;case lillIi(0x20e,'dfGH'):if(i11ilI&&ii1ii1[lillIi(0x136,'LIOG')](i11ilI[lillIi(0x15a,'#1At')],0x0))$['token']=i11ilI[lillIi(0xe7,'K1&5')][lillIi(0x22a,'rIwb')],$[lillIi(0x1b4,'lOqM')]=i11ilI[lillIi(0x1e1,'tHuc')][lillIi(0x1d1,'[z(z')];else i11ilI['msg']?ii1ii1[lillIi(0x1fe,'43M1')](lillIi(0xea,'lWt6'),lillIi(0x173,'a4fj'))?(delete llIlli[lillIi(0x127,'#1At')],delete llIlll[lillIi(0x138,'[z(z')][lillIi(0x197,'4rf$')]):console[lillIi(0x22d,'Mh#8')](''+i11ilI[lillIi(0x1f3,')V9V')]):ii1ii1[lillIi(0x211,'4rf$')](ii1ii1['Iruuv'],ii1ii1[lillIi(0x125,'K1&5')])?(iIIl1l[lillIi(0xe6,'4rf$')]=!![],llIli1['log']('❓'+iliIII+'\x20'+iIIl1i[lillIi(0x187,'ZEqS')](I1lllI))):($['skipRun']=!![],console[lillIi(0x1f7,'5&GG')]('❓'+lil111+'\x20'+JSON[lillIi(0x236,'#[Dk')](i11ilI)));break;case'task_list':if(i11ilI)$['task_list']=i11ilI[lillIi(0x17d,'&*Jq')];else i11ilI['msg']?console['log'](''+i11ilI[lillIi(0x1f3,')V9V')]):ii1ii1[lillIi(0x22e,'nu!W')]===lillIi(0x1ea,'a@O[')?l1iiI['log'](lillIi(0x13f,'#1At')+ll1li+lillIi(0x1b7,'JJMM')+(Illl1I[lillIi(0x122,'a4fj')]||lliiiI)):console[lillIi(0xef,')V9V')]('❓'+lil111+'\x20'+JSON[lillIi(0x153,'nL5U')](i11ilI));break;case ii1ii1[lillIi(0x219,'lOqM')]:if(i11ilI){}else i11ilI[lillIi(0x1f3,')V9V')]?console[lillIi(0x19e,'F^08')](''+i11ilI['msg']):console['log']('❓'+lil111+'\x20'+JSON[lillIi(0x1c3,'Mh#8')](i11ilI));break;case ii1ii1[lillIi(0x221,'h(QM')]:if(i11ilI)console[lillIi(0x18b,'w!yU')]('完成任务['+$[lillIi(0x1ed,'lOqM')][lillIi(0x1c7,'F^08')]+']成功');else i11ilI[lillIi(0x1b0,')JaW')]?console[lillIi(0x1bd,'$vRQ')](''+i11ilI['msg']):console['log']('❓'+lil111+'\x20'+JSON[lillIi(0x130,'K1&5')](i11ilI));break;case ii1ii1['btCap']:if(i11ilI)$[lillIi(0x232,'xVRx')]=i11ilI?.[lillIi(0x131,'S@1L')](/"/g,'');else i11ilI[lillIi(0x1bf,'J1(U')]?console[lillIi(0x210,')JaW')](''+i11ilI[lillIi(0x1fa,'ZEqS')]):'rFVtx'==='Hdhfy'?lilIli[lillIi(0xef,')V9V')]('❓'+Iliili+'\x20'+Iliill[lillIi(0x151,'nvM3')](IIII11)):console[lillIi(0x218,'xVNY')]('❓'+lil111+'\x20'+JSON['stringify'](i11ilI));break;case'end_game':if(i11ilI)ii1ii1[lillIi(0x18a,'tHuc')]!=='yCmeK'?IiiIil(IiiIii,IIlll[lillIi(0x188,'JuUT')]):ii1ii1[lillIi(0x1f1,'ksWw')](i11ilI?.[lillIi(0x1ca,'Mh#8')]['length'],0x0)?console['log'](lillIi(0x22b,'[z(z')+i11ilI?.[lillIi(0x118,'lWt6')]['prize_name']+'\x20x\x20'+i11ilI?.[lillIi(0x174,'dfGH')][lillIi(0x1cc,'fJeV')][lillIi(0x207,'h(QM')]):console[lillIi(0x1a6,'nL5U')](lillIi(0x1e8,'rIwb'));else i11ilI['msg']?console['log'](''+i11ilI[lillIi(0x119,'a@O[')]):ii1ii1['cVqor']!==lillIi(0x13d,'Mh#8')?console['log']('❓'+lil111+'\x20'+JSON[lillIi(0x20b,'JuUT')](i11ilI)):iIIII1[lillIi(0x133,'scLr')](''+i1l1ll[lillIi(0x1bb,'nu!W')]);break;case ii1ii1[lillIi(0x21b,'ksWw')]:if(i11ilI)ii1ii1['kOFDW']===lillIi(0xf9,'J1(U')?(i1lI['token']=IlI1l['body'][lillIi(0x170,'$vRQ')],lilIil[lillIi(0x1c8,'43M1')]=i1l11[lillIi(0x214,'dfGH')][lillIi(0x1d1,'[z(z')]):i11ilI?.[lillIi(0x146,'41!8')][lillIi(0xf4,'K1&5')]!==0x0?console['log'](lillIi(0x1a9,'tHuc')+i11ilI?.[lillIi(0x158,'[z(z')]['prize_name']+lillIi(0x182,'a4fj')+i11ilI?.[lillIi(0x104,'xVRx')][lillIi(0x179,')iQz')][lillIi(0x1f8,'J]3q')]):console[lillIi(0x1a6,'nL5U')]('抽奖获得：💨\x20空气');else i11ilI[lillIi(0x1e3,'Gqd$')]?console[lillIi(0x1a8,'Gqd$')](''+i11ilI['msg']):ii1ii1[lillIi(0x1c0,'xVNY')](lillIi(0x148,'HNaH'),ii1ii1[lillIi(0x16c,'a4fj')])?console[lillIi(0x1ab,'xVRx')]('❓'+lil111+'\x20'+JSON[lillIi(0xfa,'xVRx')](i11ilI)):I1iIl1['log'](lillIi(0x1ba,'fJeV')+i1il);break;}}catch(iiilil){ii1ii1[lillIi(0x155,'xVNY')](lillIi(0x1fb,'Gqd$'),'cBnUL')?console['log'](lillIi(0x145,'reJJ')+lil111+lillIi(0x200,'ZEqS')+(iiilil['message']||iiilil)):i1illI['log']('❓'+i1IIl+'\x20'+I1lll1['stringify'](i1IIi));}}async function sendRequest(lillIl){const illIi1=II1iI,iIiIl={'OykQZ':illIi1(0x14a,'xVNY'),'Ercmk':illIi1(0x10c,'Mh#8'),'oOjXK':'catch_task','fKIUC':illIi1(0xe5,'&*Jq'),'DtGqX':'gzip,\x20deflate,\x20br','pNQSh':illIi1(0x195,'pbzM'),'vbBSk':illIi1(0x181,'Mh#8'),'zaJUk':'https://prodev.m.jd.com/mall/active/YmnvFMFScYFCuZMKJXiMz5EiDPR/index.html','VGUrm':function(Ill1l,llI1Il){return Ill1l+llI1Il;},'QmIKQ':illIi1(0xfe,'V%6v'),'JDafU':'DGiyh','Kcfjv':illIi1(0x17a,'#[Dk'),'xCCYO':function(ii1iii,i11iil){return ii1iii===i11iil;},'GLrXX':function(Ill1i,ii1iil,lllI1l){return Ill1i(ii1iil,lllI1l);},'zvpab':function(i11iii,llI1Ii){return i11iii===llI1Ii;},'buBcA':function(lllI1i,li1i1l){return lllI1i!==li1i1l;},'BPuAP':illIi1(0x169,'a4fj'),'LjQpq':function(II1i1,lI1lll){return II1i1===lI1lll;},'peLUz':illIi1(0x233,'h)cD')};if($['runEnd']||$[illIi1(0x17f,'nL5U')])return;let iiilii=iIiIl[illIi1(0x18e,'nu!W')],li1i1i='',IlIli1='POST';switch(lillIl){case'auth':iiilii+='/auth/jos',li1i1i=illIi1(0x17e,'a@O[')+$[illIi1(0x1c9,'43M1')]+illIi1(0x234,'4rf$');break;case iIiIl[illIi1(0xf7,'71*F')]:IlIli1='GET',iiilii+='/'+$[illIi1(0xf5,'u#Gt')]+illIi1(0x111,'reJJ');break;case'task_list':IlIli1=illIi1(0x1b9,'ZEqS'),iiilii+='/'+$[illIi1(0x185,'ZEqS')]+'/task_list';break;case iIiIl[illIi1(0x217,')V9V')]:iiilii+='/'+$[illIi1(0x12a,'[z(z')]+illIi1(0x1d3,'S@1L'),li1i1i='token='+$[illIi1(0x139,'4rf$')][illIi1(0x1d5,'h)cD')];break;case illIi1(0x227,'$vRQ'):iiilii+='/'+$['act_type']+illIi1(0x116,'#[Dk'),li1i1i='token='+$[illIi1(0x213,'w!yU')][illIi1(0x226,'JJMM')]+illIi1(0x20f,')V9V');break;case illIi1(0xec,'LIOG'):iiilii+='/'+$[illIi1(0x205,'tHuc')]+illIi1(0x1d4,'JuUT');break;case iIiIl[illIi1(0x134,'ZEqS')]:iiilii+='/'+$['act_type']+illIi1(0x1f5,'ZEqS'),li1i1i='value=618&sign='+$[illIi1(0x10b,'ZEqS')];break;case'lottery':iiilii+='/'+$[illIi1(0x12a,'[z(z')]+'/lottery';break;default:console[illIi1(0x192,'nu!W')](illIi1(0x115,'S@1L')+lillIl);return;}const illIiI={'url':iiilii,'method':IlIli1,'headers':{'Host':illIi1(0x178,'xVNY'),'Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':iIiIl[illIi1(0x190,'tZ*H')],'App-Key':$[illIi1(0x191,')V9V')],'Accept-Language':iIiIl['pNQSh'],'Content-Type':iIiIl[illIi1(0x11b,'nvM3')],'Origin':illIi1(0x105,'lWt6'),'Referer':iIiIl[illIi1(0x1e7,'Gqd$')],'User-Agent':$['UA'],'X-Requested-With':'com.jingdong.app.mall'},'body':li1i1i,'timeout':0x7530};$[illIi1(0x1e0,'ksWw')]&&(illIiI[illIi1(0x159,'lOqM')][illIi1(0x20c,'V%6v')]=iIiIl[illIi1(0x222,'41!8')]($[illIi1(0x224,'xVRx')],$[illIi1(0x176,'HNaH')]));IlIli1===iIiIl[illIi1(0x1d9,'scLr')]&&(iIiIl['JDafU']===illIi1(0x128,'tZ*H')?(delete illIiI[illIi1(0x167,'scLr')],delete illIiI[illIi1(0x1f6,'ksWw')][iIiIl[illIi1(0x124,'J1(U')]]):['终点']['some'](iil1lI=>lilIi[illIi1(0x1f0,'[z(z')]['message'][illIi1(0x106,'nL5U')](iil1lI))&&(l1l11I[illIi1(0x206,'xVRx')]=!![],lilIl[illIi1(0x22d,'Mh#8')](''+IilIlI[illIi1(0x22f,'Mh#8')][illIi1(0x18f,'reJJ')])));const lI1lli=await common[illIi1(0xf3,'#[Dk')](illIiI);if(iIiIl[illIi1(0x103,'JuUT')](lI1lli['status'],0xc8))iIiIl[illIi1(0x198,'nvM3')](handleResponse,lillIl,lI1lli[illIi1(0x1d0,'rIwb')]);else{if(iIiIl['zvpab'](lI1lli[illIi1(0x16e,'LIOG')],0x1a6))iIiIl['buBcA'](iIiIl['BPuAP'],illIi1(0x102,'ksWw'))?Illl1i?.[illIi1(0x1da,'JJMM')][illIi1(0xf6,'F^08')]!==0x0?IiiIli['log']('抽奖获得：'+iillli?.['prize'][illIi1(0x13e,'h(QM')]+illIi1(0x1ac,'fJeV')+I1l1Ii?.['prize']['prize_info'][illIi1(0x172,')iQz')]):I1i11i[illIi1(0x19e,'F^08')](illIi1(0x202,'JuUT')):['终点'][illIi1(0x141,'4rf$')](li1i1I=>lI1lli[illIi1(0x16a,'*JLs')][illIi1(0x21f,'5&GG')][illIi1(0x209,'pbzM')](li1i1I))&&($['drawStop']=!![],console[illIi1(0x19b,'reJJ')](''+lI1lli['data']['message']));else{if(lI1lli[illIi1(0x193,'a@O[')]===0x1a6)['终点'][illIi1(0x1a2,'Mh#8')](illIii=>lI1lli[illIi1(0xe4,'ZEqS')]['message'][illIi1(0x1b8,'ksWw')](illIii))&&($[illIi1(0x161,')V9V')]=!![],console[illIi1(0x1ab,'xVRx')](''+lI1lli['data'][illIi1(0x171,'41!8')]));else{if(lI1lli['status']===0xcc){}else{if(iIiIl[illIi1(0x203,'71*F')](lI1lli['status'],0x193))console[illIi1(0x1d7,'JuUT')](illIi1(0xe8,'xVRx')),$[illIi1(0x1b3,'HNaH')]=!![];else lI1lli[illIi1(0x121,'xVNY')]&&(iIiIl[illIi1(0x1f2,'#[Dk')]==='epmCN'?ll1ii[illIi1(0x1aa,'u#Gt')]('❓'+IIli11+'\x20'+IllIII[illIi1(0x16b,'[z(z')](ii1li)):console['log'](illIi1(0x1b2,'w!yU')+lillIl+illIi1(0x21e,'tHuc')+lI1lli['error']));}}}}}function Iii11l(){const ii1ili=(function(){return[...[iｉl,'VDyjLqxsjNiamYTiGJ.pcntowlme.RqNvb7dHArT==','z8olWQhcHG9muW','AYNdK8kq','WOhdHmogha','qCohmG','WOZcTK3dKq','WPFcOCkjW6dcMW','WOb0EslcJG','WRpcISk4','A8ofWO3cOHXwvH0eWOxcP8o8ecldPW','WQ0Jah3cPL3cRxNdV1C5tmoVeSk3W50uxCo8W5q','WQ/cKCkDW4BcP8oPW78','hwbd','W4ldO0O7jG','hdldS8oDWQi','W681cq','WOtcS2v8sq','5Rs15yQ65zod56EE77+V5y6s54gUyCoWdUI0G+AlJUACJG','W4SngwZcNa','q8k9WOpcLmkO','efTSWRpdGq','WQlORRhMSkZLK5tLUA0A','zSkMqZW1sCoxtCouWRBcJmkNqG','5OIV5AAM6i+L5B6e772J8kEGP8oB56IU5Rc4','wmowsSoQwG','FCosF8o/uW','WORcKmoBcf7dUCojW54','vKbBb8opedddUW','jc/dVCobWOO','WQvsC8kjW6q','W5a7ACoaWOecC8od','qSoxlbZcPSobW7W','W6hcHcb6fWtdPSkDlq','WPpcLCkasd3cT3tdUdJcR38bW6C','W6fAW6NcJSk5DchdJeNdN0xdUWfJW77cKXtdVCopW5fadSoeWOHLWOGaFSovWOGbWOy','lmkYcSkT','W7JcK8k7W6tcQ8kzbxPNv39Pea','o8kXW5i','W5fNW63cNCko','WRGblSoHuv3dJmkiWQxcMwG','CSk2vtW0w8obva','l8kOgSk8','W7eTb2NcQ0/cOG','W4NcU8olW5tcGcfZWOZdP8oD','WRhcTSk1W6pcKW','WPRdISoi','wJJdLSksDq','ymoFW6iXFW','WQlcSmk+W5pcSa','qSoBWOSEEG','W7BcNW1NgbddPa','W4VORitMS63LPABOTi/cOokCPCkB','hgPxWQ3dTsBcNa','q8oxWQ0I','hG7dNmo6WOa','EmohWPrhmq','EZNdKXdcLSo4uCk7WRnGWOqSWRa','rL1rfCoYoYVdSSkJW7G','W4bOFCkuaW','BIBdIbdcLG','s8oDabVcPSovW7i','W6xcKtTN','WOxcPf4','WRbyFCkjW6v6emkEwrzaW4a','5OMv5AAb6i6o5BYN77+0','W4SGzmoPWPOc','lHVdHW','W613ESk9lW','jHxdLaK','WRRcGCkhCcdcRhpdTHJcUgiNW6FdJSkZ','W5GRvmk8lZK','w0fLg8o5hq','oH0VW4Tw','WQ9eW7NcOCk5ixVcKvldKXBcUuu','od/dOCogWOOvzq','WOnLrX7cMSoSnSoPWOe','6iYa5yYcWPpdQ3/cPmoxW6lcP+wLPUI1Ka','BCk+aG8','W73dSCosW7DC','W6yNgNG','zSoEW68aAXNcVNa','W7PfW7tcJSkyo2a','wmo0cHi','6BUJ5y+f77Y7772X776D','WQpcM8ksW4C','D2tcH0BcPa','WPGCW74','W4tcOmkPW41KWPddLCoTWPCY','W4LhBG','W6zGxSkaea','WRlcLSk4','W5JcICo4oMpdICo1','WOVdMhJdTq','o8oYW4uhzdVcLG','WOj0ralcKCo4kW','vSo+aaZdIxO','W6xdUCkrbYTjymo2','B8obWPdcLrPx','uCooEmo3qa','W5ZdK8ouW5Tr','W4BdVtKFaq','quzigCoYaZBdRCkQ','i8kUhCkUzd1MWPO','W5C0z8oj','WR3JG4tMT7pLIjFLNkdLNO/JGQm','WPxcPCkG','ESoboH3cICohW7r1','B3pdVq','WQRcLCkm','WOBcJSkiW6FcOW','W6RcSXfknG','qKbtcSo5','zMBcUL7cHSojW7H4WRLFd8o3qCkpWPVcSxtcJe7dRfhcJ8kkbrddQb4YW6FcVeFcIG','D8kKabenWOxdJ8o8'],...(function(){return[...['ka4P','W4hdO0SkkCod','ySkWW6xdNqBdTSoQ','eIyJW6fM','W6S1mxlcNem','jrhdLdFcPmkVdXtcVXZcSCkbrq','WRldMqRdG1q','zCozW7m','pmkYW6ddVIC','W4dcP8oc','W5pdNNtdTCkoWO9nAYCqW6pdHSo8yG','oZldPZZcTa','6i+m5y6Ez8oqCCknW6eZz+wKIUI1IE+8GG','WQpcHSkDW5xcKCoVW6pdLG','4P2GW5BMNlBNNy3OR7lMSyu+','W591wIJcGmoQlmoK','44co5OYA56wz44gS6k6p5yAP6iYD5y2zW6pdG8kTw8oODq','FMdcP1tcKa','W4HBBG','W6tdKSomf2RdVwFdJH3cILuL','W5VcTSoNW6lcTa','ESkWt8oMFq','fw5qWR8','CSk3vHe0zCovxSoMWRO','6i6d5y2GW6qcquRdUq/cHowNSoI2OU+/Ma','WRJcKmkN','WOxdKCoohglcMW','W6NdV8oxW4T0yKq','bHtdUmo/WOe','W6hdLGWBaq','C8oPgX7dIW','jcKgrCkC','WPyCW73cKG','atONuCkH','WPGCW63cNYRdHmoN','WONcTe3dR8kAW4LoWRa','WP5frXxcLW','zmkjWP/cOG','DmknWOlcICkexI7dT1JdQcBdMsm','WR3cPCkKEJ0','uGjartpdRSoxW4C','sCoVhaldK3xdKuzV','xSktBmoezgr7','WRfWvIRdJqVdThNdQWmjqCoV','WQRdNWa','W6qnj0ZcUG','xCo+gIJdKN3dK0LZiwmmWRfj','W5pcNSkhW41G','bampr8kUkcZdJSkwW4O1','WOdcSLJdLmklW4jn','W7PBW7/cOCk+l33cIa','WRtcICkyvdFcTW','ja0+y8kSW7W','m8kSW5tdJItdHmoiWQW','lX7dRJ3cUG','jsJdU8opWO4TBKGxW6G','4P64u+AES+IaLUASRoEJMowMMUEsPmkq','ymoDAmoXDg/dOGOr','W7PbW7dcMW','W6CUx8kcca','5y2y5lIX5OM15AEP','WOxdJSoggexcNCo8','4P6WWPNMNlVOGBZMRRlNOPtLPlRNKiH1','xSoYWQHpoq','tZRdHGFcTSo9F8kX','b3z1Aq8','WQ0bW5pcVbW','WP7dKCoBggtdKSk9WRldVIHFqMrjW4FcKar8W6GJWRLMW7BcKtTFW5VdHL/dVJFcVG','5RAt5yU35zcg56s8772C5yY254oXW6j0yoI3I+AjM+ACTmku','WQnoCmkPW7HT','W4yQzG','W6xdVmk9oq0','h8kzW7/dLuhdN8oFWO4','bJldSIlcHa','W57cOmoxW5JcSsv1WP/dSa','jmk7W4hdUHJdN8omWRu8','BCk+erqwWOBdG8oPW5K','EdXvcCou','WQBdSmoAkK4','WPDupq3dJgJdPSojpG','ECoXW4ddJr7dNmouW7mlvIz2rYjCcaBcLCkjW5a3p8k3W4KgWRxcIW','WPJcPvddISkl','DY3dGCkFCYBcNq','WOChW7JcNZRdHq','D1hcO0VcVG','W43dKb4UaSkmWP4TFSkAzxJcVW','gCk9t8obxxzR','wmozWQm','W7pdLr0KdSkIW6VdS8oMk1C','BSk2qYuSw8ov','WRRcI8k+W4ZcI8kch3G','qCoyWRCZwMldSW7dJ8kOW6i','cmkTvLRcIItcI3vqmKyeWP0','5y+S5lU554YZ5RQ15OU3','WQpdIa7dKG','vt1Nf8oVdqK','WQtdNWpdNW','ENpcVuxcQSkhWQ4NWQq','W4xdOmoqW710','W4W+F8kT','WPVcO0VdMCkaW5DxWRny','W4pdK8opW7L0','esWtW6T1WOpdQG','W4tcOmkPW4TLWRW','WPJdMNG5u0NcPEw/U+wMN+oaVos5SEs4UoI0SowmRG','tSorpaRcTmovW4zKWQOgb8o4','q8oLWRjgpwddVW','CMNdTCo5WPK','W73dRmoTW5be','pCk1f8k/tW','uubFeCoOaq','efTzwGq','WQFdTYNdO0O','WO7dJmobgMlcGCk/W7tdTtCFwwjwWOdcMHTLWRmUW6rZW7pcNW','C27dS8o3WP1LsWDIrG'],...(function(){return['WRn+wWpcKCoLk8kIWQZdPSokWRm','WR3cMmkRW5JcSa','6iYF5y6jumkyktWTWROy5AwP6lAm','D8orW7G0','W5fhyHtcKIK','CCk/fZSuWOddJq','W4XyAmkEcG','iWtdKatcUmk/cXlcIrRcSCoiuSo8fWKUW44sd3RdKCkgWOOYWOFdICkiW5xdJSovW7nAWONdTd7dI8ohs8oJW6JcN3FcM8kPW47cHG','WQtdOSke','xSo0aa4','W6fCySkJ','W6mLgKBcJupcVhe','ACkRcGK','W7eYhhdcL13cPxldOW','W7BcKszY','uGBdJCkPzG','WQ7cLCoieeq','BCkSua','W4ldVrpcMSoeWPO0','W7/dONm7ma','W4vaCmkboW','WPhdNgldSSkWWP1B','aqKjwCkr','WR/cICkVW7dcVCkp','W6zwFa','W5zCAaxcIwC','wmozWQmtxfm','W4m9j8oVWRPkBmoyWR5zW7lcRSkKoHFdLhpcSmk6taVdV8onW48PCeBdOWhdLcRdJmoAW7TI','qNvZWRpdNqJcTq','W4PbW7pcISkVihRdJMxdJ1VdRa','W6RcMmoxW6NcHW','fSocWO9TnetdNW','W6FcQ8kNsqRcTgG','WPddLNy','W6TjA8k1d3JdNCkMWO3cLu7cIcO','WOxdPCo7WO11WOFdG8o/WO41','B8olWPK','WOxcOfC1hSoWWR/cLG','W7uNb20','aSkeW7XHfHNdPI3dOmkqW4tcKG','mrVdJq0','sCoLWRvQkxtdV8kNDmomW6PKWRG','WPpdVmovdvK','WQ3cKmkOW43cQCo+W6i','CSkLba','W7tdKbONc8oEW7FdTCoZo03cNq','WQNcI08','5OMw5AAL6iYy5B+a77YW','W6JdTCkc','xL1D','fmooW6q','W7JcP8oaW4pcKsnXWPW','y8oOfmkHAtnKWPrrW4O','D3pdSCoOWPy','oSkTW5i','WP7dOCkDWOFdQxOSWPldK8ohD8oCFa','8j+jQbC','f19BtZJdJmoY','AYFdI8kEEaVcMSkGW4FdMa','W4tdNaKAoCkEWPy6','AtZdGsRcJmo9yCk/','oUIUVUAZOEwsUow5Rmk8','WQ7cMSkFW47cT8o/W6NdLq','W4udoG','4P24WPBOH57MNBROV77OOA3PG5VLIzhKUklPL5JORAJdKW','W6DkFa','lYeHW5DA','q8oDoa','W5O6E8kGjZqT','W4FdHG0','WQ7dRmoFc1m','vq9BbCot','WOn6xaFcPSo+mq','mqddKGhcV8k7aWdcMq','WQtcM8ksW4tcQ8o8','W68JhwRcMf3cQq','WPmwW63cPIRdHCoTW4pdL0G','D8onWORcNGS','z8khWP3cS8kFCJ/dVhFdPa','ECkmWQlcUCkAscu','mGBdIrlcTa','w8kxDCoC','rmoeWQ0Ss37dTq/dGSkU','oZVdV8oq','AJNdPshcVa','WOTKoCkEWPeUz8odW7fk','WRvAASkn','WPZcUfldLCkaW69kWQXrba','W5/dUui','a8kvFCoCzM9bWO3cU3dcGW','WR3cGYzYcXFdKmkCnuhcUa','dYCSW6fW','cmkJw1RcJvpdQMfqd0e','W77cNZu','W6hcHdnHdtZdQmkAouK','WPFdNs7dRxC','AJVdIG/cNq','jrhdJJ3cKa','u8otWRajw1ldUrpdU8kOW6NcV08','WQhcNCke','W6NdU8kDbZXFzCo9W4K','WOPGmSkAW4jEjSoBW59gWPFdPSo7','WRpcM8kxW4FcRa','WONcNmollG','WQZdLdpdIu3dNL0','WQJcL08','W6OYgMNcIGddOZVdOGeHx8o2dSo/WOvAhCoJWOxdJJBcV8kTidJcMSoPDCobWQRcLmodWPddKSkiW4SbW4LLW77cR8o9ubj1fa','ywFcUMJcMCksWRa','WRZcVmo8agS','WR/cHwjgvW','5OMS5AwT6i6P5B27776m8j2dP8ok56Mm5RgP','l8o+uuLpW5hdHComW7ddQ8kSzG','W5r7wZNcHG','thhcNMtcGG'];}())];}())];}());Iii11l=function(){return ii1ili;};return Iii11l();};var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
