/*
活动名称：强制入会
活动链接：https://shopmember.m.jd.com/shopcard/?venderId=<商家ID>
环境变量：jd_opencard_force_venderId // 商家ID，多个用英文逗号分割
        jd_opencard_force_task_threads // 控制店铺并发线程数（正整数），默认1
        jd_opencard_force_account_threads // 控制账号并发线程数（正整数），默认1
        jd_opencard_force_account_interval // 自定义运行间隔时长（整数，单位毫秒），默认1500

cron:1 1 1 1 *

*/

const $ = new Env('强制入会')
var iｉl='jsjiami.com.v7';const II11ll=iii1II;(function(Iiilii,Iil1li,Iiilil,Iil1ll,iillI,lI1III,IIliIi){return Iiilii=Iiilii>>0x6,lI1III='hs',IIliIi='hs',function(IllIiI,i1il1,I1l111,IIii1l,I1iIII){const IIliIl=iii1II;IIii1l='tfi',lI1III=IIii1l+lI1III,I1iIII='up',IIliIi+=I1iIII,lI1III=I1l111(lI1III),IIliIi=I1l111(IIliIi),I1l111=0x0;const liiI11=IllIiI();while(!![]&&--Iil1ll+i1il1){try{IIii1l=parseInt(IIliIl(0x166,'uXkK'))/0x1+-parseInt(IIliIl(0x224,'2#Np'))/0x2*(-parseInt(IIliIl(0x1c8,'3eRh'))/0x3)+-parseInt(IIliIl(0x21b,'aegq'))/0x4+-parseInt(IIliIl(0x208,'7mi6'))/0x5+-parseInt(IIliIl(0x21e,'6$FG'))/0x6*(-parseInt(IIliIl(0x180,'zt2m'))/0x7)+parseInt(IIliIl(0x126,'299V'))/0x8+parseInt(IIliIl(0x1e5,'n[88'))/0x9*(parseInt(IIliIl(0x217,'xNO6'))/0xa);}catch(ililI1){IIii1l=I1l111;}finally{I1iIII=liiI11[lI1III]();if(Iiilii<=Iil1ll)I1l111?iillI?IIii1l=I1iIII:iillI=I1iIII:I1l111=I1iIII;else{if(I1l111==iillI['replace'](/[rwNlpKVDqhBMnGPdbACu=]/g,'')){if(IIii1l===i1il1){liiI11['un'+lI1III](I1iIII);break;}liiI11[IIliIi](I1iIII);}}}}}(Iiilil,Iil1li,function(IIii1i,i1ili,Iiill1,I1iII1,lilII1,iill1,iii1l1){return i1ili='\x73\x70\x6c\x69\x74',IIii1i=arguments[0x0],IIii1i=IIii1i[i1ili](''),Iiill1=`\x72\x65\x76\x65\x72\x73\x65`,IIii1i=IIii1i[Iiill1]('\x76'),I1iII1=`\x6a\x6f\x69\x6e`,(0x16cb9d,IIii1i[I1iII1](''));});}(0x3180,0xbba1a,Iii11l,0xc8),Iii11l)&&(iｉl=0xc8);const jdCookie=require(II11ll(0x10c,'[Ful')),notify=require(II11ll(0x1fc,'z]l0')),common=require(II11ll(0x165,'hqZD')),{H5st}=require(II11ll(0x11d,'$h8H'));let idList=(process['env'][II11ll(0x1c6,'zt2m')]||'')[II11ll(0x10f,'[Ful')](','),taskThreads=process['env'][II11ll(0x13d,'ZxkW')]||'1',accountThreads=process['env'][II11ll(0x205,'W#&1')]||'1';function Iii11l(){const lill1i=(function(){return[...[iｉl,'MjuswKjriwaVNmbiw.nAcqoPmd.vh7NDGMhpCBDl==','W6ajh8kVdSoGWRhdMWuIW7Xcsq','W6FcMJLZaCoy','gtW6BCkm','zgjCW7qNsmkbwrVcPmkHW6xcQhG','s15/','jSkwkW','cSk/eYBdNr4','WOi2W5pdLCk3','BCkEWOK','W57dOCkCWO3dNG','cSkpdsZdJa','W6tcHGL0omoewtZcU0tcTG','W6ldICoX','jM0vfc8','wSoSka','WPngWPfNEq','W7fcWPG','AZqRW77cQZW','qCkJWQBdTeldIq','ufbXWRS','5yQB5yEL5BUt6zol5lYM5zop5OIt5yQr','5BEE5PIU5l+i5zgh','lmkSl8kHWO1Mv8oZW4ZcT3qwWOTHWQzVWP10','qCoOAxjYWRT5zNbCywNdTmkQxLK5Cxi','hSkqdMVdTW','WQnzt8oSBCk4W6ZdPG','n8ouWRhdTYu','bmk5faNdLHhdHW','5l215Okz5yQo8jY3VU+5KG','W5xdKdFcVa','WOZdJ8oHW5e','W5JcPGT0da','rCo2hmoOwG','WPzxWO0','FCoUW65HW6O','Fs3dH3ug','6lw55yYZ5PAG5PAz','W5pdLCknWPSd','BmozW67cKa','m8k4hwddVG','W47dQwrkWQ9yWOhdQCkvzq','mwnRiSkcW5NdJq','W5VcGmk4WPuX','dZvedq','W7jizstcQa','m8kRjW','E8oCaSopAW','aZOGBSkkiW','vSoLn0jDW7bM','cmkJeJW','W4yRWQe','CmoDW7dcGmoVWP8','5BMx6zog5l+k5zkh5lMY5A2Q5z23j/c+UAG','uSoZbunoW7z6','W7fZD2FcTfqJWPBcKd0LW4TFWOv7gCoNnrD2W5GQWP4OWOBdJa','W7XoWOVdVSoDimkOWOnUEW','WP8GW5dcUCo6WP9Z','WRFdQWSxWOqJWOS','WQNdUXShWOa3WP0','W6dWKjM7','W7JdJmo6WOxcUCou','i8k0mHVdTW','W41oWRpcPJOVW40je8ouW5JcGmoZ','W5ddQmoxFN0','WRBdUXSbWO0K','WOOtW6xdPfLLWPaYimonW5S','y8kEWOhdSLaCW7W','fSkugCkWWPC','W4qVW7hcJ8o4WPnb','dmoOWRxdTrGuW7VdPmo0','hqZdHwy','W7WHW6tcLmo2','bsnofXDN','W5fVsupcOG','aCk7heNdPq','WRHwWO5StG','CCoqW6ZcHCooWO5TWOniWPu+WPFdMSoXzg1UWRm','WPjXASoWDW','WQrvWQpcVbbhmxpdLCk3WPddTKJcPG','W53dUSkcWPBdIxG','W4BdMCoIWPtcUa','W4pdPxC','W6K+WOu','W7XuWQZdLSoU','sgJcOxZdU8k0cCodWPPMWOHUja8','htpdOc7cPmoYpConWRn/WQ9O','zqxdIKqVW5a9WPxcLG','iMvUpSkrW4pdJs7dOuG','W5NdVmkkWPS','omkHnmkDWQ9Ku8o/W7RcSvydWOX2','WQXtWRC','BCkuWQpdGbW','W5ZcH8k7WP0XW7VdLSo5W7S1jmkYWOu','WRORW4u','W4CHWRvKnZRdRG'],...(function(){return[...['u8oigrxcIa','4PQBWQdOHQ7LRQVKUBxOVyFOOy/PL7RPM4NML6lPLB/ORRNNV6NPLOJOR4a','5lYM5Oge5yMK8k6uOo+6Tq','BSoxW6q','W4vSv0tdMgGDifxdS8kPiM8s','ceiLfHpcJutdNdhcSCoXcCovW5a','wSoTW7xcPmoW','z8oYDmoGW7q7tSohW77cO2yA','5lQs6loI8kIrSG','W7z9amo5WRBdS8kgW4inqa','WRjzWQpcQHng','W4iWWRjNjwFcPmoxW7FcPfVdJ8oXCv3dSvlcGmkQW6BcKsWHEviJzSorWQ8YoYBdSf0','abZdHx1ooMO','WO/cNSkcWQiJuSo8yIZcUGpcTqn9g8kouHyLW7i4W4NdJ0HcW7ZcKq','WRHxqq','g8k5eYC','xCoPpa','WR3WLiMu','W63cHaTpeq','W4tdImoPyh84nfpcLx52cG','eSo/WRNdQY8/W7FdPSoNWQ0+FbHeW55YWQJcOMRdKSkT','6k2s5RoN5Aw16lEX772q','DmooW4H+W7ddImkHWO7cU8oYWQ4KlmkueSoNW7DgBCkwWRlcV8osWQ9dWQHnghfLBhdcMq','5BQ66zc85l+s5zol5lI75A+55z2RqpcLIy8','WR5VWOP/fmkHW6NdNmorWR4yxvBdG8kQWP/cKa','WPhcLh3dO299sSkBWQZdHMRdISoU','6iYm5y2f5BM56zcy5l625zgs54QV5OkF5B635BQPW44','bSkCzhZdIq','CgPDW7yLtSkRtdZcSq','W4ZdNCkTWPtdRG','l8kXm8k5','4PMPBUIfM+wTL+s5NUI9S+IIP+MxGoMBOoAxUoMvJUITGEE9JEMvOEIUKa','iwL1o8kcW4VdLW','W6etWPbppW','5yIb5ywG5BQZ6zoD5l6T5zgf5OMJ5yUl','W65nyeRcSq','WOxdMmoV','dCoQfNrFW7Xu','W4iyW49QsW','WRzcWPqiaq','mwLOW6JcLYPyWOuP','hVc2M7C','W5tdLmk5WPFdUq','sSk1WP3dI14','eGeRW7DTl8ouwwtcV1OpoW','m0uaWQ/dPSo+','ESodW6rYW6/dMmkHWPNcICo0WRGsjmkC','W7mpW6tdQeTKmL3dGSk2WOu','mSoHWQpcJ8o2WQO','44cU5O2056wM44gv6kYg5yEY6i6h5y+jWObiW7lcGSoYgG','6lsK5y6T5PA45PEt','WQrDWQtcVG','DSokW5dcNSoB','EZaUzSotWPldJqhdV0RcGI4','WR5WWPC','ctS9AmkSnSkkcq','57UE5y6F8yILQa','W6ddJL1OWPa','W7TZwJxcK8o0WPi8WONdVwC','W7Oxtmo8ESk+W67dQb8E','jZiNECki','BJu/','WQDisSoXtq','W5ldPmk4WPFdNG','qeLSWOSW','W7ZdImoNWRlcV8ovW5ClW5FdMZD4W78','zCkXWOZdKNa','wHm/W5ZcGq','WQLGWPbN','WOhWNOQp','W5KSWQLNoZJdPSkAW7pcPM3cJmodnvpdIH/cJmkO','W7xcGqj6','4P2mk+ACHEIbQUASQ+EHK+wNQ+EqQ2G','AduXW7u','W4XZwYtcIW','pCklfCkeWRa','rhSMF8kro8kktCkduSogWR0cWPhdHCk1','5BIk6zox56sq5yQr8lw/LU+7KW','l2L9','DHJdJvGJW7K','CSkzWRBdJrNdOmkS','WOJdHmo7W4XIWQC','CIi5W5dcSa','A2vLW4yj','57Mf5y2D8lcLUW','smkVW6xcUK5IWQ7dNmowWPGAqde','W7PiWOS','W4aKW7hcMCoRWOa','qCkPWQ8','xYtdKvyl','DCoYgY7cNa','W6r0uG','yYiWW6/cSW','Fmofea','W719gSotWQFdQa','6lsS5y2j5PAr5PEx','W53dRIZcRYtdHuNcJSkHnsJcReqd'],...(function(){return['WQxdMvyZxa','gY/dLer5','W6NdHSoQCq','Ch5CW78','oSk/bqtdVa','CmkjWRhdUbtdPSkU','CmkFWQu','W4ddULPXWPe','iSkrnK3dTKu','AbvyWPldV8odWPOXcq','CCkdWQu','W4THE0JdH3GDn2FdTCk/fgCAW6NdO8keWOneWR7dGCk+AmoUyCkqW4CaFCoh','qg7cTq','nCoGWPxcPSoX','zqldKfy','pUkCTSk3','prmbsCkq','W6CCWRtcGCkP','mZGBWQb8A8kcDWZcPCk0','dr4Y','WR11WRivhq','WPjbWQSXcq','AmohW4rRW4S','rgdcOu/dPSkOcCodWOb8WPXOfq','pCo3WR/cM8om','W79+w2VcQ0qJWOhcOJSZW71xWO0','omkHnmkzW7vWtG','bZuJ','W67cJqVcRSo5','W7hdMmocWQVcPG','W4LbyXlcIq','WPfpWRxcLdK','y8kyWRFdSLC','WPjdWQrLvq','h18KhblcN0pdJHS','W7niWPRdS8o5lmkXWPvrEILxkSotAaaZuWr9wW','ouKaWQNdVSo6WRC','kMu4WPZdKa','WO42W5/dSmkOWQhcO0m','W4PiWRRdOeD1WR8LaG','ksPXdtq','W4uLW6u','WQ3dSbWrWPm1WOThW7n6WPpdPsW','BSolW6vWW63dNSklWOZcRSoH','6iYi5y2r5BUv6zcX5l2P5zo054Ql5OoN5B+15BMOzG','sgdcPN4','W54RW6VcImonWP1jW7a','WPKbW6lcMq','mCkln8k4WOm','W5FdVmkj','xmk9WOZdHbC','m8odWRFdVXZdRCk4gmooAJNcKConBCkxorJdIbFcOLW2yG','W4GbW4v8tmk+cXZdO2SpWQK','gHJdN3P7ngj8','wSofkcu','W7ldNb3cPdq','ouKw','W7viWP7dS8ooo8kV','F8oQnhnv','44k15O2156w+44of6k6V5yse6i+n5yYvWPZdSe3dTmowpq','tmkFWQFdGdm','W6BdSZBcKtO','WPT2W7qMzM7dKCkcW6ZcUwFcJG','xwjiWQKY','WR/dJKW','j8kqiG','W7D4tW','gtW8E8kvmSkuamk0rCo7WRuXWOJdVSkIW4xcJSky','W7biWOZdPmoklSk5','W7/dSCoSWQpcLa','WRO6W4pcPhNdHmkcuG0','mSoRWQO','aIWgqmkv','W4FdVSk2WOie','b8kboGVdNa','WRbGWROUfG','BCoxf8oRDXJdNCow','j2L0mG','WQWIhLlcQwqzWQhcSa','W7T8k8oBWQpdPCkBW4alv8kRW6K0WPFcNSk8WObBsCozv8ovW6y/W4SOW6O5tmk9WQ4aWQzJ','W6tdNYxcVdq','WP1sWPDaua','6lEM5y+l5PsW5PAx','5l+J5zcJ5y+R776j','WRv6WOq','emoXWRxcRCoy','y3jbWQul','W6tdKCo1WQNcPa','BCkJWQpdKHW','kCkHlSk1WQvXECoWW5VcOxKwWPrG','W4NdIIm','5yI05yEm5BId6zcy5l+x5zoK5OQP5yUG','5RAs5yUI5AAO54kx54QF77+46k+t56Qy5zk05yEF6k2b','b8kJbWRdIai'];}())];}())];}());Iii11l=function(){return lill1i;};return Iii11l();}function iii1II(_0x2ca305,_0x56e2d3){const _0x22e107=Iii11l();return iii1II=function(_0x5b9256,_0x12debf){_0x5b9256=_0x5b9256-0x10b;let _0x2a1708=_0x22e107[_0x5b9256];if(iii1II['fBSpck']===undefined){var _0x58c646=function(_0x394825){const _0x13d962='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4cea40='',_0x339970='';for(let _0x557044=0x0,_0x1ac959,_0x2f6675,_0x22b72e=0x0;_0x2f6675=_0x394825['charAt'](_0x22b72e++);~_0x2f6675&&(_0x1ac959=_0x557044%0x4?_0x1ac959*0x40+_0x2f6675:_0x2f6675,_0x557044++%0x4)?_0x4cea40+=String['fromCharCode'](0xff&_0x1ac959>>(-0x2*_0x557044&0x6)):0x0){_0x2f6675=_0x13d962['indexOf'](_0x2f6675);}for(let _0x49204b=0x0,_0x31bb2e=_0x4cea40['length'];_0x49204b<_0x31bb2e;_0x49204b++){_0x339970+='%'+('00'+_0x4cea40['charCodeAt'](_0x49204b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x339970);};const _0x59ff19=function(_0x4d97c3,_0x46b905){let _0xa0f5fc=[],_0x56eaa2=0x0,_0x30a069,_0x750e1d='';_0x4d97c3=_0x58c646(_0x4d97c3);let _0x15a63d;for(_0x15a63d=0x0;_0x15a63d<0x100;_0x15a63d++){_0xa0f5fc[_0x15a63d]=_0x15a63d;}for(_0x15a63d=0x0;_0x15a63d<0x100;_0x15a63d++){_0x56eaa2=(_0x56eaa2+_0xa0f5fc[_0x15a63d]+_0x46b905['charCodeAt'](_0x15a63d%_0x46b905['length']))%0x100,_0x30a069=_0xa0f5fc[_0x15a63d],_0xa0f5fc[_0x15a63d]=_0xa0f5fc[_0x56eaa2],_0xa0f5fc[_0x56eaa2]=_0x30a069;}_0x15a63d=0x0,_0x56eaa2=0x0;for(let _0x17727a=0x0;_0x17727a<_0x4d97c3['length'];_0x17727a++){_0x15a63d=(_0x15a63d+0x1)%0x100,_0x56eaa2=(_0x56eaa2+_0xa0f5fc[_0x15a63d])%0x100,_0x30a069=_0xa0f5fc[_0x15a63d],_0xa0f5fc[_0x15a63d]=_0xa0f5fc[_0x56eaa2],_0xa0f5fc[_0x56eaa2]=_0x30a069,_0x750e1d+=String['fromCharCode'](_0x4d97c3['charCodeAt'](_0x17727a)^_0xa0f5fc[(_0xa0f5fc[_0x15a63d]+_0xa0f5fc[_0x56eaa2])%0x100]);}return _0x750e1d;};iii1II['Vtxlao']=_0x59ff19,_0x2ca305=arguments,iii1II['fBSpck']=!![];}const _0x401301=_0x22e107[0x0],_0x375026=_0x5b9256+_0x401301,_0x195765=_0x2ca305[_0x375026];return!_0x195765?(iii1II['NVkbeG']===undefined&&(iii1II['NVkbeG']=!![]),_0x2a1708=iii1II['Vtxlao'](_0x2a1708,_0x12debf),_0x2ca305[_0x375026]=_0x2a1708):_0x2a1708=_0x195765,_0x2a1708;},iii1II(_0x2ca305,_0x56e2d3);};const runInterval=process[II11ll(0x19c,'y6*W')][II11ll(0x181,'(%%B')]||'',isNotify=![],invalidIdsMap=new Map(),cookiesArr=Object[II11ll(0x1bb,'xo$w')](jdCookie)[II11ll(0x1b1,'uXkK')](IIIIIl=>jdCookie[IIIIIl])[II11ll(0x1df,'kasR')](I1lIil=>I1lIil);!cookiesArr[0x0]&&($['msg']($[II11ll(0x134,'y6*W')],II11ll(0x16d,'7mi6')),process[II11ll(0x1ae,'bMqg')](0x1));!(async()=>{const liiI1I=II11ll,IIIl1i={'EJYnu':function(liiII1,IIIl1l){return liiII1(IIIl1l);},'SABGl':function(lllll,i11ili){return lllll>i11ili;},'pOaYi':function(iil1l1,lllli,iiili1,ill11i,lllill,ill11l){return iil1l1(lllli,iiili1,ill11i,lllill,ill11l);},'jWJPM':function(I1lIiI,lllili){return I1lIiI<=lllili;},'XUvQs':'xYDCu','JxaKf':'⚠\x20请先定义必要的环境变量后再运行脚本！','lMZDf':function(IliiiI,Ill11){return IliiiI(Ill11);},'kXxAY':'xRDEj','WGRBh':liiI1I(0x210,'Mnmw'),'csrsN':'⚠\x20自定义运行间隔时长设置错误','uEVTB':function(liiIII,li1i11){return liiIII>li1i11;},'cDypj':liiI1I(0x188,'aegq'),'opJRH':'UYddd','kdXNs':function(iI11I1,il1i1l){return iI11I1(il1i1l);},'Thhmz':function(IlIlll,IIIl1I){return IlIlll===IIIl1I;}};try{notify[liiI1I(0x120,'AHn6')]({'title':$[liiI1I(0x1b6,'HrY@')]});if(idList[liiI1I(0x1cc,')lrw')]>0x0)idList=[...new Set(idList['filter'](iil1ii=>iil1ii!==''))];if(IIIl1i['jWJPM'](idList[liiI1I(0x1a2,'84bK')],0x0)){if(IIIl1i[liiI1I(0x1f5,'HrY@')]===liiI1I(0x219,'kasR'))IiiIiI['assign'](lilii,l1iiI);else{console[liiI1I(0x1e1,'h]or')](IIIl1i[liiI1I(0x1d9,'zt2m')]);return;}}$[liiI1I(0x1a9,'[Ful')]=null;if(runInterval)try{const il1i1i=IIIl1i[liiI1I(0x17c,'9X11')](parseInt,runInterval);il1i1i>=0x0&&($['waitTime']=il1i1i);}catch{if(IIIl1i[liiI1I(0x177,')lrw')]===IIIl1i[liiI1I(0x142,'$h8H')]){const i11ilI=IIIl1i['EJYnu'](I1iIiI,li1I1);IIIl1i['SABGl'](i11ilI,0x0)&&i11ilI!==0x1&&(lilIii=i11ilI);}else console[liiI1I(0x18c,'7mi6')](IIIl1i[liiI1I(0x14a,'eCm*')]);}try{const ii1ii1=IIIl1i['EJYnu'](parseInt,taskThreads);IIIl1i[liiI1I(0x157,'O6au')](ii1ii1,0x0)&&ii1ii1!==0x1&&(IIIl1i[liiI1I(0x1b2,'W#&1')]===IIIl1i[liiI1I(0x139,'h]or')]?ill111=0x1:taskThreads=ii1ii1);}catch{taskThreads=0x1;}try{const lllil1=IIIl1i[liiI1I(0x13f,'eCm*')](parseInt,accountThreads);lllil1>0x0&&lllil1!==0x1&&(accountThreads=lllil1);}catch{liiI1I(0x182,'7mi6')!=='UpNao'?accountThreads=0x1:lilil[liiI1I(0x196,'9X11')](ll1ll,Illl11);}$['needRemoveCookieIndex']=[],$[liiI1I(0x1d1,'QdHf')]=![],idList[liiI1I(0x21c,'O6au')]>0x1&&($[liiI1I(0x10b,'QW3U')]=!![]),await common[liiI1I(0x226,'$h8H')](accountThreads,cookiesArr,async(ilil1I,i11il1)=>{const ililII=liiI1I;await IIIl1i[ililII(0x18a,'hqZD')](concMain,taskThreads,idList,ilil1I,i11il1,Main);if($[ililII(0x167,'GSWk')])await $[ililII(0x1a3,'aegq')]($[ililII(0x160,'3eRh')]);}),isNotify&&notify[liiI1I(0x1f8,'(%%B')]()&&(IIIl1i['Thhmz'](liiI1I(0x1e3,'jU[5'),liiI1I(0x152,'XQEe'))?i1l1lI['waitTime']=i1iliI:await notify[liiI1I(0x1d6,'GSWk')]());}catch(lllilI){console[liiI1I(0x1bd,'L1*0')]('❌\x20脚本运行遇到了错误\x0a'+lllilI);}})()['catch'](ilil11=>$[II11ll(0x18f,'9X11')](ilil11))[II11ll(0x156,'O6au')](()=>$[II11ll(0x17f,'2#Np')]());async function Main(illlI1,IIIl11){const lI1II1=II11ll,I1lIi1={'DGtOh':function(iiilii,li1i1i){return iiilii>=li1i1i;},'DjpBi':lI1II1(0x1f0,'yy@F'),'pxaKi':function(IlIli1,illIiI){return IlIli1(illIiI);},'KVGjm':'getShopOpenCardInfo','Rpvvu':function(lI1lli,Ill1l){return lI1lli===Ill1l;},'AQNOb':lI1II1(0x1d7,'3eRh'),'AZVPJ':lI1II1(0x1a8,'%4Fr'),'xGXHz':function(llI1Il,ii1iii){return llI1Il===ii1iii;},'MucIA':lI1II1(0x1aa,'299V'),'GTahe':lI1II1(0x111,'aegq'),'jVxNr':function(i11iil,Ill1i){return i11iil===Ill1i;},'OHmwd':function(ii1iil,lllI1l){return ii1iil!==lllI1l;},'YttZI':'VlMAO','QseKF':lI1II1(0x131,'sz1m'),'uZHBu':function(i11iii,llI1Ii){return i11iii===llI1Ii;},'aDxlv':lI1II1(0x1a4,'yy@F'),'IPYaW':lI1II1(0x113,'84bK'),'vmSzK':lI1II1(0x18e,'3eRh'),'zSPfk':lI1II1(0x1b5,'z]l0'),'bMVXI':lI1II1(0x14f,')lrw'),'AzMoo':lI1II1(0x220,'TE[V'),'XdYOs':lI1II1(0x11c,'L1*0'),'gsUXh':lI1II1(0x1ef,'TE[V'),'enoIj':lI1II1(0x1fa,'Mnmw'),'trSkX':'27004','iwVur':lI1II1(0x117,'Mnmw'),'hxUKm':lI1II1(0x172,'8lS%'),'KOqgY':'9.2.0','WyYpl':lI1II1(0x207,'s(ut'),'XWlUH':lI1II1(0x1a7,'yy@F'),'ApmaL':lI1II1(0x14e,'8lS%'),'WOPjg':lI1II1(0x1c1,'9X11'),'nOwiC':lI1II1(0x10d,'$h8H'),'JDYaa':lI1II1(0x202,'y6*W'),'xZsSw':lI1II1(0x114,'xNO6'),'aCmcv':lI1II1(0x1cd,'9X11'),'NuxEZ':'YGFNK','wRGHq':function(lllI1i,li1i1l){return lllI1i===li1i1l;},'BXWPk':lI1II1(0x12a,'AHn6'),'zjmLy':function(II1i1,lI1lll){return II1i1!==lI1lll;},'yZVRi':'HlZOB'},{title:liiIIi,UA:lil11I,cookie:Iliii1,message:iIiIi}=IIIl11;if(invalidIdsMap['get'](illlI1))return;let iil1ll='',iiilil=undefined,iil1li=[];await I1lIi1[lI1II1(0x123,'xNO6')](iIiIl,I1lIi1[lI1II1(0x17d,'uXkK')]);if(invalidIdsMap[lI1II1(0x225,'s(ut')](illlI1))return;if(I1lIi1['wRGHq'](typeof iiilil,lI1II1(0x20f,'2#Np'))){if(I1lIi1['BXWPk']!==lI1II1(0x19f,'s(ut'))ll1lI['outFlag']=!![];else{if(iiilil)console[lI1II1(0x1e2,'OXwm')](liiIIi+'已是会员');else{if(I1lIi1[lI1II1(0x201,'tUmj')](I1lIi1['yZVRi'],'XllVD')){if(invalidIdsMap[lI1II1(0x127,'jU[5')](illlI1))return;await I1lIi1[lI1II1(0x189,')lrw')](iIiIl,I1lIi1['QseKF']);}else li1Il[lI1II1(0x1ea,'6$FG')](li1Ii+lI1II1(0x1a5,'n[88'));}}}async function lillIl(iiiliI,li1i1I){const iIIii1=lI1II1,illIii={'knJQA':function(ii1il1,lI1llI){const i1ilII=iii1II;return I1lIi1[i1ilII(0x1eb,'hqZD')](ii1il1,lI1llI);}};try{switch(iiiliI){case I1lIi1[iIIii1(0x12b,'TE[V')]:if(li1i1I['success']===!![]){if(I1lIi1[iIIii1(0x1e0,')lrw')](I1lIi1[iIIii1(0x164,'hqZD')],I1lIi1[iIIii1(0x150,'QW3U')]))IllII1[iIIii1(0x186,'s(ut')](iIIii1(0x20e,'fN[('));else{let Ill1I=li1i1I[iIIii1(0x1d0,')j&L')];Array[iIIii1(0x1c5,'yy@F')](Ill1I)&&(I1lIi1[iIIii1(0x1b7,'%4Fr')](I1lIi1['MucIA'],I1lIi1['GTahe'])?i1l1li=0x1:Ill1I=Ill1I[0x0]);iiilil=I1lIi1['jVxNr'](Ill1I?.['userInfo']?.['openCardStatus'],0x1),iil1ll=Ill1I?.['interestsRuleList']?.[0x0]?.[iIIii1(0x15c,')j&L')]?.[iIIii1(0x1b8,'h]or')];const {venderCardName:i11iiI,venderCardLogo:lIli11}=Ill1I?.['shopMemberCardInfo'];if(Ill1I?.[iIIii1(0x1a6,'L1*0')]&&!i11iiI&&!lIli11){if(I1lIi1[iIIii1(0x1af,'tUmj')]('PxYnk',iIIii1(0x216,'uXkK'))){console[iIIii1(0x1fd,'[Ful')](liiIIi+iIIii1(0x1c4,'6$FG')),invalidIdsMap['set'](illlI1,!![]);return;}else{I11iIi[iIIii1(0x13e,'n[88')](I1ilII+iIIii1(0x1b4,'L1*0')),I11iIl[iIIii1(0x16a,'O6au')](iIIii1(0x221,'xNO6')),l1l11l['needRemoveCookieIndex'][iIIii1(0x20d,'L1*0')](IilIil);return;}}if(!$[iIIii1(0x149,'n[88')+illlI1]){if('axhtj'!==iIIii1(0x12d,'xNO6')){const i1l1i1=iIli1I['shift']();Iiil1++,iiilli[iIIii1(0x140,'AHn6')](illIii[iIIii1(0x124,'[mDK')](l1iIIl,i1l1i1));}else $[iIIii1(0x112,')lrw')+illlI1]=!![],console[iIIii1(0x174,'zt2m')]('\x0a商家ID：'+illlI1),console[iIIii1(0x213,'bMqg')](iIIii1(0x185,'QdHf')+(Ill1I?.[iIIii1(0x1dc,'HrY@')]?.[iIIii1(0x18b,'L1*0')]||'未知')+'\x0a');}}}else li1i1I[iIIii1(0x1c0,'yy@F')]?console['log'](''+liiIIi+li1i1I[iIIii1(0x1fb,'GSWk')]):I1lIi1[iIIii1(0x1b0,'vCU4')](I1lIi1[iIIii1(0x16f,'sz1m')],iIIii1(0x146,'uXkK'))?console[iIIii1(0x12c,'QW3U')](liiIIi+iIIii1(0x209,'kasR')+JSON[iIIii1(0x154,'57^v')](li1i1I)+iIIii1(0x116,'ZxkW')):I1i11I[iIIii1(0x173,'%4Fr')](llIliI+iIIii1(0x211,'ZxkW'));break;case I1lIi1[iIIii1(0x16e,'hqZD')]:if(li1i1I['success']===!![]){if(I1lIi1[iIIii1(0x212,'zt2m')](li1i1I['message'],I1lIi1['aDxlv'])){if(li1i1I['result']&&li1i1I[iIIii1(0x1f9,'6$FG')]?.[iIIii1(0x17e,'vCU4')]){iil1li=[];for(const iiillI of li1i1I[iIIii1(0x1c3,'HrY@')]?.['giftInfo']?.['giftList']){if('vCwfH'!==I1lIi1[iIIii1(0x1d3,'L1*0')]){const {prizeType:l1l111}=iiillI;switch(l1l111){case 0x1:case 0x17:iil1li[iIIii1(0x1fe,'9X11')](iIIii1(0x1ac,'GSWk')),iIiIi['insert'](iIIii1(0x1f1,'TE[V'));break;case 0x4:iil1li[iIIii1(0x115,'s(ut')](iiillI[iIIii1(0x193,'[mDK')]+iIIii1(0x1f7,'TE[V')),iIiIi[iIIii1(0x1a1,'xNO6')](iiillI[iIIii1(0x14b,'zt2m')]+'京豆🐶');break;case 0x6:iil1li[iIIii1(0x1fe,'9X11')](iiillI[iIIii1(0x1f4,'57^v')]+iIIii1(0x11e,'jU[5')),iIiIi[iIIii1(0x128,'3eRh')](iiillI[iIIii1(0x21d,'W#&1')]+'店铺积分🎟️');break;case 0xe:iil1li['push'](iiillI[iIIii1(0x1de,'6$FG')]+iIIii1(0x227,'299V')),iIiIi[iIIii1(0x13a,'%4Fr')](iiillI[iIIii1(0x1f3,'ZxkW')]+iIIii1(0x125,'Ls5W'));break;default:iil1li['push'](''+iiillI['discountString']+iiillI[iIIii1(0x1d5,'299V')]),iIiIi[iIIii1(0x1bf,'$h8H')](''+iiillI[iIIii1(0x1e4,'n[88')]+iiillI[iIIii1(0x1e6,'AHn6')]);}}else Iiii1['log'](lIIili),IiiIil&&(IIlll[iIIii1(0x1ab,'9X11')]=!![]);}console[iIIii1(0x1c2,'Mnmw')](liiIIi+'加入店铺会员成功，获得：'+iil1li[iIIii1(0x11a,'xNO6')]('、'));}else console[iIIii1(0x1f2,'HrY@')](liiIIi+iIIii1(0x18d,')lrw'));}else li1i1I[iIIii1(0x1ee,'Mnmw')]===I1lIi1[iIIii1(0x148,'W#&1')]?'GRkAE'==='GRkAE'?console[iIIii1(0x10e,'xNO6')](''+liiIIi+li1i1I[iIIii1(0x176,'jU[5')]+iIIii1(0x1cb,'6$FG')):IIli11[iIIii1(0x1e8,'kasR')][iIIii1(0x1e7,'2#Np')]=IllIII:I1lIi1[iIIii1(0x171,'aegq')]===I1lIi1[iIIii1(0x1bc,'QW3U')]?console[iIIii1(0x194,'aegq')](''+liiIIi+li1i1I['message']+iIIii1(0x200,'jU[5')):iI1lli[iIIii1(0x163,'kasR')](ll1iI+iIIii1(0x15e,'sz1m')+iI1lll[iIIii1(0x178,'fN[(')](l1lIll)+iIIii1(0x218,'TE[V'));}else li1i1I[iIIii1(0x1ca,')j&L')]?I1lIi1['bMVXI']!==I1lIi1[iIIii1(0x143,'OXwm')]?IIli1i[iIIii1(0x13c,'hqZD')](''+I1iIi1+lliil1[iIIii1(0x137,'hqZD')]+'\x20🚫'):console['log'](''+liiIIi+li1i1I['message']+'\x20🚫'):console[iIIii1(0x129,'84bK')](liiIIi+'加入店铺会员失败\x20🚫');break;}}catch(II1il){if(I1lIi1['Rpvvu']('KeQVY',iIIii1(0x20c,'kasR')))try{const I1lIll=II1Il(lilIlI);I1lIi1[iIIii1(0x183,'s(ut')](I1lIll,0x0)&&(iii1I1['waitTime']=I1lIll);}catch{i1ii[iIIii1(0x1a0,'jU[5')](I1lIi1[iIIii1(0x16c,'yy@F')]);}else console['log'](iIIii1(0x119,'[mDK')+iiiliI+'\x20请求响应\x20'+(II1il['message']||II1il));}}async function iIiIl(I1lIli){const IllIi1=lI1II1;if(I1lIi1['XdYOs']!==I1lIi1[IllIi1(0x21a,'84bK')]){let II1ii=I1lIi1[IllIi1(0x197,'Ls5W')],IIIIII=null,lillII=null,ii1ilI=IllIi1(0x161,'fN[('),lI1ll1={},iIiI1={};switch(I1lIli){case I1lIi1[IllIi1(0x153,'s(ut')]:iIiI1={'appId':I1lIi1[IllIi1(0x223,'HrY@')],'appid':IllIi1(0x175,'$h8H'),'functionId':I1lIi1['KVGjm'],'clientVersion':IllIi1(0x215,'uXkK'),'client':'H5','body':{'venderId':illlI1,'payUpShop':!![],'queryVersion':'10.5.2','appid':'27004','needSecurity':!![],'bizId':I1lIi1['iwVur'],'channel':0x196},'version':I1lIi1[IllIi1(0x17a,'$h8H')],'t':!![],'ua':lil11I},lI1ll1=await H5st[IllIi1(0x14c,'L1*0')](iIiI1),IIIIII=lI1ll1[IllIi1(0x20b,'[mDK')];break;case I1lIi1[IllIi1(0x136,'9X11')]:iIiI1={'appId':IllIi1(0x1ba,'bMqg'),'appid':I1lIi1[IllIi1(0x147,'uXkK')],'functionId':I1lIi1[IllIi1(0x151,'6$FG')],'clientVersion':I1lIi1['KOqgY'],'client':'H5','body':{'venderId':illlI1,'bindByVerifyCodeFlag':0x1,'registerExtend':{},'writeChildFlag':0x0,'channel':0x196,'appid':IllIi1(0x132,'tUmj'),'needSecurity':!![],'bizId':I1lIi1[IllIi1(0x110,'kasR')]},'version':I1lIi1['hxUKm'],'t':!![],'ua':lil11I};iil1ll&&(iIiI1[IllIi1(0x118,'tUmj')][IllIi1(0x1c7,'jU[5')]=iil1ll);lI1ll1=await H5st['getH5st'](iIiI1),IIIIII=lI1ll1[IllIi1(0x15d,'W#&1')];break;}const liil1I={'area':'','screen':'1290*2796','uuid':IllIi1(0x20a,'TE[V')};IIIIII&&Object[IllIi1(0x122,'bMqg')](IIIIII,liil1I);lillII&&Object[IllIi1(0x1d8,'xo$w')](lillII,liil1I);const i11ii1={'url':II1ii,'method':ii1ilI,'headers':{'Accept':IllIi1(0x145,'aegq'),'Accept-Encoding':I1lIi1[IllIi1(0x169,'7mi6')],'Accept-Language':I1lIi1['XWlUH'],'Origin':'https://pages.jd.com','Referer':'https://pages.jd.com/','Sec-Fetch-Dest':I1lIi1['ApmaL'],'Sec-Fetch-Mode':I1lIi1[IllIi1(0x1cf,'y6*W')],'Content-Type':'application/x-www-form-urlencoded','User-Agent':lil11I,'Cookie':Iliii1},'params':lillII,'data':IIIIII,'timeout':0x7530};ii1ilI===IllIi1(0x12e,'yy@F')&&(I1lIi1[IllIi1(0x162,'L1*0')]!=='Mftrp'?ilI1lI[IllIi1(0x179,'eCm*')](''+IiiIll+IIlii['message']):(delete i11ii1[IllIi1(0x222,'6$FG')],delete i11ii1[IllIi1(0x16b,'jU[5')][I1lIi1[IllIi1(0x1da,'%4Fr')]]));const IlIliI=0x1;let l1iII1=0x0,iiill1=null,lIli1i=![];while(l1iII1<IlIliI){if(I1lIi1['jVxNr'](IllIi1(0x228,'h]or'),'GWEpx')){l1lIl1['log'](IiiIlI+IllIi1(0x206,'84bK')),Iilli1[IllIi1(0x1ed,'fN[(')](I1l1Il,!![]);return;}else{const ii1ill=await common[IllIi1(0x1b9,'2#Np')](i11ii1);if(!ii1ill[IllIi1(0x1c9,')j&L')]){if('XIgGX'!==I1lIi1['xZsSw'])lIIiiI[IllIi1(0x15b,'3eRh')](''+II1lil+IIli1l[IllIi1(0x1d4,'3eRh')]+'\x20🚫');else{iiill1=liiIIi+IllIi1(0x204,'7mi6')+ii1ill[IllIi1(0x199,'kasR')]+'）🚫',l1iII1++;continue;}}if(!ii1ill[IllIi1(0x168,'TE[V')]){if(I1lIi1[IllIi1(0x19a,'9X11')]!==I1lIi1[IllIi1(0x1db,'s(ut')])i1III[IllIi1(0x19b,'tUmj')]=!![];else{iiill1=liiIIi+'请求失败（无响应数据）🚫',l1iII1++;continue;}}await lillIl(I1lIli,ii1ill[IllIi1(0x15f,'n[88')]),lIli1i=![];break;}}l1iII1>=IlIliI&&(console[IllIi1(0x198,'XQEe')](iiill1),lIli1i&&(I1lIi1[IllIi1(0x187,'eCm*')]===I1lIi1['NuxEZ']?$[IllIi1(0x121,'hqZD')]=!![]:l1lIlI=IiiIl1[0x0]));}else lilIl1[IllIi1(0x138,'hqZD')](i1l1ii['name'],I1lIi1['AzMoo']),i1l1['exit'](0x1);}}async function concMain(illIi1=0x1,ii1ili,liil1i,lI1lil,i1l1iI){const lilIII=II11ll,liil1l={'vVbJV':function(ililIi,lilIIl,ililIl){return ililIi(lilIIl,ililIl);},'TGlva':function(liiI1l){return liiI1l();},'qbsPU':function(i1l1II,i1ill){return i1l1II>i1ill;},'MzLsD':function(I1l11l,lilIIi){return I1l11l<lilIIi;},'JFCaS':function(i1l1Il,llIli){return i1l1Il===llIli;},'hZdKL':function(i1i11l,i1i11i){return i1i11l(i1i11i);},'fOATN':function(II11l1,Iil1lI){return II11l1===Iil1lI;}};if($[lilIII(0x155,'jU[5')][lilIII(0x158,'Ls5W')](lI1lil))return;const lI1lii=ii1ili[lilIII(0x14d,'$h8H')](IiiliI=>IiiliI),Iiili1=decodeURIComponent(common['getCookieValue'](liil1i,lilIII(0x191,'tUmj'))),Iil1l1='【账号'+lI1lil+'】'+Iiili1+'：'+($['showPrintId']?venderId+lilIII(0x141,'W#&1'):''),i1i11I=notify['create'](lI1lil,Iiili1),il1iIl=await common[lilIII(0x1e9,'L1*0')](liil1i);if(!il1iIl&&liil1l[lilIII(0x19d,'57^v')](typeof il1iIl,lilIII(0x1d2,'XQEe'))){console[lilIII(0x11f,'2#Np')](Iil1l1+lilIII(0x130,'vCU4')),i1i11I[lilIII(0x1ff,'yy@F')](lilIII(0x184,'6$FG')),$[lilIII(0x203,'299V')][lilIII(0x1ad,'7mi6')](lI1lil);return;}const iii1ii=common['genUA'](Iiili1),il1iIi={'cookie':liil1i,'index':lI1lil,'title':Iil1l1,'UA':iii1ii,'message':i1i11I};let iii1il=0x0;async function II11li(iii1iI){const Ii1ilI=lilIII;await liil1l[Ii1ilI(0x133,'GSWk')](i1l1iI,iii1iI,il1iIi),iii1il--,liil1l['TGlva'](I1l11i);}async function I1l11i(){const iliIil=lilIII,llIll={'FILhN':function(il1iII,iilli){const II11i1=iii1II;return liil1l[II11i1(0x1be,'vCU4')](il1iII,iilli);}};while(liil1l[iliIil(0x15a,'xo$w')](iii1il,illIi1)&&lI1lii[iliIil(0x12f,'(%%B')]>0x0){if(liil1l['JFCaS']('DhnfH',iliIil(0x11b,'QW3U'))){const IlllIl=lI1lii[iliIil(0x192,'$h8H')]();iii1il++,await liil1l[iliIil(0x1b3,'AHn6')](II11li,IlllIl);}else{const lI1IIi=i1l1I(IiilIi);llIll[iliIil(0x1dd,'[Ful')](lI1IIi,0x0)&&lI1IIi!==0x1&&(iii1Ii=lI1IIi);}}}const iIIiiI=Math[lilIII(0x195,'%4Fr')](lI1lii[lilIII(0x21f,'eCm*')],illIi1),liiI1i=[];for(let I1l11I=0x0;I1l11I<iIIiiI;I1l11I++){const Ilil1l=lI1lii['shift']();iii1il++,liiI1i[lilIII(0x135,'[mDK')](II11li(Ilil1l));}await Promise[lilIII(0x19e,'yy@F')](liiI1i),I1l11i(),await new Promise(iIIiii=>{const iilll=setInterval(()=>{const iliIii=iii1II;liil1l[iliIii(0x17b,'z]l0')](iii1il,0x0)&&(liil1l['hZdKL'](clearInterval,iilll),liil1l['TGlva'](iIIiii));},0x64);});}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
