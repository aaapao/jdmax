/*
活动名称：店铺礼包（超级无线）
活动链接：https://lzkj-isv.isvjcloud.com/prod/cc/interactsaas/index?activityType=10058&templateId=<模板id>&activityId=<活动id>&prd=cjwx
		https://lzkj-isv.isvjcloud.com/prod/cc/interaction/v1/index?activityType=10058&templateId=<模板id>&activityId=<活动id>&prd=cjwx
环境变量：jd_lzkj_loreal_shopGift_url // 活动链接
		jd_lzkj_loreal_shopGift_opencard // 是否入会（true/false），默认不入会
        jd_lzkj_loreal_shopGift_Notify // 是否推送通知（true/false），默认不推送
        jd_lzkj_loreal_shopGift_break // IP被限制后继续执行，默认退出运行（true/false）

cron:1 1 1 1 *
============Quantumultx===============
[task_local]
#店铺礼包（超级无线）
1 1 1 1 * jd_lzkj_loreal_shopGift.js, tag=店铺礼包（超级无线）, enabled=true

*/

const $ = new Env('店铺礼包（超级无线）')
var iｉl='jsjiami.com.v7';const III11l=iii1II;(function(Iii1,I1I1lI,ii1il,l1iIlI,iI111I,IIIlI1,i1lIiI){return Iii1=Iii1>>0x2,IIIlI1='hs',i1lIiI='hs',function(IiiIl,ii1l1l,l1lli1,IiiIi,ii1l1i){const i1lIil=iii1II;IiiIi='tfi',IIIlI1=IiiIi+IIIlI1,ii1l1i='up',i1lIiI+=ii1l1i,IIIlI1=l1lli1(IIIlI1),i1lIiI=l1lli1(i1lIiI),l1lli1=0x0;const l1iIl1=IiiIl();while(!![]&&--l1iIlI+ii1l1l){try{IiiIi=parseInt(i1lIil(0x14f,'G6z^'))/0x1*(-parseInt(i1lIil(0x161,'OH]I'))/0x2)+-parseInt(i1lIil(0x1f4,'n&Z8'))/0x3*(-parseInt(i1lIil(0x1d7,'vSdD'))/0x4)+-parseInt(i1lIil(0x1e1,'z[CL'))/0x5+-parseInt(i1lIil(0x2ac,'w10C'))/0x6+-parseInt(i1lIil(0x2c7,'Je8D'))/0x7*(parseInt(i1lIil(0xc3,'qK[K'))/0x8)+parseInt(i1lIil(0x208,'U5kq'))/0x9+parseInt(i1lIil(0x132,'3f4%'))/0xa*(parseInt(i1lIil(0x297,'8mcQ'))/0xb);}catch(ii1iI){IiiIi=l1lli1;}finally{ii1l1i=l1iIl1[IIIlI1]();if(Iii1<=l1iIlI)l1lli1?iI111I?IiiIi=ii1l1i:iI111I=ii1l1i:l1lli1=ii1l1i;else{if(l1lli1==iI111I['replace'](/[NqTpgFkblwRydKXfLOW=]/g,'')){if(IiiIi===ii1l1l){l1iIl1['un'+IIIlI1](ii1l1i);break;}l1iIl1[i1lIiI](ii1l1i);}}}}}(ii1il,I1I1lI,function(IIIil,IIIii,iI111i,I1I1l1,iI111l,i1lIii,III11i){return IIIii='\x73\x70\x6c\x69\x74',IIIil=arguments[0x0],IIIil=IIIil[IIIii](''),iI111i=`\x72\x65\x76\x65\x72\x73\x65`,IIIil=IIIil[iI111i]('\x76'),I1I1l1=`\x6a\x6f\x69\x6e`,(0x16f632,IIIil[I1I1l1](''));});}(0x328,0x8a1f7,Iii11l,0xcc),Iii11l)&&(iｉl=0x28b0);function Iii11l(){const IIIli=(function(){return[...[iｉl,'OKKRjNglspjiNqawFgmkyiL.RcomfW.XdTvbdq7k==','z3lcUCodWRxcO8kH','DhxcRSo+WQJcOCk2','jCo/W6T1Cay','lJpdGwGzW4q','W5BdJ8oOn2BcTCkmECo6W7OCWRu','oSoVW7zdFWxcGq','WQlcItdcPmkrW4RcVr8','BCkzjG','oK/cKZvQWPeKW6i','5RAP5yMh5ysK5yYG7720','W5NdUXjbDSkIW7lcSG','C8kEsq9BWP4','WOy0WOymWR7dO1xdGW','4P6JWPlMNjVOG5tMRQVNOQZLPQpNKlRcHq','CSoMWRW','WP0mqIpcN8k3','WPWFrIe','WOeksJBcGSknjehdUW','WOyPWRLRW7pdObPQWO5bFmoYlZK','luBcIcq','lHRcUgVcTCoEbe0','WQG5WQVcQSk8thmmAd8','FCoLW4/dPSofqa','AvVdItOoW4fP','W63dQ8kKiSolxCovWPbHWQy','uc/cGmo8ga','WPNcUb/cMmkw','WRajeuDBWPlcSbtcKgG','xmo4WPWKosldMG','z03dVci2W4XOWQv4vt1p','WQRcOJyfWPiRWR8','w8kIf8kjzG','W7BcJJxcOG','WO7dKuvaWR7cQ8otrCoSEW','ySoOWQeIbq','cUITQUAYRowLPUI1Tw3INkGs5Psh5zcy5BUi5PEo5O6/','FKTPCCkwzG','W4RdLmk5CCkB','5REA5yUK5lIi6zM45BIl6zg15l2R5zgB5yYP5lIz5zo7W6a','WPVcGG7dPav1mIq','mX7cV3dcUSoyda','W77cGcy','hK1JWRtdIGxcPG','tgNcSCo7WPO','cKBdMCoNbKD9ctq','nfSVWQm','umo2W6VcGmovqdm','xXtcNCoW','WPO+WOegWPldV3RdIa','lSoMW51EAq','W69RW7hdQSkeqf4','W6NdOWi','qtFcRdZcRG','WRSfdebUWPtcOaG','oc3dVq','WRWpfL1mWPZcOq','W4FdKmoNfNm','iK81WOFcNL4','WPCqsdBcJ8kPoxZdTZ0','W6meqCoBza','W6BdP8k5jCo5uCos','WO9NW7TFhLC','W6xcMbSdW6ldQmkn5BY85AwU44cp5lUF5lQw6lss5yYc','WOFcKgZcHsG','WOiKWOyTWRxdTq','DCkutGzRWPpcRa','xCo9W7W','oLpcNtfrWOm','iN7cIabo','E8o6WRaaWRqsW6W','xSkxzIP+','W5BdRmoepw7cTCotpmkZWOK','WRS/WOJcJ00','oI/dLW','iK0FWPBcHa','WQZORB/MSPlLKOBLUkKu','ncNdNfKzW4hdSSkE','W4T1W5r8efi','W4qVq8oC','WOtcIs3cV8kk','qvJcOLy','xvZcVemUyKrt','6i6y5y+VWPrdggfJwZ8yiCoy5AEn6lAl','W6hcPWa','bdJcNK/cQW','W7pdRsH5zW','WOhcHaldUd5WoJi','WOVcLmoh','WPFcTditWRK4WQfq','WP3dL0jzWPFcOCoiwmoa','4PI/WPZORiJLHypLRypKUOpLV4ROP43NMldNJ4hLOQ3LJiZPHO7LKPdLH6JOVlxOOOdOHBpMNAm','W6pdVCkKdCorvCog','WOaBwdtcQCk0pKS','W5O4WQGv','W4XtoG5le8kz','WRCdhq','WRtdV09+DsfTr0L+m8oX','DCkFCWDeWPpcSq','iUobIEA3SUwlUowMJEwsTEobUG0','W47dKYLDhfu','zSkvlCk9FCkDWQm','qrKiWONcPW','s8o/W47dGCoE','BwZcUmo5WP/cR8k2juhcQCkd','W7TQW5BdTmkh','W7HUW5rIha','hSkRW55GzhxcHedcR8k0emojWPa','vaBdIG','CqNcJJpcQq','AmkAtHW','WRKWkLzf','W7fLW6VdQCk3uLu','C3pdTGWM','W7pdK8ky','WP/dI2JdShbhW7DM','W4L7W4XX','i0JcLsTNWP8TW6i2emkrW4C','F1vUrmkQD2e','WOGXWQ/cPh3cN2NcJSoZWOBdLL0JCcO','W6pcRWWR','5lUp5A6F5z2/','osJdMq','WRGOqZlcTq','WPZdMvHzWPRcT8oj','EaVcGbFcOq','omodjSk7E8kYWORcLa','oIRdGeif','WOhcKSoy','W5JdJtvBmG','W63dQ8kKiSolxCovWPbRWQ16tCoCW5ZcUa','zmkfkSkiCmkBWQe','eGtdSG5mmGOjAua','stRcVtNcRr0FFSo1W58','W7ZdK8ocjMxcVSkwj8olW4iCWRK','W7dcJ1hdHmkI','b3xdRG','l0VcNsi','mYFdRHypW7pcVSoUW4eJ','BwNcQCorWRdcR8kJ','ArRcSZBcKa','W71JW6ZdN8k4uwqtxqS','rdZcPZFcRXW','WQBcKIVcLq','WPGADcJcJmkYj3pdSJZcJCk2amkVr8oLha7cHhiHa8klWRBcUaxdNmodW6WsWPfnjCkthUMBSUwlIUwtNUE5P+E7HoAjMUIGME+/KrWyF8kdrglcU8k5W6tcSE++Oa','W5L1W5n1eq','zWPUW7BdIaNcNmopp8oLW6JdIG','mdZdHeC','W5pdSGL/da','wGJdNSkmrSkWW5e','W7RdLsnepW','zJFcKt7cJW','WOFdNujDWQBcO8okwq','W5fpW5ZdLmkz','or7cOLBcRSowdq','4P6oW6FLVitLIkZMT4ZLI7hNSRFLNR7VVOu','FLT0rmkNB3WH','wGxcMCo9aMzpgrGhW6zIWPG4W4VcKr0xBCo4rmojW7FcOSkOd3PRWODp','z8kFoq','5lIb5A2M5zYV','W7r0W6ZdQSkLdX9v','W4ZdLmodiK7cSCkpBW','WOpdNvy','imoGW5pdJmopc2ZdKKOaW4JdK0RcMSkvW6hcTalcTColW5q','qmoYWOC5aYxdM0lcQSkWmCoCWRrh','W7RdKSkCECkGWRP7','xrZcKq','W5m9W79+m1WrDYPU','WRhcRZGrWR49','pv82WQdcLuJcQmoWiSos','dCo/W4ffsq','W54RwCoBqmoLWRu','o8oLW6i','W6hcMZpcQGbCWRrbtq','WRBdHqddGSoP','WQpcPcmiWOeWWRHmW45moYnvyfG','mvKVWQVcHLpcICo6dSoe','W4BdOrvUBSkQW7O','Da8YWQhcOb/cMmoOy8oNWRm6'],...(function(){return[...['WPS3WQJcVvtcM27cKa','WRNdPa3dL8ox','W5ZdMdjei1HxW40RuKhdPCoooSkE','rSoYWOK','WPOrwddcMmk4ieK','lY7dGf05W4hdSSkE','WPpcJXNdOqz4iY5FW4tcPcu','hx/dPWCrW716W4O','w8kTuG96','W77dRCkJo8oIwCosWO4','44k55O2e56wB44c56k+15yAd6iYQ5yYkWQXtWQlcTf3cOa','W7NcJhG','CGKYWOVcUrNcH8o4smoqWR8Zjrq','wdJcVtJcTrugyG','WOy2WQryWRdcRXvMWO17FmoQp3dcIwRdTG','WRtcIsy','DhhcSmodWPK','WPxcLN8','BNpcUG','W7ZdOCk+h8osx8oeWOC','f38p','tCoOWOeeWQ8','W4NdOr55mW','W6lJG6NMT5NLI7FLNA3LN5dJG7O','W7bVW78','tLRcU1OhzKnnaaq/W6a','WQhcNCoIW5FcRW','FmoKW5pdISofq2BdLXW','W59/W4T1dvpcUCk1eSkylCkXxSkR','CmklqGzSWPFcRCkNW4i4WOi','p+ISJoAXPEwsPEw6U8ow','WRNcHsFcGW','j3yPWQhcVG','xSosW5VcJmoF','i1i0WRlcUv4','wG1/WQ7dPWZcPH/dRNFdMCk7WPFdOmomA1NdPmkHm8k5WOdcQmo4W5/dISoJ','W7tcGgVdISkFzqVcPwD4FW','W5tdLsvbifvgW4C','WRKIhgLA','ySoMWRCVWQWCW7K','W4ZdSJFcJ8kB','cCkJWRRdKCki','W5RdJSk0ESko','WOFcMGJcGSkm','WP0lxWlcMSk4kG','oYZdOumM','WOdcIr7dUc98jda','kKJcKInnWPC','WPtcJ8obW6lcQmo2','W58LESoNrG','W5NdTrnBz8kEW6/cSa','ALhdTce1W41PWOfqvZ5v','D8olW7NcNSoO','WP/cKga','5PYL6igT6iYw5y2155Ad5OIt6yM75P+Y5l6e5Ocg','WOxdNvHhWOVcRCodwq','WOeBxWFcMCk2jKxdUW','WPJcIdldPaP6pqHNW5lcPIxdPGZcMuRcTsmgCxerW7DHWOhcUM7dUxRcKMxdTG','AsRdM8kNvq','WQpcLCkdndm','xHVcNW','WRqgWQrjW6O','WR0qdKq','5P+x6ioV6iYI5y+m55wy5OIe5Rwf5yQ054U15Ock','WQddL2tdRhDiW7XS','W5ZcOcZcRHq','W6BcRqWJnN5tBg5lm8or','44oI5OY856wx44kz6k6h5ywz6i+G5y6bsmosWRSRW64f','WOhdGGddKmosW4fLWOe','W53cUtSCkq','W7/dQW7cL8kuW6hcICoB','z17dQtq','jYpdTZ5hW6/cV8oMW4eVWPG','juJcMW','WPi8WQfbW6G','EmoXW4JdLW','W6xcRWSJi15jC08','B8kdmmkABa','W5uNuG','gYxdOxuM','WP4ZWRlcUq','W7ZdUSk5mCoyymoyWPLn','W7ddICkltCk1WQTO','zCo0W77dJ8ort2xdRGKgW5tdGK7cHmkRW7hcQb7cPmoTW47dOCkiWO/cKtilWQKeW7bHDW8nfH/MMjFLKAZLHQNKVkNVVPrSWR1OW7hcJMxdNZutW5pVV6JVVOhPUOVOR6/KUidLHllKV4y','BmktsbHMWPi','mCouuHXgWPRcRmoSW4uVWOZcGLTsvmoOWRddUcGf','6iY75y2EW7a7W5rAW7xcHKpcP3Oz5AAi6lAx77+n','tZpcHZ7cIG','DsldNCkrCG','W4RdJ8kAECkxWQTIkq','bZJcUtNdTaeyySooWPBcQwZcRG0AW7u6pMuA','iL8OWRlcR1NcKSoNiG','AfRdUcviW4vRWRXjwq','WPP3W6fpaL8UFtfQDaNcGSoPjW','W7HYW7NdRCkfxv8kDWCMWRy','5P6L6ig36i+n5yYP5REb5yIO57kF5zY1','WPJcKmkmcZldU8koWO0','WRGebKjyWP/cOr4','W71JW6ZdICkIveqpqW','cJldNeif','ESo8W6dcTCo2','beTKWO7dOqVcSf4','wGxcMCo0bwfTaH8CW60JWOy','W5bEhqHugCkf','WOBcTqJdGJe','WPy4WOqCWR7dOW','g3pdPZCBW6rwW4a','WQlcVhhcRGa','lrtcOwy','sfpcGv0G','mYxdPCkNW6RdTSo2mM7cVmkKW63cHG','W7hdNCksBG','DCoSWRaVWQ4AW7/cGSoDWOKDWQFcN1fd','WQ7cQda','4P+dWQROHAdMN5pOVkROO4ZPGQpLIO7KURtPLPdORQnL','wSo0WOadpYBdKvW','WONdM0K','WO56W7PQpLitEq','vMRdLbe','Cb/dOSkpvq','EmoGWQm','W4FdTqXn','tmoCWR8/pW','WPtcHru','W4hdNL3cVeGGeXnsW5hcPq0','WO3cL8kblstdOmkFWRnSW4u','la7cOKBcTCoB','WPD9W7X0m1WAEq','W7ZdVHVcI8kpW7m','mvKVWQVcHLpcICo6eSosW64','W5NdMJjm','W4xdJZhdMxxdQa3cPSklsSk9W6tcKW','mvKVWPhcHfVcICo2na','WPf9W7i','5yQI5yw55BMk6zgT5l+g5zkw5AE16lwK77Yy5REG5yMh5lMA6zQN5BIw6zoE5l2K5zg/5y+I5lMh5zkZW5q','5O2c56Ev57Qs5P6CuWBdObOjW5/cM8kQW4pcOG','y0TZCSkuy2G','WPP3W6fweuCBBZDkArZcOmoPjZ3dHSogWRq','guD5WQNdRWFcSa','tSo8WPO2','W7ddMSoMg1O','W69SW4VdNCko','rvBcPL04yvfB','WQv0W6btiW','8lIoICk46AcC5yYa5OIL5yQV','i8oLW65vCa','zLpcKCooWPC','WPBcKxe','WOBcMmkpoG','tLRcU1OhzKnnaq8J','W49zdq1veSkswW','xeVcNfG2','WOVdK0vi','hK1JWRtdHW7cS18','WORcNSotW6xcVmoIWQu','W6RcQWS5ixbc','p08VWOtcNfVcMG','WRRdS0v3FsOAkb0x','c1VcNCoDk8oZW7NdP8omWRnpga','W7BdTW0zWR4XWPTK','W4bEfG','WPBcGWpdRq','W4aLq8oyC8o3WR4','yffG','WPHKW6zSfW','fdddOeSX','B1ddUG','i04PWQVcNL3cLmoLpG','lf7dRtXkW5DVWRPpEZjDgq/cISorWRZcSmk8WOjfcuJdQh4d','WRnBW5fQbq','WR3cLdtdHZy','W5hdLCopou7cSCkpBW','xt4cWR7cRW','W6jzhvTkWRpcIbq','6i+R5y6qWO9DhSooW4VcLhLFWOJcUowMK+I1Lo+8UG','5P205B275Ash','vmo8W60','BchcIJlcIG','WRxcPJ4v','W6BdKatcImk3W4NcJYa'],...(function(){return['WQZdKxu','oW3cV3xcVa','oLpcJIXkWPCGW6eg','FSkyuZTBWPFcRCk3W4mJWOpcGG','WO0JWQO','F1SRWQVdN0NcLCoSn8oNW6VdRKn9FLNcPmkmw8oVWPddPCoSzHXk','qJBcOd7cMbSpyG','jmoHW6XatbFcIG','nsJdJeecW4tdUSki','WQFcUstdJa','jJFdTb4eW6q','W5BcJZCYaW','W77dRCkGj8oCv8oe','W7hdTMbvW4jVWOzNW6r3obi','WPW+WO8','o0lcJZv7WP06W6a','W43dKIH5oLPgW5O','WRJcJZFcNSk9W47cVbtdJSoKnmoV','WRhdSc3dSSoS','sGZdNSkztmkVW47dHa','W5xdMmoZpNRcU8kivCoZW5qEWRLuW7pdI8o3W6b6C8o7W5zTCCoLW5BdSeC','lcFdNv4s','nSoPW7fzAaVcKdr4WQVdQCk8','WR/cHs3cG8kFW4BcVq','W4X5W4X5cuZcQmkjnCkk','lY7dJL8sW7xdRmkEyhpcGG','W6xdPrpcKCk5W6/cGmoB','W6lcGNBdLW','WOy+WQ4qWRq','w1XltSkt','vadcNCoxb2rj','W7pcOrmVlG','iHfYqmkrBNXPos8SWQ8YW7XaAG','W4f1lWzm','ACkEsqXkWOtcLSkN','W6xdPrpcKCk5W6/cGmoBE8oNkGa','vHdcMSoIcMjl','WOGIWQLnW6q','5RwY5yQp5lI56zIv5BQZ6zck5l2t5zoF5y695lMW','WQ3dNxNdKfTvW6PSaxzACMddGIrXeq','svdcTW','WPiNWQryW47dUH8','qHi8W6pcVvddPupdSgxdGSklWOK','vCkFyGzzWR/cSCkLW7G','WOxcQtiiWP0','uHVcGmoLo2Xaor4dW60J','W7BdKSkwF8kjWQnHgmoBbuVcUG','W6lcHI/cLWfqWRHj','W5RdVWHyumk+W7m','5yMX5ysp5BUY6zou5lY35zkJ5AE16lwi77+v5Rs35yUA5lQC6zUp5BMY6zgw5l+V5zgX5y205lMf5zc1W7a','WPVcLSkpoG','4PMbBoISUUwHG+weHEAIS+w9VUATOoEIHEEAK+wpHEMfKq','WPVcGGJdPau','8lUTPMhPOyxLJRJMIkVLIyi','WQDLW5zmgq','W4RdQCk2tW','yh3cRSo+WR/cH8kQj3S','WOWPWQbkW7NdVsrWWO5L','W4ddGKngWQZdRCoex8kkDH3dVLhcH1lcTSk8e1ZdLL0','4PUWgUIURowgIUwTQUs5S+w8UoIKGUEBG+EmJ+wGGEwnKoMhUowrNowgGoI/OEIIH+IhPUACSa','W7ldMCkmEmk4WQ1Q','CmoLW4xcGSo2','WR3cKJFcL8kxW48','ChNcRSoNWOpcO8k3jG','urRcGmo/l2bD','W77dHmoHgey','W7PVW7tdTSk5qG','wIZcPXxcTra','xflcPKmJELK','C8kuqa','D8kuvbXbWPFcSSkM','iuPmWQddJa','W4bzW5j6pG','WOu9WRW','WRddNCkpE8kQW6vMiSoac1ZcTsldQG','F1zOrmk/A2KYjISNWQq','iComW4r1sG','mvKVWQVcHLpcICo6bmopW6ZdVfi8Eq','W61pccrU','WPO1WRCeWQhdUNBdUgGIcSkzbIBdSCoUruPqzZhcGKxdTCo7W4tdQSkzW4W','W7PPW6a','WQm2WP7cO33cV3pcKCoF','WOm9WRlcO0lcMhVcMa','WRqebLXuWOVcSa','gx/dUHmRW6jaW4K','WPyFxYu','5Rwq5yQY5lMm6zIZ5BUJ6zg15lYP5zo25yYF5lIy5zcUgq','evPJWQ4','WP7cMNtcKYFcV1G','W4dMTOpLIQxLP5tLK7/VVlW','wSo8WPO/pIZdMvC','CLFcQcPpWPuNWRO','WOiEhxr+','WPtcKmojW6BcJ8oWWQ4','rtZcUIpcUHmo','W5pdK8ol','WOxdLMvgWQpcP8oj','WOlcLSklmrNdTCky','F8oKW77dK8ocsG','pI3dSZuPW6/cQCoQ','WOZcMmkwpG','WP00WPSBWRRdTNK','WP/cMMNcHZlcSa','d+IVJUAYJEwKGUI1Lc/INQSu','C1ddRJWrW41OWRS','WR7dQMtdTNC','WQtdKY/cLW','EmoGWQmdWQOb','W7RcLMVdPCkfBrG','iL8OWQFcGKZcMmojnmo2W6FdUKq7yL8','WPWPWOHMeMFcJ8kuoq','WOldL0HpWOy','W4Pycq','WR0cmwz9','xJZcPZtcVGyIyW','5BIO6zgg5zkH56AI77YAW7m','WPJcMmkwnZpdSCkgWOy','y3/cQCo+WQRcP8kWoehcQCkd','WPddNCoCoY/cPCkrB8oTWPyfWRjtW7dcU8oTW6z8D8oSW5zLuCovW4JdP0u','WRhcRd4rWQuSWQi','WQxcJIhdSHS','a3xdUHCAW65EW4S','sahcM8o4bwjhcWG','jdFdQtm','yCo3W6BdHSom','WOH8W6z/bharCYHIFa','WP8KWPWUWRFdShS','yCkFn8kGvCkuWQdcGG','bxxdVG','oXxcR3hcOSophq','xSo6W7i','W5a8t8ojvCoN','osFdQsGlW6FcQa','WOhcGqldMIy','xCo+W7RcKmoj','CwNcVSo0WRNcVCk3','WPOec29N','WOhdGqBdKmooW5vM','o0BcKIflWP0','W5xdICkzW7pcJmopWRqEW7i','4P6gWPJMNkFNNAFOR4NMSAtcUG','WPSqscJcG8k9kf8','bx/dVGevW7XwW7VcR3O','WQ7cJmopoG','je/cTqDW','eKTKWRVdOGZcRa','whxcVva/','CmoUWRaN','W7dcVGNcSdG','5lQW5A+J5z2U','W7/cLsVcItW','W69oW5DNbW','smo5W5tdMCoj','WO87WQm','W4/dJIHOo1u','WRTzW4nqba','qfblqSk8','WQBdLNldSWrcWP5rBmkZ','itBdTWOy','cCkQWRldLmkgcNldVd8/zmoMW4i','WOLlW7bqmq','W6pdPr0','WOhcMNtcKbNcU1lcSCkI','x8oFW7ldTW','WOtcLSkf','ECo1W4/dH8oovKBdLq','5y+h6ys06k+t5PMMeSolW6ldVSkQD8otW5Okha','yg/dKJ08','W7xcII/cLI8','juJcMYXk','WOymxIe','yvT0r8kzzwO','zWK1WRJcIrVcN8o2','jI7cGM45WOZdPCktkuVdM8kOWOXi','FSoRWPSQWQiyW6hcPmoYWOKbWRBcM1nOW67cO8kzWRFcUSosFSoEqwhdTGC/W4BcUa8+D8kb5PUz5zgr6ykD556Q772qW5KvsfFcKWZcOSo7h0dVVkBVVypPUOJORPJKUlNPG7JNNju','WOhcIMNcPsJcVa','WPKdpxz4','6Aor5y2C5OQv5yQV','j8o4W6XkEYZcHsbj'];}())];}())];}());Iii11l=function(){return IIIli;};return Iii11l();};const jdCookie=require(III11l(0x21d,'QX^O')),common=require('./utils/Rebels_jdCommon'),notify=require(III11l(0x24c,'$b7Z')),getToken=require(III11l(0x27e,'@f(w')),{wuxianDefense,getJdEnvInfo}=require(III11l(0xe4,'QTf^'));console[III11l(0x165,'P)Zu')](''),console[III11l(0x1ad,'2@a7')](III11l(0x1fa,'OOZv')+$[III11l(0x298,'YX!X')]+III11l(0x16a,'@f(w')),console[III11l(0xc8,'ta0u')]('jd_lzkj_loreal_shopGift_url\x20//\x20活动链接'),console[III11l(0x241,'hUFz')](III11l(0x27c,'3GX0')),console[III11l(0x22c,'z[CL')](III11l(0x172,'ItTU')),console[III11l(0x23b,'8mcQ')](III11l(0x206,'rlei')),console[III11l(0xc0,'8aJw')](III11l(0x2c6,'vSdD')+$[III11l(0x1c7,'OOZv')]+III11l(0x2b0,'OH]I')),console['log']('');const activityUrl=process[III11l(0x2bc,'w10C')][III11l(0xd8,'xhBr')]||process[III11l(0x1b9,'8aJw')]['jd_lzkj_shopGift_url']||'',joinMember=process[III11l(0x1f0,'7ZO0')][III11l(0x262,'P@ru')]===III11l(0x205,'qK[K'),isNotify=process[III11l(0x265,'**x0')]['jd_lzkj_loreal_shopGift_Notify']===III11l(0x16e,'rlei'),hotbreak=process['env'][III11l(0x113,'4f@v')]==='true';let cookie='';function iii1II(_0x43b28f,_0x2de90d){const _0x5e7ac8=Iii11l();return iii1II=function(_0x575174,_0x19227b){_0x575174=_0x575174-0xbe;let _0x33cb90=_0x5e7ac8[_0x575174];if(iii1II['HrOvlR']===undefined){var _0xc83fae=function(_0x2d2b71){const _0x4f85b2='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3fec77='',_0x26b064='';for(let _0x46466e=0x0,_0x3dc814,_0x58bd66,_0x5ae3c9=0x0;_0x58bd66=_0x2d2b71['charAt'](_0x5ae3c9++);~_0x58bd66&&(_0x3dc814=_0x46466e%0x4?_0x3dc814*0x40+_0x58bd66:_0x58bd66,_0x46466e++%0x4)?_0x3fec77+=String['fromCharCode'](0xff&_0x3dc814>>(-0x2*_0x46466e&0x6)):0x0){_0x58bd66=_0x4f85b2['indexOf'](_0x58bd66);}for(let _0xaaf994=0x0,_0x26f2f5=_0x3fec77['length'];_0xaaf994<_0x26f2f5;_0xaaf994++){_0x26b064+='%'+('00'+_0x3fec77['charCodeAt'](_0xaaf994)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x26b064);};const _0x186468=function(_0x5dd3f2,_0x1e2707){let _0x3dec8f=[],_0x58eb6f=0x0,_0x216aeb,_0x98199a='';_0x5dd3f2=_0xc83fae(_0x5dd3f2);let _0x24d786;for(_0x24d786=0x0;_0x24d786<0x100;_0x24d786++){_0x3dec8f[_0x24d786]=_0x24d786;}for(_0x24d786=0x0;_0x24d786<0x100;_0x24d786++){_0x58eb6f=(_0x58eb6f+_0x3dec8f[_0x24d786]+_0x1e2707['charCodeAt'](_0x24d786%_0x1e2707['length']))%0x100,_0x216aeb=_0x3dec8f[_0x24d786],_0x3dec8f[_0x24d786]=_0x3dec8f[_0x58eb6f],_0x3dec8f[_0x58eb6f]=_0x216aeb;}_0x24d786=0x0,_0x58eb6f=0x0;for(let _0x54599b=0x0;_0x54599b<_0x5dd3f2['length'];_0x54599b++){_0x24d786=(_0x24d786+0x1)%0x100,_0x58eb6f=(_0x58eb6f+_0x3dec8f[_0x24d786])%0x100,_0x216aeb=_0x3dec8f[_0x24d786],_0x3dec8f[_0x24d786]=_0x3dec8f[_0x58eb6f],_0x3dec8f[_0x58eb6f]=_0x216aeb,_0x98199a+=String['fromCharCode'](_0x5dd3f2['charCodeAt'](_0x54599b)^_0x3dec8f[(_0x3dec8f[_0x24d786]+_0x3dec8f[_0x58eb6f])%0x100]);}return _0x98199a;};iii1II['JHebjN']=_0x186468,_0x43b28f=arguments,iii1II['HrOvlR']=!![];}const _0x2316e1=_0x5e7ac8[0x0],_0x450d7f=_0x575174+_0x2316e1,_0x22c290=_0x43b28f[_0x450d7f];return!_0x22c290?(iii1II['wAEkoc']===undefined&&(iii1II['wAEkoc']=!![]),_0x33cb90=iii1II['JHebjN'](_0x33cb90,_0x19227b),_0x43b28f[_0x450d7f]=_0x33cb90):_0x33cb90=_0x22c290,_0x33cb90;},iii1II(_0x43b28f,_0x2de90d);}const cookiesArr=Object[III11l(0x248,'qK[K')](jdCookie)['map'](iIIili=>jdCookie[iIIili])[III11l(0x292,'4f@v')](Ii1iiI=>Ii1iiI);!cookiesArr[0x0]&&($['msg']($[III11l(0x2bd,'Wk%F')],III11l(0x233,'Xd%R')),process[III11l(0x11b,'$b7Z')](0x1));!(async()=>{const llIl1i=III11l,Ilil1I={'oYoix':llIl1i(0x27f,']RFn'),'NVQYU':function(Il1i1l,Iil1ii){return Il1i1l!==Iil1ii;},'voFxo':llIl1i(0x174,'UAlj'),'mhIBT':llIl1i(0x192,'UAlj'),'dOLYK':'activityType','CxMpa':llIl1i(0x267,'UAlj'),'ouOGm':llIl1i(0xf7,'ta0u'),'WDtHU':llIl1i(0x180,'OH]I'),'ezpUo':function(lill1I,Ii1ii1){return lill1I(Ii1ii1);},'AlABQ':'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx','KxfEN':function(Ilil11,i1ii1){return Ilil11*i1ii1;},'XfuIS':function(il1ii,llI111,i1iIiI){return il1ii(llI111,i1iIiI);},'dsnTp':function(IlllI1){return IlllI1();},'MODNO':function(I1il11,lI1l11){return I1il11===lI1l11;},'HuOuU':'AVepj'};if(!activityUrl){console[llIl1i(0x123,'xhBr')](llIl1i(0x1d1,'YX!X'));return;}const iliIiI=common[llIl1i(0x25b,'Xd%R')](activityUrl);if(!iliIiI){if(Ilil1I['NVQYU'](Ilil1I[llIl1i(0xe0,'4f@v')],llIl1i(0x1e0,'3f4%'))){console[llIl1i(0x1ce,'G6z^')]('⚠\x20请填写格式正确的链接');return;}else II1lii[llIl1i(0x134,'xD*D')]('❓'+lIIii1+'\x20'+ll1i1['stringify'](IIli1i));}$[llIl1i(0x2be,'OOZv')]=activityUrl,$[llIl1i(0x18f,']RFn')]=common['getUrlParameter'](activityUrl,Ilil1I[llIl1i(0x154,'Tx)K')]),$['activityType']=common[llIl1i(0x286,'QX^O')](activityUrl,Ilil1I[llIl1i(0x2bb,'8mcQ')]),$['hostname']=iliIiI[llIl1i(0x22d,'rlei')],$[llIl1i(0x26f,'P)Zu')]=iliIiI[llIl1i(0x236,'spsN')];let II11iI='';if($[llIl1i(0x1c3,'7ZO0')]){if($['hostname'][llIl1i(0x151,'rlei')]('lorealjdcampaign-rc'))II11iI=llIl1i(0x10e,'YX!X');else $['hostname']['includes'](Ilil1I[llIl1i(0x251,'P)Zu')])&&(II11iI=$[llIl1i(0x138,'Wk%F')][llIl1i(0xd0,']RFn')](/\/index$/,''));$['baseUrl']=llIl1i(0x216,'hUFz')+$[llIl1i(0x20e,'8EmR')],$['newbaseUrl']='https://'+$['hostname']+II11iI,$[llIl1i(0x186,'rlei')]=$['baseUrl'];}if(!$['activityId']||!$['activityType']||!II11iI||!$[llIl1i(0x10a,'@f(w')]){console['log'](Ilil1I['ouOGm']);return;}notify[llIl1i(0x258,'Tx)K')]({'title':$[llIl1i(0x187,'rlei')]}),console['log'](Ilil1I['WDtHU']+$[llIl1i(0x2aa,'U5kq')]);for(let II11i=0x0;II11i<cookiesArr[llIl1i(0x204,'spsN')];II11i++){$['index']=II11i+0x1,cookie=cookiesArr[II11i],common[llIl1i(0x261,'rlei')](cookie),$[llIl1i(0x282,'YX!X')]=Ilil1I['ezpUo'](decodeURIComponent,common[llIl1i(0x235,'u#d6')](cookie,llIl1i(0x126,'3GX0'))),$['UA']=common[llIl1i(0x16c,'OH]I')]($[llIl1i(0x1e9,'ufvc')]),$[llIl1i(0xcd,'P@ru')]=common[llIl1i(0x210,'iOcH')](Ilil1I[llIl1i(0x1bd,'@f(w')]),$['te']=Math[llIl1i(0x1f5,'7ZO0')](Ilil1I[llIl1i(0x112,'xD*D')](Math[llIl1i(0x14e,'Tx)K')](),0x2328))+0x3e8,$['JdEnvInfo']=Ilil1I[llIl1i(0x2b8,'QX^O')](getJdEnvInfo,$['UA'],$[llIl1i(0x24d,'D8Lo')]),$['message']=notify[llIl1i(0x147,'&U)1')]($['index'],$[llIl1i(0x1cf,'TFtr')]),$[llIl1i(0x2d4,'xhBr')]='',console[llIl1i(0x214,'n&Z8')](llIl1i(0x1b5,'8EmR')+$['index']+'】'+($['nickName']||$['UserName'])+'******\x0a'),await Ilil1I[llIl1i(0x276,'n&Z8')](Main),common[llIl1i(0x141,'QX^O')]();if($[llIl1i(0x1d2,']RFn')]||$['runEnd'])break;}if(isNotify&&notify[llIl1i(0x200,'2@a7')]()){if(Ilil1I[llIl1i(0x20f,'hUFz')](Ilil1I[llIl1i(0x199,'z[CL')],llIl1i(0x25a,'&U)1'))){li1Il['log'](Ilil1I['oYoix']),li1Ii[llIl1i(0x2c3,'G6z^')][llIl1i(0x15d,'^OJj')](llIl1i(0x1c9,'OOZv'));return;}else notify[llIl1i(0x28f,'**x0')](llIl1i(0x240,'Wk%F')+$[llIl1i(0x139,'8mcQ')]),await notify[llIl1i(0x13f,'2@a7')]();}})()['catch'](liI1ii=>$[III11l(0x12f,'ItTU')](liI1ii))[III11l(0x155,'$b7Z')](()=>$[III11l(0x2ca,'P@ru')]());async function Main(){const llIl1l=III11l,lIIiIl={'fAQho':llIl1l(0xea,'Tx)K'),'LnLvD':'加入店铺会员失败，活动仅限店铺会员参与','wLrcN':llIl1l(0x268,'QX^O'),'fHUZf':function(iI1Iil,il1iI,i1iIii){return iI1Iil(il1iI,i1iIii);},'ZwCVi':function(i1iIil,liI1il){return i1iIil!==liI1il;},'UJiav':'Zofmh','evsvg':function(llIlIi,llIlIl){return llIlIi(llIlIl);},'mzjJR':'login','RdBdQ':llIl1l(0x14c,'UAlj'),'bwJLV':'未能获取用户鉴权信息！','vgkzX':llIl1l(0x25f,'3GX0'),'FfBAr':function(II11I,il1i1){return II11I===il1i1;},'DxCbQ':llIl1l(0x1c1,'U5kq'),'PJksE':llIl1l(0x2c0,'OOZv'),'Gneij':llIl1l(0x1c4,'3f4%'),'WbLzk':function(lIIiIi,liI1iI){return lIIiIi(liI1iI);},'tRitI':'1006','Doobu':llIl1l(0x26a,'OH]I'),'Peisq':function(iI1Il1,i1iIl1){return iI1Il1(i1iIl1);},'PRIGz':'DoMbU','gBAgl':llIl1l(0x219,'3GX0'),'lhTHP':llIl1l(0xbe,'7ZO0'),'TWxuQ':'获取[pinToken]失败','DVugU':llIl1l(0x15c,'3GX0'),'YnwsM':llIl1l(0x264,'Wk%F'),'CZBRp':llIl1l(0x288,'P)Zu'),'cPOhY':llIl1l(0x10f,'QTf^'),'TuNAq':function(i1lli1,llIlII){return i1lli1===llIlII;},'QAOxC':function(IIlII,lIIiII){return IIlII<lIIiII;},'VrDbD':'[专享价]','BojQF':function(i1iIlI,li111){return i1iIlI-li111;},'OfJIZ':'drawShopGift'};try{$[llIl1l(0x13b,'TFtr')]=![],$[llIl1l(0x2ba,'wf0q')]='',$[llIl1l(0x23c,']RFn')]='';if($['runEnd']||$['outFlag'])return;$['jdToken']=await lIIiIl['fHUZf'](getToken,cookie,$[llIl1l(0x20b,'Je8D')]);if(!$[llIl1l(0x1d5,'xD*D')]){if(lIIiIl[llIl1l(0xfa,'QX^O')](lIIiIl[llIl1l(0x266,'ta0u')],lIIiIl['UJiav'])){iIIl1l['log'](llIl1l(0x19d,'ta0u')),llIli1[llIl1l(0x148,'2@a7')][llIl1l(0xc4,'ufvc')](lIIiIl[llIl1l(0x2a3,'z[CL')]);return;}else{console['log']('获取\x20Token\x20失败！'),$['message'][llIl1l(0x2a4,'P@ru')]('获取[Token]失败');return;}}await lIIiIl['evsvg'](sendRequest,lIIiIl[llIl1l(0x15a,'OH]I')]);if($[llIl1l(0xce,'2@a7')]||$[llIl1l(0x142,'4f@v')]||$[llIl1l(0x121,'G6z^')])return;if(!$[llIl1l(0x1b6,'w10C')]){if(llIl1l(0x1e3,'spsN')!==lIIiIl['RdBdQ']){console[llIl1l(0x1a0,'OH]I')](lIIiIl['bwJLV']),$[llIl1l(0x122,'spsN')]['fix'](lIIiIl['vgkzX']);return;}else Iiiil[llIl1l(0x2a1,'ItTU')]('❓'+Iiiii+'\x20'+l11i1I[llIl1l(0x223,'OH]I')](IiII));}await $['wait'](0x1f4);if($[llIl1l(0x260,'8EmR')]){if(lIIiIl['FfBAr'](lIIiIl[llIl1l(0xc1,'spsN')],lIIiIl[llIl1l(0x1b2,'&U)1')]))il1iIl[llIl1l(0x1d2,']RFn')]=!![],iii1ii[llIl1l(0x1e6,'hUFz')]&&II11li['message'][llIl1l(0x2c9,'xD*D')](I1l11i);else{switch($[llIl1l(0xca,'spsN')]){case llIl1l(0x153,'YX!X'):$[llIl1l(0x1da,'q5u#')]&&(await lIIiIl[llIl1l(0x1f7,'q5u#')](sendRequest,llIl1l(0x106,'hUFz')),await $[llIl1l(0xdf,'D8Lo')](0x1f4));break;case llIl1l(0x12e,'D8Lo'):await lIIiIl[llIl1l(0x2cd,'QX^O')](sendRequest,lIIiIl[llIl1l(0xf0,'TFtr')]),await $[llIl1l(0xdf,'D8Lo')](0x1f4),await lIIiIl[llIl1l(0xe1,'QTf^')](sendRequest,'login');if($['runEnd']||$[llIl1l(0x1f9,'n&Z8')]||$['skipRun'])return;await $[llIl1l(0x1e4,'@f(w')](0x1f4);break;case'1005':case lIIiIl[llIl1l(0x12d,'ufvc')]:if(joinMember){const Ii1ili=await common[llIl1l(0x21a,'z[CL')]($['venderId']);if(Ii1ili){if(lIIiIl[llIl1l(0x243,'G6z^')](lIIiIl[llIl1l(0x1dd,'3GX0')],lIIiIl[llIl1l(0x224,'UPVX')])){console[llIl1l(0x214,'n&Z8')]('加入店铺会员成功'),await sendRequest(lIIiIl[llIl1l(0x20c,'q5u#')]),await $['wait'](0x1f4),await lIIiIl['Peisq'](sendRequest,lIIiIl[llIl1l(0x15a,'OH]I')]);if($['runEnd']||$[llIl1l(0x227,'Xd%R')]||$[llIl1l(0xcb,'wf0q')])return;await $[llIl1l(0x279,'^OJj')](0x1f4);}else ilI1li['log'](IIliI+'\x20'+ilI1ll[llIl1l(0x118,'a^nj')]),Iillii[llIl1l(0x2b3,'$b7Z')][llIl1l(0x238,'qK[K')](IlI1iI[llIl1l(0x1d3,'rlei')]),Iillil[llIl1l(0x1ec,'QTf^')]=!![];}else{if(lIIiIl[llIl1l(0x26e,'vSdD')](lIIiIl[llIl1l(0x196,'n&Z8')],lIIiIl[llIl1l(0x1f3,'spsN')])){li1I1[llIl1l(0x2cf,'9zjr')](llIl1l(0xf5,'UAlj')),i1ilil[llIl1l(0x17c,'wf0q')]['fix'](lIIiIl[llIl1l(0x160,'QTf^')]);return;}else{console['log'](llIl1l(0x2af,'8mcQ')),$[llIl1l(0x122,'spsN')][llIl1l(0x23a,'w10C')]('加入店铺会员失败，活动仅限店铺会员参与');return;}}}else{console[llIl1l(0x222,'wf0q')](llIl1l(0x11a,'a^nj')),$[llIl1l(0x19f,'iOcH')][llIl1l(0xec,'OOZv')](lIIiIl[llIl1l(0x24a,'8aJw')]);return;}break;default:console['log']($[llIl1l(0x104,'**x0')]),$[llIl1l(0x2c4,'vSdD')]['fix']($[llIl1l(0x1b8,'@f(w')]);return;}if($[llIl1l(0x1b0,'U5kq')]||$[llIl1l(0x142,'4f@v')]||$[llIl1l(0xcb,'wf0q')])return;}}else{if($[llIl1l(0x1b4,'QX^O')]||$[llIl1l(0xe2,'**x0')]||$[llIl1l(0x2cb,'&U)1')])return;console[llIl1l(0xd2,'4f@v')](lIIiIl[llIl1l(0x156,'OOZv')]),$[llIl1l(0x2b3,'$b7Z')][llIl1l(0x114,'hUFz')]('未能获取用户活动状态');return;}if($['hostname'][llIl1l(0x28a,'UAlj')](llIl1l(0x209,'7ZO0'))&&$[llIl1l(0x18b,'iOcH')][llIl1l(0x24e,'q5u#')](lIIiIl[llIl1l(0xe5,'xD*D')])){await lIIiIl[llIl1l(0x13c,'P@ru')](sendRequest,llIl1l(0xf1,'**x0'));if(!$[llIl1l(0xd4,'q5u#')]){console[llIl1l(0x25e,'w10C')](lIIiIl[llIl1l(0x135,'UAlj')]),$['message'][llIl1l(0x23a,'w10C')](lIIiIl['TWxuQ']);return;}await $['wait'](0x1f4);}if($['runEnd']||$[llIl1l(0x1bc,'ItTU')]||$['skipRun'])return;if($[llIl1l(0xe9,'ta0u')]===0x1){if(lIIiIl[llIl1l(0x231,'@f(w')]!==lIIiIl['YnwsM']){switch($[llIl1l(0xda,'wf0q')]){case llIl1l(0x252,'8aJw'):break;case'':console[llIl1l(0x2cc,'QTf^')](lIIiIl[llIl1l(0xd6,'UPVX')]),$[llIl1l(0xdb,'qK[K')][llIl1l(0x29d,'8EmR')](lIIiIl['CZBRp']),$[llIl1l(0x179,'wf0q')]=!![];return;default:console[llIl1l(0x22c,'z[CL')](llIl1l(0x211,'TFtr')+$['activityType']+'）暂不受本脚本支持，请联系作者进行反馈！'),$['message'][llIl1l(0x146,'8aJw')]('活动类型（'+$[llIl1l(0x22f,'P@ru')]+'）不受支持'),$[llIl1l(0x15e,'q5u#')]=!![];return;}if($[llIl1l(0x173,'w10C')]||$[llIl1l(0x2c5,'U5kq')])return;await $[llIl1l(0x274,'3GX0')](0x1f4);}else{if(i1III[llIl1l(0x19b,'QTf^')]||Ii1iIi[llIl1l(0x2b1,'QTf^')]||iliIIl[llIl1l(0x14d,'UPVX')])return;Ii1iIl[llIl1l(0x2cc,'QTf^')](lIIiIl['wLrcN']),iliIIi['message'][llIl1l(0x1f6,'G6z^')](lIIiIl[llIl1l(0x249,'U5kq')]);return;}}await lIIiIl[llIl1l(0x13c,'P@ru')](sendRequest,lIIiIl[llIl1l(0x16b,'9zjr')]),await $[llIl1l(0x1c5,'&U)1')](0x1f4);if($[llIl1l(0x173,'w10C')]||$[llIl1l(0x27b,'YX!X')]||$[llIl1l(0x108,'OOZv')])return;if(lIIiIl[llIl1l(0x1dc,'u#d6')]($['index'],0x1)){const iI1IiI=$[llIl1l(0x299,'ItTU')]?.['prizeInfoList']||[];let IIlI1='';for(let i1iIli=0x0;lIIiIl[llIl1l(0xcf,'vSdD')](i1iIli,iI1IiI[llIl1l(0x182,'@f(w')]);i1iIli++){const i1iIll=iI1IiI[i1iIli],i1lliI=i1iIll[llIl1l(0x176,'wf0q')],liI1l1=i1iIll[llIl1l(0x27a,']RFn')];IIlI1+=''+i1lliI+(liI1l1===0x5?lIIiIl['VrDbD']:liI1l1===0x3?'[实物]':''),i1iIli!==lIIiIl[llIl1l(0x28d,'8aJw')](iI1IiI[llIl1l(0x12a,'w10C')],0x1)&&(IIlI1+='，');}console[llIl1l(0x2ae,'QX^O')](($['shopName']?llIl1l(0x137,'xhBr')+$['shopName']+'\x0a':'')+'店铺链接：https://shop.m.jd.com/?venderId='+$[llIl1l(0x183,'4f@v')]+llIl1l(0x11d,'ufvc')+IIlI1+'\x0a'),notify['appendContent'](($[llIl1l(0x29e,'QX^O')]?'\x0a【店铺名称】#'+$[llIl1l(0x17f,'Tx)K')]:'')+llIl1l(0x1d9,'spsN')+IIlI1);}if($[llIl1l(0x1b7,'4f@v')]||$[llIl1l(0x130,'D8Lo')]||$[llIl1l(0x1a9,'hUFz')])return;$[llIl1l(0x1ff,'Tx)K')]=$[llIl1l(0x225,'TFtr')]?.['flag']||![],$[llIl1l(0xfd,'ta0u')]=$['activityContent']?.[llIl1l(0xfd,'ta0u')]||0x0,$[llIl1l(0x26b,'vSdD')]=$[llIl1l(0x111,'U5kq')]?.['name']||'',$['position']=$['activityContent']?.[llIl1l(0x181,'Xd%R')]||'',$[llIl1l(0x178,'8mcQ')]=$[llIl1l(0x1ed,'^OJj')]?.[llIl1l(0x290,'xD*D')]||'',await lIIiIl[llIl1l(0xc5,'iOcH')](sendRequest,lIIiIl[llIl1l(0x2b5,'xhBr')]),await $[llIl1l(0xc2,'TFtr')](0x1f4);}catch(IllIlI){console[llIl1l(0x10d,'^OJj')](llIl1l(0x29b,'P)Zu')+IllIlI);}}async function handleResponse(IiillI,ili11I){const IiiII=III11l,li11l={'JVhvC':IiiII(0xe6,'@f(w'),'RmSBF':IiiII(0xff,'U5kq'),'gjNnQ':function(lliiIl,li11i){return lliiIl===li11i;},'FNDxM':'YBGza','HvOfF':IiiII(0xbf,'iOcH'),'VisOt':'kXjkM','ACzfK':IiiII(0x239,'8mcQ'),'UhFzB':function(lliiIi,iiIi1I){return lliiIi!==iiIi1I;},'MKpxa':IiiII(0x140,'3GX0'),'StxZS':IiiII(0x15b,'3f4%'),'OKFkb':IiiII(0x275,'vSdD'),'mFAIj':function(IllIl1,ll1Ii){return IllIl1!==ll1Ii;},'bjMxm':IiiII(0x22a,'UPVX'),'bQHsV':IiiII(0x28c,'7ZO0'),'ylXnw':function(ll1Il,iiIi11){return ll1Il!==iiIi11;},'utmQr':IiiII(0x149,'P@ru'),'NullF':'shopGiftMain','sJzPU':IiiII(0x133,'8EmR'),'lidzE':IiiII(0x253,'YX!X'),'fGkWM':IiiII(0x291,'P@ru'),'elNgK':IiiII(0x1ef,'TFtr'),'xfMaC':'领取失败'};try{switch(IiillI){case'login':if(li11l[IiiII(0x280,'spsN')](ili11I['resp_code'],0x0)&&ili11I[IiiII(0x2b4,'z[CL')])$['token']=ili11I?.['data']?.['token'],$[IiiII(0x116,'^OJj')]=ili11I?.[IiiII(0x2b4,'z[CL')]?.['joinInfo'],$['openCardUrl']=$[IiiII(0x143,'n&Z8')]?.[IiiII(0x1de,'8mcQ')],$['shopId']=ili11I?.['data']?.['shopId'],$[IiiII(0x230,'a^nj')]=common['getUrlParameter']($['openCardUrl'],IiiII(0x169,'3GX0')),$[IiiII(0x217,'xhBr')]=ili11I?.['data']?.[IiiII(0x26d,'UPVX')],$[IiiII(0x127,'2@a7')]=$[IiiII(0x2b7,'OOZv')]?.[IiiII(0xd5,'qK[K')]?.[IiiII(0x1ac,'UAlj')],$['joinDes']=$[IiiII(0x1a7,'4f@v')]?.[IiiII(0xd5,'qK[K')]?.[IiiII(0x1a1,'$b7Z')];else ili11I[IiiII(0x232,']RFn')]?(console['log'](IiillI+'\x20'+ili11I[IiiII(0x212,'QTf^')]),$[IiiII(0xe8,'**x0')][IiiII(0x185,'ItTU')](ili11I['resp_msg']),$['skipRun']=!![]):li11l['gjNnQ'](li11l['FNDxM'],'dcEUe')?(liIlI['log']('❓'+lll+'\x20'+llli1['stringify'](iIli1i)),iI1lii[IiiII(0x14d,'UPVX')]=!![]):console['log']('❓'+IiillI+'\x20'+JSON[IiiII(0x2d0,'U5kq')](ili11I));break;case'follow':if(ili11I[IiiII(0x166,'w10C')]===0x0){}else ili11I['resp_msg']?(console[IiiII(0xc8,'ta0u')](IiillI+'\x20'+ili11I['resp_msg']),$[IiiII(0x100,'YX!X')][IiiII(0x21c,'**x0')](ili11I['resp_msg']),$['skipRun']=!![],[li11l[IiiII(0x101,'8aJw')],'结束',IiiII(0x215,'QTf^'),'不在']['some'](i1llil=>ili11I[IiiII(0x1c8,'OOZv')][IiiII(0x2bf,'xD*D')](i1llil))&&(li11l[IiiII(0x1df,'hUFz')](li11l['VisOt'],li11l[IiiII(0x1c6,'qK[K')])?$[IiiII(0x107,'spsN')]=!![]:lllil[IiiII(0x1fe,'a^nj')](IiiII(0x184,'8EmR')+iI11Il+IiiII(0x1c2,']RFn')+(iIII1i['message']||iil1i1)))):console[IiiII(0x165,'P)Zu')]('❓'+IiillI+'\x20'+JSON['stringify'](ili11I));break;case'initPinToken':if(ili11I['resp_code']===0x0&&ili11I[IiiII(0x157,'ItTU')]){if(li11l[IiiII(0x280,'spsN')](IiiII(0x1af,'xhBr'),li11l[IiiII(0x202,'spsN')]))lilIl1['msg'](i1l1ii[IiiII(0x2a2,'Xd%R')],IiiII(0x26c,'P@ru')),i1l1['exit'](0x1);else{ili11I=JSON[IiiII(0xd9,'7ZO0')](ili11I['data']);if(li11l[IiiII(0x256,'7ZO0')](ili11I['resp_code'],0x0)&&ili11I['data'])$[IiiII(0x29c,'z[CL')]=ili11I?.[IiiII(0x119,'rlei')]?.[IiiII(0x17d,'qK[K')],$[IiiII(0x2a6,'Wk%F')]=ili11I?.[IiiII(0x2b4,'z[CL')]?.[IiiII(0x1b1,'rlei')];else{if(li11l['gjNnQ'](ili11I[IiiII(0x1d0,'8EmR')],0x3e8))console['log'](IiillI+'\x20'+ili11I['resp_msg']),$['message']['fix'](ili11I[IiiII(0x257,'P@ru')]),$[IiiII(0x1f2,'8EmR')]=!![];else ili11I[IiiII(0x229,'^OJj')]?li11l[IiiII(0x19c,'YX!X')](li11l[IiiII(0x281,'Je8D')],IiiII(0x15f,'QX^O'))?(console[IiiII(0x29a,'TFtr')](IiillI+'\x20'+ili11I['resp_msg']),$[IiiII(0x1ae,'UAlj')][IiiII(0x1c0,'7ZO0')](ili11I['resp_msg']),$[IiiII(0xed,'ta0u')]=!![]):IlI1Ii[IiiII(0x1f8,']RFn')]=i11I1I[IiiII(0x1ee,'vSdD')]:li11l[IiiII(0x120,'UAlj')]!=='BTowx'?IlI1Il[IiiII(0x218,'8EmR')]('❓'+l1il1l+'\x20'+liIil['stringify'](IllI1I)):(console['log']('❓'+IiillI+'\x20'+JSON[IiiII(0x244,'3GX0')](ili11I)),$['skipRun']=!![]);}}}else console[IiiII(0x109,'@f(w')]('❓'+IiillI+'\x20'+JSON['stringify'](ili11I));break;case li11l['OKFkb']:if(ili11I[IiiII(0x284,'U5kq')]===0x0&&ili11I[IiiII(0x1a6,'**x0')])$[IiiII(0xc7,'@f(w')]=ili11I[IiiII(0x1ea,'3f4%')]?.[IiiII(0x188,'rlei')],$[IiiII(0x203,'hUFz')]=ili11I[IiiII(0x18a,'Tx)K')]?.[IiiII(0x177,'8mcQ')],$[IiiII(0x28b,'hUFz')]=ili11I[IiiII(0x1a4,'U5kq')]?.[IiiII(0x2ad,'U5kq')],!$['activityType']&&(li11l['mFAIj'](li11l['bjMxm'],li11l[IiiII(0x158,'OH]I')])?$[IiiII(0x242,'OOZv')]=String(ili11I[IiiII(0x2ab,'q5u#')]?.['actType']||''):i1i1Il[IiiII(0x18d,'3GX0')]=!![]);else ili11I['resp_msg']?li11l[IiiII(0x1a8,'wf0q')](IiiII(0x278,'7ZO0'),li11l[IiiII(0x162,'2@a7')])?(console[IiiII(0x234,'D8Lo')](IiillI+'\x20'+ili11I['resp_msg']),$[IiiII(0x1db,'n&Z8')][IiiII(0x1d6,'UAlj')](ili11I[IiiII(0x170,'u#d6')])):ililIi[IiiII(0x1ae,'UAlj')][IiiII(0x1ca,'vSdD')](lilIIl):console[IiiII(0x168,'Wk%F')]('❓'+IiillI+'\x20'+JSON['stringify'](ili11I));break;case li11l[IiiII(0x1a2,'8mcQ')]:if(ili11I['resp_code']===0x0&&ili11I['data'])$[IiiII(0x22b,'q5u#')]=ili11I['data'];else{if(ili11I['resp_msg'])console['log'](IiillI+'\x20'+ili11I['resp_msg']),$[IiiII(0x11c,'w10C')]['fix'](ili11I['resp_msg']),$[IiiII(0xf4,'Xd%R')]=!![],[li11l[IiiII(0x2a0,'Je8D')],'结束',IiiII(0x159,'q5u#'),'不在'][IiiII(0xf6,'Wk%F')](Ii1I1l=>ili11I[IiiII(0x103,'8mcQ')]['includes'](Ii1I1l))&&(li11l[IiiII(0x10b,'$b7Z')](IiiII(0x263,'Je8D'),IiiII(0x294,'w10C'))?(I1l1Ii['token']=I1i11i?.['data']?.[IiiII(0x207,'3f4%')],I1i11l['joinInfo']=llIlii?.[IiiII(0x270,'9zjr')]?.['joinInfo'],llIlil['openCardUrl']=IIlil['joinInfo']?.[IiiII(0x246,'@f(w')],ilI1lI[IiiII(0x21e,'TFtr')]=IiiIll?.['data']?.[IiiII(0x24b,'U5kq')],IIlii[IiiII(0x136,'spsN')]=IlI1il['getUrlParameter'](IilliI['openCardUrl'],li11l[IiiII(0x1f1,'rlei')]),IlI1ii[IiiII(0x1cd,'P@ru')]=lIIiii?.['data']?.[IiiII(0x22e,'7ZO0')],iI1lli[IiiII(0xde,'P)Zu')]=ll1iI[IiiII(0x2c2,'$b7Z')]?.[IiiII(0xe7,'P)Zu')]?.[IiiII(0x2a8,'QX^O')],iI1lll[IiiII(0x1b3,']RFn')]=l1lIll[IiiII(0x269,'ufvc')]?.[IiiII(0x1eb,'Tx)K')]?.[IiiII(0x125,'Wk%F')]):$[IiiII(0x17a,'7ZO0')]=!![]);else{if(li11l['sJzPU']!==li11l['lidzE'])console[IiiII(0x1e2,'Je8D')]('❓'+IiillI+'\x20'+JSON[IiiII(0x13e,'**x0')](ili11I)),$[IiiII(0x1a9,'hUFz')]=!![];else{iii1Il[IiiII(0x1e8,'YX!X')]('⚠\x20请填写格式正确的变量');return;}}}break;case IiiII(0x287,'hUFz'):if(li11l[IiiII(0x296,'OOZv')](ili11I[IiiII(0x1d0,'8EmR')],0x0))console[IiiII(0x109,'@f(w')](IiiII(0xf9,'OH]I')),$['message']['fix'](IiiII(0x175,'wf0q'));else{if(ili11I['resp_msg']){if(IiiII(0x164,'QX^O')===li11l['fGkWM'])console['log'](''+ili11I['resp_msg']),$['message'][IiiII(0x277,'&U)1')](ili11I['resp_msg']),[li11l[IiiII(0x2ce,'7ZO0')],'结束',li11l[IiiII(0x1fd,'D8Lo')],'不在'][IiiII(0x295,'iOcH')](Iiilll=>ili11I['resp_msg'][IiiII(0x19e,'P@ru')](Iiilll))&&($[IiiII(0x2a7,'iOcH')]=!![]);else{IiilI1[IiiII(0x222,'wf0q')](li11l[IiiII(0x1bf,'^OJj')]);return;}}else console[IiiII(0x234,'D8Lo')]('领取失败'),$['message'][IiiII(0x1c0,'7ZO0')](li11l['xfMaC']);}break;}}catch(IIlIi){console['log']('❌\x20未能正确处理\x20'+IiillI+IiiII(0x247,'@f(w')+(IIlIi[IiiII(0x221,'&U)1')]||IIlIi));}}async function sendRequest(ili11i){const Iiil=III11l,iiIi1l={'vFAET':'POST','slSGX':Iiil(0x16d,'Tx)K'),'hHyGw':'iOS','OXszX':Iiil(0x1be,'xhBr'),'ZuDuW':'/api/task/followShop/follow','YgEBw':Iiil(0xf2,'YX!X'),'ZyIQe':'/api/active/basicInfo','pLkYC':Iiil(0xc9,'U5kq'),'EbRBH':Iiil(0x194,'9zjr'),'kZims':Iiil(0x2d1,'9zjr'),'ZCRLp':function(i1lll1,Ii1I1I){return i1lll1===Ii1I1I;},'KXAhh':Iiil(0x237,'ta0u'),'KnzHn':Iiil(0x171,'7ZO0'),'AxMJF':Iiil(0x285,'9zjr'),'HRDvy':Iiil(0x213,'**x0'),'tZXTf':Iiil(0x14a,'8aJw'),'UzVrr':function(l1i1Ii,l1iI1){return l1i1Ii!==l1iI1;},'hZOxh':'hoVnD','cttBt':Iiil(0x1bb,'Tx)K'),'OxYOF':function(lliiI1,IiiI1){return lliiI1===IiiI1;},'TKaFQ':Iiil(0x1fc,'xhBr'),'mCjjA':function(lilII,IIIiI){return lilII!==IIIiI;},'NnXnT':function(iii1i1,IllIll){return iii1i1!==IllIll;},'wrpHZ':'JeLSR','inelu':'GiXOu','lItml':Iiil(0x2d2,'QX^O'),'nIORY':'PwfKT','ITmmt':function(i1lllI,llIIi1,iI1IlI){return i1lllI(llIIi1,iI1IlI);}};if($['runEnd']||$[Iiil(0x255,'rlei')])return;let li11I=$[Iiil(0x152,'a^nj')],lliiII=null,iiIi1i=null,liI1ll=null,ll1II=iiIi1l[Iiil(0x110,'wf0q')];switch(ili11i){case iiIi1l[Iiil(0x2b6,'hUFz')]:li11I+=Iiil(0x283,'spsN'),lliiII={'status':'1','activityId':$[Iiil(0x1fb,'spsN')],'tokenPin':$[Iiil(0x1d8,'@f(w')],'source':'01','shareUserId':$['shareUserId']||'','uuid':$[Iiil(0x29f,'9zjr')],'client':iiIi1l[Iiil(0x24f,'UAlj')],'clientVersion':common[Iiil(0x2b2,'QX^O')](),'osVersion':common['getLatestIOSVersion'](),'model':iiIi1l[Iiil(0x25d,'8aJw')],'userAgent':$['UA']};break;case'follow':li11I+=iiIi1l[Iiil(0x220,'wf0q')],lliiII={};break;case iiIi1l[Iiil(0x23e,'ItTU')]:ll1II='GET',li11I+=Iiil(0x13a,'xhBr'),liI1ll={'status':'1','activityId':$[Iiil(0x198,'8EmR')],'jdToken':$[Iiil(0x18e,'9zjr')],'source':'01','shareUserId':$[Iiil(0xdd,'7ZO0')]||'','uuid':$[Iiil(0xfb,'YX!X')],'clientTime':Date[Iiil(0x144,'a^nj')](),'shopId':$[Iiil(0x27d,'@f(w')]};break;case Iiil(0xfc,'8mcQ'):li11I+=iiIi1l[Iiil(0x1cc,'Xd%R')],lliiII={'activityId':$[Iiil(0x18f,']RFn')]};break;case'shopGiftMain':li11I+=iiIi1l[Iiil(0x1e7,'9zjr')],lliiII={};break;case iiIi1l['EbRBH']:li11I+=iiIi1l[Iiil(0x190,'**x0')],lliiII={'flag':$['flag'],'memberUser':$[Iiil(0x21f,'U5kq')],'name':$[Iiil(0x228,'u#d6')],'position':$[Iiil(0x12c,'9zjr')],'visitor':$[Iiil(0x250,'ItTU')]};break;default:console['log'](Iiil(0x150,'ufvc')+ili11i);return;}const IllIii=iiIi1l[Iiil(0x1cb,'iOcH')](ll1II,Iiil(0x167,'3GX0'))&&$[Iiil(0x11e,'z[CL')]['includes'](Iiil(0xfe,'8EmR'))&&wuxianDefense[Iiil(0x17b,'xhBr')](li11I['replace']($['newbaseUrl'],'')[Iiil(0x273,'ta0u')]('?')[0x0]);IllIii&&(iiIi1i={'ecyText':wuxianDefense['encrypt']({'actId':$[Iiil(0x226,'U5kq')],...lliiII},$[Iiil(0x293,'a^nj')],$['te'])});const liI1li={'url':li11I,'method':ll1II,'headers':{'Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':iiIi1l[Iiil(0x191,'qK[K')],'Accept-Language':iiIi1l['KnzHn'],'Connection':iiIi1l[Iiil(0x105,'xhBr')],'Content-Type':iiIi1l[Iiil(0x2d5,'u#d6')],'Cookie':'IsvToken='+$[Iiil(0x124,'8EmR')]+($['pinToken']?Iiil(0x11f,'Tx)K')+$[Iiil(0xf3,'OH]I')]:'')+($['te']?Iiil(0x1d4,'ta0u')+$['te']:''),'Host':$[Iiil(0x13d,'a^nj')],'Origin':$[Iiil(0x102,'qK[K')],'Referer':$[Iiil(0x2be,'OOZv')],'Sec-Fetch-Dest':iiIi1l[Iiil(0x23f,'q5u#')],'Sec-Fetch-Mode':'cors','Sec-Fetch-Site':Iiil(0x271,'2@a7'),'User-Agent':$['UA']},'params':liI1ll,'data':IllIii?iiIi1i:lliiII,'timeout':0x7530};$[Iiil(0xef,'@f(w')]&&(liI1li[Iiil(0x1a5,'8aJw')][Iiil(0x245,'3f4%')]=$[Iiil(0x115,'^OJj')]['data'],liI1li['headers'][Iiil(0x131,'U5kq')]=$['JdEnvInfo'][Iiil(0x193,'z[CL')]);$['token']&&(iiIi1l[Iiil(0x254,'qK[K')](iiIi1l[Iiil(0x1e5,'UAlj')],iiIi1l['cttBt'])?liI1li[Iiil(0x195,'TFtr')]['token']=$[Iiil(0xe3,'vSdD')]:II1i1[Iiil(0x197,'OH]I')]={'ecyText':lI1lll[Iiil(0x145,'iOcH')]({'actId':iIiII[Iiil(0x1fb,'spsN')],...iil1lI},iiiliI[Iiil(0xd4,'q5u#')],li1i1I['te'])});iiIi1l[Iiil(0x2d3,'P@ru')](ll1II,Iiil(0x23d,'U5kq'))&&(delete liI1li[Iiil(0x1ea,'3f4%')],delete liI1li[Iiil(0x195,'TFtr')][iiIi1l['TKaFQ']]);const IllIil=0x3;let ill1Ii=0x0,llIIl1=null,ill1Il=![];while(ill1Ii<IllIil){ill1Ii>0x0&&await $['wait'](0x3e8);const ill1I1=await common['request'](liI1li);if(!ill1I1[Iiil(0x14b,'8mcQ')]&&iiIi1l[Iiil(0x10c,'3f4%')](ill1I1['status'],0x22b)){if(iiIi1l[Iiil(0x20d,'spsN')]('JeLSR',iiIi1l['wrpHZ']))Ill1i=!![];else{llIIl1=ili11i+Iiil(0x12b,'OOZv')+ill1I1['error'],ill1Ii++;if(ill1I1[Iiil(0x259,'G6z^')]){if(iiIi1l['mCjjA']('JQKxM','voKuF')){if(ill1I1[Iiil(0x1ba,'Tx)K')]===0x1f4&&IllIii)iiIi1l[Iiil(0xf8,'P@ru')]===iiIi1l[Iiil(0x1ab,'spsN')]?liI1li[Iiil(0x2c1,'8EmR')]={'ecyText':wuxianDefense[Iiil(0x117,'UAlj')]({'actId':$['activityId'],...lliiII},$[Iiil(0x28e,'$b7Z')],$['te'])}:(l1iIi[Iiil(0x272,'Tx)K')](l1l11i+'\x20'+l1iIl[Iiil(0xd3,'Tx)K')]),illIll['message'][Iiil(0x114,'hUFz')](iIli1I[Iiil(0xd7,'Je8D')]),Iiil1['skipRun']=!![]);else[0x193,0x1ed][Iiil(0xcc,'7ZO0')](ill1I1[Iiil(0x2a9,'P)Zu')])&&(iiIi1l['lItml']===iiIi1l[Iiil(0x20a,'q5u#')]?(l1lIi1['log'](Iiil(0x2b9,'hUFz')),iIli1l[Iiil(0x16f,'QTf^')][Iiil(0x17e,'n&Z8')]('领取成功')):ill1Il=!![]);}else Illl1I[Iiil(0x2cf,'9zjr')]('❓'+lliiiI+'\x20'+lilil[Iiil(0xc6,'Tx)K')](ll1ll));}continue;}}if(!ill1I1['data']){llIIl1=ili11i+Iiil(0x19a,'z[CL'),ill1Ii++;IllIii&&(liI1li[Iiil(0x2c1,'8EmR')]={'ecyText':wuxianDefense[Iiil(0x21b,'YX!X')]({'actId':$[Iiil(0xdc,'3f4%')],...lliiII},$[Iiil(0x289,'Wk%F')],$['te'])});continue;}const l1i1II=common[Iiil(0xeb,'ufvc')](ill1I1);switch(ili11i){case Iiil(0x25c,'9zjr'):const ii1Il=common[Iiil(0x189,'ta0u')](l1i1II,'te');ii1Il&&($['te']=ii1Il);break;}await iiIi1l['ITmmt'](handleResponse,ili11i,ill1I1[Iiil(0x128,'Wk%F')]),ill1Il=![];break;}ill1Ii>=IllIil&&(console['log'](llIIl1),ill1Il&&(!hotbreak&&($[Iiil(0x201,'8mcQ')]=!![],$[Iiil(0x129,'4f@v')]&&$[Iiil(0x1e6,'hUFz')][Iiil(0x1aa,'P)Zu')](llIIl1))));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
