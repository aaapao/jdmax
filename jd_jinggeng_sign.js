/*
活动名称：签到有礼 · 京耕
活动链接：https://jinggeng-isv.isvjcloud.com/ql/front/showSign?id=<活动id>&user_id=<店铺id>
环境变量：jd_jinggeng_sign_url // 活动链接
         jd_jinggeng_sign_opencard // 是否入会（true/false），默认不入会
         jd_jinggeng_sign_Notify // 是否通知（true/false），默认不通知


cron:1 1 1 1 *
============Quantumultx===============
[task_local]
#签到有礼 · 京耕
1 1 1 1 * jd_jinggeng_sign.js, tag=签到有礼 · 京耕, enabled=true

*/

const $ = new Env('签到有礼（京耕）')
var iｉl='jsjiami.com.v7';const iillI=iii1II;(function(iilli,IlllIl,II11lI,lI1IIi,I1l11I,Ilil1l,iIIiii){return iilli=iilli>>0x1,Ilil1l='hs',iIIiii='hs',function(iilll,il1iI1,IlllIi,iIIiil,i1l1Ii){const Iil1ll=iii1II;iIIiil='tfi',Ilil1l=iIIiil+Ilil1l,i1l1Ii='up',iIIiii+=i1l1Ii,Ilil1l=IlllIi(Ilil1l),iIIiii=IlllIi(iIIiii),IlllIi=0x0;const I1iIIi=iilll();while(!![]&&--lI1IIi+il1iI1){try{iIIiil=-parseInt(Iil1ll(0x1f6,'%UEs'))/0x1+parseInt(Iil1ll(0x25e,'b&ye'))/0x2+-parseInt(Iil1ll(0x36e,'%UEs'))/0x3+parseInt(Iil1ll(0x212,'3i0!'))/0x4+-parseInt(Iil1ll(0x3ca,'jHNd'))/0x5*(-parseInt(Iil1ll(0x3f1,'qUW7'))/0x6)+parseInt(Iil1ll(0x1f1,'q^l8'))/0x7+-parseInt(Iil1ll(0x1f0,'njRD'))/0x8;}catch(I1iIIl){iIIiil=IlllIi;}finally{i1l1Ii=I1iIIi[Ilil1l]();if(iilli<=lI1IIi)IlllIi?I1l11I?iIIiil=i1l1Ii:I1l11I=i1l1Ii:IlllIi=i1l1Ii;else{if(IlllIi==I1l11I['replace'](/[JFlTyMONwKhtfCIRAqd=]/g,'')){if(iIIiil===il1iI1){I1iIIi['un'+Ilil1l](i1l1Ii);break;}I1iIIi[iIIiii](i1l1Ii);}}}}}(II11lI,IlllIl,function(lI1IIl,i1ilI,iii1lI,i1ilI1,Iiilii,Iil1li,Iiilil){return i1ilI='\x73\x70\x6c\x69\x74',lI1IIl=arguments[0x0],lI1IIl=lI1IIl[i1ilI](''),iii1lI=`\x72\x65\x76\x65\x72\x73\x65`,lI1IIl=lI1IIl[iii1lI]('\x76'),i1ilI1=`\x6a\x6f\x69\x6e`,(0x16f5f7,lI1IIl[i1ilI1](''));});}(0x19a,0x6e7bb,Iii11l,0xcf),Iii11l)&&(iｉl=0x1f4c);const jdCookie=require('./jdCookie'),common=require(iillI(0x1e9,'hKg%')),notify=require(iillI(0x3fb,'6oQT')),getToken=require(iillI(0x2d1,'fvfb')),{jinggeng_savePrize}=require(iillI(0x361,'zwh)'));console[iillI(0x1eb,'C66v')](''),console[iillI(0x279,'dvfs')](iillI(0x2c9,'OG44')+$[iillI(0x2dc,'r88c')]+iillI(0x2dd,'3i0!')),console[iillI(0x230,'njRD')](iillI(0x2f3,'fvfb')),console[iillI(0x379,'B)gE')]('jd_jinggeng_sign_opencard\x20//\x20是否入会（true/false），默认不入会'),console[iillI(0x2db,'@3gD')]('jd_jinggeng_sign_Notify\x20//\x20是否通知（true/false），默认不通知'),console[iillI(0x3c2,'DMD$')]('=========='+$[iillI(0x36d,'C66v')]+'提示结束=========='),console['log']('');const activityUrl=process[iillI(0x359,'gD6w')][iillI(0x39d,'b&ye')]||'',joinMember=process[iillI(0x247,'Ej&Y')]['jd_jinggeng_sign_opencard']===iillI(0x2a1,'zwh)'),isNotify=process[iillI(0x2eb,'q^l8')][iillI(0x30e,'Ej&Y')]==='true';let sid=common['genRandomString'](0x20,'1234567890qwertyuiopasdfghjklzxcvbnm'),un_area=common[iillI(0x3f0,'dvfs')](0x1,'1234567890')+'-'+common[iillI(0x358,'fvfb')](0x4,'1234567890')+'-'+common[iillI(0x374,'!9q2')](0x4,'1234567890')+'-'+common[iillI(0x3f0,'dvfs')](0x5,iillI(0x2f6,'@OCq'));const prize_type={'JD_BEAN':iillI(0x3aa,'6oQT'),'JD_POINT':'[积分]','JD_GOODS':iillI(0x264,'q82j'),'JD_COUPON':iillI(0x3e3,'Ax94'),'JD_J_COUPON':iillI(0x29f,'q82j'),'JD_D_COUPON':iillI(0x296,'s[RS'),'JD_AIQIYI':iillI(0x34d,'3i0!'),'JD_PLUS':iillI(0x3fe,'JZdC'),'JD_E_CARD':'[E卡]','JD_REDBAG':iillI(0x3cd,'TQd9'),'-1':iillI(0x25a,'xtdf')};let JSDOM=null,cookie='',activityCookie='',originCookie='';const cookiesArr=Object['keys'](jdCookie)[iillI(0x3ea,'(k$6')](i11ilI=>jdCookie[i11ilI])[iillI(0x354,'b&ye')](ii1ii1=>ii1ii1);!cookiesArr[0x0]&&($[iillI(0x243,'#n@%')]($[iillI(0x27f,'@OCq')],'【提示】请先获取Cookie'),process['exit'](0x1));function iii1II(_0x1c2f50,_0x5c68fa){const _0x4ab7bf=Iii11l();return iii1II=function(_0x14d9b8,_0x449812){_0x14d9b8=_0x14d9b8-0x1db;let _0x4e5714=_0x4ab7bf[_0x14d9b8];if(iii1II['UJgKnN']===undefined){var _0x3d8d2f=function(_0x3e6cfa){const _0x2051a1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x116aad='',_0x49696e='';for(let _0xd3557b=0x0,_0x416c97,_0x3fa4b5,_0x18f3fb=0x0;_0x3fa4b5=_0x3e6cfa['charAt'](_0x18f3fb++);~_0x3fa4b5&&(_0x416c97=_0xd3557b%0x4?_0x416c97*0x40+_0x3fa4b5:_0x3fa4b5,_0xd3557b++%0x4)?_0x116aad+=String['fromCharCode'](0xff&_0x416c97>>(-0x2*_0xd3557b&0x6)):0x0){_0x3fa4b5=_0x2051a1['indexOf'](_0x3fa4b5);}for(let _0x5f2c1b=0x0,_0x9ac7b=_0x116aad['length'];_0x5f2c1b<_0x9ac7b;_0x5f2c1b++){_0x49696e+='%'+('00'+_0x116aad['charCodeAt'](_0x5f2c1b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x49696e);};const _0x4bdb3d=function(_0x97b1e4,_0x5524ea){let _0x21c005=[],_0x371784=0x0,_0x397c7f,_0x52e013='';_0x97b1e4=_0x3d8d2f(_0x97b1e4);let _0x430a95;for(_0x430a95=0x0;_0x430a95<0x100;_0x430a95++){_0x21c005[_0x430a95]=_0x430a95;}for(_0x430a95=0x0;_0x430a95<0x100;_0x430a95++){_0x371784=(_0x371784+_0x21c005[_0x430a95]+_0x5524ea['charCodeAt'](_0x430a95%_0x5524ea['length']))%0x100,_0x397c7f=_0x21c005[_0x430a95],_0x21c005[_0x430a95]=_0x21c005[_0x371784],_0x21c005[_0x371784]=_0x397c7f;}_0x430a95=0x0,_0x371784=0x0;for(let _0x3231b0=0x0;_0x3231b0<_0x97b1e4['length'];_0x3231b0++){_0x430a95=(_0x430a95+0x1)%0x100,_0x371784=(_0x371784+_0x21c005[_0x430a95])%0x100,_0x397c7f=_0x21c005[_0x430a95],_0x21c005[_0x430a95]=_0x21c005[_0x371784],_0x21c005[_0x371784]=_0x397c7f,_0x52e013+=String['fromCharCode'](_0x97b1e4['charCodeAt'](_0x3231b0)^_0x21c005[(_0x21c005[_0x430a95]+_0x21c005[_0x371784])%0x100]);}return _0x52e013;};iii1II['KNHoPy']=_0x4bdb3d,_0x1c2f50=arguments,iii1II['UJgKnN']=!![];}const _0x13e84a=_0x4ab7bf[0x0],_0x428b32=_0x14d9b8+_0x13e84a,_0x13997d=_0x1c2f50[_0x428b32];return!_0x13997d?(iii1II['FoPcdt']===undefined&&(iii1II['FoPcdt']=!![]),_0x4e5714=iii1II['KNHoPy'](_0x4e5714,_0x449812),_0x1c2f50[_0x428b32]=_0x4e5714):_0x4e5714=_0x13997d,_0x4e5714;},iii1II(_0x1c2f50,_0x5c68fa);}function Iii11l(){const I1l111=(function(){return[...[iｉl,'TjOshljtfIiamFi.TCKcwom.JvRAt7MyyFJdIqJN==','W5OwWPtdQmoK','6i2p5y6AmrzXWPzYWPBdO+wKUoI0IE+9Ja','WPWJCJDZWPH5WOW','WQVMI4RKUkdLRjdNIBpcTW','WPzLjmkVC8krW7ldHG','W5ZdTSk5WRfF','W6hKUlBOSPdcGW','W4lcTL7cNmkn','qmoimGjwW6n7WR/cOMRdUG','8kEMGE+4KCoW5lYy5Oc45yQ/','WO9bB1T+vW','eCo+W77cKCoAvwVcKSomWP/dNa','WRCEW63cRSomWR4','zri7WP/dPSk7W7zY','5Awa5zk75zgz56sF776Y','WOdLUAdPKP3PK5xMJ6JVVkNcGCo2pMRdSCoTW6u3fCksWOpcJ8kbm0SiW4hdQ2JcUv7cNGhcR8kUv8kRpqzhWO3cQq','rCkPWQS','WOWDmYO','W6VcLbnco1RcNCo7a34','W4ebn8oZmeKX','W7tcVmoBoeFcHa','WOpdQWHjA8kuWQRcQ1vwW63cI8o4WRLGW5VcUSkenmoyBSkxW4ZdGSkwmSkUW7RdIqXnW6VdJG','ArBcT2Tkv8kqWR0','W5nCiCkxia','4P2tW47MNBdNNQ7ORAtMSAj/','at9/WRrz','W6JcLHrogehcHq','WOBcJ8opDaK','qmk1WP/dICkkuq','W6inWQtdV8onW7ZdRW','qrJcRG','W7ORW7pdUCoUW4FdQKhcNra','W5FcHX/dKfb4','fmkpt1xdH2RcPq','iSooB8kEhXBdNu3cSW','xWlcPCkV','W7eBWR7dTmocW7u','W5q/t8ogua','WRhdPCkdzb/dHqhdPGNdUSkNW4Oz','aCkbq8k6W7K','6i6K5y2EeYddJ8o7W5vBBUwLQUI1Sq','FUE4G+wnKMG','4PUKWOtORydLOA/LHQBMO5VLV5xMRAZNOy3NMQBLJiFPHl4','W57cNfdcTq','WQjhh17cNNG+WPS','WRdcT8ounCkm','5RA45yUg5lIv6zUH5BI76zgR5l6q5zok5y2o5lUf5zkPWQC','WQrWWQSidq','rmkJWR/dK8kmwgG','WQzdh17cLgC','WP3cL8oTtWy','W4iyy8o6C8o5WOJdOX7cTshcUa','W5FcMJ/dNevI','W5ShsmoACq','WOZdRmk6WOLeWRtdQq','W6inWQtdMmoAW7JdVSoRW4xcRW','WPTKi8k/zG','aHigh8kW','tIWVedmpWQW','5RE55yM65Bws57Qu5P6Q','8yooTtRNIzhLPP/OIAS','o8kYB07dOW','WRJcRCoRnqJcJmoJumkjW65sde4rsmoRWRKHW6vPBfb5','WRNKVOpMGPJLIj1F','WRjdWOu1h8oCpmoqi8kx','8koeSo+4PchKVRBMG6FLI7G','WPrfAeG','m8oxW5BdUbG','FSoov8kVpW','BJ/cM2PM','CSkpkG','tmoiiavbW7H4','8lkoPU+5ISok57Q65y6Y772b','W7ZNUOhMNl/VVBlKU6xMRidML5RNGiBMNjxLKQldMq','W5VcLK7cO8kLW7tcUG','AH1DWPf4','jmkSv8kMW43dQf3dMZmNdmo2W5tcLKC','WRZcGqT8jfRcKq','W6SUW63dGCo1','WQDFWOKXaW','W6lcOSoulKZcVvxdNIq','W4vyaa','WPbbo8k9l8kIW4/dSGZcKapcTCkX','WQBcVCodmSkyrdDY','W6ddJ2tdVSk9WOnk','jeW6p8o3WRyVW7q','Amkhnc/dVfC','WPtcTCkJWQPeWRhdOKVdJmkSWP4xqXGqFfJdPZtcU8ksrCkqomk0WP7cTW','DCoWasX6Av4','W5PAkmokFSoynsb0vCkNW7ZdRSkdBCoChCkNWRuQa8ocgq','x8oRtCkulEs9VUwtOhe','WP5MlMRcT18K','eZfQWRHUWRNdQSkS','uSorlrTetxtcTqNcL2y','W65UqmogtmkRyq','8lwhPU+5Qmoy5l2j5Oks5yUN','W41NthBdNaq','CCoPoXhdTCoIW5W','ftvWWRrLWQRdJSkT','W6CvW4vktCkxFSoAnCk+nCodaa','DmoTpdhdJmo1W51qxs8wfmk0WO0','WQj4h37cLa','cZ9TWQrUWRNdQSkS','st1kWO9H','WRiyW6/cVmoaWQS','orCupCkY','F8oNlW','5RAY5yUR5lMz6zUz5BIM6zgj5l6z5zgT5yYZ5lM7','DCo0bJXZ','CSkDpq','A8oXmwXo','WO1KW6FcUSktW6FcICo0W4iZW4eZ','5Rss5yMU5Bs+57MZ5P6Y77YZ5lIg5Q+P5PwY54gq5P+E5zcfdq','y8kcWPpdPCkYFeZcMSoF','kGBdU8kdWQBcKa','WPJdIY5hua','b8kar3tdIW','8yE+Rse','W67cLHnk','W4ysEColDSoYWPddOYpcQdxcLmklFCkOW5ldUXtdQhNcSuW','W6DVqW','Br/cSw8','kCojW5NdVrKHW5bg','EX99WO4m','WR3cI3JdUSkgWPPxxCo3W5FcUWxcGs/dKblcMtlcTCoslKCC','5AwQ5B2m5lI8','WRRcT8oH','qGbsWPa','WRvveeJcN1KsWPhdRw55Eq','xCkRWQldQSkM','lHVdRW','W4ijlvldQcxcTCkLtc3dR8oXW60','Cv3cV8oqW6ddKHddHq3dPSkAW4JcVG','iHLAWRnMWRCpW4X9','otLhWOPh','W6dcUSoBkehcNuhdLHldOCkzW6Sqcua','qCo+ddNdOW','WRm4fSkJeSkSyH5RW53cPW','WOflzuu','W55AkmkimG','WRfjWPinf8okiCof','gmopm18','taFcUCkVWQWkBXZcH8oeqJ1u','WQVOR7FMSABLPQpOTiddPUkEMgtML5ZLKABLUztML6pMJl8','iHJdUmkkWR3cH0pdHHxdHSkAWP7cTt4MW5tcTvxcRvNcQH4yW7G1W6DKzINcGs7cPSoig8oOW4NcQWJdLmo6W4LrCmoWW6ilrCkr','m8ofW55W','WP4KjHijWPm','WReHbW','Aano','W4balSkpDG','WQxcT8ouaSkzrdrJWO1BACoolGe','FSkzoZNdT24+W51/','W5vFzwpdMq','nCkSv8kqW4NdThddKa','jSoiW5BdVqmYW6zDWQ3cGW','CGLhWRjXWPOVW4W','bIznWRXV','WQmcW6/cN8ohWQG','lKnKW5BcNSoOW4X+B0ydeG','k+E6IUACHoAwOoMwQ++9Ta','EWNcUwLGEmkCWRxdMq','WRxdJCk7','wSkUWQpdKmkJxMdcRq','WQKLCWbM','8kobIqVNQBVMSRO','iSk+FKFcLCkLWOjbCHCrdSk+','W4pWLPc3','WRe3eW3cJ0zw','tSkJWRJdPCkbwMdcRCo1WP3dUvS6WPK','iSkQtCk6W43dQ1W','W53cHGldGuTIomkZWQdcGg/dGq','WRhcVCoYvGhcJmoMtCoFWOOta1qA','mYf6WQrZ','WQpORklMS7FLPA3OTi3dK+kEQmkt','W5pcMGS','WQ1KW6FcUSkFW6FcImk8W4uJW5y4W6rlfG','BJVcU1Dn','W5ewF8o9FW','W4PGxhJdObeJWRu','W5VcGfO','W5BdTCkX','WRxdUc9wwa','WRbiWPuSe8ockG','tmopnfLsWRm8lq','EJbOWQCgW6JdIG','rmoci3TgWRO8','5PYl6ikK6i+S5y6a55w35OMz6yQ/5P2O5lYm5OgU772l','W4L6wa'],...(function(){return[...['5yUq5ysI5BUR6zkT5l+e5zk05Asi6lAf77+a5RAc5yQn5lQQ6zIq5BQm6zkp5l+D5zkv5y2N5lIA','CtP3WRGiW7JdVmoQW7JcQa','WOnxCXdcIMtdQW','W4fOja','WRKWW7lcKSoU','WPntDbtcSx/dSmkQzGJdQ8o1','WOv5W6tcOCk8','WPXtFq','W7BdQxRdP8kz','W40hmmoPj0CGWRTazG','W5P6l8k3WQO','WOvpFXlcKxxcUa','W5qzsmoauW','WPzvyG','tIH2WPrrWQKO','W79/jCk2WR8','fSkex0tdGMlcRqfldLzEaSkp','WQVMTyZLIQxOPyRLIipVVO3dTW','f8kiuW','WQf+W73cImkAW6JcMG','W5ZdS8kU','WPFdPSklwLfksa','WOXrDxPMxGy','W7q8WPVdM8ok','5RsE5yIj5lQs6zML5BQW6zcT5l2d5zcg5y+p5lMq','vSoei3ziWRGYn2G','sCoEjG','rJWVeZmlWQzoWOn1cmknqmoY','tmkOWQJdTmkeuMG','W5ecFSoM','WRK8fG','W6tcUmo6gxe','W7BcO8oym0C','WRP4rtlcNvxdH8koCG','WPVdMIXOyW','W5iFySo+vmo2WPddOW','lSk6xG','WRjlh1VcL2yo','WPqIlq','WP0+yY1S','6i6E5yYqWPFdTmkcvgJcPSog5AEy6lAE','W61Pxa','mSosW5tdLaiH','m8onW5LGumkq','f8kor23dGxdcKWXkcG','W40yAG','W5SmWRVdUmop','W4ZcLsLGaG','W4xcMftcOmkwW6BcSq','toIXT+IWUEwmLUs5QCos','W5/cUG/dHM4','W6qlWQtdPmoEW73dMSoZW77cQIlcVeOxW5G','WPxdRCkBs1rcqmo1z35nsmoTWRG','W6WBqqpdJtGGWPBdJuj5EW','fYiieSkYWOLuW4xcOSonzXyjFW','vSoylYrkW64','WRnhbx/cL28AWPRdP1roBCooW6G','WRfFEqxcQgu','WOKHbqZcOebEW5O','h+wSUUElNLK','CSoEB8kLgXBdSuG','WR0yW6y','W57dV8kLWR1FWRtdOrddT8kMWPi','ACoECSkYhWpdNq','DHhcVW','W6jUr8o+umkIytC','W7RcI1hcImkC','WQndWP8Ch8oDbSov','W6nZomk/hJ3cM8kf','5yIe5ywS5BQO6zoP5l605zcO5OME5yMp','sCooma','WPpdV8koFfXPtmo9Ba','qc46jdS9WQ5fWOLpp8kz','W7XIvmo5Ba','zJPHWOjA','W416BhRdIr4','WRjlcq','W71eBSoWFq','W5FcRYpdR0O','qJy1iJyaWR5oWR5OlCkA','l8kMxG','W4WsFSo9E8oWWPG','WPJdS1vMtmoBWRhcTWDiWR7cLmk8W7mJW5ddUmkjfCoUlCksW57cGSouA8oRW7hcIXCwW7NdLdvxWPZdNN4pW4PWW7ddTH/cMCkCWQq','CCo7atPPEG','WPznW5ZcQ8k+','FSoUB8kxpW','W5JcKLdcTq','W6CNFCozEq','W6XNeSk7tG','8lssS2pNQRJMS5S','W6xdGwpdQSkkWOrTfG','W68QW6q','5P6o5AgI5zYp5z2t','hxCramo0','WORdTaTrBmkwWQBcUG','qSoeoq','WPrtErxcTxtdQ8k7','CCoEjbnQW6TMWQ4','ymo1umkvma','W4aliW','WQPKW6RcU8kBW6ZcK8kT','DSooB8keeaa','W4vxBKL4xaqjESkH','WQpMTiZLI4/LTiRKU59s','W6BcU8orcehcNLe','5BIP6zct5zgH56wf77Y4lW','WRijftyJWQJcJ1i','WQ85cq7cVfrD','8lkAHgu','x+s9ToAdIEwlRKK','WOjtye5UCqbzlW','WOzqjSkDFq','5REj5yQI5lQc6zQk5BQj6zco5l6g5zoQ5y2d5lIh5zc0jq','8yQoQ1fQWRDFjos/PEwtKq','WPfrB3LKwW','W43cGGxdHxb5iW','zCoTjHddHCoIW7Lr','W4b0ja','h+s+VoAbL+wiVgi','Fmo9pdldJmoXW5C','WRP5W7ZcQW','smoai1zp','W5TtBCoIua','BFc2Jly','WRFcQmo2CadcH8oos8ouWQGxavu','zq4MWOBdHSk9W7jXuG','ftfYWQvL','W6xcKeRcNSkX','W75jnSkpDW','W4tcNCoSh38','WQDkhKRcTwSAWPO','CSklktJdSKC6','W6Djf8kauW','FmofW4JcRW','zcb4WRC','W75JlCkAWPG','W4JdR8k4WPTdWRK','iCk9F0BcKmkKWObFsHC3b8kP','W5WWW7NdU8o/W5ldRLa','WQjKW64','q8oinsriW69MWQ7cPxhdLLyaFa','W6qWW7S','W7hdMmkHWP1p','WPLsFGxcOa','sdC1mY0MWP9MWQe','WR0LaqZcINjwW5euW4VdKMq','kmolW5a','W6qdWP/dTmo1','C8osB8kLerm','uSorlrXuw2VcRXC','W6pcHdrckL0','WOzCW67cJ8kt','mbZdUSkpWRRcG0VdLau','WQVcVmotiSkhvq','5Asew8oP5lIa5AER','W58rj8oJnf0N','5PYU6igg6i625yYx55ww5OMt6yUm5P2V5l2V5OgA7724','4PYpsoAEOUIaM+AUT+EIIUwKPUEsTfW','WQDdWOanh8oCoW','WRPLWPKBeq','W4vXlh8JW4aQW4xdVJq','WRO7ga','W6qHWQpdPmoCWQpdTW','vr1HWPOY','xCo2fJ5+','WRX+W6FcI8kyW60','gsKpmSkSWPG','WP1zArpcUxBdOa','W7SjWOqme8odpmkEfSkxpmo2fmo1DZRdIK9bxG','W5ddTCk/WRa','W5PCdSkiaWFcSq','edvQWP1PWQddICkGxtC','y/gnNQBVU7S','WRlcK8omtqK','WRSJFZz7WPnJW5xcL3bCka','W59+n8kpWQBcHCoWy2PR','4PImo+IUTowIQEwfLUAJGEw+SEATQEEHP+EAHoMtUoApQa','WQusW7NcRSkgWQtdVqb/wWT0imoNW49ppCkqW4jRwmoznHDmscJcNdNcLSoPW4VcVmovCh7cSmoQumoHycJcQSoAqCoDWQddN8oHWRFcRSk0eJ5Om3TymSo9W4ZdVuS','Dmo6fq','W48wymoR','5y+l6ywh6k685PM6WP3cRCknca5MAvddGmou','tSo/xSklisFdT3NdNNO3','W6ZcNH8','jCotW5z2w8kPWRTIrG','jY0onCk8','W7HOs8oIA8kNAse','WQpORklMS7FLKPhLURZdKW','WRauW7xcS8oFWQxdVrrgbqy','ECo2bHn0AxlcHa','WOtdRCkbAL1vCSo5Bq'],...(function(){return['jGBdRmkYWR3cIuC','5RwS5yQm5ysW5y6S776J','WPLsAqxcQMu','8lkTUH3MGR3LLzJOJktLVyJLRQhNIzxcPG','jGBdVG','WP7dP8ki','W5ZcNGzZgq','zCk8sSkrW57dMvddKgm','WQqaW4FcS8oI','mSofW5TXwG','WQ86dW7cOebEW5O','WRZdLwhcOCkjWOrlhmorWP3cQGhcMZNdNbhcMH/cK8or','WR9cWQ4se8obkmowiCkCoComc8oVtWddULfwxmkkW7hdQ0NMTRdLIR7PKlZMJ7y','WPVdU8k8z19j','WODlyKLNwG9a','WOFdGq7dPmoXWQxdQaCfW6G','5RsF5yIf5BAZ57QY5P27776g5lIa5Q+Q5PsI54k85P+X5zcinW','WOaMpZeI','WPnPm8kZAmkDW6JdI8ouE8k+','8yUFVSkHWP/LJ4JVV5y','WQ/cOCoh','WRPKW6lcQ8ky','8k+mRSkA54QG5AsR6iI/','zCoyDCkOca3dJfxdM0Cv','uYW1eZek','W5ldTCkLWQPdWRZdVae','6ykO5yQH5l6G5zoj','W4BdL2JdVmkHWPDjfW','W6qMW6/dUSoqW5tdPG','rJhcRSkfWQu','smocjG','rty4iZilWQvF','WRy2nbhcHurD','8jUGOgJNQi7MSRq','nmofW4v3wG','4PUdCoIVQEwgMowUMUs6KEw9GUILIoEAUUEpS+wHG+wmJoMeN+wrRUwhG+I9QoIHTUIePEACTW','WQicW6lcUq','kmo1W4NdGHW','W6FcJJ/dJgO','WRy2pXtcH09uW5GvW6VdGfzUn1OhW6tcQCk4W6jYW7JdSq','oCk5FmkGW4C','W7VdI37dUSkbWPDjfW','lG3dU8kvWRxcG0C','p0S4kG','FSo8cG','FJ0NWQFdRW','W59nDK/cVMpdQSkHqu7dV8oZW5BdM8kBWQhcTWfnd8oqW4S','W4exiW','WR8yW7y','5Rs/5yIt5BEZ57Is5PYH772O57MR5P2Z5Pw46zEb772J','hCkota','pf4WnSoP','W6VcGazzkx3cImoVlW','WQCTW6/cNSog','W4H0imk3WQlcMmoqFG','WQmcW63cVW','WRLVn8kqsG','WP0IDrz3WPbY','yWxcM8kTWQG','W5VJGAFLUjBPKkdLKQtNPlZJGPHo','WPJcTCoiEJW','WRzjWP8me8oboSouf8kBoCo9','DXVcQ2HLuCky','W7NdGfNdOCkeWPnk','Ba7dUSkjWRRcKa3dLbpdHCkyW57cUKa5W4ZcSG','W4usFSoTAmo+WO3dSItcSYG','W6P3qCoCAa','W6tcHxNcNCkh','tmopjfbvWQm','nqNdPmktWRe','ct93WR4','xWlcP8kpWQWk','EHuZ','WOWJEIDW','WOhdO8kgFMPsqW','4P+GroADRUIbVEASSUEHGowLKoEtHcK','WO1fBfK','5yQZ5yET5BUF6zko5l665zoi5AAb6lsq77Y/5RwG5yU85lQO6zQT5BM+6zoP5l2s5zgy5y6g5lUs5zgfW4S','56+T5yQu5PYe56AY','W5yXkSowea','WO7dTb8','kWD9WRjo','kSkNv8krW57dJM3dUri','WPW/kXeTWPBcOhqnzIFdRq','WQbiWOiDdSoSimoEl8kBoW','WPeJoqmEWPu','qCkJWQ3dHmkitx4','W7lMTBFLIRNOPOBLIiFVV6CD','aY8tj8kqWO1uW4u','5P2P5lMf5AEE','W596nCkNWPZcLmozzebU','hcGB','W4ddKNVdOmkb','8jweL++7G8ka5l+15OoF5yI1','WO9OW6RcQ8kgW70','WP1/m8kCCSkvW7S','W43cJbJdUeT0a8k/WPdcGG','AqRcQK9jE8kuWQddSIFcOaOg','W6qlWQtdO8ojW6ldUSo9W6lcUcRcMLeDW4hdKCos','W5dcHHS','i8oiW5tdPquRW4bqWPhcMJdcVtVdLmkc','W5lcJaldKLzK','soEkUEwKJ+IiJSo9','W44CWOpdSmod','W4zAkCkp','esqipSkOWOvnW5NcHCoD','s8oLhN9P','sEA3SUwkKEw0HUs4OSkM','ymouB8kK','WRjlhu7cNNG','ma3dPSkcWPRcI1BdMXRdKa','WOrbB2L/vGu','e20rcmos','WRjdWP8Qg8obk8oEkCkHkSoHeCoOtW','W5VcHXO','W40hmmoFoePP','DSkaosFdPKq6W4m','WQOEbrFcJW','nuuMkSoSWQuU','je88p8oRWQiS','vmonha','cFgoS7O','W6aKW7ZcUSkFW6xcJSo2W4qVW5mZW4XzmmkSjSowW7ndiCoonCoe','FXq6WORdMSksW49AzW','B8kplIpdVueYW5u','WRTZWQRcSCkgWOxcTMdcUqDMDvS','tty8','smoilWzqW6i','5BMV6zk35zgh56Aw7722W4i','WQnUW7RcVCkxW67cMa','W483pCo5hW','W73cMIHBlG','8yo1ME+7Oc4','vSoaivb0WR4+meqW','WRJcUCoRCa','WRKZemkGeSo+ns9nW6FcQ8odkq','WP8OpImaWOtcRgmhvHhdU8ocW6S','WP/dRCkCFvLasa','dGzTWQDj','4P60BoIeI+ADRUI/JUIISEMbKowlIos5HEMuKoIVG0C','W7xdJxu','W45scCkQmbZcU8k5F8oLW6dcNedcG1m','hEobHEA0OowjVowDL+wFJ+ocVG','zqvFWP5f','W5vyo8kdWOq','vJipmSkSWQvDWP0','WQ7cVCoh','W5BNUOhMNl/MLOJPLjRVVlS','taNcGxLt','WRGzW6lcTSoCWQJdRb4','BbVcTN9Hrmk0WRW','W6uSW7S','WOb/k8k/','lmoqW4n0tmoDW7uG','smoejezgWRa8','5zEW5A2fsCk/WQ/dTSkX6l+45PYJ','W6RcU8oBovRcU2ddVG0','W6lcKGzpkehcMG','4PM1bUISHUwGK+whO+AIK+w9GoAVKUEGQUEzTUMsOoAmTG','W5TYlCkMWQdcIG','W4LStgddJXCR','6l+357IR566Y5yQq','WR1maL/cIx4','W6VdOmkEWOHb','W5xcOCorgxW','W4ngk8koD8oa','5yMy5ysO5BUD6zkC5l225zk55AEW6lsJ772L5Rsz5yU75lMh6zUB5BIy6zcY5lYC5zkR5y2o5lI3','W5zaiCkt','eCoTW4/dHqu','WPfmAGxcTNxdHSkGwXxdQCo1W40','sSooa29a','WPyWkdVcJa','oGmJfSkxWR1WW7NcHq','W5P+lCkMWQRcJ8oHy20','WOpdUaXRy8kAWQ4','WQrda0NcNL8fWPm','W78MW7ldRCouW4hdILe','WPG0bt3cOa','FCk1WRxdUmk/','W6/cUSos','nSocW5tdTqK3W7Xr','qCoBeG1l','WR5glLdcKMqqWPJdRe5Rs8o0W6xcNSofa3KcCW','W5fPt8oqvq','5zwR5A+bWR3cPCkPc0lOVRtMN7y','xSo9fWn2','W4DZkmklWP0','EIz8','W6FcKHrylftcJa'];}())];}())];}());Iii11l=function(){return I1l111;};return Iii11l();};!(async()=>{const lI1III=iillI,llllI={'mkwfM':'user_id','hGsHG':lI1III(0x2b7,'6oQT'),'ViaXT':function(iil1il,ilil1I){return iil1il+ilil1I;},'btNsH':lI1III(0x2e8,'^ed0'),'wRKjf':function(i11il1,ii1iiI){return i11il1<ii1iiI;},'nqtGl':'MFzGE','bVHTN':function(lllilI){return lllilI();}};if(!activityUrl){console[lI1III(0x305,'#n@%')]('⚠\x20请先定义必要的环境变量后再运行脚本');return;}const lllil1=common[lI1III(0x396,'b&ye')](activityUrl);if(!lllil1){console['log'](lI1III(0x2d9,'H9$p'));return;}$['activityUrl']=activityUrl,$[lI1III(0x232,'LSE*')]=common[lI1III(0x25c,'3dcr')](activityUrl,'id'),$[lI1III(0x29d,'3i0!')]=common['getUrlParameter'](activityUrl,llllI['mkwfM']),$[lI1III(0x40a,'1c1W')]=lllil1[lI1III(0x287,'Ax94')],$[lI1III(0x400,'1c1W')]=lllil1[lI1III(0x363,'(k$6')],$[lI1III(0x35d,'^ed0')]=lI1III(0x380,'q82j')+$['hostname'];if(!$[lI1III(0x3db,'3dcr')]||!$[lI1III(0x283,'hKg%')]||!$[lI1III(0x300,'6oQT')]){if(llllI[lI1III(0x22d,'V2mT')]!==llllI[lI1III(0x314,')720')])ll1li[lI1III(0x2db,'@3gD')](''+Illl1I[lI1III(0x24d,'dvfs')]),lliiiI[lI1III(0x3b7,'LSE*')][lI1III(0x1df,'q^l8')](''+lilil[lI1III(0x21b,'gD6w')]);else{console[lI1III(0x230,'njRD')]('⚠\x20请填写格式正确的变量');return;}}notify[lI1III(0x40c,'V2mT')]({'title':$[lI1III(0x333,'Y2dO')]}),console['log'](llllI[lI1III(0x2ed,'qUW7')](llllI['btNsH'],$[lI1III(0x2e4,'V2mT')]));for(let illlI1=0x0;llllI[lI1III(0x240,'3dcr')](illlI1,cookiesArr[lI1III(0x366,'#n@%')]);illlI1++){if(llllI[lI1III(0x3ef,'s[RS')]===lI1III(0x222,'Ax94'))i1illl[lI1III(0x29c,'gD6w')]=!![],I1llil[lI1III(0x3b4,'J#ka')]('❓'+I1llii+'\x20'+lilIll[lI1III(0x2a6,')720')](l1i111));else{$['index']=llllI['ViaXT'](illlI1,0x1),cookie=cookiesArr[illlI1],originCookie=cookiesArr[illlI1],common[lI1III(0x242,'TQd9')](originCookie),$[lI1III(0x302,'hKg%')]=decodeURIComponent(common[lI1III(0x218,'C66v')](cookie,'pt_pin')),$['UA']=common['genUA']($[lI1III(0x263,'Ej&Y')]),$[lI1III(0x1ec,'xtdf')]=common[lI1III(0x356,'Y2dO')]('xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),$['te']=Math[lI1III(0x3a9,'6oQT')](Math[lI1III(0x3d5,'b&ye')]()*0x2328)+0x3e8,$[lI1III(0x225,'xtdf')]=notify['create']($['index'],$[lI1III(0x2b3,'Rvir')]),$['nickName']='',console[lI1III(0x2ec,'acn4')]('\x0a******开始【京东账号'+$[lI1III(0x2b8,'njRD')]+'】'+($[lI1III(0x21f,'OGMy')]||$[lI1III(0x28a,'#n@%')])+lI1III(0x2cb,'zwh)')),await llllI[lI1III(0x273,'s[RS')](Main),common[lI1III(0x33b,'fvfb')]();if($[lI1III(0x346,'aE!^')]||$[lI1III(0x2ff,'uWeU')])break;}}isNotify&&notify[lI1III(0x3e4,'fvfb')]()&&(notify[lI1III(0x1fb,'DMD$')](lI1III(0x375,'xtdf')+$[lI1III(0x2f9,'aE!^')]),await notify[lI1III(0x246,'r88c')]());})()['catch'](I1lIi1=>$['logErr'](I1lIi1))[iillI(0x24e,'b&ye')](()=>$[iillI(0x353,'JZdC')]());async function Main(){const IIliIi=iillI,liiIIi={'ZiYZG':'获取\x20Token\x20失败！','Jfseo':IIliIi(0x3cc,'3i0!'),'QJuTi':function(lil11I,Iliii1,iIiIi){return lil11I(Iliii1,iIiIi);},'QibBx':IIliIi(0x392,'Ej&Y'),'NPfYi':IIliIi(0x272,'%UEs'),'eMwiv':function(iil1ll,iiilil){return iil1ll(iiilil);},'DfeCN':IIliIi(0x2d8,'H9$p'),'dcyui':IIliIi(0x227,'uWeU'),'vDJbX':'未能获取用户鉴权信息','iFOZh':function(iil1li,lillIl){return iil1li(lillIl);},'LyNHN':'签到有礼','SfRjK':'SCZkW','Pqdts':IIliIi(0x281,'w%G['),'khkIR':function(iIiIl,iiilii){return iIiIl(iiilii);},'MQcYu':IIliIi(0x207,'BGyh'),'DIDGk':IIliIi(0x351,'TQd9'),'kzeyP':function(li1i1i,IlIli1){return li1i1i!==IlIli1;},'HWgAe':'QgYhB','ePpPL':IIliIi(0x341,'H9$p')};try{$['skipRun']=![],$[IIliIi(0x3d1,'B)gE')]=![],activityCookie='';if($[IIliIi(0x2b1,'6oQT')]||$['outFlag'])return;$['jdToken']=await liiIIi[IIliIi(0x38f,'BGyh')](getToken,originCookie,$[IIliIi(0x405,'3i0!')]);if(!$[IIliIi(0x326,'hKg%')]){if(liiIIi[IIliIi(0x210,'OG44')]===liiIIi[IIliIi(0x1db,'TQd9')])l1iIIi['log'](lilIi),l1l11I&&(Iiiii[IIliIi(0x2a0,'3i0!')]=!![],l11i1I[IIliIi(0x381,'TQd9')]&&lIII1I['message']['fix'](illIlI));else{console[IIliIi(0x1eb,'C66v')](IIliIi(0x3a5,'OG44')),$['message'][IIliIi(0x236,'njRD')](IIliIi(0x251,'J#ka'));return;}}await liiIIi[IIliIi(0x231,'hKg%')](sendRequest,liiIIi[IIliIi(0x398,'Ej&Y')]);if($[IIliIi(0x29b,'Y2dO')]||$[IIliIi(0x3de,'uWeU')]||$[IIliIi(0x35e,'^ed0')])return;if(!$[IIliIi(0x202,'w%G[')]){console['log'](liiIIi['dcyui']),$['message'][IIliIi(0x236,'njRD')](liiIIi[IIliIi(0x276,'%UEs')]);return;}await liiIIi[IIliIi(0x277,'gD6w')](sendRequest,'home');if($[IIliIi(0x3c8,'3dcr')]||$['outFlag']||$['skipRun'])return;await $['wait'](0x3e8);if($[IIliIi(0x3dc,'aE!^')]===0x1){console[IIliIi(0x26f,'TQd9')](($[IIliIi(0x3ba,'Z!sB')]&&IIliIi(0x367,'87xo')+$[IIliIi(0x33f,'Enq#')]+'['+($[IIliIi(0x395,'Ax94')]||liiIIi['LyNHN'])+']')+'\x0a店铺链接：https://shop.m.jd.com/?venderId='+$[IIliIi(0x208,'s[RS')]+IIliIi(0x37a,'Ej&Y')+$['endTime']+IIliIi(0x23a,'r88c')+$[IIliIi(0x3c7,'DMD$')][IIliIi(0x2d2,'6oQT')]('\x0a')+'\x0a'),notify[IIliIi(0x2a5,'C66v')](($[IIliIi(0x2f1,'Ej&Y')]?'\x0a【店铺名称】#'+$[IIliIi(0x2ab,'b&ye')]:'')+'\x0a结束时间：'+$[IIliIi(0x291,'jHNd')]+'\x0a');const lI1lli=Date[IIliIi(0x317,'V2mT')]();if($[IIliIi(0x3c5,'2E81')]&&lI1lli>$[IIliIi(0x23e,'acn4')]){if(liiIIi[IIliIi(0x2ad,'w%G[')]===liiIIi[IIliIi(0x219,'1c1W')]){IlI11[IIliIi(0x1e5,'%UEs')](liiIIi[IIliIi(0x1f3,'1c1W')]),iIIIIl['message'][IIliIi(0x288,'#n@%')](liiIIi[IIliIi(0x2a9,'w%G[')]);return;}else{console[IIliIi(0x379,'B)gE')](IIliIi(0x290,'!9q2')+$['endTime']+IIliIi(0x3ed,'Ej&Y')),$[IIliIi(0x387,'OGMy')][IIliIi(0x275,'b&ye')](IIliIi(0x318,'JZdC')+$[IIliIi(0x245,'J#ka')]),$['runEnd']=!![];return;}}if($[IIliIi(0x2ce,'zwh)')]||$[IIliIi(0x23f,'Y2dO')]||$[IIliIi(0x3f8,'hKg%')])return;}await liiIIi[IIliIi(0x3a1,'H9$p')](sendRequest,liiIIi[IIliIi(0x40b,'s[RS')]),await $['wait'](0x3e8),console[IIliIi(0x40e,'3i0!')](IIliIi(0x388,'J#ka')+$[IIliIi(0x21c,'zwh)')]+IIliIi(0x2c3,'DMD$')+($['isSign']?'已':'未')+'签到');if(!$[IIliIi(0x3d8,'gD6w')]){if(liiIIi[IIliIi(0x357,'^ed0')]!=='nDIJN'){i1ili1[IIliIi(0x379,'B)gE')](IIliIi(0x385,'fvfb'));return;}else await liiIIi['iFOZh'](sendRequest,IIliIi(0x36c,'TQd9')),await $[IIliIi(0x1fe,'q82j')](0xbb8),$['retry']&&(liiIIi[IIliIi(0x31a,'^ed0')]('QgYhB',liiIIi[IIliIi(0x2c0,'zwh)')])?Iiil1=iiilli:(await sendRequest(liiIIi['ePpPL']),await $[IIliIi(0x1e6,'Z!sB')](0xbb8)));}}catch(i11iil){console['log']('❌\x20脚本运行遇到了错误\x0a'+i11iil);}}async function handleResponse(Ill1i,ii1iil){const IllIiI=iillI,lllI1l={'vZnDo':IllIiI(0x334,'3i0!'),'ScwNu':IllIiI(0x38d,'87xo'),'YgSyH':IllIiI(0x3d2,'3dcr'),'yATMa':'未能获取用户鉴权信息','RvDMC':function(i11iii,llI1Ii){return i11iii(llI1Ii);},'XbkIc':'jsdom','yIogY':IllIiI(0x2e6,'acn4'),'YxDYH':IllIiI(0x3ac,'#n@%'),'eBdwn':IllIiI(0x1fa,'#n@%'),'aScsL':IllIiI(0x2f4,'acn4'),'RxnXW':function(lllI1i,li1i1l){return lllI1i===li1i1l;},'sbHTV':function(II1i1,lI1lll){return II1i1!==lI1lll;},'dOcWC':IllIiI(0x382,'@OCq'),'zPVbR':function(iIiII,iil1lI){return iIiII===iil1lI;},'IXuuy':IllIiI(0x3cb,'dvfs'),'ofytk':'shop_title','NrRgj':'actEndTime','TVKdj':IllIiI(0x3e2,'C66v'),'Svvnn':'saveSignIn','Sdftp':IllIiI(0x37b,'Z!sB'),'uHBHJ':IllIiI(0x34e,'3dcr'),'zuVnA':IllIiI(0x237,'s[RS'),'HWcbN':IllIiI(0x293,'87xo'),'PWIag':IllIiI(0x2be,'@3gD'),'cSyyN':IllIiI(0x3bb,'!9q2'),'NmNoR':'已填地址','FbNKO':IllIiI(0x285,'OGMy'),'eLRDQ':IllIiI(0x393,'Enq#'),'bcvwS':IllIiI(0x3ff,'b&ye'),'bmqHD':IllIiI(0x1de,'J#ka'),'KepJT':IllIiI(0x340,'q^l8'),'boadY':IllIiI(0x27d,'zwh)'),'PSIpu':IllIiI(0x371,'1c1W'),'HwIUh':IllIiI(0x249,'jHNd'),'GHYCW':function(iiiliI,li1i1I){return iiiliI!==li1i1I;},'UeXDN':IllIiI(0x3d3,'fvfb'),'HxrXe':'TsyXR','KbHVX':function(illIii,ii1il1){return illIii!==ii1il1;},'IPhjl':IllIiI(0x3f3,'fvfb'),'jHsGE':IllIiI(0x209,'1c1W'),'lJfZk':IllIiI(0x241,'TQd9'),'zDdtN':IllIiI(0x38a,'6oQT')};try{switch(Ill1i){case IllIiI(0x22a,'xtdf'):if(ii1iil&&ii1iil[IllIiI(0x30b,'V2mT')]){}else ii1iil[IllIiI(0x2b6,'Rvir')]?console[IllIiI(0x26f,'TQd9')](''+ii1iil[IllIiI(0x22c,'H9$p')]):($['skipRun']=!![],console[IllIiI(0x2bb,'q82j')]('❓'+Ill1i+'\x20'+JSON['stringify'](ii1iil)));break;case IllIiI(0x2d4,'1c1W'):if(ii1iil&&ii1iil[IllIiI(0x2af,'xtdf')]){if(lllI1l[IllIiI(0x2b0,'H9$p')](IllIiI(0x1f8,'!9q2'),IllIiI(0x36a,'qUW7')))$[IllIiI(0x2fc,'zwh)')]=ii1iil[IllIiI(0x228,'OGMy')];else{IiilI1[IllIiI(0x256,'r88c')](IllIiI(0x30a,'1c1W'));return;}}else{if(ii1iil['msg']){if(lllI1l['sbHTV']('IFRON',IllIiI(0x30c,'BGyh')))console[IllIiI(0x269,'Z!sB')](''+ii1iil[IllIiI(0x411,'(k$6')]),[lllI1l['dOcWC']][IllIiI(0x1e7,'BGyh')](ii1iil[IllIiI(0x316,'LSE*')])&&($[IllIiI(0x260,'#n@%')]=!![]);else{llIlli[IllIiI(0x259,'@OCq')]=!![],llIlll[IllIiI(0x342,'Enq#')](lllI1l[IllIiI(0x409,'b&ye')]),lliii1[IllIiI(0x387,'OGMy')]['fix'](lllI1l[IllIiI(0x2a8,'@OCq')]);return;}}else{if(lllI1l[IllIiI(0x3a0,'#n@%')](IllIiI(0x27e,'JZdC'),IllIiI(0x336,'LSE*')))$[IllIiI(0x22b,'njRD')]=!![],console[IllIiI(0x26f,'TQd9')]('❓'+Ill1i+'\x20'+JSON['stringify'](ii1iil));else{IlI1I[IllIiI(0x365,'uWeU')](IllIiI(0x3ce,'q82j'));return;}}}break;case'home':if(ii1iil){if('sCaZj'!==IllIiI(0x3dd,'Enq#')){let i11iiI=ii1iil[IllIiI(0x410,'@3gD')](/(活动已结束)/)&&ii1iil['match'](/(活动已结束)/)[0x1]||'';if(i11iiI){if(IllIiI(0x2cc,'xtdf')===lllI1l['IXuuy']){$[IllIiI(0x20a,'V2mT')]=!![],console['log'](IllIiI(0x2f7,'#n@%')),$[IllIiI(0x225,'xtdf')][IllIiI(0x2ca,'Ej&Y')](IllIiI(0x3df,'B)gE'));return;}else l1il11[IllIiI(0x214,'Ej&Y')][IllIiI(0x23b,'2E81')](IiI1);}if(!JSDOM)JSDOM=require('jsdom')?.[IllIiI(0x3e1,'2E81')];const lIli11=new JSDOM(ii1iil);$[IllIiI(0x216,'dvfs')]=lIli11[IllIiI(0x2bd,'JZdC')][IllIiI(0x3f7,'B)gE')][IllIiI(0x36f,'87xo')](IllIiI(0x226,'TQd9'))?.[IllIiI(0x1e1,'2E81')]||'',$[IllIiI(0x3b1,')720')]=lIli11[IllIiI(0x3b8,'jHNd')][IllIiI(0x3a8,'aE!^')][IllIiI(0x244,'uWeU')](lllI1l['ofytk'])?.[IllIiI(0x2f0,'q82j')]||'',$[IllIiI(0x406,'1c1W')]=lIli11[IllIiI(0x254,'q82j')][IllIiI(0x306,'uWeU')][IllIiI(0x239,'2E81')](IllIiI(0x394,'H9$p'))?.[IllIiI(0x32c,'q^l8')]||'',$[IllIiI(0x320,'OG44')]=lIli11['window'][IllIiI(0x3a6,'OG44')]['getElementById'](lllI1l[IllIiI(0x321,'DMD$')])?.['value']||'',$['description']=lIli11['window'][IllIiI(0x31d,'H9$p')][IllIiI(0x215,'J#ka')](lllI1l[IllIiI(0x3a4,'3dcr')])?.[IllIiI(0x2b9,'uWeU')]||'',$[IllIiI(0x34f,'w%G[')]=$[IllIiI(0x267,'6oQT')][IllIiI(0x3e7,'BGyh')](IllIiI(0x2ae,'BGyh'))[IllIiI(0x3b0,'V2mT')](lillI1=>lillI1),$[IllIiI(0x217,'gD6w')]=lIli11['window'][IllIiI(0x289,'njRD')][IllIiI(0x1e4,'r88c')](lllI1l['TVKdj']),$[IllIiI(0x34b,'BGyh')]=$[IllIiI(0x22e,'njRD')][IllIiI(0x3ae,'Y2dO')]?$[IllIiI(0x3d7,'r88c')][0x0][IllIiI(0x339,'dvfs')]||0x0:0x0,$[IllIiI(0x2bf,'qUW7')]=lllI1l[IllIiI(0x32a,'@OCq')](Number,lIli11[IllIiI(0x3b8,'jHNd')][IllIiI(0x306,'uWeU')][IllIiI(0x2b5,'#n@%')](IllIiI(0x3c0,'J#ka'))?.[IllIiI(0x233,'H9$p')]||0x0);}else lliiil[IllIiI(0x279,'dvfs')]('❓'+lliiii+'\x20'+IliI1i['stringify'](ll1ii));}else console[IllIiI(0x3c2,'DMD$')]('❓'+Ill1i+'\x20'+JSON['stringify'](ii1iil));break;case lllI1l[IllIiI(0x343,'hKg%')]:if(ii1iil&&ii1iil['succ']){if(lllI1l[IllIiI(0x238,'H9$p')]===lllI1l[IllIiI(0x3c9,'r88c')])ii1l1['log'](IllIiI(0x2c6,'q^l8')+lIIill+'\x20请求响应\x20'+(I11iIi[IllIiI(0x268,'JZdC')]||I1ilII));else{let liil11=JSON[IllIiI(0x309,'q82j')](ii1iil['msg'])?.[IllIiI(0x33a,'87xo')],iiillI=liil11?.['awardType'];switch(iiillI){case lllI1l[IllIiI(0x3e8,'JZdC')]:console[IllIiI(0x2b4,'zwh)')]('🎉\x20'+liil11?.[IllIiI(0x270,'acn4')]+IllIiI(0x213,'Y2dO')),$['message'][IllIiI(0x33c,'87xo')](IllIiI(0x1e2,'Y2dO')+liil11?.[IllIiI(0x297,'Y2dO')]+IllIiI(0x360,'J#ka'));break;case lllI1l[IllIiI(0x338,'1c1W')]:console[IllIiI(0x24f,'87xo')]('🗑️\x20'+liil11?.['awardSendNum']+liil11?.[IllIiI(0x3f4,'jHNd')]+'\x20🎟️'),$['message'][IllIiI(0x389,'b&ye')](IllIiI(0x36b,'acn4')+liil11?.[IllIiI(0x1ed,'b&ye')]+liil11?.[IllIiI(0x31b,'qUW7')]+IllIiI(0x2d5,'dvfs'));break;case lllI1l[IllIiI(0x3bf,'C66v')]:console['log']('🗑️\x20优惠券'),$['message'][IllIiI(0x404,'OGMy')](IllIiI(0x403,'!9q2'));break;case IllIiI(0x26d,'!9q2'):const l1l111=JSON[IllIiI(0x21e,'r88c')](ii1iil[IllIiI(0x200,'Ej&Y')])[IllIiI(0x2e5,'@3gD')],l1iIII=liil11[IllIiI(0x204,'(k$6')];console[IllIiI(0x3f5,'!9q2')](IllIiI(0x2ea,'@OCq')),console[IllIiI(0x29e,'H9$p')](IllIiI(0x3b2,')720')+l1iIII);const llI1I1={'baseUrl':$['baseUrl'],'cookie':activityCookie,'ua':$['UA'],'venderId':$[IllIiI(0x406,'1c1W')],'prizeName':l1iIII,'orderCode':l1l111,'activityUrl':$['activityUrl']},IlIlil=await jinggeng_savePrize(llI1I1);!isNotify&&IlIlil&&(lllI1l[IllIiI(0x1e0,'Ax94')](IllIiI(0x26b,'@OCq'),lllI1l[IllIiI(0x369,'LSE*')])?(ii1li[IllIiI(0x266,'V2mT')](IllIiI(0x308,'3i0!')),IIll1[IllIiI(0x303,'Rvir')][IllIiI(0x2cf,'Enq#')](IllIiI(0x282,'H9$p'))):await notify[IllIiI(0x355,'q^l8')]($['name']+'中奖通知','【京东账号'+$['index']+'】'+$['nickName']+IllIiI(0x3a7,'r88c')+l1iIII+'，已成功自动登记收货地址\x0a\x0a'+$[IllIiI(0x2fe,'JZdC')]));$[IllIiI(0x3a3,'qUW7')]['insert'](l1iIII+'('+(IlIlil?lllI1l[IllIiI(0x323,'C66v')]:lllI1l[IllIiI(0x258,'qUW7')])+IllIiI(0x2a4,'q82j'));break;case IllIiI(0x2de,'JZdC'):console[IllIiI(0x337,'Ax94')]('🗑️\x20优惠券'),$['message'][IllIiI(0x2e9,'njRD')](IllIiI(0x344,'J#ka'));break;case IllIiI(0x401,'@3gD'):console[IllIiI(0x266,'V2mT')](IllIiI(0x3e5,'2E81')),$[IllIiI(0x311,'q^l8')][IllIiI(0x2c2,'B)gE')](IllIiI(0x3ad,'1c1W'));break;case lllI1l['eLRDQ']:console['log'](IllIiI(0x3e0,'njRD')),$[IllIiI(0x27a,'r88c')][IllIiI(0x27c,'@3gD')](IllIiI(0x2fd,'BGyh'));break;case lllI1l['bcvwS']:console[IllIiI(0x256,'r88c')]('🎉\x20PLUS会员'),$[IllIiI(0x3ee,'@OCq')]['insert'](IllIiI(0x29a,'b&ye'));break;case lllI1l[IllIiI(0x3f2,'Rvir')]:console['log'](IllIiI(0x2fa,'V2mT')+liil11?.['awardSendNum']+liil11?.['awardName']),$[IllIiI(0x3fc,'@3gD')][IllIiI(0x404,'OGMy')]('🎉\x20E卡：'+liil11?.[IllIiI(0x271,'uWeU')]+liil11?.[IllIiI(0x20d,'Z!sB')]);break;case IllIiI(0x24a,'njRD'):console[IllIiI(0x319,'2E81')]('🎉️\x20红包：'+liil11?.['awardSendNum']+liil11?.[IllIiI(0x2e0,'q82j')]),$[IllIiI(0x368,'zwh)')][IllIiI(0x3c4,'gD6w')](IllIiI(0x3ec,'w%G[')+liil11?.[IllIiI(0x2ba,'Ej&Y')]+liil11?.['awardName']);break;default:console[IllIiI(0x2b4,'zwh)')](liil11);break;}}}else{ii1iil['msg'][IllIiI(0x224,'TQd9')](lllI1l[IllIiI(0x31f,'aE!^')])?(console[IllIiI(0x337,'Ax94')]('💨\x20空气'),$[IllIiI(0x3a3,'qUW7')][IllIiI(0x32b,'TQd9')](IllIiI(0x211,'2E81'))):(console[IllIiI(0x32f,')720')](''+ii1iil[IllIiI(0x2fb,'B)gE')]),$['message']['insert'](''+ii1iil[IllIiI(0x3a2,'xtdf')]));err=ii1iil[IllIiI(0x220,'@OCq')];for(let II1il of['不足','火爆','上限','次数']){if(lllI1l[IllIiI(0x3bd,'1c1W')]!==lllI1l['boadY']){IiiIii[IllIiI(0x2d3,'!9q2')]=!![],IIlll[IllIiI(0x319,'2E81')](lllI1l[IllIiI(0x30d,'gD6w')]),liliI[IllIiI(0x370,'acn4')]['fix'](IllIiI(0x40f,'Rvir'));return;}else{if(err['includes'](II1il)){if(lllI1l[IllIiI(0x2a3,'%UEs')]===lllI1l['HwIUh']){iIIIIi['log'](IllIiI(0x2c5,'JZdC')),iii1I1['message'][IllIiI(0x373,'hKg%')](lllI1l[IllIiI(0x24b,'Ax94')]);return;}else{$[IllIiI(0x294,'Ej&Y')]=!![];break;}}}}for(let I1lIli of[IllIiI(0x301,'BGyh')]){if(lllI1l[IllIiI(0x2aa,'jHNd')](lllI1l['UeXDN'],IllIiI(0x205,'OGMy')))delete IilIil[IllIiI(0x38e,'w%G[')],delete l1iIi[IllIiI(0x3eb,'#n@%')][IllIiI(0x1dc,'zwh)')];else{if(err[IllIiI(0x26a,'%UEs')](I1lIli)){if(joinMember){if(lllI1l['HxrXe']!==IllIiI(0x399,'J#ka'))l1l1II[IllIiI(0x26f,'TQd9')](IllIiI(0x372,'OG44')+Iil1I1);else{const lillII=await common['joinShopMember']($[IllIiI(0x3d0,'b&ye')]);if(lillII)$['retry']=!![],console[IllIiI(0x201,'s[RS')](IllIiI(0x26e,'OGMy'));else{if(lllI1l['KbHVX'](IllIiI(0x391,'TQd9'),lllI1l[IllIiI(0x40d,'Enq#')])){$[IllIiI(0x294,'Ej&Y')]=!![],console[IllIiI(0x28c,'LSE*')](lllI1l[IllIiI(0x31c,'V2mT')]),$['message'][IllIiI(0x284,'Rvir')](IllIiI(0x229,'Enq#'));return;}else Iii11I[IllIiI(0x330,'OG44')]=Iil1II['msg'];}}}else{if(IllIiI(0x39c,'#n@%')===lllI1l['jHsGE']){$[IllIiI(0x331,'acn4')]=!![],console[IllIiI(0x221,'6oQT')](IllIiI(0x299,'aE!^')),$['message'][IllIiI(0x2df,'qUW7')](lllI1l[IllIiI(0x1e8,'xtdf')]);return;}else II11II[IllIiI(0x39a,'jHNd')](''+Ii1iI1[IllIiI(0x3a2,'xtdf')]);}break;}}}for(let iIiI1 of['休息',IllIiI(0x1ea,'BGyh')]){if(err[IllIiI(0x37c,'V2mT')](iIiI1)){$['retry']=!![];break;}}}break;}}catch(liil1I){if('QzHVl'!==lllI1l['zDdtN']){let IlIliI=IilliI[IllIiI(0x2a2,'TQd9')](/(活动已结束)/)&&IlI1ii[IllIiI(0x2a2,'TQd9')](/(活动已结束)/)[0x1]||'';if(IlIliI){II1lii[IllIiI(0x32e,'DMD$')]=!![],lIIii1['log'](IllIiI(0x1dd,'J#ka')),ll1i1['message'][IllIiI(0x313,'@3gD')]('活动已结束');return;}if(!iI1lll)l1lIll=lllI1l[IllIiI(0x1f5,'3i0!')](I1l1II,lllI1l[IllIiI(0x257,'3dcr')])?.[IllIiI(0x286,'^ed0')];const l1iII1=new IIli1I(I1i11I);llIliI[IllIiI(0x3c1,'3dcr')]=l1iII1['window'][IllIiI(0x1f9,'fvfb')][IllIiI(0x408,'3i0!')]('actName')?.['value']||'',I1l1I1['shopName']=l1iII1[IllIiI(0x38c,'w%G[')]['document'][IllIiI(0x203,'B)gE')](IllIiI(0x3c3,'Rvir'))?.['value']||'',I1i111[IllIiI(0x265,'JZdC')]=l1iII1[IllIiI(0x3fa,'(k$6')][IllIiI(0x2f5,'Y2dO')][IllIiI(0x261,'b&ye')](lllI1l['yIogY'])?.['value']||'',ilI1li[IllIiI(0x2e7,'q^l8')]=l1iII1['window']['document'][IllIiI(0x25f,'Enq#')]('actEndTime')?.[IllIiI(0x2a7,'1c1W')]||'',IIliI['description']=l1iII1[IllIiI(0x386,'H9$p')][IllIiI(0x289,'njRD')][IllIiI(0x239,'2E81')](lllI1l['YxDYH'])?.[IllIiI(0x362,')720')]||'',ilI1ll[IllIiI(0x37f,'aE!^')]=Iillii[IllIiI(0x328,'r88c')]['split'](lllI1l['eBdwn'])[IllIiI(0x1ff,'87xo')](iiill1=>iiill1),IlI1iI[IllIiI(0x324,'fvfb')]=l1iII1[IllIiI(0x386,'H9$p')][IllIiI(0x28d,'zwh)')]['getElementsByClassName'](IllIiI(0x3fd,'w%G[')),Iillil[IllIiI(0x1f4,'jHNd')]=l1lIli['continueSign'][IllIiI(0x34c,'gD6w')]?lIIiiI[IllIiI(0x278,'uWeU')][0x0][IllIiI(0x383,'jHNd')]||0x0:0x0,II1lil[IllIiI(0x274,'OGMy')]=IIli1l(l1iII1[IllIiI(0x38c,'w%G[')]['document'][IllIiI(0x25d,'acn4')](lllI1l[IllIiI(0x25b,'gD6w')])?.['value']||0x0);}else console[IllIiI(0x37e,'Rvir')](IllIiI(0x332,'LSE*')+Ill1i+IllIiI(0x2e3,'jHNd')+(liil1I[IllIiI(0x2d0,'njRD')]||liil1I));}}async function sendRequest(lIli1i){const i1il1=iillI,IIIII1={'BtYJN':i1il1(0x39f,'DMD$'),'KOkZh':i1il1(0x335,'hKg%'),'tZaGc':function(liil1i,lI1lil){return liil1i>lI1lil;},'zpETk':i1il1(0x2da,'V2mT'),'FPpWc':i1il1(0x255,'2E81'),'uwFiK':i1il1(0x20e,'acn4'),'oChck':'saveSignIn','kFgOg':i1il1(0x2f2,'hKg%'),'Wjrbb':i1il1(0x27b,'Ax94'),'MWveJ':i1il1(0x1fd,'q^l8'),'cyTkn':function(i1l1iI,liil1l){return i1l1iI===liil1l;},'Dochd':i1il1(0x3ab,'@OCq'),'VtdET':function(lI1lii,Iiili1){return lI1lii===Iiili1;},'aweNM':i1il1(0x3cf,'@OCq'),'vLeia':i1il1(0x345,'zwh)'),'Ecdae':function(Iil1l1,i1i11I){return Iil1l1<i1i11I;},'NJXrI':function(il1iIl,iii1ii){return il1iIl!==iii1ii;},'XtpAh':'xkuWN','ZikBp':function(il1iIi,iii1il){return il1iIi===iii1il;},'aivHQ':i1il1(0x28b,'JZdC'),'AYzNv':i1il1(0x347,'gD6w'),'AlBYC':function(II11li,I1l11i,iIIiiI){return II11li(I1l11i,iIIiiI);},'tACqb':function(liiI1i,ililIi){return liiI1i!==ililIi;},'dKJXg':i1il1(0x377,'H9$p'),'tmnJK':'uYxhX'};if($[i1il1(0x28e,'JZdC')]||$['outFlag'])return;let I1lIlI=$['baseUrl'],ii1ill={},II1iI=i1il1(0x3b5,'Ej&Y');switch(lIli1i){case'setMixNick':I1lIlI+='/front/setMixNick',ii1ill=i1il1(0x348,'Z!sB')+$[i1il1(0x307,'Ej&Y')]+i1il1(0x378,'Enq#')+$[i1il1(0x26c,'fvfb')]+i1il1(0x28f,'Y2dO');break;case IIIII1[i1il1(0x280,'r88c')]:I1lIlI+=i1il1(0x327,'q^l8'),ii1ill=i1il1(0x234,'njRD')+$[i1il1(0x206,'dvfs')];break;case i1il1(0x312,'^ed0'):II1iI=IIIII1[i1il1(0x2ef,'V2mT')],I1lIlI+=i1il1(0x315,'njRD')+$[i1il1(0x3b6,'qUW7')]+i1il1(0x1f2,'s[RS')+$[i1il1(0x39b,'BGyh')]+'&sid='+sid+i1il1(0x3c6,'JZdC')+un_area;break;case IIIII1[i1il1(0x2c8,'fvfb')]:I1lIlI+=IIIII1[i1il1(0x304,'DMD$')],ii1ill=i1il1(0x35a,'LSE*')+$[i1il1(0x350,'Enq#')]+i1il1(0x2ee,'dvfs')+$[i1il1(0x397,'Rvir')];break;default:console['log'](i1il1(0x3bc,'(k$6')+lIli1i);return;}const llI1II={'url':I1lIlI,'method':II1iI,'headers':{'Accept':i1il1(0x3b9,'Ax94'),'Accept-Encoding':'gzip,\x20deflate,\x20br','Accept-Language':IIIII1[i1il1(0x2e1,'Enq#')],'Connection':'keep-alive','Content-Type':IIIII1['MWveJ'],'Cookie':activityCookie['trim'](),'Host':$[i1il1(0x310,'hKg%')],'Origin':$[i1il1(0x3be,'qUW7')],'Referer':$['activityUrl'],'User-Agent':$['UA']},'body':ii1ill,'timeout':0x7530};IIIII1['cyTkn'](II1iI,i1il1(0x35f,'3i0!'))&&(IIIII1['Dochd']!==i1il1(0x21d,'Z!sB')?(IliilI['log'](''+i1II1['msg']),[IIIII1['BtYJN']]['includes'](iIIl11[i1il1(0x1ef,'q^l8')])&&(I1iIll['runEnd']=!![])):(delete llI1II[i1il1(0x1f7,'Y2dO')],delete llI1II['headers'][i1il1(0x2d7,'OG44')]));IIIII1[i1il1(0x38b,'jHNd')](lIli1i,IIIII1[i1il1(0x329,'%UEs')])&&(llI1II[i1il1(0x384,'qUW7')][IIIII1[i1il1(0x35c,'Ej&Y')]]=IIIII1[i1il1(0x3d9,'r88c')]);const lIli1l=0x5;let lillIi=0x0,illIi1=null,ii1ili=![];while(IIIII1[i1il1(0x2cd,'@3gD')](lillIi,lIli1l)){if(IIIII1['NJXrI'](i1il1(0x2f8,'87xo'),IIIII1['XtpAh']))li1[i1il1(0x2a0,'3i0!')]=!![],illIl1[i1il1(0x370,'acn4')]&&lI11Ii[i1il1(0x3d4,'J#ka')][i1il1(0x23d,'6oQT')](Iiill);else{if(lillIi>0x0){if(IIIII1[i1il1(0x39e,'%UEs')](IIIII1[i1il1(0x376,'s[RS')],i1il1(0x235,'r88c'))){IiilIl['log']((iii1Ii[i1il1(0x2e2,'%UEs')]&&i1il1(0x292,'gD6w')+iii1Il[i1il1(0x24c,'r88c')]+'['+(lI1IiI['actName']||IIIII1[i1il1(0x3d6,'C66v')])+']')+i1il1(0x3b3,'qUW7')+i1lI[i1il1(0x37d,'Z!sB')]+'\x0a结束时间：'+IlI1l['endTime']+i1il1(0x33e,'OG44')+lilIil[i1il1(0x31e,'V2mT')][i1il1(0x32d,'1c1W')]('\x0a')+'\x0a'),i1l11[i1il1(0x390,'njRD')]((i1l1li[i1il1(0x3f9,'^ed0')]?i1il1(0x322,'V2mT')+i1ilii[i1il1(0x20f,'J#ka')]:'')+i1il1(0x20c,'uWeU')+iIIII1[i1il1(0x2e7,'q^l8')]+'\x0a');const I1l11l=i1l1ll[i1il1(0x34a,'gD6w')]();if(I1iIiI[i1il1(0x402,'%UEs')]&&IIIII1[i1il1(0x298,'aE!^')](I1l11l,li1I1[i1il1(0x223,'fvfb')])){ill111['log'](i1il1(0x352,'dvfs')+Iliil1['endTime']+'\x20结束，下次早点来吧~'),i1III[i1il1(0x2d0,'njRD')]['fix']('活动已结束，结束时间：'+Ii1iIi['endTime']),iliIIl[i1il1(0x253,'BGyh')]=!![];return;}if(iliIII['runEnd']||iIIl1i[i1il1(0x23c,'zwh)')]||I1lllI['skipRun'])return;}else await $[i1il1(0x3e6,'Y2dO')](0x3e8);}const liiI1l=await common[i1il1(0x2c7,'fvfb')](llI1II);if(!liiI1l[i1il1(0x2c4,'LSE*')]){if(i1il1(0x2bc,'3dcr')!==i1il1(0x248,'jHNd'))IiiIl1['skipRun']=!![],lIIil1['log']('❓'+IIli1+'\x20'+II1liI[i1il1(0x2c1,'q^l8')](IlI1i1));else{illIi1='🚫\x20'+lIli1i+i1il1(0x21a,'jHNd')+liiI1l[i1il1(0x250,'OG44')],lillIi++;continue;}}if(!liiI1l?.['data']){illIi1=i1il1(0x295,'w%G[')+lIli1i+i1il1(0x1fc,'%UEs'),lillIi++;continue;}const i1l1II=common[i1il1(0x349,'3dcr')](liiI1l,activityCookie);[IIIII1['AYzNv']][i1il1(0x35b,'(k$6')](lIli1i)&&(activityCookie=i1l1II);IIIII1['AlBYC'](handleResponse,lIli1i,liiI1l[i1il1(0x1e3,'qUW7')]),ii1ili=![];break;}}lillIi>=lIli1l&&(IIIII1[i1il1(0x3e9,'Z!sB')](IIIII1[i1il1(0x2d6,'C66v')],IIIII1[i1il1(0x1ee,'J#ka')])?(console['log'](illIi1),ii1ili&&('TyDbR'===i1il1(0x22f,'zwh)')?llIllI['runEnd']=!![]:($[i1il1(0x3de,'uWeU')]=!![],$[i1il1(0x2ac,'(k$6')]&&$[i1il1(0x325,'Z!sB')][i1il1(0x252,'%UEs')](illIi1)))):l1iIl[i1il1(0x33d,'J#ka')][i1il1(0x262,'njRD')]=IIIII1[i1il1(0x30f,'dvfs')]);}var version_ = 'jsjiami.com.v7';

// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
