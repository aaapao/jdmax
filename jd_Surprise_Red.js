/*
活动名称：惊喜红包一次性

cron:15 19 18 7 *

*/

const $ = new Env('惊喜红包一次性')
const _0x118d95=_0x1892;function _0x1892(_0x3fef50,_0x437f02){const _0x438825=_0x4388();return _0x1892=function(_0x1892fd,_0x5e63a7){_0x1892fd=_0x1892fd-0x1a1;let _0x384716=_0x438825[_0x1892fd];if(_0x1892['LXwJFI']===undefined){var _0x231093=function(_0x796066){const _0xde8370='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x34d803='',_0x4cf0c9='';for(let _0x36ba47=0x0,_0x176043,_0x1f463b,_0x446d69=0x0;_0x1f463b=_0x796066['charAt'](_0x446d69++);~_0x1f463b&&(_0x176043=_0x36ba47%0x4?_0x176043*0x40+_0x1f463b:_0x1f463b,_0x36ba47++%0x4)?_0x34d803+=String['fromCharCode'](0xff&_0x176043>>(-0x2*_0x36ba47&0x6)):0x0){_0x1f463b=_0xde8370['indexOf'](_0x1f463b);}for(let _0x2362c7=0x0,_0x2df2ed=_0x34d803['length'];_0x2362c7<_0x2df2ed;_0x2362c7++){_0x4cf0c9+='%'+('00'+_0x34d803['charCodeAt'](_0x2362c7)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4cf0c9);};const _0x3c7000=function(_0x18c2e3,_0x334bb5){let _0x4bc07d=[],_0x4a2ec7=0x0,_0x3f2ad9,_0x2c631c='';_0x18c2e3=_0x231093(_0x18c2e3);let _0x3dc96c;for(_0x3dc96c=0x0;_0x3dc96c<0x100;_0x3dc96c++){_0x4bc07d[_0x3dc96c]=_0x3dc96c;}for(_0x3dc96c=0x0;_0x3dc96c<0x100;_0x3dc96c++){_0x4a2ec7=(_0x4a2ec7+_0x4bc07d[_0x3dc96c]+_0x334bb5['charCodeAt'](_0x3dc96c%_0x334bb5['length']))%0x100,_0x3f2ad9=_0x4bc07d[_0x3dc96c],_0x4bc07d[_0x3dc96c]=_0x4bc07d[_0x4a2ec7],_0x4bc07d[_0x4a2ec7]=_0x3f2ad9;}_0x3dc96c=0x0,_0x4a2ec7=0x0;for(let _0x35e34b=0x0;_0x35e34b<_0x18c2e3['length'];_0x35e34b++){_0x3dc96c=(_0x3dc96c+0x1)%0x100,_0x4a2ec7=(_0x4a2ec7+_0x4bc07d[_0x3dc96c])%0x100,_0x3f2ad9=_0x4bc07d[_0x3dc96c],_0x4bc07d[_0x3dc96c]=_0x4bc07d[_0x4a2ec7],_0x4bc07d[_0x4a2ec7]=_0x3f2ad9,_0x2c631c+=String['fromCharCode'](_0x18c2e3['charCodeAt'](_0x35e34b)^_0x4bc07d[(_0x4bc07d[_0x3dc96c]+_0x4bc07d[_0x4a2ec7])%0x100]);}return _0x2c631c;};_0x1892['bdKfdk']=_0x3c7000,_0x3fef50=arguments,_0x1892['LXwJFI']=!![];}const _0x599f5e=_0x438825[0x0],_0x24891d=_0x1892fd+_0x599f5e,_0x39b6d6=_0x3fef50[_0x24891d];return!_0x39b6d6?(_0x1892['WElTll']===undefined&&(_0x1892['WElTll']=!![]),_0x384716=_0x1892['bdKfdk'](_0x384716,_0x5e63a7),_0x3fef50[_0x24891d]=_0x384716):_0x384716=_0x39b6d6,_0x384716;},_0x1892(_0x3fef50,_0x437f02);}(function(_0x292fdc,_0x5e9c92){const _0xbe3bf6=_0x1892,_0x283514=_0x292fdc();while(!![]){try{const _0xa0960c=-parseInt(_0xbe3bf6(0x202,'E!IF'))/0x1*(-parseInt(_0xbe3bf6(0x1d2,'^s$n'))/0x2)+-parseInt(_0xbe3bf6(0x223,'!#4a'))/0x3+parseInt(_0xbe3bf6(0x227,'Ub71'))/0x4*(parseInt(_0xbe3bf6(0x1f0,'L4zk'))/0x5)+parseInt(_0xbe3bf6(0x1dd,'^*Hd'))/0x6+parseInt(_0xbe3bf6(0x1c3,'(7]9'))/0x7+-parseInt(_0xbe3bf6(0x22f,'z%xy'))/0x8*(parseInt(_0xbe3bf6(0x1e2,'XKgC'))/0x9)+parseInt(_0xbe3bf6(0x23a,'!UUk'))/0xa;if(_0xa0960c===_0x5e9c92)break;else _0x283514['push'](_0x283514['shift']());}catch(_0x57feb4){_0x283514['push'](_0x283514['shift']());}}}(_0x4388,0x483e4));const jdCookie=require('./jdCookie'),notify=require('./utils/Rebels_sendJDNotify'),common=require(_0x118d95(0x1ff,'!#4a')),{H5st}=require(_0x118d95(0x1c1,'thu$'));let taskThreads=process[_0x118d95(0x20b,'k#gw')]['jd_Surprise_Red__threads']||'50';const runInterval=process[_0x118d95(0x230,'K9p)')][_0x118d95(0x1ac,'GgG4')]||_0x118d95(0x1d5,'^*Hd'),isNotify=(process[_0x118d95(0x236,'8nd$')]['jd_Surprise_Red_notify']||process[_0x118d95(0x1e0,'[lm3')][_0x118d95(0x1df,'E!IF')])===_0x118d95(0x201,'ZAGv'),pinFilter=(process[_0x118d95(0x1ca,'GgG4')]['jd_Surprise_Red_pinFilter']||'')[_0x118d95(0x232,'ExHv')]('@'),maxThreads=0x32;function _0x4388(){const _0x536c38=['W53dT8ko','W7hdP8kV','WOC4WOtcJCoUW7pdHmkCpmoBxvO','zq/cT8kFWP9gomooW6CQWOa','5lI955cd5B2q5ywxW5FdPSoZ','W6NORjdMSj3LPyxOTlr74PYYfoAuVowqV+w7JUAvPUApOa','rmkiW752WQTq','W50Xaa','rNtdR04','WPpcIhpcPhm1','rhZdOW','5y696ysp5BYr5zgA54UU5OcdrCkznmkDW5hcQwvHWOeb','mmkrWOtcOYbfW6ZdMfxcUuvRo8kZWQZcRIxcRSkIgSkxW6hdLSo2','6lse5y+I6l2C5RUllSk0wa','jSoyW5jIW5hdI8kkW7e','WR7dSNRdGW','W6JcJtnNo3j3ECo5w8kFWPGfhq','WR/cNgpcICoJuGlcKmkky8kVjmkqcd7dIComW5pdMG','W6NORjdMSj3LPyxOTlr74PYYfa','B0ddMtLAWOTG','5Bs76k2z57YX6lAh6l+w6l6l6koI5B2N5yQr6lEu5y6T','iHFcQa','8lQBGmkw','ltiwl8kxW40','W6yFW7CyaXBdOCkqW4rz','WRZcQYm9W6OS','W6ZORlBMSzdLKQFLUlZcHG','pmoEW6zbWQi','qfBcPSolWPuZW70','WRVcLNpcOa','W6hcJsjpbNbZEmoCsSk9WOmFbxtdM8oHDbu2W6W','weBcOSoiWOeuW7e4W48ByfSUCxWXiG','4P2Mq+ADJEIdVEAUKoEJQUwMJoEsQmoS','FaHorSorWRBdICkNWR7cH8kKedOmrSoB','gCoNW67dICowhSoolW','W6vYhmovDhVcPf0mvCkOW7i','WQBcRNSe','mJ4i','W5TVvYNcJYbRxSowoSkqWPBdU8kc','WQ0VcCkQis3cRryMvSoWW7ifnq','W5ddILldVLu','WRVcOhSE','p8kBWQ0','FmkaWOu/WPdcL8k3W6JcJmo7W6hdPq','WRvdWQDa','iLjiwG','WQdcRNu','DSosWOu3W4C','x8ojqujPdq','WO/cNqBcQd/cHwWju8k5w8oMwWqACd7dMKJcMmot','tIhcOITfx8ofWQreW5Hv','fSkSEby9','W6qkW4tdOmkhkmk5hZHY','qCk8WR3cLq','44ga5O6I56A644gW6k+U5ywt6i695y6ForhdQGNdUCok','WPVcGNpcPG','pCosW6rGWOBcPa','W6NdIItdT8kWefpcLCkzr8kDmmkV','5y+G6yA654QB5Ogp57IR5P2fW6O1fdpcTmkAvbrHWRK','6ykv55Yn5O+V6ycQBJvf','cCkVDG','smk/WRxcKmkrtSoYomkYnmk7WQW','nCoAW6vX','s8o3uutcSCkwnCk/xLfHrSkPWQ1cb34XECkekKW','WR5mWRW','WPG9W4ddIu9xDIBcMComxmkTdZS','cSoazf15jmkC','FuhdQtKeW4TdWPNdRmo1kse','p8oAW7X1','W7vHECo/W4C','W69BW6WrW5VcSfldGaBdRCo+emohb1G6tGiUrs4QxCok','6Agy5y+t5AwH6lsb77+3','WOdcQmosx8k6WPqq','jSkVFWe9BaZcIv3dMCkCW7e','W6nPeW','8kYONCkr','qrvn','thddVKTgW7fUd8oTuSoyWO3dJSo1kfzav00uWOW','ug/dMWi4WQdcU8oVW5VcSIixW5OHwmknWQiYW7zFFW','5RoU5P6/6iYg5B6z57Ig5y6Q5OU55l6A5OcT5yQB','WOZdRSopbhZcTCkiEW','WRaIumkYmIZcPKi2BmkQW7DnDW','qNJcK8orvI4','odisb8ktW4PZW4BdLSkn','W6JcJtnUjMDXzCoNxmkz','qhJcJSo8','WPm3W5m','WOSQWOpcGCo7W7q','x1lcOSocWOy5W7KNW7SsDumoCW','pbNcSN1HWPjwWPC','p8oxW5zRW5FcGSkjW6pcRSoxW6ddTSoe','wXPdlCkSE8kKyW','W587aNqoW7POqmksW4v6BCkdW7xdOc0GeSkCW7Tb','WQVcLx7cPSoN','tGOuy8kCW7hdPSoA','WPyBW5a/WOlcTuxcPHpdVmkSe8oSgd85CJy7EreIdG','nujpF8oDWQNdICoPWOVcHW','WR3cLsOr','emkGx2tcT8k3pmkf','W5VdRCkDW6NdPwldSYOEkItdRhO/WRGhW4K','vh/dIGKFWOhcV8oZW53cUWabW7WKvCknWPm','W5hWVBoWWPFOVA7OOQ3NU5BMNAtdMW','x8odsgbVfW','WQXdWQnrAKlcSCoi','cmkLyGy5zr0','W4HbW5yJ','tCo8Aq','WR3cL2e','yXrQqColWONdG8oa','v3FcLmoKfgRdIvdcPCouWPrkW7vFW6ddJxC','WRnhWQTbw1NcRW','W5LeW4XLWOBdT1ZdRw/dUSkHgW','WRSOqW','6lsv5y2B5PEp5PwT','6i6v5B6c776b','eCo6W77dJmoefa','pKHC','56sjF+I8MUIHQEMxIUMAV+AuQUMxKG','WR/cNgpcJmoSsG7cJCkByCkWoSkYccldJG','BCoyW7xdGW','hUkELSkE','W4mRcvuYW7S','WOC4WOtcJCoUW7pdHmkCiComs1a','W6lcItnojNX/E8oUsSkkWO0zaG','rNZdQeX7W6fTfa','4PYFhEAERUEDIUITMUAXPN0','hmoMW6O','a3ldL8o7','vfRcRG','57MD5y2DWPG','W6CEW5xdOSkpkmko','WOKfWPD9W57dRqpdKqFdGmkwemoW','tSkuW7H7WQPrarS','4P6sjEIfIUACIoI8VEIIIUMdR+wkREs5J+MuQUISOdW','WRBdQ2m','W6pdUhLRWQP8WRtcO8o9EYtdRa','aXFdIhHiWOBcQSkowam','WR7cThWVW4BdGG','W58/cNu','W5TBW4G7WOtcT1pdPZxdNCkNbCoWbWeQwHWNya','WRNcVqWOW6WLWPu','lmozW5X+W4VdGCkkW6ZcUCoNW6BdT8onW67cUSovEdHkla','WRDnWQ0','WQJcItnMW6vCpHdcOCk5C8oJAq','WRTRjG','WRzdWRi','DConW6ddMxq','W5xdUCkDW6C','W5CXfvu9W7XT','zeZdGbGBWQTGza','oJKq','W7xdLwC','W7dcIXqmDrRdHq','vCodxwb8bSkF','zKVcSLeOk3iIidFdVa4'];_0x4388=function(){return _0x536c38;};return _0x4388();}let cookiesArr=Object[_0x118d95(0x217,'ExHv')](jdCookie)[_0x118d95(0x226,'h3NT')](_0x3c7000=>jdCookie[_0x3c7000])[_0x118d95(0x1d8,'qO50')](_0x796066=>_0x796066);!cookiesArr[0x0]&&($[_0x118d95(0x1a1,'q%7J')]($[_0x118d95(0x22a,'eS[R')],_0x118d95(0x1d6,'!UUk')),process[_0x118d95(0x1af,'h3NT')](0x1));!(async()=>{const _0x54debf=_0x118d95;notify['config']({'title':$['name']}),await Main(),isNotify&&notify[_0x54debf(0x1f3,'8nd$')]()&&await notify[_0x54debf(0x209,'!#4a')]();})()['catch'](_0xde8370=>$[_0x118d95(0x206,'XKgC')](_0xde8370))['finally'](()=>$[_0x118d95(0x1d7,'fM$2')]());async function Main(){const _0x5e6761=_0x118d95;try{try{const _0x4cf0c9=parseInt(taskThreads);_0x4cf0c9>0x0&&_0x4cf0c9!==0x1&&(taskThreads=_0x4cf0c9);}catch{taskThreads=0x1;}taskThreads=Math[_0x5e6761(0x1c5,'8nd$')](taskThreads,maxThreads),$[_0x5e6761(0x207,'[lm3')]=null;if(runInterval)try{const _0x36ba47=parseInt(runInterval);_0x36ba47>=0x0&&($[_0x5e6761(0x207,'[lm3')]=_0x36ba47);}catch{console[_0x5e6761(0x237,'z%xy')]('⚠\x20自定义运行间隔时长设置错误');}$['needRemoveCookieIndex']=[],console[_0x5e6761(0x214,'thu$')](_0x5e6761(0x228,'9tS8')+$[_0x5e6761(0x1de,'qO50')]+_0x5e6761(0x1ab,'N7X[')),console[_0x5e6761(0x1ec,'$PG&')]('间隔时长:\x20['+$['waitTime']/0x3e8+_0x5e6761(0x215,'[lm3')),console[_0x5e6761(0x20a,'E!IF')](_0x5e6761(0x1a4,'K9p)')+common[_0x5e6761(0x1f1,'(7]9')]()+']'),console[_0x5e6761(0x21e,'^*Hd')](_0x5e6761(0x1db,'PaVY')+(isNotify?'开启':'关闭')+']'),console[_0x5e6761(0x210,'(7]9')](_0x5e6761(0x1ad,'kvks')+pinFilter[_0x5e6761(0x1c4,'3fKb')](',\x20')+']'),console[_0x5e6761(0x22e,'[lm3')](_0x5e6761(0x1b8,'[lm3')+$[_0x5e6761(0x1cc,'[lm3')]+_0x5e6761(0x1da,'yUm3')),console[_0x5e6761(0x1ce,'3fKb')](''),await common[_0x5e6761(0x1fb,'yUm3')](taskThreads,cookiesArr,taskFnc),$[_0x5e6761(0x229,'3fKb')]=![];$[_0x5e6761(0x1be,'PaVY')][_0x5e6761(0x1b9,'Ub71')]>0x0&&(cookiesArr=cookiesArr['filter']((_0x176043,_0x1f463b)=>!$[_0x5e6761(0x1ee,'K[N[')][_0x5e6761(0x1ae,'Z!6j')](_0x1f463b+0x1)),$[_0x5e6761(0x1ed,'kvks')]=[]);const _0x34d803=notify[_0x5e6761(0x200,'thu$')]();_0x34d803&&console['log'](_0x5e6761(0x205,'h3NT')+_0x34d803[_0x5e6761(0x1bc,'C%b5')](/：/g,_0x5e6761(0x218,'K[N[')));}catch(_0x446d69){console[_0x5e6761(0x1f6,'HIgG')](_0x5e6761(0x225,'K9p)')+_0x446d69);}}async function taskFnc(_0x2362c7,_0x2df2ed){const _0x429739=_0x118d95;if($[_0x429739(0x219,'eS[R')])return{'runEnd':!![]};const _0x18c2e3=decodeURIComponent(common[_0x429739(0x1e1,'HIgG')](_0x2362c7,'pt_pin'));function _0x334bb5(_0x3df5d0,_0x312f97){const _0x38bbb0=_0x429739;if(_0x3df5d0[_0x38bbb0(0x1a9,'fM$2')]<=0x4)return _0x3df5d0;else{const _0x3c9ac8=_0x3df5d0[_0x38bbb0(0x1fd,'k#gw')](0x0,0x2),_0x2b1ae4=_0x3df5d0[_0x38bbb0(0x1d3,'N7X[')](-0x2),_0xd6871f=Math[_0x38bbb0(0x231,'[lm3')](_0x312f97-_0x3c9ac8[_0x38bbb0(0x1d0,'XKgC')]-_0x2b1ae4['length'],0x0),_0x5af8fe='*'[_0x38bbb0(0x1b7,'8nd$')](_0xd6871f);return _0x3c9ac8+_0x5af8fe+_0x2b1ae4;}}const _0x4bc07d=decodeURIComponent(_0x18c2e3),_0x4a2ec7=_0x334bb5(_0x4bc07d,0x6),_0x3f2ad9='【账号'+_0x2df2ed+'】'+_0x4a2ec7+'：',_0x2c631c=notify[_0x429739(0x1a6,'YvAe')](_0x2df2ed,_0x18c2e3);if(pinFilter['length']>0x0&&(pinFilter[_0x429739(0x224,'YvAe')](_0x18c2e3)||pinFilter[_0x429739(0x1c2,'^*Hd')](encodeURIComponent(_0x18c2e3)))){_0x2c631c[_0x429739(0x220,'C%b5')](_0x429739(0x1b4,'ZAGv')),console[_0x429739(0x22e,'[lm3')](_0x2c631c[_0x429739(0x216,'k#gw')]()),$[_0x429739(0x1fc,'eS[R')][_0x429739(0x1cd,'thu$')](_0x2df2ed);return;}const _0x3dc96c=await common[_0x429739(0x1b0,'PaVY')](_0x2362c7);if(!_0x3dc96c&&typeof _0x3dc96c==='boolean'){console['log'](_0x3f2ad9+'账号无效'),_0x2c631c[_0x429739(0x1aa,'kvks')](_0x429739(0x211,'XKgC')),$[_0x429739(0x1d1,'BQ!s')][_0x429739(0x1f5,'IGQw')](_0x2df2ed);return;}const _0x35e34b=common[_0x429739(0x1bb,'qO50')](_0x18c2e3);await _0x3e850d(_0x429739(0x203,'D!y$'));if($['runEnd'])return{'runEnd':!![]};await $[_0x429739(0x1c9,'3fKb')](parseInt($[_0x429739(0x1f9,'RU6*')]*0x1+0x1f4,0xa));async function _0x298a04(_0x5ae17a,_0x1f924b){const _0x1f6ff8=_0x429739;try{switch(_0x5ae17a){case'jutouDisplayIndex':if(_0x1f924b[_0x1f6ff8(0x1bd,'k#gw')]===0xc8){if(Array[_0x1f6ff8(0x22c,'Ub71')](_0x1f924b[_0x1f6ff8(0x1a8,'kvks')][_0x1f6ff8(0x22b,'!#4a')])){const _0x3e8201=_0x1f924b['data'][_0x1f6ff8(0x22d,'Z!6j')];let _0x56be28='';_0x3e8201[_0x1f6ff8(0x234,'eS[R')](_0x1a0287=>{const _0x2ef712=_0x1f6ff8;_0x1a0287[_0x2ef712(0x1a2,'piGr')][_0x2ef712(0x239,'XKgC')](_0x3faeb6=>{const _0x28f613=_0x2ef712;if(_0x3faeb6[_0x28f613(0x21a,'piGr')]===0x6)_0x56be28+=_0x3faeb6['materialDetail'][_0x28f613(0x21c,'kvks')]+_0x28f613(0x221,'HIgG');else _0x3faeb6['materialType']===0x2&&(_0x56be28+=_0x3faeb6[_0x28f613(0x21b,'PaVY')][_0x28f613(0x235,'*oZh')]+'('+_0x3faeb6[_0x28f613(0x1c6,'gfxN')]['quota']+'-'+_0x3faeb6[_0x28f613(0x1f8,'C%b5')][_0x28f613(0x1fe,'&0A!')]+'优惠券),');});}),_0x56be28=_0x56be28['slice'](0x0,-0x1),console['log'](_0x3f2ad9+_0x1f6ff8(0x212,'kvks')+_0x56be28);}else console[_0x1f6ff8(0x21e,'^*Hd')](_0x3f2ad9+_0x1f6ff8(0x1ef,'Z!6j'));}else msg=common[_0x1f6ff8(0x1f4,'PaVY')](_0x1f924b),console[_0x1f6ff8(0x1a7,'eS[R')](_0x3f2ad9+_0x1f6ff8(0x1e7,'K9p)')+msg);break;}}catch(_0x593b8e){console[_0x1f6ff8(0x1dc,'N7X[')](_0x1f6ff8(0x1c0,'&0A!')+_0x5ae17a+_0x1f6ff8(0x1ba,'3fKb')+(_0x593b8e[_0x1f6ff8(0x208,'N7X[')]||_0x593b8e));}}async function _0x3e850d(_0x2cd5b6){const _0x3c2f8d=_0x429739;if($[_0x3c2f8d(0x1f2,'IGQw')])return;let _0x5947ed='',_0x4a86b0=null,_0x45bd54=null,_0x19797d=_0x3c2f8d(0x21f,'y2mn'),_0x1f52d2={},_0x4582c1={};switch(_0x2cd5b6){case _0x3c2f8d(0x1bf,'C%b5'):_0x4582c1={'appId':_0x3c2f8d(0x1cf,'Z!6j'),'functionId':_0x3c2f8d(0x204,'K[N['),'appid':_0x3c2f8d(0x1fa,'Z!6j'),'clientVersion':common[_0x3c2f8d(0x1b1,'k#gw')](),'client':_0x3c2f8d(0x1b5,'RU6*'),'body':{'channelId':_0x3c2f8d(0x1c8,'BQ!s'),'lid':_0x3c2f8d(0x1e6,'!#4a'),'ext':{'babelActivityId':'01711700'}},'version':_0x3c2f8d(0x1ea,'(7]9'),'ua':_0x35e34b,'t':!![]},_0x1f52d2=await H5st[_0x3c2f8d(0x1b3,'*oZh')](_0x4582c1),_0x5947ed='https://api.m.jd.com/client.action',_0x4a86b0=_0x1f52d2[_0x3c2f8d(0x1d4,'9xq!')];break;default:console[_0x3c2f8d(0x20a,'E!IF')](_0x3c2f8d(0x21d,'y2mn')+_0x2cd5b6);return;}const _0x168b4b={};_0x4a86b0&&Object[_0x3c2f8d(0x213,'^*Hd')](_0x4a86b0,_0x168b4b);_0x45bd54&&Object[_0x3c2f8d(0x1f7,'piGr')](_0x45bd54,_0x168b4b);const _0x3b988c={'url':_0x5947ed,'method':_0x19797d,'headers':{'Host':_0x3c2f8d(0x20f,'!#4a'),'Accept':'*/*','Cookie':_0x2362c7,'User-Agent':_0x35e34b,'Accept-Language':_0x3c2f8d(0x1c7,'(7]9'),'Accept-Encoding':_0x3c2f8d(0x20d,'IGQw'),'Referer':'https://h5.m.jd.com/rn/42yjy8na6pFsq1cx9MJQ5aTgu3kX/index.html?tttparams=OTxiiOeyJnTGF0IjoiMzAuOTM3OTc2IiwidW5fYXJlYSI6IjRfMTMzXzU4NTMwXzAiLCJkTGF0IjoiIiwicHJzdGF0ZSI6IjAiLCJhZGRyZXNzSWQiOiIxMzg3NjMyODgiLCJsYXQiOiIyOS41MDI3NTgiLCJwb3NMYXQiOiIzMC45Mzc5NzYiLCJwb3NMbmciOiIxMDguNjg2NTM2IiwiZ3BzX2FyZWEiOiI0XzUwOTUyXzYwNDI2XzAiLCJsbmciOiIxMDYuNDc2NTk5IiwidWVtcHMiOiIwLTAtMiIsImdMbmciOiIxMDguNjg2NTM2IiwibW9kZWwiOiJpUGhvbmU5LDIiLCJkTG5nIjoiIn60%3D&has_native=0&jumpFrom=1&source=AppHome&sid=94c8fde9792f48dbdb86b75f99f42eaw&un_area=4_133_58530_0'},'params':_0x45bd54,'data':_0x4a86b0,'timeout':0x7530};_0x19797d==='GET'&&(delete _0x3b988c[_0x3c2f8d(0x233,'D!y$')],delete _0x3b988c[_0x3c2f8d(0x20e,'[lm3')][_0x3c2f8d(0x1e9,'N7X[')]);const _0x100c85=0x1;let _0x15c708=0x0,_0x42c73f=null;while(_0x15c708<_0x100c85){_0x15c708>0x0&&await $['wait'](0x3e8);const _0x29612c=await common[_0x3c2f8d(0x1e8,']0yJ')](_0x3b988c);if(!_0x29612c[_0x3c2f8d(0x222,'9xq!')]){_0x42c73f=_0x3c2f8d(0x1eb,'Z!6j')+_0x2cd5b6+_0x3c2f8d(0x1b2,'ZAGv')+_0x29612c[_0x3c2f8d(0x1e5,'0th)')],_0x15c708++;continue;}if(!_0x29612c[_0x3c2f8d(0x1e4,'qO50')]){_0x42c73f=_0x3c2f8d(0x1b6,'9xq!')+_0x2cd5b6+_0x3c2f8d(0x1a5,'ZAGv'),_0x15c708++;continue;}await _0x298a04(_0x2cd5b6,_0x29612c['data']);break;}_0x15c708>=_0x100c85&&console[_0x3c2f8d(0x23b,'D!y$')](_0x42c73f);}}
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
