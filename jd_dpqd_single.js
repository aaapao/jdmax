/*
活动名称：常规店铺签到监控
活动链接：https://h5.m.jd.com/babelDiy/Zeus/2PAAf74aG3D61qvfKUM5dxUssJQ9/index.html?token=<token>
环境变量：jd_dpqd_single_token // 活动令牌，不支持多个
        jd_dpqd_account_threads // 控制账号并发线程数（正整数），默认1
        jd_dpqd_account_interval // 自定义运行间隔时长（整数，单位毫秒），默认0
        jd_dpqd_max_retry // 签到火爆时的最大重试次数（整数），默认0
        jd_dpqd_notify // 是否推送通知信息（true/false），默认不推送

此脚本为高并发单一签到本，自动过滤垃圾活动，与另外3个本无任何关联可单独运行

1 1 1 1 *

*/

const $ = new Env('常规店铺签到监控')
const _0x3c48f8=_0x4c34;(function(_0x4c805f,_0x3e2eaf){const _0x336643=_0x4c34,_0x5f1034=_0x4c805f();while(!![]){try{const _0x7cf344=parseInt(_0x336643(0x266,'WKpd'))/0x1+parseInt(_0x336643(0x1db,'Qiyj'))/0x2*(parseInt(_0x336643(0x253,'JFEw'))/0x3)+parseInt(_0x336643(0x1cb,'@(VZ'))/0x4+-parseInt(_0x336643(0x297,'7r*v'))/0x5+parseInt(_0x336643(0x1fd,'kDUr'))/0x6*(parseInt(_0x336643(0x1d0,'uZY2'))/0x7)+parseInt(_0x336643(0x227,'kjkJ'))/0x8+-parseInt(_0x336643(0x204,'GLcd'))/0x9*(parseInt(_0x336643(0x2a2,'xibe'))/0xa);if(_0x7cf344===_0x3e2eaf)break;else _0x5f1034['push'](_0x5f1034['shift']());}catch(_0x34c165){_0x5f1034['push'](_0x5f1034['shift']());}}}(_0x364c,0xd8c53));const jdCookie=require(_0x3c48f8(0x1da,'lEp2')),notify=require(_0x3c48f8(0x28d,'J)8#')),common=require(_0x3c48f8(0x1c1,'wedR')),{H5st,jsTk}=require(_0x3c48f8(0x21c,'(Squ'));let token=process[_0x3c48f8(0x27a,'kjkJ')]['jd_dpqd_single_token']||'',accountThreads=process[_0x3c48f8(0x222,'wB!Q')][_0x3c48f8(0x288,'^f2M')]||'1';function _0x4c34(_0x58c51c,_0x176a4d){const _0x364c7d=_0x364c();return _0x4c34=function(_0x4c34ac,_0x1f377c){_0x4c34ac=_0x4c34ac-0x1a8;let _0x63b30f=_0x364c7d[_0x4c34ac];if(_0x4c34['eYJPOF']===undefined){var _0x239369=function(_0x2775d8){const _0x30db2d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3fdb15='',_0x414788='';for(let _0x5c5899=0x0,_0x40072a,_0x574cd2,_0x403d8c=0x0;_0x574cd2=_0x2775d8['charAt'](_0x403d8c++);~_0x574cd2&&(_0x40072a=_0x5c5899%0x4?_0x40072a*0x40+_0x574cd2:_0x574cd2,_0x5c5899++%0x4)?_0x3fdb15+=String['fromCharCode'](0xff&_0x40072a>>(-0x2*_0x5c5899&0x6)):0x0){_0x574cd2=_0x30db2d['indexOf'](_0x574cd2);}for(let _0x42cd41=0x0,_0x45a676=_0x3fdb15['length'];_0x42cd41<_0x45a676;_0x42cd41++){_0x414788+='%'+('00'+_0x3fdb15['charCodeAt'](_0x42cd41)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x414788);};const _0x91a497=function(_0x5f0f05,_0x582edc){let _0x2dd567=[],_0x3fcc6b=0x0,_0x5b7359,_0x34702b='';_0x5f0f05=_0x239369(_0x5f0f05);let _0x1b306f;for(_0x1b306f=0x0;_0x1b306f<0x100;_0x1b306f++){_0x2dd567[_0x1b306f]=_0x1b306f;}for(_0x1b306f=0x0;_0x1b306f<0x100;_0x1b306f++){_0x3fcc6b=(_0x3fcc6b+_0x2dd567[_0x1b306f]+_0x582edc['charCodeAt'](_0x1b306f%_0x582edc['length']))%0x100,_0x5b7359=_0x2dd567[_0x1b306f],_0x2dd567[_0x1b306f]=_0x2dd567[_0x3fcc6b],_0x2dd567[_0x3fcc6b]=_0x5b7359;}_0x1b306f=0x0,_0x3fcc6b=0x0;for(let _0x16d47d=0x0;_0x16d47d<_0x5f0f05['length'];_0x16d47d++){_0x1b306f=(_0x1b306f+0x1)%0x100,_0x3fcc6b=(_0x3fcc6b+_0x2dd567[_0x1b306f])%0x100,_0x5b7359=_0x2dd567[_0x1b306f],_0x2dd567[_0x1b306f]=_0x2dd567[_0x3fcc6b],_0x2dd567[_0x3fcc6b]=_0x5b7359,_0x34702b+=String['fromCharCode'](_0x5f0f05['charCodeAt'](_0x16d47d)^_0x2dd567[(_0x2dd567[_0x1b306f]+_0x2dd567[_0x3fcc6b])%0x100]);}return _0x34702b;};_0x4c34['TibDbl']=_0x91a497,_0x58c51c=arguments,_0x4c34['eYJPOF']=!![];}const _0x2a66ec=_0x364c7d[0x0],_0x55ab43=_0x4c34ac+_0x2a66ec,_0x19c22d=_0x58c51c[_0x55ab43];return!_0x19c22d?(_0x4c34['beCJfn']===undefined&&(_0x4c34['beCJfn']=!![]),_0x63b30f=_0x4c34['TibDbl'](_0x63b30f,_0x1f377c),_0x58c51c[_0x55ab43]=_0x63b30f):_0x63b30f=_0x19c22d,_0x63b30f;},_0x4c34(_0x58c51c,_0x176a4d);}const runInterval=process[_0x3c48f8(0x298,'f#0a')][_0x3c48f8(0x20e,'ZLZv')]||'';let signHotMaxRetryTimes=process['env']['jd_dpqd_max_retry']||'0';const isNotify=process['env']['jd_dpqd_notify']===_0x3c48f8(0x271,'Y90Z'),activityUrl='https://h5.m.jd.com/babelDiy/Zeus/2PAAf74aG3D61qvfKUM5dxUssJQ9/index.html?token='+token,signStatusMessages={0x1805c007:_0x3c48f8(0x26f,'E6$L'),0x181688ea:_0x3c48f8(0x220,'xjrx'),0x1843da61:_0x3c48f8(0x21d,'JFEw'),0x1843da62:'活动已经结束',0x184253c7:_0x3c48f8(0x205,'E6$L'),0x192:_0x3c48f8(0x22a,'#)s%'),'-1':'服务器繁忙'},cookiesArr=Object[_0x3c48f8(0x27d,'4M1r')](jdCookie)[_0x3c48f8(0x2b8,'7r*v')](_0x91a497=>jdCookie[_0x91a497])[_0x3c48f8(0x1b7,'JFEw')](_0x2775d8=>_0x2775d8);function _0x364c(){const _0x551e52=['WQRORzBMS5FLK7tLUOCp','WQy0WR/cG8o1','ihHSfW','adhdHxW','WQJdMuW','4P2XWRpKUPJNIzlMOR/LVQ/PL5BORAO','W6BdJSoY','dcRdN2NdU8kix8kCWOv4vCo1uajEvLJcI8klWPKBimo2WRZdNmoKmCo5WP7cGCkEWR5wW60kW4PkWQmRW5C6W6pdRsldM8oXAmotW7ZdHSkcWOJcSSodDCo8i8kSCg0jWRddLmkWbmkNdmozx1eRzCkq','4P2JWQBMNyBOG6VMR4FNOy7LPz7NKzL6','W7hcLa/dKmo/W6zLWQ7dQa','WP8NAsXdWQRdMxddS1XKW5hdNmkCtSkOacqXjIZcHbq2W7vpWP3cVu/cKmk6jsFcRHldPqO5tmkk','zK/cOeRdT08','WQpdJmkWlMRcGq','W6ddHCokxwnEFYeVzLimW5Hoj8oDgXmwwuNdJ8oE','WOuCjbq','W5ypWQVcVmkBWOm','W4/dSSkkWONcRt7dN2W','WQZdI2tcVmkerG','lGNdLSozW5C/CKeFwsPaW6DNjtpcV8k2s8omW5BdICk2mCoPWOFdPq','W4SuWR0','772Y5Bwc5y2p5A2A','uCo2eNNdT8oi','5l2d5OkS5yQ8','WPC6BIbwWQu','Cv7cI3VdVvuVySo7h8o2jCoPW6KJ','WORcUCkt','4P21W57NRj3LIQlLPOhOTPK','CCkCWRhcJ8kE','n8ohW6pdN8ocaCkIDCkCWOeJodS','WPLWW6C','cSkzWOOr','zvlcMftdNu4QEmo3cmo7k8oUW6K4','AtLnW40rW4SRW5ZdOuLnDbzQW7VdQq','WPJcS8ot','W53dP09O','8jUBQXtOTPlLJ4VMLABMLk4','6ygc55+K5OYC6ycMWQyRsa','5BQ46zg85zgH56EM776+aW','uCo3W67cLCkuW4JdVSk/WOXT','WQv+WR/cJ2SPbmkj','44gY5O+u56wM44g86k+W5yAw6i6Y5y+ZWR4IW68ihmk4','cUoaTUE5SoAFSUAvIoMwP+oaKa','WP9XW7/dPCkLbCoMWQ5vo0qzW63cVuf4W6ddS8ouWOxcJG','FJvzW5zzW7q','WONdUcyc','kGNcIq','mmoYCXpcUmkav3rwWRnFCmk8WQ7dGeuoWRJcOa','yL7cH07cSveQDCo7bq','WPuyiWe','5Rs75yQo5BkL5z6fWP4','lSkxWOLd','W5xdQvW','EJnGW5TxW6mi','WQ7dKmkK','4P6dBUIfU+AEMEI9PEIGPoMcNUwlO+s7VoMuUoIVTCog','ecFdM3W','5PYQ55+d5AE15zgS7762','gmozW7dcT8ouBNC','WRahWRyeBqbs','sSkDW67cVW','W7axWRGcqrDa','AmksWQO','WQNdHuW','5Q+15Pw356+15yUv','hG8pAa','rLtcIbC','44g06lw45y2C','jEE4OoAEHE+/PUs7U+ASLEAvU+EcQ+AEVUwtGtL+','5B+f5AwH5PED6zsc7768','x8o0bwZdGq','jsFdM8kRaSo6WPK','o2HMda','W7aYeHK','c2OOchxcV2zrWQiUW6unaCk4W6ZdNSomrmknFNVdQSoZWRTtBCkJWRW7WPtdPgOqWRC6q8orWQ3dKtC','WRVdIwlcTa','WOq3W6xdIq','5Q+25PsB56YD5yQI','lsRcH8kDkCkLWPFcQIyWW50/pmkKjb8IWR/cNa','sazL','CCkaWR11WPlcTmki','WPq5W7RdJq3cVG','AmkVWOJdNM1j','cJhdNa','oSoVltG','CCkAWRFcJW','xUA0JUwjMEwLJUEbOoEjQG','xmo+W6tcISol','oCoUldNcMmolrhOc','bmkxWP4','W4hcMcK','W7qYvHrshCo/','W4vIWO8','W748aGq','WPuMEsW','5BQf6zo756w65yQ18j6nQ++6QW','WQr+W4y','WPaGCt1uWRK','c8kJWR7dLSkbWP/dI8k7WQnHW5yN','WOpcO8khsIpcMG4q','W5uzmuBcPa','hCoFW7RcSW','WQCtW4u','WRpdH3e','c2OQdgVcT2fKWP45','W63dHmoHANPiDsWRzL4rW4K','imkdW50ddCkOW6FdGCkADmk7AmkPlCkL','WOCIWP3dJmoGW7LCWP5aqCkcWRmoWRn9W5LZWRC8W7u9WQTH','cSojW67cSW','5yEnW4pLJ5RXGOYE','bCkzWOK','asZdMvtdU8ov','nJldG8oWcSkNWOFcPIuBW5m8','W6/dPCopWP3dQCkKW7nSWRNcQG','W4VdUmkqWQVcMIVdHxhcOCkLobFcMHPj','i2LHfmk7WQ1flYemW7bFW7BcRCkfW6VcGHiMW7tcHW0Womo1w8kgz8oeWO83t8oQW6pcNLddU0FdRJm8lmkZjLpcKmkzWOZcMmoSocHVWOeyWOpcKY4LfLBcMCoblCk8WQ4xjZ7dJ8oHWQPW','BKNcJSooW5eHCG','W7dcNrZdGSkxySk3WPKjW404ye4','srbSWR7cUNu','56Y05yQQ54c154Mw5Psa55IO5PYT5As76yA26kYU5QYF5PwUW7xcTCoQ','DKpdJCojW5SHsaO','WORdVcSWytRcVuLUjvVcTeBdTCk/','f8omWRlcMmoBW4dcQwev','5lUb55cZ5B+X5ysxmuZcNG','4P+pqUAFSEEEHoIVK+AWPHm','W5aOWPm1csbJwG/cPJO','vSo9W6W','sSoGW6lcN8oCW6xdU8kLWO4','772Z8ks7Ka','W5ZINOlcSEITPUAYJUwLMUI2TU+/G+AxPEwsHow6UEAuK+ApPU+/PVcsMR8','W5NdVt5cmq','WPzTW4xdVSkNdSo9','e8k8fNRdGmopWQddRGRcNq','y3dcKSoNuCk7WRVcLwWcW4q6','j3jY','rSoOghpdLKe5kWOgA2ZdTfrzW67dMM3dLqi','W47cMcO7','WP7NUP3MNQNMLjhPL6VVVAy','WQSVgmog','WOq/W6ldIWZdTSoLAa','icpdG8kQm8oGWOdcPW','WOtcQ8kasIq','DeNdImoiW5a','WONOR7RMSQRLPONOTQZcTEkES8kr5PEY5zoP5BM05PAM5OYm','WQZdIxVcSmozxvPUw8kamq','ASkAWQjwWPa','5P2q556l5AsT5zoi77YU','W6pdTCoC','WPvWW6xdTmk+cSoWWR9AkKGnW7ZcIKzlW7BdL8osWOBcQCkDW5CBcSkYW60rW4mVeGChcCkyW4DnxG','FcvcW5fq','kmkhWPrpkmoZWO/dTa','cCo1mctcK8ocwteVWOjoEW','5y296yA054M85Ooj57I95P6VW5L5W5TnW4BcUmoio2NcUa','WOCZW6xdQqddT8oIASoJkCkDW7P7Dci','mmkdWPDo','W6ldO8ovWPpdQ8kL','W4NdS0HH','W4H+WPVdKCoUW7S','tftcNae','tmoPchm','W73dGmo8tq','W6lORyJMSOhLKORLUPNdJW','W4JdVmkDWPK','yYLtW5P/W6KkWP3dOe4zEZC2W6i','cdhdJa','nwddJgVdUx12WQi','mmkhW4a2oSk1W6pdKG','uZvPxJ/dQfXiWQqKW7qa','WOW5W7y','sCkvW63cLSoCW7VcHvK','W44QWQJcPmo+xSkJWQXclKKVW4a','s1VcKGH+cmkGva','zf7cJK/dU1iY','o27dKei','eq3dG1a+w8o8egRcRCoTWOX2W6W','6lsW5y+m5PsF5PwY','WOK4W6FdIq/dQSoVxCoPkq','d+odO+w/MUwKOEAuHUMxGoocGW','W4KuWQ0','k8o5kJNcGmofwwuYWP8','W6tdQCosWPO','5yEU57Mv5y2l8kIgUq','kIjzcSoMWONcNIRdHCkNkSoI','WQhdKmkNiG','a8ksWReqyw44tvtdImk7cZxdUs4PW77cMCkgW75TWRZcNr4','W5xdO1vUcSoS','eZ/dGM0','WPzTW77dV8k8wSkJW7S0','k8ocW74hW4/dP8oBWPtcT8ooW5Hmsa','DSkhWQJcG8kEu8o7DmkI','pgddGey','BeNdHa','qHb2WORcP3RcHCoKkJBdNmojCG','8kMAQSku5P+c6k2+5RsW5yQ75lYV5Oox5AAT6lEvhEkFGhG','W63cIqe','WO9uW6a','nmkrWPvfpCkWW7BcOmkt','CSkqWQDuWORcVq','W4NdPCkbxsxcGXnlWRxcIdddN8ojWR46WQq','5REn5yUH5Bch5P2J5BYX5Asa','5BQs6zcj56s15yUS','ECkqWQDMWR8','5Bs96l+W5yMr56+l5yQf5lMI6zQj','WRuPWRJcN8o5WQK','pIldSG','W5PSWOxdNCkKW7PDW5H1tCko','WOmKW7tdIrFdPG','W6BdSSopWOtdRmo3WQG6WPhcVGBcUSowe2hcLexdMvRcOCkGu8kHrG','pcNdSbyDzCopW65/FCoTxHRdKai','l8oeW7ahW4FdPCoBW7pcJ8oYW4XQvvS','l8odW7WeW4BdRmowWOhcTmoVW4Xjyq','pdnzumoFW47cMsS','5RwJ5yQP5Pwu5PwV','WP1TW6ldUmkRbq','8jAlNIi','nCktW4Chamk4','lhHHjCkRW6mdDIbnWQD7WRBcOCko','nMddMui','WOFcUtpcHmocsmk4WQ7cQxuf','W4JdVmkqWOS','5RET5yUU5lIY54Q1WQRdRKy','C1pdGmooW5SGCG','CflcHW','ELtcMa','xSoZW7/cHa','cHWsC0nVW6S1WPfhix5F','W6hdHmoWst5oDXC4ya','omo/lJZcL8opsa','z0pdL8oSW50NAbGKsdfSW6vYfq','W77dJSo+xh0s','WOGtjbddPCkgWOSCpvhdUJOtW5pdKuDvfSoovG','WRC1WQxcKmo3WQa','WO3INATU6k6P5RcC5Asj6lw677Y1','WQ/dJmkK','W7KYhXi','W5BORR7MSz/LPBJOTjtdQ+kCPIq','W5KYfqnyaCo4yaNdGd0i','oCkhWO5OiSoUWQ3dUCofBXyBvNC','4P+ZAEETO+wjUEAiOEwjLa','uSo3W6RcGCoCW5VdOq','yCksWQ7cIW','56sYc+I9GEIJPoMwL+MyL+AvVEMvOW','CLRcI1S','k8oPltNcKCoc','5yUh5B6s5lIk','W6VdMmkW','umktW6JcV8ox','WR8Ve8ouW5GBWP3cSG5a','iGNdHWpcQbmqq8o1eCo3bW','r8oYggBdLXP1CdSeAZJdVcLyW7/cUgFdIrSoW6qcWRq','sbbXWQRcR3RcJG','ohzGkSkPW7Op','oxHLcmkPW7qp','W4uSCcX4WQ/dMW','n8ktW5OQ','5Rwz5yQS5BAU57Q+5P2yW5q','tSoNhwZdT8o0WQBdQay','zu/cJvpdSeyVCSoR','WRhdISkGjgJcNmo+','W4NdPCknWP4','egeSawBcVwa','nIhdNSk3eCoGWPNcU1GmW50LoSoS','d2uKiwlcQgbj','WOyhoqxcU8oLWOOxl1JdQrefWPFcNLv0','W7mRWOlcPNWipSk3xmkwdmoAoH5g','W7aUfbLnxSk8Fw4','WQVdKCk3iN/cRmoOg8o+W4iCxrnqW4RcPmo7bCogWQC','WPH/W6JdOG','tmkiW7FcQSokWRFdJXO5tujFamksW5fFW6JcJ8oAW5pcIeHGWQq','A+w8NEwNNU+9QoAAKUEaRUwhP+ADPEwrRKFdLa','WO7cPmkatd7cRaukWPpcIcddPCowWQukWPWeaa8y','Eg7dVmoD','W6DWW6pdJSkOW7CKg8ohymkhW4iY','W6RdJhnDu8oaW6pcHqBdGtS','W4eJWQZcRmoXvSkUW7y4Da','4PURCUIhMUwUVUs7GUI9T+IIUoMwUUMzV+AuSUMuUUISSEE+UUMuT+ISKq','Fsfe','FM7dSG','5yw657MC5y2M','Cv7cI2RdRe4+BCobh8oUgmoYW7W','WReJWQlcUmoZWRP0l8o4umkRW4ipC8kE','5lUC5PEE5Bsn562e','BmkDWRNcHSkfumo3yq','W43dTe5S','W748dXy','WPRdUdyfvIFcUvO','WOq8CWXFWQ8','5y6p6yAn5B6Q5zoX54Ur5OkiW5ddVZzfWOfSCSkIAb8','W4RcKJOFpuW2sY8NW47cRrrmza','khjXaq','WQZdNgtcVmkAvufHrq','6lE55y2F5PE25PAD','E8kBWR8'];_0x364c=function(){return _0x551e52;};return _0x364c();}!cookiesArr[0x0]&&($[_0x3c48f8(0x23f,'lic#')]($[_0x3c48f8(0x1f0,'(iYH')],_0x3c48f8(0x2a3,'kDUr')),process[_0x3c48f8(0x259,'Rx37')](0x1));!(async()=>{const _0x5e7ecc=_0x3c48f8;try{console['log'](_0x5e7ecc(0x268,'f#0a')+$[_0x5e7ecc(0x2b6,'uZY2')]+_0x5e7ecc(0x275,'Qiyj')),console[_0x5e7ecc(0x1b0,'2ESr')](_0x5e7ecc(0x232,'WKpd')+token+']'),console[_0x5e7ecc(0x1d4,'DYwv')](_0x5e7ecc(0x1d1,'GLcd')+common[_0x5e7ecc(0x26d,'E6$L')]()+']'),console[_0x5e7ecc(0x1c4,'ZLZv')]('间隔时长:\x20['+runInterval/0x3e8+_0x5e7ecc(0x247,'LOS*')),console[_0x5e7ecc(0x1c4,'ZLZv')](_0x5e7ecc(0x1cd,')LDx')+signHotMaxRetryTimes+']'),console['log'](_0x5e7ecc(0x29f,'#)s%')+(isNotify?'开启':'关闭')+']'),console['log']('=========='+$[_0x5e7ecc(0x1f4,'GLcd')]+_0x5e7ecc(0x1ee,'Y6OR')),console['log'](''),notify[_0x5e7ecc(0x221,'WKpd')]({'title':$[_0x5e7ecc(0x22f,'#)s%')]});if(!token){console[_0x5e7ecc(0x1b0,'2ESr')]('⚠\x20请先定义必要的环境变量后再运行脚本！');return;}$[_0x5e7ecc(0x229,'b[c%')]=null;if(runInterval)try{const _0x30db2d=parseInt(runInterval);_0x30db2d>=0x0&&($[_0x5e7ecc(0x273,'8f9L')]=_0x30db2d);}catch{console['log'](_0x5e7ecc(0x269,'b[c%'));}try{const _0x3fdb15=parseInt(signHotMaxRetryTimes);signHotMaxRetryTimes=_0x3fdb15>0x0?_0x3fdb15:0x0;}catch{signHotMaxRetryTimes=0x3;}try{const _0x414788=parseInt(accountThreads);_0x414788>0x0&&_0x414788!==0x1&&(accountThreads=_0x414788);}catch{accountThreads=0x1;}await Main(),isNotify&&notify['getMessage']()&&await notify[_0x5e7ecc(0x1aa,')LDx')]();}catch(_0x5c5899){console[_0x5e7ecc(0x281,'^f2M')](_0x5e7ecc(0x2b1,'xjrx')+_0x5c5899);}})()[_0x3c48f8(0x1e3,'(Squ')](_0x40072a=>$['logErr'](_0x40072a))[_0x3c48f8(0x2b4,'J0e6')](()=>$[_0x3c48f8(0x27e,'kF*X')]());async function Main(){const _0x45efaf=_0x3c48f8;let _0x574cd2=!![];token[_0x45efaf(0x270,'7r*v')](':')&&token['split'](':')['length']===0x3&&(token=token['split'](':')[0x0]);if(token[_0x45efaf(0x1f1,'q!O(')]!==0x20||!/^[A-Z0-9]*$/[_0x45efaf(0x2ab,'K5x!')](token)){console['log'](_0x45efaf(0x280,'lEp2'));return;}$[_0x45efaf(0x296,'7r*v')]=token,$['UA']=common[_0x45efaf(0x21f,'kjkJ')](_0x45efaf(0x24a,'Cpe#')),{jsToken:$[_0x45efaf(0x1d9,'f#0a')]}=await jsTk($['UA'],_0x45efaf(0x282,'kF*X'),{'bizId':_0x45efaf(0x267,'Y90Z'),'v':'3.2.1.0','qs':_0x45efaf(0x23b,'^f2M')+$['token']});let _0x403d8c=0x0;$[_0x45efaf(0x1c8,'Rx37')]='',$['invalidAct']=![];const _0x42cd41=0xa;while(!$[_0x45efaf(0x25e,'xibe')]&&_0x403d8c<_0x42cd41&&!$['invalidAct']){$[_0x45efaf(0x1c0,'fDW@')]='',await sendRequest(_0x45efaf(0x1ef,'LOS*')),await $['wait'](0x3e8),_0x403d8c++,_0x403d8c===_0x42cd41&&(console[_0x45efaf(0x208,'Y6OR')]($['errMsg']||'❌\x20获取活动信息失败'),$[_0x45efaf(0x1c5,'kF*X')]='');}if(!$['getActivityInfo'])return;$['venderId']=$[_0x45efaf(0x26e,'WKpd')]['venderId'],$['activityId']=$[_0x45efaf(0x1cf,'8f9L')]['id'];if(!$[_0x45efaf(0x1ce,'J)8#')]||!$[_0x45efaf(0x209,')LDx')]||$[_0x45efaf(0x206,'LOS*')])return;const _0x45a676=$[_0x45efaf(0x23a,'J)8#')][_0x45efaf(0x25b,'Qiyj')],_0x5f0f05=$[_0x45efaf(0x276,'2ESr')][_0x45efaf(0x2a5,'f#0a')]||[],_0x582edc=$[_0x45efaf(0x226,'wB!Q')][_0x45efaf(0x237,'kHXK')]||[],_0x2dd567=$[_0x45efaf(0x293,'E6$L')][_0x45efaf(0x256,'lEp2')],_0x3fcc6b=$[_0x45efaf(0x226,'wB!Q')]['endTime'],_0x5b7359=$[_0x45efaf(0x1ab,'7r*v')]('yyyy-MM-dd\x20HH:mm',_0x2dd567),_0x34702b=$['time'](_0x45efaf(0x29b,'kQ%8'),_0x3fcc6b);let _0x1b306f=![];const _0x16d47d=[],_0x18a90b=[..._0x582edc,..._0x5f0f05];for(const _0x3a8410 of _0x18a90b){const _0x20cf83=_0x3a8410[_0x45efaf(0x1eb,'kQ%8')],_0x795330=_0x3a8410[_0x45efaf(0x1d5,'DYwv')]||[],_0x361b7e=[];for(const _0x393872 of _0x795330){let _0x296b75='';const _0x925d77=_0x393872[_0x45efaf(0x1b9,'(Squ')],_0x250cb2=_0x393872[_0x45efaf(0x1c2,'J0e6')],_0xbbb2cb=_0x393872[_0x45efaf(0x2a6,'kQ%8')],_0x4d272f=_0x393872[_0x45efaf(0x28a,'Y6OR')],_0x33a981=_0x4d272f===0x5;switch(_0x250cb2){case 0x1:_0x296b75=_0x45efaf(0x291,'wB!Q');break;case 0x4:_0x296b75=_0x925d77+'京豆';break;case 0x6:_0x296b75=_0x925d77+_0x45efaf(0x21e,'7r*v');break;case 0x9:_0x296b75=''+_0x393872?.['interactPrizeSkuList'][0x0]?.['skuName'];break;case 0xa:_0x296b75=_0x925d77+'元E卡';break;case 0xe:_0x296b75=_0x925d77/0x64+_0x45efaf(0x26c,'rkBb');break;default:_0x296b75=_0x45efaf(0x1e8,'kHXK')+_0x250cb2+'）';}if(![0x1,0x6][_0x45efaf(0x201,'GLcd')](_0x250cb2)&&!_0x33a981)_0x1b306f=!![];_0x361b7e[_0x45efaf(0x254,'fDW@')](_0x296b75+'（共'+_0xbbb2cb+'份'+(_0x33a981?_0x45efaf(0x28f,'J0e6'):'')+'）');}_0x16d47d['push']({'days':_0x20cf83,'prize':_0x361b7e,'havePrize':_0x1b306f});}const _0x353b08=await common[_0x45efaf(0x230,'N$@U')]({'venderId':$[_0x45efaf(0x1ec,'(iYH')]});console[_0x45efaf(0x215,'J)8#')]((_0x353b08?_0x45efaf(0x2a0,'OpFC')+_0x353b08+'\x0a':'')+_0x45efaf(0x2bf,'@(VZ')+_0x5b7359+_0x45efaf(0x1df,'xibe')+_0x34702b),notify['appendContent']((_0x353b08?'\x0a【店铺名称】#'+_0x353b08:'')+_0x45efaf(0x207,'7r*v')+_0x5b7359+_0x45efaf(0x2a4,'J)8#')+_0x34702b);_0x16d47d['length']>0x0&&(console[_0x45efaf(0x1fe,'LOS*')](_0x16d47d[_0x45efaf(0x1af,'ZLZv')](_0x4c9513=>(_0x4c9513[_0x45efaf(0x1b3,'eor8')]===0x0?_0x45efaf(0x2ba,'DYwv'):'连续'+(_0x4c9513[_0x45efaf(0x1e0,'xjrx')]<0xa?'\x20':'')+_0x4c9513[_0x45efaf(0x2bc,'GLcd')]+'天')+'：'+_0x4c9513[_0x45efaf(0x27c,'WKpd')][_0x45efaf(0x2c3,'eor8')]('，'))[_0x45efaf(0x2c3,'eor8')]('\x0a')),notify['appendContent']('\x0a'+_0x16d47d[_0x45efaf(0x26a,'kQ%8')](_0xf17a6c=>'【'+(_0xf17a6c[_0x45efaf(0x2a7,'8f9L')]===0x0?_0x45efaf(0x2c7,'rkBb'):'连续'+(_0xf17a6c[_0x45efaf(0x1f8,'Rx37')]<0xa?'\x20':'')+_0xf17a6c[_0x45efaf(0x261,'f#0a')]+'天')+'】'+_0xf17a6c[_0x45efaf(0x2c0,'OpFC')][_0x45efaf(0x20a,'q!O(')]('，'))[_0x45efaf(0x265,'CFjR')]('\x0a')));console[_0x45efaf(0x1fa,'kF*X')](''),notify['appendContent']('\x0a\x0a'+activityUrl);const _0x3d726e=Date['now']();_0x2dd567&&_0x3d726e<_0x2dd567&&(console[_0x45efaf(0x2b0,'lic#')](_0x45efaf(0x2ac,'J)8#')+_0x5b7359+_0x45efaf(0x263,'4M1r')),_0x574cd2=![]);if(_0x3fcc6b&&_0x3d726e>_0x3fcc6b)console[_0x45efaf(0x218,'Dz9#')]('活动已于\x20'+_0x34702b+_0x45efaf(0x2be,'7r*v')),_0x574cd2=![];else _0x45a676===0x3&&(console[_0x45efaf(0x2b0,'lic#')](_0x45efaf(0x255,'kDUr')),_0x574cd2=![]);!_0x1b306f&&(_0x574cd2=![]);_0x16d47d[_0x45efaf(0x21b,'kjkJ')]>0x0&&($[_0x45efaf(0x1ff,'uZY2')]=_0x16d47d[0x0][_0x45efaf(0x1b3,'eor8')],$[_0x45efaf(0x1fb,'#)s%')]=_0x16d47d[_0x16d47d[_0x45efaf(0x290,'lEp2')]-0x1]['days']);if(!_0x574cd2)return;await common[_0x45efaf(0x28b,'Rx37')](accountThreads,cookiesArr,async(_0x328ba4,_0x1298ed)=>{const _0x1776f2=_0x45efaf;await concMain(_0x328ba4,_0x1298ed);if($[_0x1776f2(0x1e2,'Qiyj')])await $[_0x1776f2(0x1f6,'^f2M')]($[_0x1776f2(0x1e2,'Qiyj')]);});}async function concMain(_0x2e64e8,_0x461424){const _0x5ebe25=_0x3c48f8;if($[_0x5ebe25(0x1a8,'FCmb')])return{'runEnd':!![]};const _0x2d10fb=decodeURIComponent(common[_0x5ebe25(0x243,'(iYH')](_0x2e64e8,_0x5ebe25(0x286,'E6$L'))),_0x381b18=_0x5ebe25(0x2bd,'kF*X')+_0x461424+'】'+_0x2d10fb+'：',_0x24b1c1=notify[_0x5ebe25(0x224,'LOS*')](_0x461424,_0x2d10fb),_0x15737d=await common['getLoginStatus'](_0x2e64e8);if(!_0x15737d&&typeof _0x15737d==='boolean'){console['log'](_0x381b18+_0x5ebe25(0x29e,'kQ%8')),_0x24b1c1['fix'](_0x5ebe25(0x279,'Cpe#'));return;}const _0x23eca1=common['genUA'](_0x2d10fb),{jsToken:_0x3eac47}=await jsTk(_0x23eca1,_0x5ebe25(0x1c9,'4M1r'),{'bizId':_0x5ebe25(0x1d3,'[]%y'),'v':'3.2.1.0','qs':_0x5ebe25(0x2cb,'LOS*')+$[_0x5ebe25(0x1e4,'J)8#')]});if($[_0x5ebe25(0x274,'JFEw')])return{'runEnd':!![]};let _0x4ad218='',_0x151909=[],_0x35d0eb=![];await _0x5b0283('signCollectGift');if($[_0x5ebe25(0x1fc,'fDW@')])await $[_0x5ebe25(0x1f6,'^f2M')]($['waitTime']);if(_0x35d0eb&&signHotMaxRetryTimes>0x0){let _0x6faf02=0x0;while(_0x6faf02<signHotMaxRetryTimes){if($['runEnd'])return{'runEnd':!![]};await _0x5b0283(_0x5ebe25(0x1f9,'kQ%8'));if(!_0x35d0eb)break;if($['waitTime'])await $['wait']($['waitTime']);_0x6faf02++;}}if(_0x4ad218){await _0x5b0283('getSignRecord');const _0x2afff4=''+_0x4ad218+(_0x151909['length']>0x0?'（'+_0x151909['join']('，')+'）':'');console[_0x5ebe25(0x26b,'CFjR')](''+_0x381b18+_0x2afff4),_0x24b1c1[_0x5ebe25(0x234,'E6$L')](_0x2afff4[_0x5ebe25(0x25a,'kDUr')]('✅','')[_0x5ebe25(0x252,'4M1r')]('❌','')[_0x5ebe25(0x239,')LDx')]('🚫','')['trim']());}function _0x3acf36(_0x17de33,_0x2ffd0c){const _0x4583e9=_0x5ebe25;try{switch(_0x17de33){case'signCollectGift':if(_0x2ffd0c[_0x4583e9(0x1de,'2ESr')]===0xc8&&_0x2ffd0c['success']===!![]){const _0x39b25b=[];if(_0x2ffd0c[_0x4583e9(0x289,'K5x!')]&&_0x2ffd0c[_0x4583e9(0x214,'#)s%')][_0x4583e9(0x1cc,'6%XZ')]>0x0)for(const _0x3c2c69 of _0x2ffd0c[_0x4583e9(0x248,'E6$L')]){const _0x2515de=_0x3c2c69?.[_0x4583e9(0x284,'Dz9#')]||[];for(const _0xc7ebdc of _0x2515de){const _0x45f8ab=_0xc7ebdc?.[_0x4583e9(0x2b2,'kF*X')],_0x4667ee=_0xc7ebdc?.[_0x4583e9(0x1e1,'LOS*')];let _0x2133ea='';switch(_0x45f8ab){case 0x1:_0x2133ea='优惠券🗑️';break;case 0x4:_0x2133ea=_0x4667ee+'京豆🐶';break;case 0x6:_0x2133ea=_0x4667ee+_0x4583e9(0x1b5,'CFjR');break;case 0x9:_0x2133ea=(_0xc7ebdc?.[_0x4583e9(0x1dd,'OpFC')][0x0]?.[_0x4583e9(0x251,'4M1r')]||'未知')+'🎁';break;case 0xa:_0x2133ea=_0x4667ee+_0x4583e9(0x1c3,'q!O(');break;case 0xe:_0x2133ea=_0x4667ee/0x64+_0x4583e9(0x20b,'2ESr');break;default:_0x2133ea=_0x4583e9(0x2b3,'J)8#')+_0x45f8ab+'）';}_0x39b25b[_0x4583e9(0x1f2,'Y90Z')](_0x2133ea);}}_0x4ad218=_0x4583e9(0x244,'JFEw'),_0x39b25b[_0x4583e9(0x20f,'Y90Z')]>0x0&&(_0x151909=_0x39b25b),_0x35d0eb=![];}else{if(_0x2ffd0c[_0x4583e9(0x203,'#)s%')]!==0xc8){const _0x26c337=signStatusMessages[_0x2ffd0c[_0x4583e9(0x240,'eor8')]]||_0x2ffd0c[_0x4583e9(0x1bb,'J0e6')]+_0x4583e9(0x1ac,'GLcd');[0x1843da61,0x1843da62,0x192]['includes'](_0x2ffd0c[_0x4583e9(0x20d,'lic#')])&&($['runEnd']=!![]),_0x151909=[_0x26c337],_0x4ad218='❌\x20签到失败',(_0x2ffd0c[_0x4583e9(0x1f5,'OpFC')]==='-1'||_0x2ffd0c[_0x4583e9(0x299,'ZLZv')]===-0x1)&&(_0x35d0eb=!![]);}else{if(_0x2ffd0c[_0x4583e9(0x294,'(Squ')]){_0x4ad218=_0x4583e9(0x295,'rkBb'),_0x151909=[_0x2ffd0c[_0x4583e9(0x1e9,'q!O(')]];if(!signStatusMessages[_0x2ffd0c[_0x4583e9(0x20d,'lic#')]])_0x35d0eb=!![];}else _0x4ad218='❌\x20签到失败\x20-\x20'+JSON[_0x4583e9(0x1ae,')LDx')](_0x2ffd0c);}}break;case _0x4583e9(0x216,'6%XZ'):if(_0x2ffd0c[_0x4583e9(0x277,'4M1r')]===0xc8&&_0x2ffd0c['success']===!![]&&_0x2ffd0c['data']){const _0x12340a=_0x2ffd0c[_0x4583e9(0x2c6,'LOS*')]['days'];_0x12340a>0x0&&$[_0x4583e9(0x25c,'kDUr')]&&(_0x151909[_0x4583e9(0x2ad,'(iYH')]('连签'+_0x12340a+'天'),$['maxLevel']&&_0x12340a>=$['maxLevel']&&_0x151909[_0x4583e9(0x2c2,'4M1r')]('已达活动上限'));}else{if(_0x2ffd0c[_0x4583e9(0x27f,'@(VZ')]){}else console[_0x4583e9(0x1bd,'Cpe#')]('❓'+_0x17de33+'\x20'+JSON[_0x4583e9(0x257,'E6$L')](_0x2ffd0c));}break;}}catch(_0x49252d){console[_0x4583e9(0x1b2,'wedR')]('❌\x20未能正确处理\x20'+_0x17de33+_0x4583e9(0x1f7,'lic#')+(_0x49252d['message']||_0x49252d));}}async function _0x5b0283(_0x3380e2){const _0x31e7f8=_0x5ebe25;let _0x1e6b4f='',_0x1b87f6=null,_0x4fa211=null,_0x56cd06=_0x31e7f8(0x24b,'Rx37'),_0x5b2eb4={},_0x3ab486={};switch(_0x3380e2){case _0x31e7f8(0x29a,'E6$L'):_0x3ab486={'appId':_0x31e7f8(0x1ba,'K5x!'),'functionId':_0x31e7f8(0x285,'JFEw'),'appid':_0x31e7f8(0x264,'(Squ'),'body':{'token':$[_0x31e7f8(0x1e7,'kjkJ')],'venderId':parseInt($['venderId'])||'','activityId':parseInt($['activityId'])||'','type':0x38,'actionType':0x7},'version':'4.7','ua':_0x23eca1},_0x5b2eb4=await H5st['getH5st'](_0x3ab486),_0x1e6b4f=_0x31e7f8(0x262,'uZY2'),_0x4fa211=Object[_0x31e7f8(0x1f3,'wedR')]({},_0x5b2eb4[_0x31e7f8(0x24d,'xjrx')],{'jsonp':_0x31e7f8(0x21a,'(iYH')});break;case _0x31e7f8(0x1bf,'^f2M'):_0x1e6b4f=_0x31e7f8(0x225,'q!O('),_0x4fa211={'appid':_0x31e7f8(0x260,'lic#'),'functionId':_0x31e7f8(0x1ea,'f#0a'),'body':JSON[_0x31e7f8(0x278,'Cpe#')]({'token':$['token'],'venderId':parseInt($['venderId'])||'','activityId':parseInt($[_0x31e7f8(0x1c7,'q!O(')])||'','type':0x38}),'jsonp':_0x31e7f8(0x211,'f#0a')};break;}const _0x34fe50={'t':Math['floor'](Date[_0x31e7f8(0x1a9,'kF*X')]()/0x3e8)+'000','loginType':'2','x-api-eid-token':_0x3eac47};_0x1b87f6&&Object[_0x31e7f8(0x287,'lic#')](_0x1b87f6,_0x34fe50);_0x4fa211&&Object[_0x31e7f8(0x249,')LDx')](_0x4fa211,_0x34fe50);const _0x201bac={'url':_0x1e6b4f,'method':_0x56cd06,'headers':{'Accept':_0x31e7f8(0x2a8,'J)8#'),'Accept-Encoding':_0x31e7f8(0x25d,'K5x!'),'Accept-Language':_0x31e7f8(0x2c8,'Qiyj'),'Connection':_0x31e7f8(0x238,'^f2M'),'Content-Type':'text/plain','Host':_0x31e7f8(0x1c6,'Qiyj'),'Referer':activityUrl,'Sec-Fetch-Dest':'script','Sec-Fetch-Mode':_0x31e7f8(0x1b1,'eor8'),'Sec-Fetch-Site':_0x31e7f8(0x1e6,'Cpe#'),'User-Agent':_0x23eca1,'Cookie':_0x2e64e8},'params':_0x4fa211,'data':_0x1b87f6,'timeout':0x7530};_0x56cd06==='GET'&&(delete _0x201bac[_0x31e7f8(0x231,'Rx37')],delete _0x201bac[_0x31e7f8(0x245,'DYwv')][_0x31e7f8(0x242,'eor8')]);const _0x6e0cac=0x3;let _0x3791ed=0x0,_0x37ef2a=null,_0x4704bf=![];while(_0x3791ed<_0x6e0cac){const _0x1706dc=await common[_0x31e7f8(0x202,'E6$L')](_0x201bac);if(!_0x1706dc[_0x31e7f8(0x233,'J)8#')]){_0x37ef2a=_0x3380e2+_0x31e7f8(0x23e,'2ESr')+_0x1706dc['error']+_0x31e7f8(0x1d6,'kHXK'),_0x3791ed++;continue;}if(!_0x1706dc[_0x31e7f8(0x272,'eor8')]){_0x37ef2a=_0x3380e2+_0x31e7f8(0x1d7,'f#0a'),_0x3791ed++;continue;}_0x3acf36(_0x3380e2,_0x1706dc[_0x31e7f8(0x29d,'Y90Z')]),_0x4704bf=![];break;}_0x3791ed>=_0x6e0cac&&(console[_0x31e7f8(0x1dc,'4M1r')](_0x37ef2a),_0x4704bf&&($[_0x31e7f8(0x2ca,'kjkJ')]=!![]));}}async function handleResponse(_0xbe3bf1,_0x5d8df9){const _0x500ebf=_0x3c48f8;try{switch(_0xbe3bf1){case'getActivityInfo':if(_0x5d8df9[_0x500ebf(0x1b4,'JFEw')]===0xc8&&_0x5d8df9[_0x500ebf(0x258,'lic#')]===!![]&&_0x5d8df9[_0x500ebf(0x236,'DYwv')])$[_0x500ebf(0x22e,'4M1r')]=_0x5d8df9[_0x500ebf(0x246,'7r*v')];else _0x5d8df9[_0x500ebf(0x2c9,'6%XZ')]?(console['log'](_0x500ebf(0x217,'#)s%')+_0x5d8df9[_0x500ebf(0x27f,'@(VZ')]),$[_0x500ebf(0x1be,'kDUr')]=!![]):(console[_0x500ebf(0x235,'E6$L')]('❓'+_0xbe3bf1+'\x20'+JSON[_0x500ebf(0x213,'7r*v')](_0x5d8df9)),$['invalidAct']=!![]);break;}}catch(_0x2dcfe2){console['log'](_0x500ebf(0x283,'OpFC')+_0xbe3bf1+_0x500ebf(0x27b,'^f2M')+(_0x2dcfe2[_0x500ebf(0x250,'6%XZ')]||_0x2dcfe2));}}async function sendRequest(_0x15a9f2){const _0x1126e6=_0x3c48f8;if($[_0x1126e6(0x22d,'fDW@')])return;let _0x2cc757='',_0x3ae06d=null,_0x59b109=null,_0x28a916=_0x1126e6(0x1bc,'LOS*'),_0x597821={},_0x552eda={};switch(_0x15a9f2){case'getActivityInfo':_0x552eda={'appId':_0x1126e6(0x1d8,'8f9L'),'functionId':_0x1126e6(0x2c4,'kDUr'),'appid':_0x1126e6(0x23c,'K5x!'),'body':{'token':$[_0x1126e6(0x24c,'uZY2')],'venderId':''},'version':_0x1126e6(0x29c,'Rx37'),'ua':$['UA']},_0x597821=await H5st['getH5st'](_0x552eda),_0x2cc757=_0x1126e6(0x24f,'OpFC'),_0x59b109=Object[_0x1126e6(0x292,'JFEw')]({},_0x597821['paramsData'],{'jsonp':_0x1126e6(0x25f,'eor8')});break;default:console[_0x1126e6(0x2b9,'@(VZ')](_0x1126e6(0x1d2,'[]%y')+_0x15a9f2);return;}const _0x3734d6={'t':Math[_0x1126e6(0x1ad,'DYwv')](Date[_0x1126e6(0x28e,'Y6OR')]()/0x3e8)+_0x1126e6(0x1b6,'xibe'),'loginType':'2','x-api-eid-token':$[_0x1126e6(0x2af,'kQ%8')]};_0x3ae06d&&Object[_0x1126e6(0x22b,'f#0a')](_0x3ae06d,_0x3734d6);_0x59b109&&Object[_0x1126e6(0x23d,'WKpd')](_0x59b109,_0x3734d6);const _0x5b0e9b={'url':_0x2cc757,'method':_0x28a916,'headers':{'Accept':_0x1126e6(0x219,'Y6OR'),'Accept-Encoding':'gzip,\x20deflate,\x20br','Accept-Language':_0x1126e6(0x2a9,')LDx'),'Connection':_0x1126e6(0x2a1,'DYwv'),'Content-Type':_0x1126e6(0x2aa,'E6$L'),'Host':_0x1126e6(0x20c,'b[c%'),'Referer':activityUrl,'Sec-Fetch-Dest':_0x1126e6(0x28c,'Cpe#'),'Sec-Fetch-Mode':_0x1126e6(0x1ca,'J)8#'),'Sec-Fetch-Site':_0x1126e6(0x223,'wedR'),'User-Agent':$['UA']},'params':_0x59b109,'data':_0x3ae06d,'timeout':0x7530,'httpsTlsOptions':common['useAppTls']()};_0x28a916==='GET'&&(delete _0x5b0e9b[_0x1126e6(0x2c5,'Cpe#')],delete _0x5b0e9b['headers'][_0x1126e6(0x1ed,')LDx')]);const _0x1cb75b=0x1;let _0x3a1da6=0x0,_0x2d104d=null,_0x457564=null;while(_0x3a1da6<_0x1cb75b){_0x3a1da6>0x0&&await $[_0x1126e6(0x210,'kF*X')](0x7d0);const _0x428061=await common[_0x1126e6(0x2c1,'Qiyj')](_0x5b0e9b);if(!_0x428061[_0x1126e6(0x2b7,'[]%y')]){_0x457564=_0x428061['status'],_0x2d104d='🚫\x20'+_0x15a9f2+_0x1126e6(0x241,'JFEw')+_0x428061['error'],_0x3a1da6++;continue;}if(!_0x428061[_0x1126e6(0x2bb,'kHXK')]){_0x2d104d=_0x1126e6(0x22c,'6%XZ')+_0x15a9f2+_0x1126e6(0x1e5,'wedR'),_0x3a1da6++;continue;}await handleResponse(_0x15a9f2,_0x428061['data']),ipBlack=![];break;}_0x3a1da6>=_0x1cb75b&&($['errMsg']=_0x2d104d,_0x457564!==0x193&&console[_0x1126e6(0x2ae,'Y90Z')](_0x2d104d));}
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
