/*
超级抓抓机

cron:15 3,15 * * *

*/

const $ = new Env('超级抓抓机')
var iｉl='jsjiami.com.v7';const iIli1I=iii1II;(function(lliii1,Iiii1,lIIili,IiiIil,IiiIii,IIlll,liliI){return lliii1=lliii1>>0x3,IIlll='hs',liliI='hs',function(ll1lI,l1iii,IIlli,l1iil,ii1l1){const illIll=iii1II;l1iil='tfi',IIlll=l1iil+IIlll,ii1l1='up',liliI+=ii1l1,IIlll=IIlli(IIlll),liliI=IIlli(liliI),IIlli=0x0;const lIIill=ll1lI();while(!![]&&--IiiIil+l1iii){try{l1iil=-parseInt(illIll(0x19f,'D2h('))/0x1+-parseInt(illIll(0x233,'grd@'))/0x2+parseInt(illIll(0x14b,'VVsp'))/0x3*(parseInt(illIll(0x172,'PX7r'))/0x4)+parseInt(illIll(0x169,'t]*Z'))/0x5*(parseInt(illIll(0x1fe,'PFst'))/0x6)+-parseInt(illIll(0x281,'PFst'))/0x7+-parseInt(illIll(0x1c0,'MYUm'))/0x8+parseInt(illIll(0x182,'5znp'))/0x9;}catch(I11iIi){l1iil=IIlli;}finally{ii1l1=lIIill[IIlll]();if(lliii1<=IiiIil)IIlli?IiiIii?l1iil=ii1l1:IiiIii=ii1l1:IIlli=ii1l1;else{if(IIlli==IiiIii['replace'](/[EQfwkSbIhqUADJKTWVNXg=]/g,'')){if(l1iil===l1iii){lIIill['un'+IIlll](ii1l1);break;}lIIill[liliI](ii1l1);}}}}}(lIIili,Iiii1,function(I1ilII,I11iIl,l1l11l,IilIil,l1iIi,l1l11i,l1iIl){return I11iIl='\x73\x70\x6c\x69\x74',I1ilII=arguments[0x0],I1ilII=I1ilII[I11iIl](''),l1l11l=`\x72\x65\x76\x65\x72\x73\x65`,I1ilII=I1ilII[l1l11l]('\x76'),IilIil=`\x6a\x6f\x69\x6e`,(0x16b1a6,I1ilII[IilIil](''));});}(0x648,0x88727,Iii11l,0xcb),Iii11l)&&(iｉl=0xeb2);function iii1II(_0x1f1dbe,_0x2d7c23){const _0x1916ae=Iii11l();return iii1II=function(_0x4743bf,_0x36e4b9){_0x4743bf=_0x4743bf-0x148;let _0x1a6f3b=_0x1916ae[_0x4743bf];if(iii1II['HAyHNT']===undefined){var _0x27dd9b=function(_0x115749){const _0x4b0773='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x31f506='',_0x32a648='';for(let _0x5f34e9=0x0,_0x2170f3,_0x305d9a,_0x19ad54=0x0;_0x305d9a=_0x115749['charAt'](_0x19ad54++);~_0x305d9a&&(_0x2170f3=_0x5f34e9%0x4?_0x2170f3*0x40+_0x305d9a:_0x305d9a,_0x5f34e9++%0x4)?_0x31f506+=String['fromCharCode'](0xff&_0x2170f3>>(-0x2*_0x5f34e9&0x6)):0x0){_0x305d9a=_0x4b0773['indexOf'](_0x305d9a);}for(let _0x590e24=0x0,_0x510761=_0x31f506['length'];_0x590e24<_0x510761;_0x590e24++){_0x32a648+='%'+('00'+_0x31f506['charCodeAt'](_0x590e24)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x32a648);};const _0x49fe17=function(_0x46c759,_0x49041c){let _0x374b24=[],_0x10ec03=0x0,_0x2c3be6,_0x2fc498='';_0x46c759=_0x27dd9b(_0x46c759);let _0x155eb1;for(_0x155eb1=0x0;_0x155eb1<0x100;_0x155eb1++){_0x374b24[_0x155eb1]=_0x155eb1;}for(_0x155eb1=0x0;_0x155eb1<0x100;_0x155eb1++){_0x10ec03=(_0x10ec03+_0x374b24[_0x155eb1]+_0x49041c['charCodeAt'](_0x155eb1%_0x49041c['length']))%0x100,_0x2c3be6=_0x374b24[_0x155eb1],_0x374b24[_0x155eb1]=_0x374b24[_0x10ec03],_0x374b24[_0x10ec03]=_0x2c3be6;}_0x155eb1=0x0,_0x10ec03=0x0;for(let _0x2abb53=0x0;_0x2abb53<_0x46c759['length'];_0x2abb53++){_0x155eb1=(_0x155eb1+0x1)%0x100,_0x10ec03=(_0x10ec03+_0x374b24[_0x155eb1])%0x100,_0x2c3be6=_0x374b24[_0x155eb1],_0x374b24[_0x155eb1]=_0x374b24[_0x10ec03],_0x374b24[_0x10ec03]=_0x2c3be6,_0x2fc498+=String['fromCharCode'](_0x46c759['charCodeAt'](_0x2abb53)^_0x374b24[(_0x374b24[_0x155eb1]+_0x374b24[_0x10ec03])%0x100]);}return _0x2fc498;};iii1II['TkHLTD']=_0x49fe17,_0x1f1dbe=arguments,iii1II['HAyHNT']=!![];}const _0x1dc530=_0x1916ae[0x0],_0x41267a=_0x4743bf+_0x1dc530,_0x4f5798=_0x1f1dbe[_0x41267a];return!_0x4f5798?(iii1II['wRqYvd']===undefined&&(iii1II['wRqYvd']=!![]),_0x1a6f3b=iii1II['TkHLTD'](_0x1a6f3b,_0x36e4b9),_0x1f1dbe[_0x41267a]=_0x1a6f3b):_0x1a6f3b=_0x4f5798,_0x1a6f3b;},iii1II(_0x1f1dbe,_0x2d7c23);}const jdCookie=require(iIli1I(0x177,'#WdA')),notify=require('./utils/Rebels_sendJDNotify'),common=require(iIli1I(0x218,'%(f#')),{H5st}=require(iIli1I(0x14e,'ZUj)')),isNotify=![];let waitTimes=0x3e8,cookie='';$['ShareCodes']=[],$[iIli1I(0x193,'PFst')]=[];const cookiesArr=Object[iIli1I(0x198,'Q1!X')](jdCookie)[iIli1I(0x179,'o6DK')](i1IIl=>jdCookie[i1IIl])['filter'](I1lll1=>I1lll1);!cookiesArr[0x0]&&($[iIli1I(0x1bd,'jCL%')]($[iIli1I(0x1b2,'rFf1')],iIli1I(0x1a5,'[Xy$')),process['exit'](0x1));!(async()=>{const Iiil1=iIli1I,i1IIi={'yAlxf':function(IIII1I,Iii111){return IIII1I<Iii111;},'DEQNV':function(l1l1II,Iil1I1){return l1l1II+Iil1I1;},'EUgct':function(Ii1iII,l1i11I){return Ii1iII(l1i11I);},'BllmA':Iiil1(0x1f9,'^lkb'),'FEfPU':function(II11II){return II11II();},'ndDoa':Iiil1(0x1ab,'[Xy$'),'IlnkJ':function(Ii1iI1,lilIli,Iliili){return Ii1iI1(lilIli,Iliili);},'NorqY':function(Iliill,IIII11){return Iliill+IIII11;},'ZeoPO':function(i1illi,i1illl){return i1illi*i1illl;}};notify[Iiil1(0x22a,'grd@')]({'title':$[Iiil1(0x1b3,'#$FU')]});for(let I1llil=0x0;i1IIi[Iiil1(0x255,'2X5w')](I1llil,cookiesArr[Iiil1(0x274,'o6DK')]);I1llil++){$['index']=i1IIi[Iiil1(0x1cd,'D2h(')](I1llil,0x1),cookie=cookiesArr[I1llil],common[Iiil1(0x16e,'o6DK')](cookie),$['UserName']=i1IIi['EUgct'](decodeURIComponent,common[Iiil1(0x265,'t]*Z')](cookie,i1IIi[Iiil1(0x20e,'5znp')])),$['UA']=common['genUA']($['UserName']),$[Iiil1(0x23b,'#WdA')]=notify[Iiil1(0x17b,'o6DK')]($['index'],$[Iiil1(0x1b7,'[Xy$')]),$[Iiil1(0x15d,'sHL[')]='',$[Iiil1(0x24a,'oA&)')]=0x0,console[Iiil1(0x151,'uGSZ')](Iiil1(0x152,'Jfk9')+$['index']+'】'+($[Iiil1(0x19a,'uGSZ')]||$[Iiil1(0x1e8,'nqad')])+Iiil1(0x178,'!!6x')),await i1IIi['FEfPU'](Main),common['unsetCookie']();if($['runEnd'])break;}console[Iiil1(0x1c6,'Q1!X')](i1IIi[Iiil1(0x1fb,'rTOP')]);for(let I1llii=0x0;I1llii<cookiesArr[Iiil1(0x164,'t]*Z')];I1llii++){$[Iiil1(0x228,'7Vdq')]=I1llii+0x1,cookie=cookiesArr[I1llii],common[Iiil1(0x1ec,'7Vdq')](cookie),$[Iiil1(0x21d,'WDur')]=i1IIi[Iiil1(0x1e3,'grd@')](decodeURIComponent,common[Iiil1(0x17c,'b0[7')](cookie,i1IIi['BllmA'])),$['UA']=common[Iiil1(0x1ed,'rTOP')]($[Iiil1(0x1d3,'U6@S')]),$['message']=notify[Iiil1(0x22b,'grd@')]($[Iiil1(0x150,'t]*Z')],$[Iiil1(0x23e,'AFV4')]),$[Iiil1(0x20a,'YqbT')]='',$[Iiil1(0x1e1,'Rjq&')]=0x0,console[Iiil1(0x1ad,'N0Os')]('\x0a******开始【京东账号'+$[Iiil1(0x196,'AFV4')]+'】'+($['nickName']||$[Iiil1(0x219,'TAE8')])+Iiil1(0x25d,'2X5w')),await Help(),common[Iiil1(0x221,'ctLd')]();if($['runEnd'])break;await $[Iiil1(0x197,'hQyD')](i1IIi['IlnkJ'](parseInt,i1IIi[Iiil1(0x22f,'YqbT')](i1IIi['ZeoPO'](waitTimes,0x1),0x5dc),0xa));}isNotify&&notify['getMessage']()&&(notify[Iiil1(0x243,'S7c3')]('\x0a'),await notify['push']());})()['catch'](lilIll=>$[iIli1I(0x1e9,'uGSZ')](lilIll))['finally'](()=>$['done']());function Iii11l(){const lIII1i=(function(){return[...[iｉl,'DKjNskjbVhiWNAafJXmUiq.IEcoggUmwh.Tv7QkS==','W4rRW5iCsSkd','CCkXEeldGG','smoPWR3cQa','W4juWRejnGlcImkPWQ53CCkW','W7SFyCkas8o0W69iWQuu','W4yfmCkcWPukFCk4','bmooW41lW6TyA8kWEmkYu8oZfSoWhSkw','mCkxW7FcSX7cG10k','W5eAvCkQka','emo8W7i','WOiCnhvkiqZLVQlLPyhJGPBKU4pKUOVOTylLJ6q','WP16eCkOWOa','W43cSSkBWOm','iv9DnI9FCa','lLvegZDpBmoCuWRcUCoi','5Q2u6lws5yYC6BUC5y+J776b6lAc6l+Nxa','rmkuWRfrp8oMWOJdOSoFlvDXW5fcqCoHaKFdOCkyk8kUWO/cS1xdKSkbWRK','WPz9WQK','f187WQVdHW','i0NdM8kOhW','uuS5W7O','W4TeWQxcQLpcN8o/ta','u3C2WPi','swL9h2BdMXO','AmkbuNNdLmkpW6zzmsGxl1ZcKaFcJ3FdISoRlq','jvpdSCkRW4S','WR9eWQhdVG','kfGG','W5qrx8kOjmkD','W4WSy8kGpW','Dgy4WPOM','CCkxgw/dGSksW6LEpXKzieFcIZVcMvJcISoRk8oeW5u8p8kZtSkBW5S','WOyKWPtcLYjTi8oRW7xcTCoQwSkH','WOLbw8kRpmkaBSoK','WRFcLx5GWPy','d1tdJmktda','WPVdTSk/W7vWWOldOq','qmkyW7G','x8oTWR3cISoHWRFcRZyg','WPelW6fjFetcI8keWRrQvSk0W74DqJLcWR8D','WPKaW6DQqa','W6r1W6xdLLe','FWCoWPtdHbSeWO0','WOlcHgvRWR3cPCkPWPRdJZBdIJGObq','WQ0lW6zYBW','WPJdS8kvW75R','s8kKBCoFW5pdJuuaW70','WRLFF8kqBCoPW7LnWRKC','gL7dGsC+WQD7','qCoPWRK','W5VcOmkbWP5VW4vaWQVcG1tcVSovWPDc','t8o6WQZcQmo6WR0','WRT9D8kOcCoioCo0W78vpmoXt8ot','W47dGJG','WPRdJG/dKSofWOeGlWTq','sSkCvNNdImkfW6DjmsK','WPaeW7zA','zCovzeNdJdKZW5jtWR0DW5xcR8oAkgLHgGJcJq','ESkOeI7dVCkJe8kkt8oMovXc','WOfOiWBcNYq','rgSIW79+W5uFWOmhW6K','W5VcOmkbWP5VW4vaWQVcG1tcVSofWOPcW7PAW4DYW7FcKq','lSoXra','W6anW5O','cSk8DCk5WOVdVmkfWR4tWOBcJfD/WRm','CvaKeSkG','mCkDW5e','W6L8W4xdLLK','mCoda8oIW5W','CLep','W6XxAJ4','W4LGW4Kbsa','W5X9W4e','W5qBvG','W4JcPSkCWRjMW48','vhL7gfhdJqrVvmoIvsDWW6ZcRW','fgiSWQJdRG','W4/dIcZcUmkeW77dGW','W4fGW5GErG','mvTacG','WP3dHaldLq','WRjrWRddSSooWPm','eSo6W7BcPSoXWR02lq','W7VdJWtcMSoyWQZcLG','WOb/Aa/cUrtdNCkhWRtcRvBdMHBdJmoby8kRjJK+Cmo0v8oDpZrAya','W6ddMuJcVCoyWPZcKSkZWRXCuSottSowWQVcNZbvW7hdNSooWOPzCZHKWONdNSoExenK','8kIzHCkw','kSobbJpcNCo0W69OnH4Ejq','5Ogq5zAN6i2h5B6C77+d','WPTHWR3dUIWTWO3dPfmuwXNdI8oV','W4Gvq8kUpCkgsmoMqSoP','WPBcGvDTWQ4','WPldGa/dHW','44g65OYT56A744or6k6E5yEz6i+/5yYlW7PGW4VdH1/cJq','W6xdGYhcTSoBWQW','FZbwwKn9WQ4','vZ/cHa','W706B8keEG','BhmZWPyipSoeFN46W6JcLG','ymo35B6b5Asl5yES6yg55lUA55IL5yIq5yQuWORcGHG','W4XzWQpcRftcMG','WO/cMhe','WOmeW6Tp','C0CgbSkhBa'],...(function(){return[...['s8ksW6T9zCobWP0','WPTHWR3dUIWTWO3dPfmuwrhdLCo+','WP3dTSkHW4i','FIrpEq','4P+2W7pOH6JMN5VOV5JOO6FPGARLI77KUAVPLlNORixcPG','WRzMWOZdImon','wbFdHwL7W5Kqu0NcSwtdTSoHWOJdPSk/WOxdHX4XWQ1qW4ruWQmHW4tdKZFdVSoApW','p8koW6tcSIFdScxcUa','F3mUWOm','Emk/W45wka','uvtcLW','W5pMR4pLPlyH5QYZ5OUI5AE25PYx5lYp772E5y6s5OMq5AsH','WPBdSmkQW4HH','W6xdIqe','WOPZkqFcSYhdKG','te7cLxNcOg3dICkEW5Svq8kUW5/cPXzjfCohySk1','bZTGWQWNWP5RWQW6W6ilWPLl','aKNdK8kzu8kVWPNcRhJcNCkxzW','pfqPWQJdOdOF','5BA05A625OI5','56sy5yI25ysk5O6e','Fe0feCkFyCo+WObTFcDvWQbl','WPRdJHW','r8ksW58','W5axh8kRp8kHBCo0xColWPShWPn+sSoZzCkrWOBcLtWJW54nkSkIWPi1','W4RdMsVcU8kwWQpcICkntCoanXddVLtdUwTmj1yuW6KQzaPJgmoKt8kEbCkdWR9kW6bwWQDRWPZcG3C3rW7dG8oIdG','W5pNM6lLIzlMNj3VViG','c8k0W4RcMIS','WRTccCkyW4pdPmo5WPRdVmoMt8oqW6hdLGCyW47cIb3dGmohjWBdVbtcIZK','xCkXzKxdUW','y8obAe8','sIxcHH7cTSoQCYBcPNiZW5ddGKNdGu7cJSkdwGS','W4RdId7cR8kaW6VdLq','W5pcVCkwWPjWW6rl','W6G6sv1tdCopra','pSk8y8kIWQldS8kfWR4','6lAU5y+b5PE+5Psx','FftcNulcSG','cUISLUAZUUwtSUw4LHq','5Oox5zwp6i2f5B2G77Ys','yeibW71R','wM81W7PbW4m2WO0fW605WQDGaMS','tx13ca','ALnnka','W49RW4GZc8kyqG','WPFdKGJdJ8ohWP00jbbjWPf7W7ZdPttdHfKfsSkg','WQTPAhvGo8otAxaMsmkegW','WQldGKhcIHpcHmomW6VdHJXauv4xWRLGW73dS8oKeq','Dq8yrIOEy8o4xYdcTmon','WQLaWQhdRCo+WQm5yKJdPa','WQtdLK3cJa','xKC9WOe4','sCoWWR0','xqFcJa','WPJdSSkPW5C0WPddPMmYWRO','W4v9W5S','emovmCo1W6hcVCounG','emo8W7lcImonWQ4','W61vWQpdImoXWP8ODu7dNYCVnSkHxg3cQYrDFva5ASkdW6FdQmkI','ctpdGW','BeCCiSkCA8oHWObN','WRresCkPW60','W7TcBdyoBe/dHmoZ','WRzwWRi','WOzAumkJiW','bmkhfmkKqL1oiW','4P6FaEACJEECMEITM+AZSSk4','W4BdJcVcQG','WPRcM27dVSovWQJcKmoMzSoHkeRdQG','wN03WQSN','DCkCuSosW7W','W6bvmdSpx0FdKCoHW4uaW7SlytyyWPpcGCo4oSkOnwRdLGRdTmkC','WQL6WQ/dOs4aWO/dPvGt','W5ldMqdcU8kmW7C','WQ5TDMbwkSostge7rSkd','WR1fy8ktW40','WPWpW5vQCG','WOxdLrRdKSovWOa','cY8OsJFcNvfftmoFxJbS','nLTBh3DFqmoCsqu','WRvSzSkgl8od','WR7dHbFdLG','D0fgbCkCumoRWPPPuq5vWQ5Ev8obW4bDWPBcN0nPWP4yWOdcJai','wrRcIgfHW6KuuW','WR93z8ko','AeOWlCkd','cuNdMSkz','W4DSW4Ouva','smkwW6Tu','W7ZdKXlcTCos','ESojyLddUXeWW4m','vCkPxSofW47dJ1Gv','pCoKpSo1W60','E8ocD1tdNW','amoYt3BcJa','W7NOR7VMSz3LPkxOTlD/4PY8dq','umkNW7TYW40','hK/dISkqgW','hmkUB8kK','z8ouC1ldMXC0W4bp','zUIVJEAXQ+wLJ+I0VWZINPJcNEAxNEwsQEw5IoAxLoAoIa','rSkeW5zyW7zC','WPjEktRcTW','WO00WQD1W58Ri0ddGKNdRcb/ia9nEdOSBmkcb8kuWQpdVmoEDSkI','WP49W5pdLhi5zCkPW43cLCo8ASkbzmo0smouW5ldQNpdHaFdLG','AeJcLxNcL0xdISkp'],...(function(){return['WR3dKKhcNdJcQmopW7ddLsTIxu4BWRW','WPJcOSoKt8olW77dKmoxwmk7ex7dKG','W4WDrCkJnq','ffFdH8k4W44jWQu0','WPHKCSkOW6e','wqdcJMbDW6K','jKhdLSkgW68pWQe/WQvUWO0GlGm','tCk+BmotW4NdQumjW69nAa','x8oJWQdcUCoCWQ3cQG','ztFcUfHm','WOb6W6pdScu','W4xdVSk1','FMOU','iCohimoM','DKWmbmkl','WQXsz8kmeG','Eh00WOqLla','Ega/WOm4lG','W5lcSSkbWQvHW5Hg','swXYfwddJq','WP9QWRO','wSopC0RdRa','W74eCmkzz8oI','5yUm5yUh5OQ05yUKbEkEQE+4Go+/MUIpOEw+S++9SG','WORcMxvUWQ/cR8kHWOW','lYbVW5z1F8oSCv4kW5pcLa','k8ksW6ZcIqi','wepcHa','dZhcHqRcRG','ys96Ev0','cdNdLWHeW5PQ','WOxdLbNdPCopWPC8','vMVcGflcUa','W7OvzSkht8oHW7m','W43dSmkMga','EmopzG','W719W5KjCmkkw8kF','WPuvW7jxBfFcNSkXWQ52uCo8W7OdsdKAW5ynW4xcJ0z2W4e9W4lcJSk+WPhdRCkKCCk2','xCk/CmkhWPRdUSkqWQeEWRRcUfnxWR/cSmohW6Gxu0buWR4elsZcKCkp','W7ucx8kEfq','WQfAmJpcJG','W60sW41IwNGbwK10e8kpW5G','WOHnWRtdRCoIWRq/A0JdPa','cc/dGW','WRZdLvlcLWa','CmoIrfddTW','WO10WRVdU8o+','W7iiyCkgt8osW69wWRu','WOvvl8kuWOaRDSk2xmkh','DZ9lBam8WQ1pW7JdNZRdMSo3y8oUuY8','8yEPNdy','BhmZWPy','kCojmW','WObOmHVcPxRcK8oBWR7cNLdcMbtcKmoHDmoJAZa6mCo+smoCdJTDjwiJitafW5zGemkMWPxcJ8kAw8kGWO3dOCkagHDtv03dVSoNWRxdUCkHWRecWOxdUY0/aYVdNxxcVJZcV8kaChjWb8oH','W5jTWQe','v295','WPPBFx9b','CdNcStxcHW','at3dKbO','W4DdWQO5W5m','W5D3W5ldQc4MyG','5BAo57MC5yop','W5DSWQuTW4ayeLG','WPjosSk1W4C','xgL+W7P8W7i6WPeyW4SvWQrRfvldOmk+WRdcI3NdJ3NcPKRdImkRWO5SWQzrWRxdPq','C18zW6Dg','WPGkW6u','WPqOW6XRWP9wFq','W5/cQ8kg','4P20W7dMNlxOGyVMR57NO4tLPkJNKAdcPa','W4ivW7rSC1ZcH8k/WQrrrCk2W5uzCcrhWQzmW4/cVfumW5mzW6BcNG','W7nmWR4TW4i','WQbvvCkvW4ldL8oXWO/dRG','D8opzv4','WPuhW4HUCa','W58rrCkmp8kAz8oUu8oEWPuhWOLP','W6rzEq','W43dPSkbgmk0','W6GQnSoFx8ktcmoZW44AcCoX','5OIF5OUX5P6h','5BY95AEW5yMz5yQqWOi','c8oyv0pcLq','dcJdGrzSW5K','5Q6/6lsd5yYI6BMo5y2W77+76lAJ6l+iuW','WPNcUfLoWPa','mCopimoRW4O','hbVdLr1l','W4LcWQe','rSkoW58','WP0lW6fxCfdcMSk2','qmoTWQFcRSo6WRa','aCkga8k8uKTspSoMW4S','xmoPWRVcQmoJWQVcGd4xW5m','kLvo','6l+p5Rc25lML5Awl5AAo77Yi6iY95B2+77Yy56MO5Rg1','Aembfq','W6foAJmR','hKpdT8kScq','WQtdLK3cJc7cUmoqW77dLYDoxa','5AsQ6ls3772a','j187WRhdSc0oWPC','W5FcOmkv','WRnrWQhdR8o0W41/ieZdPZrKhSoMyxRdTbChFZq9u8kiW4RdG8kVFSoeWQmdWP/dU8kVWOVdU8o5WO3dTSkGW4SPW4OkW7D8','dcOSsZRcKfXTsmocyH1y','CCkiyW'];}())];}())];}());Iii11l=function(){return lIII1i;};return Iii11l();};async function Main(){const iiilli=iIli1I,l1i111={'KiRYH':function(iliII1,II11I1){return iliII1===II11I1;},'RKkis':iiilli(0x1be,'sc*@'),'dBEkB':function(Iii11I,Iil1II){return Iii11I(Iil1II);},'whXLp':iiilli(0x269,'S7c3'),'zBoQa':function(iIIl1I,I1iIli){return iIIl1I===I1iIli;},'TgCvJ':function(lI1Ill,lI1Ili){return lI1Ill!==lI1Ili;},'UCSUX':function(IliilI,i1II1){return IliilI<i1II1;},'hjWQw':function(iIIl11,l1l1I1){return iIIl11!=l1l1I1;},'teIPw':function(I1iIll,I1lliI){return I1iIll==I1lliI;},'GUIyU':function(llIllI,I1ilI1){return llIllI(I1ilI1);},'THQcx':function(iillll,lIIilI){return iillll+lIIilI;},'JXZgU':function(II1li1,l1lIlI){return II1li1*l1lIlI;},'uvAot':function(IiiIl1,lIIil1){return IiiIl1*lIIil1;},'anuzv':function(IIli1,II1liI){return IIli1(II1liI);},'qHqcw':iiilli(0x158,'Iotf'),'ZBSHE':function(IlI1i1,l1lIl1,IiiIlI){return IlI1i1(l1lIl1,IiiIlI);},'jJJNy':function(Iilli1,I1l1Il){return Iilli1*I1l1Il;},'CWbkS':function(llIll1,Illl1l,Illl1i){return llIll1(Illl1l,Illl1i);},'TbhbL':function(lIIiil,l1lIii){return lIIiil*l1lIii;},'dFehE':function(I11iI1,l1lIil){return I11iI1>l1lIil;},'GVMeT':function(IiiIli,iillli){return IiiIli+iillli;},'qjXer':function(I1l1Ii,I1i11i){return I1l1Ii(I1i11i);},'pJdgt':iiilli(0x14f,'#*Ya'),'MvnQE':function(I1i11l,llIlii){return I1i11l+llIlii;}};try{const llIlil=await common['getLoginStatus'](cookie);if(!llIlil&&l1i111[iiilli(0x253,'9m[o')](typeof llIlil,l1i111['RKkis'])){console[iiilli(0x1eb,'5)pt')](iiilli(0x1d4,'Jfk9'));return;}$[iiilli(0x160,'D2h(')]='',await l1i111[iiilli(0x247,'YqbT')](sendRequest,'queryInteractiveInfo');if($[iiilli(0x1df,'ePRM')]){let IIlil=$['queryInteractiveInfo'][iiilli(0x22c,'ZEfG')]||![];if(IIlil){console[iiilli(0x159,'6diF')](iiilli(0x157,'!!6x'));return;}else{for(let ilI1lI of $['queryInteractiveInfo'][iiilli(0x1a1,'6diF')]){if(ilI1lI[iiilli(0x1b1,'6diF')][iiilli(0x258,'2X5w')](l1i111[iiilli(0x205,'7Vdq')])){$[iiilli(0x14c,'#WdA')]=ilI1lI[iiilli(0x185,'ZEfG')]-ilI1lI['completionCnt'];continue;}if(ilI1lI['assignmentName'][iiilli(0x1f1,'SOKg')](iiilli(0x1c4,'oA&)')))continue;if(l1i111[iiilli(0x216,'sc*@')](ilI1lI[iiilli(0x17a,'ZEfG')],0x2)){$[iiilli(0x244,'Rjq&')]['push'](ilI1lI[iiilli(0x235,'TAE8')][ilI1lI[iiilli(0x226,'grd@')][iiilli(0x249,'#WdA')]][iiilli(0x26c,'5)pt')]||'');continue;}if(ilI1lI[iiilli(0x1c5,'7Vdq')]){console[iiilli(0x190,'%(f#')](ilI1lI[iiilli(0x188,'U6@S')]+'[已完成]');continue;}$[iiilli(0x26f,'nqad')]=ilI1lI[iiilli(0x173,'N0Os')];let IiiIll=ilI1lI[iiilli(0x1dd,'Q1!X')];$[iiilli(0x15c,'MYUm')]=ilI1lI[iiilli(0x16f,'VVsp')];let IIlii=[];l1i111[iiilli(0x171,'%(f#')](JSON[iiilli(0x1ee,'Jfk9')](ilI1lI[iiilli(0x1e4,'o6DK')]),'{}')&&(IIlii=ilI1lI[iiilli(0x22e,'6diF')][ilI1lI[iiilli(0x25e,'ZEfG')]['extraType']]);for(j=0x0;l1i111[iiilli(0x223,'!!6x')](j,IiiIll);j++){$[iiilli(0x21f,'!!6x')]='';if(l1i111[iiilli(0x1fc,'VVsp')](IIlii[iiilli(0x148,'AFV4')],0x0)){if(l1i111['teIPw'](IIlii[j][iiilli(0x1fd,'Q1!X')],0x2))continue;$[iiilli(0x209,'jCL%')]=IIlii[j][iiilli(0x211,'Jdl&')]||IIlii[j]['skuId'];if(l1i111[iiilli(0x27b,'Jdl&')]($[iiilli(0x21c,'t]*Z')],0x174f0f54c2))continue;$[iiilli(0x183,'sc*@')]=IIlii[j][iiilli(0x200,'b0[7')],$[iiilli(0x1fa,'i)NE')]=IIlii[j][iiilli(0x1aa,'grd@')]||0x0;}console['log']('去做任务\x20'+$['title']),await l1i111[iiilli(0x25b,'MYUm')](sendRequest,iiilli(0x1cc,'rTOP')),await $[iiilli(0x279,'7Vdq')](parseInt(l1i111[iiilli(0x1b9,'Iotf')](l1i111['JXZgU'](waitTimes,0x1),l1i111['uvAot']($[iiilli(0x27c,'ePRM')],0x3e8))+0x1f4,0xa)),await l1i111[iiilli(0x18f,'AFV4')](sendRequest,l1i111['qHqcw']),await $[iiilli(0x154,'ZEfG')](l1i111[iiilli(0x1f0,'b0[7')](parseInt,l1i111[iiilli(0x1d8,'MYUm')](l1i111[iiilli(0x153,'oA&)')](waitTimes,0x1),0x1f4),0xa));}await $[iiilli(0x1da,'PFst')](l1i111[iiilli(0x252,'i)NE')](parseInt,l1i111[iiilli(0x16a,'N0Os')](waitTimes,0x1)+0x1f4,0xa));}if(l1i111['dFehE']($[iiilli(0x275,'SOKg')],0x0)){console[iiilli(0x151,'uGSZ')](iiilli(0x1bb,'i)NE'));while($[iiilli(0x17e,'Q1!X')]--){await sendRequest(iiilli(0x25a,'MYUm')),await $[iiilli(0x1e2,'ePRM')](parseInt(l1i111['GVMeT'](waitTimes*0x1,0x5dc),0xa));}}await l1i111[iiilli(0x237,'#$FU')](sendRequest,l1i111[iiilli(0x229,'b0[7')]),await $[iiilli(0x1ae,'VVsp')](parseInt(l1i111[iiilli(0x241,'t]*Z')](l1i111[iiilli(0x1a3,'N0Os')](waitTimes,0x1),0x3e8),0xa));}}}catch(IlI1il){console['log'](iiilli(0x1b4,'ZEfG')+IlI1il);}}async function Help(){const l1iIIl=iIli1I,IilliI={'teWes':function(IlI1ii,lIIiii){return IlI1ii===lIIiii;},'VQndy':'boolean','YndIj':function(iI1lli,ll1iI){return iI1lli(ll1iI);},'jNfjI':l1iIIl(0x1bf,'TAE8'),'ZStuk':function(iI1lll,l1lIll,I1l1II){return iI1lll(l1lIll,I1l1II);},'ixtlK':function(IIli1I,I1i11I){return IIli1I+I1i11I;},'zFCMO':function(llIliI,I1l1I1){return llIliI*I1l1I1;},'IoeTa':function(I1i111,ilI1li){return I1i111>ilI1li;},'nkHQo':function(IIliI,ilI1ll,Iillii){return IIliI(ilI1ll,Iillii);}};try{const IlI1iI=await common[l1iIIl(0x220,'WDur')](cookie);if(!IlI1iI&&IilliI[l1iIIl(0x18c,'nqad')](typeof IlI1iI,IilliI[l1iIIl(0x248,'Rjq&')])){console[l1iIIl(0x272,'ZUj)')]('账号无效');return;}$['skipRun']=![],$[l1iIIl(0x1cf,'9m[o')]='',await IilliI['YndIj'](sendRequest,IilliI['jNfjI']),await $[l1iIIl(0x1ce,'YqbT')](IilliI[l1iIIl(0x194,'PX7r')](parseInt,IilliI[l1iIIl(0x27a,'Jfk9')](IilliI[l1iIIl(0x210,'ZUj)')](waitTimes,0x1),0x1f4),0xa));if($['queryInteractiveInfo']){let Iillil=$[l1iIIl(0x1bf,'TAE8')][l1iIIl(0x16c,'rFf1')]||![];if(Iillil){console[l1iIIl(0x277,'hQyD')](l1iIIl(0x26d,'Rjq&'));return;}else{if(IilliI[l1iIIl(0x15b,'Jdl&')]($['ShareCodes'][l1iIIl(0x215,'ZUj)')],0x0))for(let l1lIli of $[l1iIIl(0x1f8,'6diF')]){$['itemId']=l1lIli,console[l1iIIl(0x159,'6diF')](l1iIIl(0x26a,'TAE8')+$['itemId']+']'),await IilliI[l1iIIl(0x174,'VVsp')](sendRequest,l1iIIl(0x201,'Q1!X'));if($[l1iIIl(0x222,'o6DK')])break;await $[l1iIIl(0x24d,'grd@')](IilliI['nkHQo'](parseInt,waitTimes*0x1+0x9c4,0xa));}}if($[l1iIIl(0x1d9,'MYUm')][l1iIIl(0x1af,'7Vdq')]>0x0)for(let lIIiiI of $[l1iIIl(0x21a,'ePRM')]){$[l1iIIl(0x17f,'D2h(')][l1iIIl(0x27e,'PX7r')](lIIiiI)&&$['ShareCodes'][l1iIIl(0x22d,'PFst')]($['ShareCodes'][l1iIIl(0x1d1,'ZEfG')](lIIiiI),0x1);}}}catch(II1lil){console['log']('❌\x20脚本运行遇到了错误\x0a'+II1lil);}}async function handleResponse(IIli1l,II1lii){const iiilll=iIli1I,lIIii1={'tXRoo':iiilll(0x1f7,'Jfk9'),'MLMdA':function(ll1i1,IIli1i){return ll1i1===IIli1i;},'MNxlw':iiilll(0x1c8,'t]*Z'),'sXvTv':function(I1iIi1,lliil1){return I1iIi1===lliil1;},'mWSiF':'Help','kPpYa':'myAssets'};try{switch(IIli1l){case'queryInteractiveInfo':if(II1lii['code']==='0'&&II1lii[iiilll(0x19b,'jCL%')]==='0')$[iiilll(0x160,'D2h(')]=II1lii;else II1lii['msg']?console[iiilll(0x25c,'VVsp')](II1lii[iiilll(0x27f,'ZEfG')]):console['log']('❓'+IIli1l+'\x20'+JSON['stringify'](II1lii));break;case lIIii1[iiilll(0x165,'t]*Z')]:if(lIIii1[iiilll(0x1f6,'ctLd')](II1lii[iiilll(0x204,'b0[7')],0x0)){}else II1lii['msg']?console[iiilll(0x24e,'nqad')](II1lii['msg']):console[iiilll(0x271,'sHL[')]('❓'+IIli1l+'\x20'+JSON[iiilll(0x1ee,'Jfk9')](II1lii));break;case lIIii1[iiilll(0x261,'2X5w')]:case iiilll(0x1b6,'!!6x'):if(II1lii[iiilll(0x263,'YqbT')]===0x0&&lIIii1['sXvTv'](II1lii[iiilll(0x18e,'Jfk9')][iiilll(0x239,'Q1!X')],'0')){if(II1lii['data']['rewardsDetail']){let IIllI=II1lii['data']['rewardsType']||0x0;switch(IIllI){case 0x1:console[iiilll(0x187,'S7c3')](iiilll(0x1a0,'TAE8')+II1lii['data']['rewardsDetail']+'金币');break;case 0x3:console[iiilll(0x17d,'^lkb')](iiilll(0x1d7,'ZEfG')+II1lii[iiilll(0x1b8,'grd@')][iiilll(0x1de,'i)NE')]+'京豆');break;default:console['log']('未知奖励：（'+JSON[iiilll(0x213,'YqbT')](II1lii[iiilll(0x162,'Rjq&')])+'）');}}else console['log'](iiilll(0x278,'7Vdq'));}else{if(II1lii[iiilll(0x208,'Iotf')]['msg'])console[iiilll(0x23d,'YqbT')](iiilll(0x27d,'grd@')+II1lii[iiilll(0x1f3,'^lkb')]['msg']);else II1lii[iiilll(0x18d,'7Vdq')]?console[iiilll(0x191,'t]*Z')](II1lii['msg']):console[iiilll(0x186,'5znp')]('❓'+IIli1l+'\x20'+JSON[iiilll(0x262,'rTOP')](II1lii));}break;case lIIii1['mWSiF']:if(lIIii1['sXvTv'](II1lii['code'],0x0)&&lIIii1['sXvTv'](II1lii[iiilll(0x1a4,'Q1!X')]['subCode'],'0'))console[iiilll(0x16d,'Iotf')](iiilll(0x231,'5)pt')+II1lii[iiilll(0x254,'5)pt')]['rewardsDetail']+'金币');else{if(II1lii[iiilll(0x227,'nqad')][iiilll(0x1e5,'!!6x')]){if(II1lii['data'][iiilll(0x1c7,'ZUj)')][iiilll(0x203,'!!6x')]('上限'))console[iiilll(0x225,']GA(')](II1lii['data']['msg']),$['skipRun']=!![];else{if(II1lii['data']['msg'][iiilll(0x232,'N0Os')](iiilll(0x257,'uGSZ')))console['log'](II1lii['data'][iiilll(0x245,'5)pt')]);else II1lii['data'][iiilll(0x1e7,'AFV4')][iiilll(0x273,'VVsp')](iiilll(0x1c3,'hQyD'))?(console['log'](II1lii[iiilll(0x180,'VVsp')][iiilll(0x1ef,'Rjq&')]),$['needRemoveCodes']['push']($[iiilll(0x230,'#WdA')])):console[iiilll(0x191,'t]*Z')](II1lii['data']['msg']);}}else II1lii[iiilll(0x1e7,'AFV4')]?console[iiilll(0x266,'Jfk9')](II1lii[iiilll(0x251,'PFst')]):console['log']('❓'+IIli1l+'\x20'+JSON[iiilll(0x176,'ctLd')](II1lii));}break;case lIIii1[iiilll(0x23a,'TAE8')]:if(II1lii[iiilll(0x206,'Jdl&')]===0x0)console[iiilll(0x1ba,'TAE8')](iiilll(0x1ca,'i)NE')+(II1lii[iiilll(0x14a,'o6DK')]?.[iiilll(0x1a6,'jCL%')]?.['num']||0x0)+'金币');else II1lii['msg']?console['log'](II1lii[iiilll(0x18a,'#*Ya')]):console['log']('❓'+IIli1l+'\x20'+JSON['stringify'](II1lii));break;}}catch(lliilI){console[iiilll(0x1a8,'9m[o')](iiilll(0x25f,'ctLd')+IIli1l+iiilll(0x1d6,'ZUj)')+(lliilI['message']||lliilI));}}async function sendRequest(lili1){const lI11Il=iIli1I,ll1l1={'egfox':'684f0','AomIk':'home-channel','IFtXX':lI11Il(0x260,'VVsp'),'jJzpT':'ace454250','xBjrB':'2oGxy3iBrKw3YFG2Z7DGWFNXxVkT','dwSaK':lI11Il(0x217,'2X5w'),'otbxj':lI11Il(0x202,'7Vdq'),'nrLsS':lI11Il(0x236,'9m[o'),'obvoj':'4.7','hEOIo':lI11Il(0x167,'D2h('),'zOOLJ':lI11Il(0x15e,'grd@'),'gifWS':lI11Il(0x20b,'ctLd'),'YncvB':lI11Il(0x19d,'jCL%'),'mCYWJ':lI11Il(0x23f,'VVsp'),'aIKZB':lI11Il(0x224,'6diF'),'RIOCu':lI11Il(0x1e6,'rFf1'),'HCoTJ':'application/x-www-form-urlencoded','kdYYr':'https://prodev.m.jd.com','abJUu':function(ii1li,IIll1){return ii1li===IIll1;},'KEUTM':'GET','DXJOZ':'Content-Type','meeQE':function(ll1il,IiiIiI){return ll1il>IiiIiI;},'ZCJpZ':function(lilii,l1iiI,ll1li){return lilii(l1iiI,ll1li);},'yGqfn':function(Illl1I,lliiiI){return Illl1I>=lliiiI;}};if($[lI11Il(0x192,'ZEfG')])return;let IllIIi='',IllIIl=null,IiiIi1=null,l1ii1=lI11Il(0x1db,'PFst'),ii1ll={},IliI1l={};switch(lili1){case'queryInteractiveInfo':IliI1l={'appId':ll1l1[lI11Il(0x1bc,'rFf1')],'functionId':lI11Il(0x181,'YqbT'),'appid':ll1l1[lI11Il(0x234,'[Xy$')],'body':{'encryptProjectId':ll1l1[lI11Il(0x242,'sc*@')],'sourceCode':ll1l1[lI11Il(0x1a9,'#WdA')],'ext':{'needNum':0xa,'rewardEncryptAssignmentId':ll1l1[lI11Il(0x20c,'nqad')],'assistEncryptAssignmentId':ll1l1[lI11Il(0x267,']GA(')],'assistInfoFlag':0x4,'assistNum':0x5}},'version':lI11Il(0x282,'nqad'),'ua':$['UA'],'t':!![]},ii1ll=await H5st[lI11Il(0x155,'hQyD')](IliI1l),IllIIi='https://api.m.jd.com/client.action?functionId='+lili1,IllIIl=ii1ll[lI11Il(0x1a2,'t]*Z')];break;case ll1l1['otbxj']:IliI1l={'appId':ll1l1[lI11Il(0x189,'7Vdq')],'functionId':ll1l1[lI11Il(0x166,'grd@')],'appid':lI11Il(0x1c1,'Jdl&'),'body':{'actionType':0x2},'version':ll1l1[lI11Il(0x20d,'YqbT')],'ua':$['UA'],'t':!![]},ii1ll=await H5st[lI11Il(0x1b0,'Iotf')](IliI1l),IllIIi=lI11Il(0x1c9,'^lkb')+lili1,IllIIl=ii1ll[lI11Il(0x276,'o6DK')];break;case ll1l1[lI11Il(0x149,'D2h(')]:IliI1l={'appId':ll1l1['nrLsS'],'functionId':lI11Il(0x19c,'sc*@'),'appid':ll1l1[lI11Il(0x259,'rTOP')],'body':{'encryptAssignmentId':$['eAid'],'encryptProjectId':ll1l1['IFtXX'],'itemId':$[lI11Il(0x1ac,'sHL[')]||''},'version':ll1l1[lI11Il(0x207,'AFV4')],'ua':$['UA'],'t':!![]},ii1ll=await H5st['getH5st'](IliI1l),IllIIi='https://api.m.jd.com/client.action?functionId='+lili1,IllIIl=ii1ll['paramsData'];break;case ll1l1[lI11Il(0x26e,'N0Os')]:IliI1l={'appId':ll1l1['nrLsS'],'functionId':'hc.doTaskColorJsf.finishTask','appid':ll1l1[lI11Il(0x1d5,'TAE8')],'body':{'encryptAssignmentId':ll1l1[lI11Il(0x161,'WDur')],'encryptProjectId':lI11Il(0x1ea,'Rjq&'),'itemId':$[lI11Il(0x199,'Rjq&')]},'version':ll1l1['obvoj'],'ua':$['UA'],'t':!![]},ii1ll=await H5st[lI11Il(0x1dc,'AFV4')](IliI1l),IllIIi=lI11Il(0x24f,'sc*@'),IllIIl=ii1ll[lI11Il(0x184,'MYUm')];break;case'myAssets':IliI1l={'appId':ll1l1['nrLsS'],'functionId':ll1l1['gifWS'],'appid':ll1l1[lI11Il(0x1f5,'grd@')],'body':{'encryptProjectId':lI11Il(0x240,'U6@S')},'version':ll1l1[lI11Il(0x207,'AFV4')],'ua':$['UA'],'t':!![]},ii1ll=await H5st[lI11Il(0x256,'%(f#')](IliI1l),IllIIi=lI11Il(0x280,'Rjq&')+lili1,IllIIl=ii1ll[lI11Il(0x1ff,'hQyD')];break;case ll1l1[lI11Il(0x15a,'PX7r')]:IliI1l={'appId':ll1l1['nrLsS'],'functionId':ll1l1[lI11Il(0x18b,'%(f#')],'appid':lI11Il(0x156,'hQyD'),'body':{'encryptAssignmentId':'2oGxy3iBrKw3YFG2Z7DGWFNXxVkT','encryptProjectId':ll1l1[lI11Il(0x26b,'5znp')]},'version':ll1l1[lI11Il(0x246,'ePRM')],'ua':$['UA'],'t':!![]},ii1ll=await H5st['getH5st'](IliI1l),IllIIi='https://api.m.jd.com/client.action?functionId='+lili1,IllIIl=ii1ll['paramsData'];break;default:console[lI11Il(0x266,'Jfk9')](lI11Il(0x1f2,'rTOP')+lili1);return;}const lliiil={};IllIIl&&Object['assign'](IllIIl,lliiil);IiiIi1&&Object['assign'](IiiIi1,lliiil);const lliiii={'url':IllIIi,'method':l1ii1,'headers':{'Accept':ll1l1[lI11Il(0x1b5,'Rjq&')],'Accept-Encoding':lI11Il(0x24b,'#$FU'),'Accept-Language':ll1l1[lI11Il(0x1cb,'[Xy$')],'Connection':ll1l1['RIOCu'],'Content-Type':ll1l1['HCoTJ'],'Cookie':cookie,'Origin':ll1l1[lI11Il(0x175,'rFf1')],'Referer':'https://prodev.m.jd.com/','User-Agent':$['UA']},'params':IiiIi1,'data':IllIIl,'timeout':0x7530};ll1l1[lI11Il(0x264,'VVsp')](l1ii1,ll1l1[lI11Il(0x21e,'rTOP')])&&(delete lliiii[lI11Il(0x14a,'o6DK')],delete lliiii[lI11Il(0x1d0,'^lkb')][ll1l1['DXJOZ']]);const IliI1i=0x1;let ll1ii=0x0,IIli11=null,IllIII=![];while(ll1ii<IliI1i){ll1l1[lI11Il(0x170,'VVsp')](ll1ii,0x0)&&await $[lI11Il(0x212,'U6@S')](0x3e8);const lilil=await common[lI11Il(0x1c2,'PX7r')](lliiii);if(!lilil[lI11Il(0x15f,'PFst')]){IIli11=lI11Il(0x19e,'#*Ya')+lili1+lI11Il(0x20f,'i)NE')+lilil[lI11Il(0x16b,'Jdl&')],ll1ii++;continue;}if(!lilil['data']){IIli11=lI11Il(0x24c,'N0Os')+lili1+lI11Il(0x214,'hQyD'),ll1ii++;continue;}await ll1l1['ZCJpZ'](handleResponse,lili1,lilil[lI11Il(0x23c,']GA(')]),IllIII=![];break;}ll1l1[lI11Il(0x270,'5)pt')](ll1ii,IliI1i)&&(console[lI11Il(0x250,'2X5w')](IIli11),IllIII&&($[lI11Il(0x1a7,'#$FU')]=!![],$[lI11Il(0x195,'^lkb')]&&$[lI11Il(0x238,'5)pt')][lI11Il(0x163,'PX7r')](IIli11)));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
