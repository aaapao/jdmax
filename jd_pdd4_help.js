/*
PDD转赚红包助力4

链接：https://pro.m.jd.com/mall/active/4RCHDYmwzmwuhRwz6FaRh1JyWKTh/index.html

环境变量：
JD_PDD4_InviterId // 指定助力码 非必须，不填默认助力账号一
JD_PDD4_NUM // 指定人数  非必须，不填默认跑全部账号

cron:1 1 1 1 *

*/

const $ = new Env('PDD转赚红包助力4');
var iｉl='jsjiami.com.v7';const lI11Il=iii1II;(function(IIlll,liliI,ll1lI,l1iii,IIlli,l1iil,ii1l1){return IIlll=IIlll>>0x3,l1iil='hs',ii1l1='hs',function(lIIill,I11iIi,I1ilII,I11iIl,l1l11l){const iiilll=iii1II;I11iIl='tfi',l1iil=I11iIl+l1iil,l1l11l='up',ii1l1+=l1l11l,l1iil=I1ilII(l1iil),ii1l1=I1ilII(ii1l1),I1ilII=0x0;const IilIil=lIIill();while(!![]&&--l1iii+I11iIi){try{I11iIl=parseInt(iiilll(0x17b,'IRUh'))/0x1*(-parseInt(iiilll(0xa9,'!K5L'))/0x2)+parseInt(iiilll(0x167,'n%@a'))/0x3+-parseInt(iiilll(0x120,'kD[&'))/0x4+parseInt(iiilll(0x7f,'M!WB'))/0x5+parseInt(iiilll(0xa0,'8r*u'))/0x6*(-parseInt(iiilll(0xa3,'jqiL'))/0x7)+parseInt(iiilll(0xc9,'nr@I'))/0x8*(-parseInt(iiilll(0xb0,'b*r$'))/0x9)+-parseInt(iiilll(0xaf,'ut)x'))/0xa*(-parseInt(iiilll(0x97,'&jDM'))/0xb);}catch(l1iIi){I11iIl=I1ilII;}finally{l1l11l=IilIil[l1iil]();if(IIlll<=l1iii)I1ilII?IIlli?I11iIl=l1l11l:IIlli=l1l11l:I1ilII=l1l11l;else{if(I1ilII==IIlli['replace'](/[wLGMXuOFgWNnSIYETUd=]/g,'')){if(I11iIl===I11iIi){IilIil['un'+l1iil](l1l11l);break;}IilIil[ii1l1](l1l11l);}}}}}(ll1lI,liliI,function(l1l11i,l1iIl,illIll,iIli1I,Iiil1,iiilli,l1iIIl){return l1iIl='\x73\x70\x6c\x69\x74',l1l11i=arguments[0x0],l1l11i=l1l11i[l1iIl](''),illIll=`\x72\x65\x76\x65\x72\x73\x65`,l1l11i=l1l11i[illIll]('\x76'),iIli1I=`\x6a\x6f\x69\x6e`,(0x16bc35,l1l11i[iIli1I](''));});}(0x660,0xa0d30,Iii11l,0xce),Iii11l)&&(iｉl=0x2571);const notify=require(lI11Il(0x8d,'I%8a')),jdCookie=require(lI11Il(0x153,'G7$(')),common=require(lI11Il(0xd2,'Uu)Q')),{H5st}=require(lI11Il(0x11f,'7Y9f')),isNotify=process[lI11Il(0x10f,'IRUh')][lI11Il(0x11d,'7Y9f')]===lI11Il(0x95,'3k[e'),pddcode=process[lI11Il(0x179,'6Pz4')]['JD_PDD4_InviterId']||'',pddnum=process[lI11Il(0xcb,'jqiL')][lI11Il(0x6f,'8r*u')],linkId='PoHWC54VvauWvmc7Vol97Q',PDD_WAIT='1';let waitTimes=parseInt(PDD_WAIT)*0x3e8;$[lI11Il(0x178,'(Vs4')]=0x0,$[lI11Il(0x87,'n%@a')]=![];let cookie='';const cookiesArr=Object[lI11Il(0xf1,'(Vs4')](jdCookie)['map'](I1lll1=>jdCookie[I1lll1])[lI11Il(0x104,'x#Rf')](i1IIi=>i1IIi);!cookiesArr[0x0]&&($[lI11Il(0x14f,'nr@I')]($[lI11Il(0xf9,'G7$(')],'【提示】请先获取Cookie'),process['exit'](0x1));function iii1II(_0x33a737,_0x4975b1){const _0x6e6a61=Iii11l();return iii1II=function(_0x4b83db,_0x3d50c0){_0x4b83db=_0x4b83db-0x69;let _0x237ec7=_0x6e6a61[_0x4b83db];if(iii1II['gXUnFz']===undefined){var _0x233de9=function(_0x4b85c8){const _0x152aa6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x40e5e3='',_0x411bee='';for(let _0x14fe86=0x0,_0x246edc,_0x49fcd9,_0x4ab2c0=0x0;_0x49fcd9=_0x4b85c8['charAt'](_0x4ab2c0++);~_0x49fcd9&&(_0x246edc=_0x14fe86%0x4?_0x246edc*0x40+_0x49fcd9:_0x49fcd9,_0x14fe86++%0x4)?_0x40e5e3+=String['fromCharCode'](0xff&_0x246edc>>(-0x2*_0x14fe86&0x6)):0x0){_0x49fcd9=_0x152aa6['indexOf'](_0x49fcd9);}for(let _0x246fa4=0x0,_0x440834=_0x40e5e3['length'];_0x246fa4<_0x440834;_0x246fa4++){_0x411bee+='%'+('00'+_0x40e5e3['charCodeAt'](_0x246fa4)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x411bee);};const _0x43ac93=function(_0x983119,_0x21d1c7){let _0x432586=[],_0xe013a7=0x0,_0x58b9c3,_0x2a6a0b='';_0x983119=_0x233de9(_0x983119);let _0x3a766f;for(_0x3a766f=0x0;_0x3a766f<0x100;_0x3a766f++){_0x432586[_0x3a766f]=_0x3a766f;}for(_0x3a766f=0x0;_0x3a766f<0x100;_0x3a766f++){_0xe013a7=(_0xe013a7+_0x432586[_0x3a766f]+_0x21d1c7['charCodeAt'](_0x3a766f%_0x21d1c7['length']))%0x100,_0x58b9c3=_0x432586[_0x3a766f],_0x432586[_0x3a766f]=_0x432586[_0xe013a7],_0x432586[_0xe013a7]=_0x58b9c3;}_0x3a766f=0x0,_0xe013a7=0x0;for(let _0x45d429=0x0;_0x45d429<_0x983119['length'];_0x45d429++){_0x3a766f=(_0x3a766f+0x1)%0x100,_0xe013a7=(_0xe013a7+_0x432586[_0x3a766f])%0x100,_0x58b9c3=_0x432586[_0x3a766f],_0x432586[_0x3a766f]=_0x432586[_0xe013a7],_0x432586[_0xe013a7]=_0x58b9c3,_0x2a6a0b+=String['fromCharCode'](_0x983119['charCodeAt'](_0x45d429)^_0x432586[(_0x432586[_0x3a766f]+_0x432586[_0xe013a7])%0x100]);}return _0x2a6a0b;};iii1II['FhnNtw']=_0x43ac93,_0x33a737=arguments,iii1II['gXUnFz']=!![];}const _0x2214ba=_0x6e6a61[0x0],_0x29c742=_0x4b83db+_0x2214ba,_0x4e04c5=_0x33a737[_0x29c742];return!_0x4e04c5?(iii1II['evBuvY']===undefined&&(iii1II['evBuvY']=!![]),_0x237ec7=iii1II['FhnNtw'](_0x237ec7,_0x3d50c0),_0x33a737[_0x29c742]=_0x237ec7):_0x237ec7=_0x4e04c5,_0x237ec7;},iii1II(_0x33a737,_0x4975b1);}!(async()=>{const lIII1i=lI11Il,IIII1I={'xFcew':function(Iii111,l1l1II){return Iii111(l1l1II);},'ZBWlc':lIII1i(0x115,'N9cq'),'FmbHf':lIII1i(0x10e,'jsdt'),'PjRRa':function(Iil1I1,Ii1iII,l1i11I){return Iil1I1(Ii1iII,l1i11I);},'auvmx':lIII1i(0x80,'xw6z'),'bwRXd':'XDG-p9i7Z_8OKNbN_0YtP459s9TDLKqgoADgakmXaaw','Vewen':lIII1i(0xf3,'j20%'),'hQIBE':'QcG3ZyTya9XIXktPEBT7Aw','vBsdi':lIII1i(0x12b,'&jDM'),'oHoGc':function(II11II,Ii1iI1){return II11II<Ii1iI1;},'rMmRo':function(lilIli,Iliili){return lilIli+Iliili;},'zYuHS':'pt_pin','ancIl':function(Iliill){return Iliill();},'Chnic':function(IIII11,i1illi){return IIII11+i1illi;},'QtqCE':function(i1illl,I1llil){return i1illl*I1llil;}};authorCodeList=await IIII1I[lIII1i(0x154,'5WSG')](getAuthorCodeList,IIII1I[lIII1i(0xb8,'A1cw')]);if(authorCodeList)console[lIII1i(0xed,'G7$(')](IIII1I[lIII1i(0x10c,'1(dC')]),$[lIII1i(0xf6,'m1yk')]=authorCodeList[IIII1I[lIII1i(0xe2,'S^3W')](random,0x0,authorCodeList[lIII1i(0x18b,'54TZ')])];else{let I1llii=[IIII1I[lIII1i(0xdd,'5WSG')],IIII1I[lIII1i(0xbb,'54TZ')],IIII1I['Vewen'],IIII1I['hQIBE']];$[lIII1i(0xe5,'8r*u')]=I1llii[IIII1I[lIII1i(0x88,'1gdt')](random,0x0,I1llii['length'])],console['log'](IIII1I['vBsdi']);}if(pddnum)console[lIII1i(0xac,'S^3W')](lIII1i(0x16f,'6Pz4')+pddnum+']');pddcode?console[lIII1i(0x14b,'M!WB')](lIII1i(0x7d,'1gdt')+pddcode+']'):console['log'](lIII1i(0x89,'#O^u'));notify[lIII1i(0x164,'Uu)Q')]({'title':$['name']});for(let lilIll=0x0;IIII1I[lIII1i(0x12c,'nr@I')](lilIll,cookiesArr[lIII1i(0xc2,'8r*u')]);lilIll++){$['index']=IIII1I[lIII1i(0x6d,'iplK')](lilIll,0x1),cookie=cookiesArr[lilIll],common[lIII1i(0x12f,'nr@I')](cookie),$[lIII1i(0x13c,'e%2R')]=IIII1I[lIII1i(0x101,'e%2R')](decodeURIComponent,common['getCookieValue'](cookie,IIII1I[lIII1i(0xf5,'nr@I')])),$['UA']=common[lIII1i(0x10a,'4HSN')]($['UserName']),$['message']=notify[lIII1i(0x70,'jsdt')]($['index'],$[lIII1i(0x12d,'A1cw')]),$['nickName']='',console['log'](lIII1i(0x11a,'7Y9f')+$['index']+'】'+($[lIII1i(0x7b,'S^3W')]||$['UserName'])+lIII1i(0x91,'jbZ$')),$[lIII1i(0x145,'ut)x')]=IIII1I['ancIl'](gen_jda_cookie),$['strList']='__jda='+$[lIII1i(0x8f,'N9cq')][lIII1i(0x152,'qj*b')]+lIII1i(0x168,'b*r$')+$[lIII1i(0x116,'FAq7')][lIII1i(0xc8,'[Oru')]+';__jdc='+$[lIII1i(0x15c,'Uu)Q')][lIII1i(0x10b,'&jDM')]+lIII1i(0x143,'Ey6I')+$['hash'][lIII1i(0x173,'A1cw')]+';;',$[lIII1i(0xa6,'eNSi')]=IIII1I[lIII1i(0xb9,'M!WB')](new Date()['getTime']()+'',parseInt(0x7fffffff*Math[lIII1i(0xb4,'jbZ$')]())),await IIII1I['ancIl'](Main),common[lIII1i(0xcd,'Ey6I')]();if($[lIII1i(0x184,'[Oru')]||$[lIII1i(0x119,'5WSG')])break;await $[lIII1i(0x99,'S^3W')](parseInt(IIII1I[lIII1i(0xe4,'3Cef')](IIII1I[lIII1i(0x132,'I%8a')](waitTimes,0x1),0x64),0xa));}isNotify&&notify[lIII1i(0x134,'N9cq')]()&&(notify['appendContent']('\x0a'),await notify[lIII1i(0xd8,'n%@a')]());})()[lI11Il(0xea,'IRUh')](l1i111=>$['logErr'](l1i111))['finally'](()=>$['done']());async function Main(){const l11i11=lI11Il,iliII1={'ybZsb':function(II11I1,Iii11I){return II11I1==Iii11I;},'mgqSW':function(Iil1II,iIIl1I){return Iil1II(iIIl1I);},'MlybE':function(I1iIli,lI1Ill){return I1iIli==lI1Ill;},'PgcAK':function(lI1Ili){return lI1Ili();}};$[l11i11(0x82,'nr@I')]=!![];try{if(pddcode)iliII1[l11i11(0x106,'A1cw')]($['index'],0x1)?(console['log']('⏺️\x20账号[1]默认去助力作者'),await iliII1[l11i11(0x155,'#O^u')](inviteFissionhelp,$['authorCode'])):await iliII1[l11i11(0x172,'3Cef')](inviteFissionhelp,pddcode);else{if(iliII1['MlybE']($[l11i11(0xe8,'jbZ$')],0x1)){console[l11i11(0xd4,'kD[&')](l11i11(0x94,'3Cef')),await iliII1[l11i11(0x189,'t7mN')](inviteFissionHome);if($[l11i11(0x17f,'17k^')])return;await iliII1[l11i11(0x155,'#O^u')](inviteFissionhelp,$[l11i11(0x133,'A1cw')]);}else await iliII1['mgqSW'](inviteFissionhelp,$['shareinviter']);}}catch(IliilI){console[l11i11(0x185,'*GTG')](IliilI['message']);}}async function inviteFissionHome(){const IilIl1=lI11Il,i1II1={'IlBsg':function(iIIl11,l1l1I1){return iIIl11(l1l1I1);},'SMgJB':IilIl1(0xbc,'jfUI'),'yOroz':function(I1iIll,I1lliI){return I1iIll+I1lliI;},'mEkAm':function(llIllI,I1ilI1){return llIllI*I1ilI1;},'PxxqW':function(iillll,lIIilI,II1li1){return iillll(lIIilI,II1li1);},'LzzGQ':function(l1lIlI,IiiIl1){return l1lIlI*IiiIl1;},'kWFiK':IilIl1(0xe6,'CbAn')};await i1II1[IilIl1(0x17c,'qj*b')](sendRequest,i1II1[IilIl1(0xf8,'xw6z')]);if($[IilIl1(0x10d,'(Vs4')])return;await $[IilIl1(0x9d,'3k[e')](parseInt(i1II1[IilIl1(0xc3,'*GTG')](i1II1[IilIl1(0x187,'#O^u')](waitTimes,0x1),0x64),0xa)),await sendRequest('inviteFissionHome'),await $[IilIl1(0xce,'5WSG')](i1II1[IilIl1(0x16b,'nr@I')](parseInt,i1II1[IilIl1(0x11b,'x#Rf')](i1II1[IilIl1(0x6e,'M!WB')](waitTimes,0x1),0x64),0xa));if($[IilIl1(0x165,'S^3W')]?.[IilIl1(0x9c,'jsdt')]){$[IilIl1(0x83,'jbZ$')]=$[IilIl1(0xe1,'17k^')]?.[IilIl1(0x182,'nr@I')];const lIIil1=new Date()[IilIl1(0x157,'*GTG')](),IIli1=$[IilIl1(0x177,'6Pz4')]?.[IilIl1(0x125,'*GTG')]+lIIil1,II1liI=$[IilIl1(0x13d,'*GTG')](i1II1['kWFiK'],IIli1);console[IilIl1(0x14b,'M!WB')](IilIl1(0xfd,'&jDM')+II1liI+IilIl1(0x163,'A1cw')+$[IilIl1(0x18d,'jqiL')]);}else console['log']('⏺️\x20未能正确获取到助力码，退出执行！'),$[IilIl1(0x6b,'4HSN')]=!![];}async function inviteFissionhelp(IlI1i1){const lIII1l=lI11Il,l1lIl1={'dryNr':function(IiiIlI,Iilli1){return IiiIlI(Iilli1);}};$[lIII1l(0xba,'[Oru')]=IlI1i1,await l1lIl1[lIII1l(0x9b,'I%8a')](sendRequest,lIII1l(0x186,'e%2R'));}async function handleResponse(I1l1Il,llIll1){const l1iIIi=lI11Il,Illl1l={'XznJg':'inviteFissionhelp','fTCGC':function(Illl1i,lIIiil){return Illl1i===lIIiil;},'iCOVK':function(l1lIii,I11iI1){return l1lIii===I11iI1;},'Yrrkv':function(l1lIil,IiiIli){return l1lIil==IiiIli;},'qqUUi':function(iillli,I1l1Ii){return iillli==I1l1Ii;},'wLxhQ':l1iIIi(0xec,'!K5L'),'bMBZR':function(I1i11i,I1i11l){return I1i11i===I1i11l;},'EPUFV':function(llIlii,llIlil){return llIlii===llIlil;}};try{switch(I1l1Il){case Illl1l[l1iIIi(0x146,'8r*u')]:if(Illl1l['fTCGC'](llIll1?.[l1iIIi(0x17a,'iplK')],0x0)&&Illl1l['iCOVK'](llIll1?.[l1iIIi(0xf2,'G7$(')],!![])){$[l1iIIi(0x110,'ut)x')]=llIll1[l1iIIi(0x16a,'*GTG')];switch($[l1iIIi(0x86,'kD[&')]?.[l1iIIi(0xbd,'[Oru')]){case null:console[l1iIIi(0xa7,'3Cef')](l1iIIi(0xc4,'kD[&'));break;case 0x0:console[l1iIIi(0x15f,'XA^l')](l1iIIi(0xf4,'n%@a'));break;case 0x1:if(Illl1l['Yrrkv']($[l1iIIi(0x136,'Ey6I')],0x1))console['log'](l1iIIi(0x93,'4HSN'));else{$['helpnum']++,console[l1iIIi(0x175,'j20%')](l1iIIi(0x158,'17k^')+$['helpnum']+']');if(pddnum){if(pddnum<=$[l1iIIi(0xa1,'jbZ$')]){console[l1iIIi(0x149,'t7mN')](l1iIIi(0x138,'3Cef')),$[l1iIIi(0x7a,'x#Rf')]=!![];return;}}}break;case 0x2:console[l1iIIi(0xd3,'iplK')](l1iIIi(0x9a,'e%2R'));break;case 0x3:console[l1iIIi(0xb6,'CbAn')](l1iIIi(0x13f,'N9cq'));break;case 0x6:console['log']('❌\x20已助力过了');break;case 0x8:if(Illl1l[l1iIIi(0x77,'n%@a')]($['index'],0x1)){console['log'](l1iIIi(0x122,'54TZ'));break;}else{console[l1iIIi(0x16e,'jfUI')]('❌\x20助力码失效，请先去开启新一轮活动后再运行吧！');return;}default:{console[l1iIIi(0x114,'4HSN')](l1iIIi(0xfe,'7Y9f')+helpResult+']');break;}}}else{if(llIll1['data']?.[l1iIIi(0x75,'oBob')])console[l1iIIi(0x17d,'n%@a')]('>\x20'+llIll1[l1iIIi(0x18f,'6Pz4')]);else{if(llIll1['errMsg'])console[l1iIIi(0x78,'Uu)Q')]('>\x20'+llIll1[l1iIIi(0xaa,'qj*b')]);else llIll1[l1iIIi(0xf0,'N9cq')]?console[l1iIIi(0x14e,'oBob')]('>\x20'+llIll1['msg']):console[l1iIIi(0xd3,'iplK')]('❓'+I1l1Il+'\x20'+JSON[l1iIIi(0x176,'jqiL')](llIll1));}}break;case Illl1l[l1iIIi(0x166,'*GTG')]:if(Illl1l['iCOVK'](llIll1?.[l1iIIi(0x71,'#O^u')],0x0)&&llIll1?.['success']===!![])$[l1iIIi(0x147,'xw6z')]=llIll1['data'];else{if(llIll1['data']?.[l1iIIi(0xb1,'1(dC')])console[l1iIIi(0x114,'4HSN')]('>\x20'+llIll1[l1iIIi(0x8e,'e%2R')]?.[l1iIIi(0xa8,'j20%')]+'}');else{if(llIll1[l1iIIi(0x7e,'8r*u')])$['runEnd']=!![],console[l1iIIi(0x8b,'FAq7')]('>\x20'+llIll1['errMsg']);else llIll1[l1iIIi(0x174,'6Pz4')]?console[l1iIIi(0xb2,'ut)x')]('>\x20'+llIll1['msg']):console[l1iIIi(0x15a,'6Pz4')]('❓'+I1l1Il+'\x20'+JSON[l1iIIi(0x103,'1(dC')](llIll1));}}break;case l1iIIi(0xee,'jbZ$'):if(Illl1l[l1iIIi(0xcc,'N9cq')](llIll1?.['code'],0x0)&&Illl1l[l1iIIi(0x113,'XA^l')](llIll1?.['success'],!![]))$[l1iIIi(0x123,'FAq7')]=llIll1[l1iIIi(0x130,'eNSi')];else{if(llIll1[l1iIIi(0x13b,'jfUI')]?.['bizMsg'])console[l1iIIi(0xa7,'3Cef')]('>\x20'+llIll1[l1iIIi(0x6a,'XA^l')]?.[l1iIIi(0x140,'b*r$')]);else{if(llIll1[l1iIIi(0x188,'t7mN')])$[l1iIIi(0xb5,'t7mN')]=!![],console[l1iIIi(0x160,'#O^u')]('>\x20'+llIll1[l1iIIi(0x12e,'A1cw')]);else llIll1['msg']?console['log']('>\x20'+llIll1[l1iIIi(0xe7,'(Vs4')]):console['log']('❓'+I1l1Il+'\x20'+JSON[l1iIIi(0x150,'xw6z')](llIll1));}}break;}}catch(IIlil){console[l1iIIi(0xb3,'54TZ')]('❌\x20未能正确处理\x20'+I1l1Il+l1iIIi(0x12a,'I%8a')+(IIlil[l1iIIi(0x16c,'xw6z')]||IIlil));}}async function sendRequest(ilI1lI){const lilIi=lI11Il,IiiIll={'ClOTr':lilIi(0x156,'j20%'),'otCEX':'c5389','qNAbR':lilIi(0xc0,'FAq7'),'iarqP':lilIi(0xe3,'n%@a'),'dcgeJ':lilIi(0xff,'e%2R'),'RCXhv':lilIi(0x18c,'#O^u'),'vLtYi':'inviteFissionBeforeHome','ASoOU':lilIi(0xfb,'jfUI'),'ZZucr':lilIi(0xb7,'6Pz4'),'eQCPo':lilIi(0xa5,'3k[e'),'adVLL':'eb67b','rfpRU':lilIi(0x81,'qj*b'),'qpAlu':lilIi(0x117,'jqiL'),'ryxjB':lilIi(0x131,'[Oru'),'fQWYk':lilIi(0x73,'M!WB'),'cxKNP':function(llIliI,I1l1I1){return llIliI+I1l1I1;},'TwIru':lilIi(0xda,'b*r$'),'EFLTG':'https://pro.m.jd.com','HFMaj':lilIi(0x183,'&jDM'),'ohrUZ':function(I1i111,ilI1li){return I1i111>ilI1li;},'ljiaE':function(IIliI,ilI1ll,Iillii){return IIliI(ilI1ll,Iillii);}};if($['runEnd'])return;let IIlii='',IlI1il=null,IilliI=null,IlI1ii=IiiIll[lilIi(0x139,'!K5L')],lIIiii={},iI1lli={};switch(ilI1lI){case'inviteFissionhelp':iI1lli={'appId':IiiIll['otCEX'],'functionId':IiiIll[lilIi(0xe9,'jfUI')],'appid':IiiIll[lilIi(0x13e,'*GTG')],'clientVersion':common[lilIi(0x129,'17k^')](),'client':lilIi(0xfa,'MT$5'),'body':{'linkId':linkId,'isJdApp':!![],'inviter':$['inviter']},'version':IiiIll[lilIi(0x11e,'I%8a')],'ua':$['UA'],'t':!![]},lIIiii=await H5st[lilIi(0xd1,'b*r$')](iI1lli),IIlii=lilIi(0xdb,'nr@I'),IlI1il=lIIiii['paramsData'];break;case'inviteFissionBeforeHome':iI1lli={'appId':IiiIll['RCXhv'],'functionId':IiiIll[lilIi(0x96,'e%2R')],'appid':IiiIll[lilIi(0x102,'4HSN')],'clientVersion':common['getLatestAppVersion'](),'client':IiiIll[lilIi(0x17e,'t7mN')],'body':{'linkId':linkId,'isJdApp':!![],'inviter':''},'version':lilIi(0x109,'54TZ'),'ua':$['UA'],'t':!![]},lIIiii=await H5st[lilIi(0xae,'A1cw')](iI1lli),IIlii=IiiIll[lilIi(0x148,'1(dC')],IlI1il=lIIiii['paramsData'];break;case IiiIll['eQCPo']:iI1lli={'appId':IiiIll['adVLL'],'functionId':IiiIll[lilIi(0x84,'CbAn')],'appid':IiiIll[lilIi(0xc1,'1gdt')],'clientVersion':common[lilIi(0xad,'nr@I')](),'client':IiiIll[lilIi(0x13a,'!K5L')],'body':{'linkId':linkId,'inviter':''},'version':lilIi(0xff,'e%2R'),'ua':$['UA'],'t':!![]},lIIiii=await H5st[lilIi(0xd1,'b*r$')](iI1lli),IIlii=IiiIll[lilIi(0x170,'8r*u')],IlI1il=lIIiii[lilIi(0xd6,'(Vs4')];break;default:console[lilIi(0x76,'IRUh')]('❌\x20未知请求\x20'+ilI1lI);return;}const ll1iI={};IlI1il&&(IlI1il={...IlI1il,...ll1iI});IilliI&&(IilliI={...IilliI,...ll1iI});const iI1lll={'url':IIlii,'method':IlI1ii,'headers':{'Accept':lilIi(0x141,'kD[&'),'Accept-Encoding':lilIi(0x111,'Ey6I'),'Accept-Language':IiiIll[lilIi(0xd9,'G7$(')],'Connection':IiiIll['qpAlu'],'Content-Type':IiiIll[lilIi(0xf7,'8r*u')],'X-Requested-With':IiiIll[lilIi(0x16d,'CbAn')],'Cookie':IiiIll[lilIi(0x74,'n%@a')](cookie,$['strList']),'Referer':IiiIll[lilIi(0x18a,'Ey6I')],'X-Referer-Page':IiiIll[lilIi(0x127,'kD[&')],'Origin':IiiIll['EFLTG'],'x-rp-client':lilIi(0xef,'5WSG'),'User-Agent':$['UA']},'params':IilliI,'data':IlI1il,'timeout':0x4e20};IlI1ii===lilIi(0x85,'kD[&')&&(delete iI1lll[lilIi(0xd5,'m1yk')],delete iI1lll['headers'][IiiIll[lilIi(0x107,'kD[&')]]);const l1lIll=0x1;let I1l1II=0x0,IIli1I=null,I1i11I=![];while(I1l1II<l1lIll){IiiIll['ohrUZ'](I1l1II,0x0)&&await $[lilIi(0x8c,'xw6z')](0x3e8);const IlI1iI=await common[lilIi(0x98,'jbZ$')](iI1lll);if(!IlI1iI[lilIi(0xc6,'MT$5')]){IIli1I=lilIi(0x15d,'6Pz4')+ilI1lI+lilIi(0xde,'7Y9f')+IlI1iI['error'],I1l1II++;continue;}if(!IlI1iI?.[lilIi(0x15e,'(Vs4')]){IIli1I='🚫\x20'+ilI1lI+lilIi(0xa4,'5WSG'),I1l1II++;continue;}IiiIll['ljiaE'](handleResponse,ilI1lI,IlI1iI[lilIi(0x14d,'!K5L')]),I1i11I=![];break;}I1l1II>=l1lIll&&(console[lilIi(0xb6,'CbAn')](IIli1I),I1i11I&&($['outFlag']=!![],$[lilIi(0x9e,'jqiL')]&&$[lilIi(0x6c,'3k[e')][lilIi(0x151,'IRUh')](IIli1I)));}function getAuthorCodeList(Iillil){const l1l11I=lI11Il,l1lIli={'Gvzzk':l1l11I(0xdf,'1(dC'),'UVyNk':function(lIIiiI,II1lil){return lIIiiI(II1lil);},'kVGFI':l1l11I(0xbf,'6Pz4')};return new Promise(IIli1l=>{const lilIl=l1l11I,II1lii={'url':''+Iillil,'timeout':0x2710,'headers':{'User-Agent':l1lIli[lilIl(0x90,'t7mN')]}};$[lilIl(0xbe,'54TZ')](II1lii,async(lIIii1,ll1i1,IIli1i)=>{const IilIlI=lilIl;try{if(lIIii1){}else IIli1i?IIli1i=JSON[IilIlI(0x9f,'8r*u')](IIli1i):console[IilIlI(0x17d,'n%@a')](l1lIli[IilIlI(0x159,'54TZ')]);}catch(I1iIi1){$[IilIlI(0x18e,'!K5L')](I1iIi1,ll1i1),IIli1i=null;}finally{l1lIli[IilIlI(0x11c,'x#Rf')](IIli1l,IIli1i);}});});}function gen_jda_cookie(){const iIli11=lI11Il,lliil1={'psFCG':function(IliI1i,ll1ii){return IliI1i*ll1ii;},'euKpY':function(IIli11,IllIII){return IIli11-IllIII;},'HDfXy':function(ii1li){return ii1li();},'MNRWU':function(IIll1,ll1il){return IIll1+ll1il;},'Czcoy':iIli11(0x8a,'!K5L'),'hvoiI':iIli11(0x112,'j20%'),'hQlPl':function(IiiIiI,lilii){return IiiIiI(lilii);}},IIllI='3';let lliilI=Math[iIli11(0x7c,'Uu)Q')](lliil1[iIli11(0xd7,'jfUI')](0x8ca6bff,Math[iIli11(0x105,'3Cef')]()))[iIli11(0xe0,'e%2R')](),lili1=[...Array(0xc)]['map'](()=>Math[iIli11(0x181,'(Vs4')](Math[iIli11(0x162,'nr@I')]()*0xa))['join'](''),ll1l1=lliil1[iIli11(0xd0,'FAq7')](lliil1[iIli11(0x135,'IRUh')](timestamp),0x30d40),IllIIi=lliil1[iIli11(0x108,'17k^')](ll1l1,Math[iIli11(0xeb,'Ey6I')](Math['random']()*0x186a0)),IllIIl=lliil1[iIli11(0xc7,'MT$5')](IllIIi,Math[iIli11(0x137,'8r*u')](Math[iIli11(0x161,'5WSG')]()*0x2710)),IiiIi1=ll1l1+Math[iIli11(0x72,'S^3W')](lliil1[iIli11(0x128,'1(dC')](Math[iIli11(0x142,'(Vs4')](),0x186a0)),l1ii1=[lliilI,''+ll1l1+lili1,ll1l1['toString'](),IllIIi[iIli11(0x118,'jqiL')](),IllIIl[iIli11(0xdc,'M!WB')](),IIllI][iIli11(0xca,'7Y9f')]('.'),ii1ll=[lliilI,lili1['slice'](-0x2),''+ll1l1+lili1+'|'+IIllI,IllIIl[iIli11(0x15b,'j20%')]()][iIli11(0x14c,'I%8a')]('.'),IliI1l=lliilI,lliiil=[lliilI,lliil1[iIli11(0x14a,'t7mN')],iIli11(0x69,'#O^u'),'tuiguang',lliil1[iIli11(0xfc,'jbZ$')],IiiIi1[iIli11(0x171,'jbZ$')]()],lliiii=lliil1[iIli11(0x144,'IRUh')](encodeURIComponent,lliiil['join']('|'));return{'jda':l1ii1,'jdb':ii1ll,'jdc':IliI1l,'jdv':lliiii};}function timestamp(){const Iiiil=lI11Il,l1iiI={'pTJJf':function(ll1li,Illl1I){return ll1li/Illl1I;}};return Math[Iiiil(0x124,'t7mN')](l1iiI[Iiiil(0x180,'8r*u')](Date[Iiiil(0x126,'ut)x')](),0x3e8));}function random(lliiiI,lilil){const Iiiii=lI11Il,ll1ll={'oEISj':function(Illl11,ii1lI){return Illl11-ii1lI;}};return Math[Iiiii(0x92,'I%8a')](Math['random']()*ll1ll[Iiiii(0xab,'MT$5')](lilil,lliiiI))+lliiiI;}function Iii11l(){const l11i1I=(function(){return[...[iｉl,'TOjGGsjUNiEYawmEMiFG.coWgmXY.Lvg7dSngOuI==','W5tdT8k/vLGvWOrjW5qmWPK','fJLUWRK8wq','oSkWW7ZcO3i','WR7dNbO','kSoxWQC2WRxcQSomqhdcL8kRiXJdOmkjW4ldLCoJW5C','b2hdICkVW6/dOSoK','W5FdNSkfWRtdPxHjW70KrSolW7u','FW9gW5eaW5vr','W7ZdJWKrBYq','WONcImov','WQjAWOm','WPJcKxLTbSkI','WQRdHSoSW77dV0y','W7xdN8ol','WOvsWQGoW63cSZ3cGdTeq8oOqHldMWTemGtdQmoLth/cRmo2nSoryIXtDN41jG','oKBdQSklWRK','mYHRW4lcGa','WPffWPCFWOm2eq','WQXcWRBcKSo1','W5eHwCoziCkvW4xdMSodW47dVmkKW7vZzehcVNxdKZb4dmk1','WPboWO0gWQu2emopjH8','WQLqWPa','WQbjWQyxW7ldPxpcGg8AgSoMb1xdOqCfpW7cVSoQBepcKmkZmCo1jcjEzZCvgXq8W4jhW6xcIM0WxmkMebhcG3qLdCkcyJOvqLBdH0yvBSkry8kMWOZdVCouW5DWWR3dUSkwWOJdMCo5W4KAW7qJWPDSW4dcLmo8bCoKyCohWQFdPt89ju9AxsCyWRSDvuRcNCofWO4AW7/dV33cPmkiWRpcPSk4ovHOkSo5bJKEgtldQHr3Amo4eKdcQMKnW4LXW6nOm2WrW6FcJq9MW5RdG8kvivBcNSkbf2ddLX9K','WPddScVcSINdK33dPMnzW6ZcQ0usWQ/cKqq','wWdcHdddNq','pHOcWOxcUmkB','cXXXW5lcNq','4P2hCUwkLowiQoEHOUAFRUwJGUweHW','W6VcISkXWOVcPHRcOSoGWQdcN8kGW5BcMa','jSkaW5BcK319ea','gmk7W6FcP00','WPjpWOm','FSkaW6jmW6pdQCkFwKlcLmkciWS','fGy5Bq','tMRcOa','AmklaGBdIG','cCogW7VcMqOXWP8DWOdcVL4','bvNcLMK','crChF8o9lmkbWRuqdSkhcba','WPZdQXBcQWq','it1EW6PbW6fW','W5jCWRqTW7xdSbiib8koW7DJvxRdUtWbtd7dHmoEW5bC','WPZcIxK','zZ1A','m0NcKYu','oG7dIdX2WPRcTeHvtW','W4G8ACoZeG','WOpdJfJcNG','WRe+WPNdKGC','lIXEW5ihWQGRWQ7dUdfWW5tdJrVdHCkSAmoRm017W61UpfJdSfeYWOJdGmoRdmovW4vCW4tdHCoNcmkaFsVcVSkrWRz5A0OPomkRWQNdMfBcJ8kgySkUdJZdVba9W6/dUuqjWPFcLSkrW7fP','jCogWQCkWQFdPmkghgxcPSkYFspcQ8krW5xcKSoVW5BcOCoHo0ZdTxRdR8k1W6pdOmkKWQhdU8k6WOO','bc9wW5/cKx/cMJO','e03cIxaH','xoIUNUAWKUwKSUI0OHVINlGd','5P606iYr5y6L5yMS5PwS5OYTm+ISJEMgS+AwLUI9RUIIIG','WQKfW5NdK07cHSkJWRK','c8ktkCkWWRRcSNTiW6v1WQJdNuNcSmoQqmk3','WOldMs9dda','WPldML/cN8kGhItcQaldL8oapXrOW6WcW7fHWQ8','qMPDh8kJ','mWOyWORcO8kbuSktWRBcTW','W6ddICovW7aTWPj3WQeYfCoJDCopFCoRWQiRWPi7','jXZdNq','WOpcNNnSeq','W4KbBSosbW','xmoeomkPWOa','gSoeW6FcKWW','WO7cOmo9bHGbWPzOW6aDWPlcMmkuESopW4eyFhZdTCoqWQuK','WQ83WO4','WOpcNMfGhCkQFmoGmf9bmCo/tCkhAw8','gG3cOcX3q17dHq','z8k1jW','iqRdGY4','WRaTWORdOZFcIdS','W5GJWRrBW7SLmCoxW4xcKtldJmkbWORdVfjYBaa2DmoF','4P6/WPNKUkBOGiVOHlZLTOBLI7NLIzROHO3LTzu','n8oRWQyYWOC','nL3cKYWMWPRcI14EaW','iayuWOJcJG','W6vIeudcQq','WQ05WOtdPq','pmkAW4y','W5eGxa','WOlcHNHGia','4O6v77UlWPZLTlxLVjpLKRZMTOFLIyRVVOBLIk7MN5tMLy/PLjhVVze','j+ADG+EETEwkQUwkNoEkJEAcPx5KWRi','W6LeWR0','BN/cIZC9WQ/cNq','WQuSW6NdGKS','WRH/WQ/cMau','W63dKGe1CIr2WPWh','WQ3dLCkvqCk1WRy','qKzEkCkJCG','gwBdP8kuWRG','qXrWW5ij','l8kZdCkoWPS','W7OBW5m','WRz7WRpcVbq'],...(function(){return[...['bCkGW58','W5JdIXeuEG','obRdLbH1WO0','4P2BDEA1S+IVIUI/KEMaP+AaSEs7I8kQCmkAWO7INP3dS+AFQ+wjVEElJ+AbLoAVK+w5GCoeySo1WPS','wSoloG','WOZcICoeW67cQs1/W5SaESohW6b3yq4uWOu','g8osW6hcJfjsWPqxWO3cU1RcGmkCd8oKW5z1','WOTDWR4gWOHjjCoDW4ddKJFdRCogW7FdJG8Lk3LuCmommWpdJmk7ua57W77dSYa','WPJcM3GyWRq','WR1XWRO','ySkYncZcOSoHWOaQw0HAW5tdOCkgptX7wdThaCo4ASomq8kNW6D1omoHwCkJW4K','WPhdVY7cSW','qghcSWSIWP/dQ8owkmoK','x2VcHq99WPFdQCoy','ae3cKvG3fW','DKn6ks0rWO7LVkpLPPxJG7NKUiJKUlZOTRJLJ4G','WRldS8klwSkQ','WP7dQSkaE8k7','nI0pu0n/WPb8emkgW5bjW7Hg','WRZdNmkHxCk+','uKyLD25xW5CmdmkmW4zfW7jmW6tdKq','owakWOfxW7BcMCozESkQWOpdSCoP','WOfyWRrKW5mkimkaW4a','4P6cfEwjJEwjKEEIKowMLoAuIE+8I+s9QUIaIoADLow+QowqKoA3IUwkSU++RG','WPddScVcSINdK33dPMnzW6ZcQ0uYWQxcKbe','WR7dN8oTW5tdOW','etX2W5pcK2nQD8kZWPP6zCoG','WOVcImof','xYv0W4ew','W67dLtuFwW','bCkyk8kvWQ/cO1HsW6jhWRhdGNhcNCo3xSk7a8kt','W7JORyJMSOtLK7xLUAddPq','4PY5W6tLHBRLP4dLSklNUBNcKSomWQqu','iSo6WRW9WRC','nxFdMmkvWPtdSmo9Da','bxBdJ8kQWQNdTG','pSoxWQC5WRVcSCocwMe','W74jCKG','WPLBWPeAWP4WaSooiWryetGUecZcPCo7nmkJWReYpZldSCoOW7xcMmkGWQpcICoOW60','WONdI8k3E8kX','axhdICkpWRxdO8otFSkAWR8','BCkJnbhdVCk9W5WOu0K','D8oHkSksWPe','fCogW6ZcMqy','nbmdWO3cVG','4PY1b+w9O+wiGowjPEwkHow1GoI9R+wjR+AnJowTQ+wlQUwlH+s4UEAwOo+8PEMcUUwhSU++Va','WQtcOSoeoX4','WQBcNCoKidK','W5WUw8or','WOGzW6/dLxlcJSkGWRS','bJPUW5G','gZjXW4ZcTW','4P2gW6BMS6hMNzxLIlhLIzxMRO7MLlK','jdfqW68hW7u','AIjnW58kWQFdImoQCmkqWPRcNCovzmo1xmoWWQNdJ305WOldRH5lWOWTWPRdOSo9pmoKWO4','oa7dLdL0WOq','r8o3W5FcLHOeW40','v8o0imkAWOq','WO3cHSobW68','cGucWQJcQW','W59bagpcN8ozt8o0teTKE8oLW7RdGmkXB8oYW5pcNcNcJea','W4tdVay/BG','WRtdNmoL','WPVdICoHW5tdQa','hc9I','WRldKmkVvG','WOpcR8o/dG','FXPY','imobWRq','W4vBbgpcHCoBymo7rG','wComna','gs99','W613WOpdPbhcLcFcHwuP','cN7cNhGU','fmoXE8ogWOm','W6KIW59I','bdjVW4JcGMHJ','4P2NW53LI7BLIylMI57LIyGDEG','WOLdWP7cSmo6','WOfjWRS','W40cW59cW48ukCkd','WPqsWRiX','8yskJCo8','lG7dJJW','WRhcPeO','fCo5Bq','afNcKxK2hG','p8otWR0EWRVcSW','AUkpVU+6SSoh5yMZ5yIk56kr77Yl','WP8CWQ8/W7xdUW','WRVdNqT4gxaEEMuNpdldSNNdISoRW50','br97W5xcTG','W4FcIr7dG8oGqXxcMa7dL8oVhG','FqD1W4GqW7a5','W4SsW5vpW4mIn8oYdqLu','fJj3W5W','hCokWQSlWOm','W5TkbxNcISoBBa','W7/dOCo7W5bR','W5qGsa'],...(function(){return['4P67bUw0RUwGLEweH+AoJUwUIos4LEAuQUwpRoMhPE+/IUAmQowUPUs4I+AuN0Ok','ccuzWOhcVG','WP7cN0r9g8kMvmoU','xubbhSkB','cMddIW','WObvWRS','W5ucW6S','whdcPbjHWPNdRSozjW','WOriWQOxW6RdRftdHILhq8kPqxtdNGip','iGRdLI11WPZcNq','WOHiWQO','WPpcIxRcMW','dSktcSkBWP1bWR7cVa','oIDEWOCO','WP/dLKW','WPNdOmoTW7tdHa','emkimCkCWQdcSW','iISMWQJcQG','lapdLtjP','jmoCWQutWQdcU8oB','lmkRW5lcS3BdVCoiW4/dNMFcU8oC','WQHVWQuZWPK3','hJXK','WRqeW7ZdJKJcISklWRFcQ1btW4m5W5ajEZ0','fmotyCouWRK','WR3dGCoWW7BdOKu','WOJdLmoHW7RdMG','kmoFW4hcJGS','WQjqWORcRCoLW40','sCkKBmkTWRa','wgZcTWLQWPFdQCojn8o1W6VdUq','WOVcOCoSkH4w','WOHuWQ4ZW63dRG','dCojo8kLW6tcMvS4WOtdGmo/WRe2','WRNcQLK/','WQnRWRpcRdSH','WPNcT8o8ieRcSXe','WOlcQ3pcRh8','pdP/W6ZcSG','gdSZWRlcImk3jCkJWPZcHXu','BIDDFNTy','gSo5BSoW','WRtdNXj+hW','ka1jW6pcL2lcHa/dNCoLWPfNlw0','WPddGwdcUmkg','CrXVWQnQfW','u8okkW','WOldIh7cO8k/','WPaCWQy','W6ZdVwSpWPCLWRBcPG','WPVdUmk9Cmk+WQa','WRZdMH56i3q1DG','WPOFWQ42W64','4P2KqEw0HowGQUweLoApHUwSHUwiPEwlOowoKoMhO++8LUw/QUwMPUwiHEwkIsy5','nW0EWQ/cV8ku','q3K2WPVdLc7dGrNdQCosWODpmG','W7XTm3JcTmoiz8oruL1yxCoJW6NdLSk7wCopW5dcMWtcL1ZdTCkjWP3dJCoxcdi1vgBdN8oNrcLjWOJcMu17WOu','csmXWPCH','lSotWR0TWRxcQSomqw3cUmk8','WPNcMhz7dmkMvmo/kLHnla','W7ZdOCoVW5LV','tbDP','yJXlW5OxWQhdR8o3ASkmWP3dNCorF8o/xSkS','WQpdVw/cS8k4eW','yGVcPbpdRa','4PYVWRBMNkdLO77LHy3MJQ3LR7FLIQxLIkBLJkhPHidVVO/LVANLPAhLIyZLIjNOTPpLJ4DJBba','WOZcOCoLca','WPxdStO','W4foh34','W7BcKmkZtmkDWQNcGIBcGmonWRpcMSonlgBdR8k+WOvxjCoYW5vjFtBcUXm','WRKlW77dHG','ySkNmZq','WRpdPCofW73dMa','W4ddMJ0Jq8oLma','WR7dK8kPv8kg','4P+upUwjTowjSUAjHEwlMNT25OE46looBG','4O+k77IOeoI1Q+wmU0tcG8km6BQh6k+V5y2k5yUQ5yUh5l+F6iov','WOdcOmo6nG','WQSMW77dVLu','v8oXWOtcLx3dPmoBWOBdRa','WPJcLwz8dmk8tG','WQxdKHrL','4P6rsUA2SEwiJ+EbL+ElQq','WRZdJCk/DSkg','zdToDNTyza','WOpcS8oMjW','rMhcPqHUWPNdOG','iH4EWPhcQq','zcOMWPpcQ8kBsa','WOlcLxT5b8k6vW','W4hcGbZdHCoUrYdcJJddQ8o6nq','eJtdOuK+W43cTmoBeCoeW7JdGea','uUIVJ+AYVEwKRoI1VfpIN6ZdLEAxKUwqIEw6P+AvPUApJW','WP3cVmo5oL/cStiJWQJdP38FWOBdKcXUW4K','W68DB00','xeHx','W5SeW7z7W44A'];}())];}())];}());Iii11l=function(){return l11i1I;};return Iii11l();};var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
