/*
活动名称：强制入会
活动链接：https://shopmember.m.jd.com/shopcard/?venderId=<商家ID>
环境变量：jd_opencard_force_venderId // 商家ID，多个用英文逗号分割
        jd_opencard_force_task_threads // 控制店铺并发线程数（正整数），默认1，最大3
        jd_opencard_force_account_threads // 控制账号并发线程数（正整数），默认1，最大3
        jd_opencard_force_account_interval // 自定义运行间隔时长（整数，单位毫秒），默认1500

cron:1 1 1 1 *

*/

const $ = new Env('强制入会')
var iｉl='jsjiami.com.v7';const i1il1=iii1II;function Iii11l(){const lilII1=(function(){return[...[iｉl,'IxujrAsMjDipaTTmILipAF.dceoMgJmWhH.CNGv7==','W5KaW5FdTab+qrLjuSkcdG','W7tdMmoDW4a','lmoRW6JcSrpcVvNdHrxcMa','W69My8okWOm','776L8jAjNq','hmoiWPTj','WP0Lcx81','rJjPW6KGamo4W7maa8kwc8k2WRm','zSkih1tcTG','WO3dO2mUWPxdUMi','WPlcTMO','qmklyCohxtqKtWxdJSkjW5VdNCoyjY5dWP1ws8k5WO53W5JdNCkjaW/cSCk2','smkVdG','WR/cKH3cPtJcHaen','h0tdImkcW5i','aMuLWPW','W7WlE8k/wGq','WQddKfecWOu','z04ghSkx','5Rse5yU05AAb54oB54QS772B6k2w56UF5zoa5yEd6k6E','W54cvsa7WQRdJ3DWW5JdNSke','p23cGmkelc/cPSknWRrsfXNcJSkHW7qeDmoo','WOmIWRzQW4uYea','xmovW451n8olW4e+cYJcMCo/DCkM','xX7dNwaxr1RdUSoTcG','W6FdPmoacCoyW6hdQ8kEjCkGy8kQWPfRdYb2','yGLcomodWPBdVt8','gmocWODVpG','WO00WOm','WRlcGCoU','WQ/cMrhcOW','W6FdKsafgq','j8kFW4ScWQy','wdNdN8o9W48KW5lcS8kPkW','W5zKFqPQWQPDltpdSenRW5W','uJNdMmodW4SWW4q','W4tdJNRcVLDKAhnt','o1LyomojWQFdUG0/DhBcVgW','W4tdRdixgx/dLG','i01yaa','fCo0xxNcKbBcOSkHWOC','vmkYag/cOdZcI8k0WQK','EthdUSouW70','utaUW4eFsSor','fK8ZW5VdGW','zSkMpbWd','W7RdVcaXmq','WOldKCom','ydGVW4DC','WPingCo3gq','WPXeaNDMW6/dLq','WQ9TW7BdKxJdUtdcUwtdQ8okWP7cM8km','W7tdSmkBW6zS','vXpdMMWtwG','W7xcQSoyWQJcRG','vhCujCkS','WONORB7MSipLKQNLU6W4','z081eCkK','5l225Ocq5yQY8k6KNo+5Iq','5yMz5yEM5BU/6zgh5l255zcl5AEr6lA0bVcFIPO','WPdcGIFcPG','WQDpsCkicmoBWRq','WODwWOq','g8kiW7T6ta','o1VdP8k9W7m','WPVcNYVcTLbLtwrUw8k4W5xdOv4FWRfWWQO+sSk4','utn1W70Fb8o/W6KNpSka','F8k5kq','jsHvdCoWmCkcr8oNmSkiWQKD','BSkuxSkKAI02mY1KpGBcRmk3','4PQZW7BOHQtLR57KUkdOVi/OOP7PLy3PMRBML73PLkROR53NViFPLkFORl8','g8ogWP1B','fNldTCk1W4RdJaT9W7pcR8klW6PkWPm9WOFcJxW3Cmkx','WQfumG','isnvc8o0mCofESoDfSkEWQO','W6iugmkTW6JcOCkudCocfCkhF8kyW58','W6PnW7m1','mKi7WPDy','WOfkWONcR1iIx3HfE8kCAmozwG','ofTSg8oc','mmoLW70','o0RdUWhdTmoVWPhcUSkVwmoMWRJdH8oDgSkhWPuP','WRSkfSoz','W7HrW645bbddHhqhWRhdQ8kSWQNcRq'],...(function(){return[...['qSkhBSkkzW','WR/cVCknxSksWR3dGCkJfmkOz8kZ','l8kxWR9D','Bt7dOSo2W6y','6lEb5yY+5PAf5PA/','WOm/WOr9W4uN','yrDTW6yK','WQddNmoBWOLR','EHStW4DH','W6WygmkUW4VcOa','mmkjWOrHWRO','wSkByCoyrd8','WPxcPmk5WQpcHColiNGcWQ5T','eSk9W5S','iMRdPqVdUa','WPJdQSo4WQH9','WOjueMDIW7VdGW','5yMn5yE65BI+6zkM5lYt5zgm5OUJ5yIl776w6i6w5B2t77+O','W6PRA8osWR8','W5xcJmoQWQ/cMWxcOrVdImobW5FcQHPt','jupdPa','W5XqWOuD','p0pdVqu','wX9pW7OP','Fx8exCkvzCoFwSoenCkUWO0hWPhdNCkRpNxcOKZdRG','cSkLW70WWRG','W77dV8ohba','WPOqWQrmW7m','pxe5W5VdS8kPa8kGaINcNddcUeO','WOxdQuOZWRNdQZjnW5PdaG','wComW416mCoDW44+mtpcHCk5y8oSWO8WWPpdN8oqfmkPbgXDahOiemkzymkGW53cJG','gmoAW7xcGH0','cCkzW6WZWOqOBmkb','WOpdN8oB','W7rEW5uznq','W49bF8ohWP/cIYaeWRmBWQv4WPpcQq','W63WKAU+','WOZcVh4HWR/cHW','WOxdRCoCWQLn','BqNdVmo+W4G','hCkGW5LJCqm','WPddQf0','Ft3cUCkqiXVcQCkF','xMmoi8kM','vZL8W44Si8ocWPZdSrpdMa','W6hdI8orhmoA','44kk5O+O56A644gm6k6K5ysX6iYh5y+keSk7W6RcO8kLWRO','gNSFW7JdKG','6lse5y6S5PE65PEc','W6pdO8oA','qCkUhW','p1Dm','E3SsACk1ACoCqCo7pSklWO03','W7tdISkQpXFcIG','W6RdGmk+','wXpdNW','W7WiyCk+taddGfVcOMmxWRW','WQrQW6VdKf3dPa','nf1F','vtPZW74Bhmo7W6i','jMhcSmkBes/cPCkmWRbsmcFcMSkQW48jD8o+W4lcVSoXEGqYW6hdNa','W5fFDCo9WQq','WONWVyUQ','WPdcQaZcG3qgkWu','kSo4FgPz','WRKehmo5imov','B8kTzmk0BW','WRKeha','6k+D5RkT5Asp6lAn77YL','WQ8dvSo/hmklWPr4tmo2kfrwWORdMenOASo8','WOvvpNTZW7NdIgnNW53dSSkTW6q8nSodW4VdMeRcGmkIBCk2WRvNW5DzWRlcNvdcJmo/W6m','vXpdNwWts13dT8oxj8oVbLC','5BUi6zcy56sJ5yIZ8yYERU+7GG','WRy0puKr','uZpdJa','l0FdOcldKCoLWOZcL8k6t8olWPRdLmoln8kGWP0GsG','qvmLvSk+','lSoVW6NcPrlcUG','FCk1xmo8wG','WRrdySkmyW','44oA5OYX56wc44og6k6g5yAI6i+q5y60v8ouW7NdJCovtq','DmkZoG','5yQc5ys+5BQn6zgW5l2v5zcT5OQg5yIy','W5WbhSowga','aw8/WRP1aConWRBdNrZdTbeakq','WOrsWQVcKKq'],...(function(){return['g8ooWPPzecBcNw4dW7JdN8ocW4ZdNW','WPXzchj3','WRCeh8of','hCoiWOzwgJlcNq','6lsq5y6I5PA65PEb','WP7dTve0WPRcO3qmW496d8kzWRPuWQ/cSMpcPCoxC0JdTSk/n8kZpCkIWQ0HWPy8W4XRca','WOhdUSoho318','d8osWPPs','ENqsxmk1Da','WP13WPNcL0m','WQ7cIaVcTb7cNWKwr8opW6tdJ8ostW','WOddSSoAceC','WPhcSKuaWQq','F/ghUAC','WPxcJqpcLKm','WRpdR1iPWQa','BYeJW41E','W6aEnmotl8kp','rVcDU6a','hM/dU8kuW7y','f28RW5JdUq','bgjQWRKE','WRPoB8kdAmorW5GrDmoVWPWO','W7Ktj8kMW7W','WPRdRKi','yIRcHCkqiIxcPmkeWRHf','5l6+5zop5y+V776o','W7ZdLe3dOeldNaixzSoXW7NdLW','W4ZdKsS3lG','d0ZdGfKzDKFdHq','WOtcPGVcKuKi','5Bs65PIv5lYN5zkw','eLzDgmoT','WPJcSgm1WR/cN8oG','WOpdP2q+WPW','W6ZdPCksgXi','WRPjBSkaBmowWO0wu8ohWPysW7m','W6OsnSoapSkv','WR5SW7FdHuldTsNcS1FdVmo7WPFcOCkuxcxcIbyo','5yI75yEV5BM/6zg35lYE5zoW5OIX5yI6','WPxdRa8','WORdTGVdNGyGWPm','g8k/W4X2Fa','rqTsW7O6','6k2i5Rk95AAX6lEJ77+Y5PAi5zcf5BQH5PEB5O+a776Z8l6BHW','W5j7W4CRmq','W4hdVtuucYlcNmkgW75OtSkKW6pdKSo0WQhdKCkKW45vWQ0','4P6HWR/MNOpOGQhMRARNOBRLP7FNKPlcUG','WP3cTMm3WOFcKSoQW6a','W6GWdSkeW4O','WQyFcCovpmoaWOD2ga','W7BdNCkWmb7cSmoxWPxdLa','gmk7W4q','W57dQcGqlhhdNSom','WQzBumkR','pvLgdq','m8knWQS','WR7dU8oJfeO','W5/cOIBcHMuHpW','W78tnCoefSkcW5agy8oxWRa4W7tcQmkdj8o0W6m','W58xW5q','W5ZcRCkqBcmMW4tcRCkS','WP9xc2vT','juFdPWldMmoTWPK','xbtdH202r1RdQ8oYc8oVbf0x','WOO4nK84W7Gi','pd58xCowWRq/CCojW6nAnmkd','WOZdO346WOddTq','WRhcPCoc','WOv9omo8bq','fh1/','W4ddPYiidxZdLSoA','WOa+WP52','pMdcNSkbbdNcVW','6iYS5y2C5BM/6zg35lYE5zoW54Qx5OkK5B+R5BUrWOi','dmoxWOvtcW','5BI+6zgZ5l2B5zc85lM15A2a5z6BWONWVlQI','WONdL8onWPnTnq1w','W67dKqCRhG','EmkfoqOa','WO7cRh48','WObws8kgiq','vd17W4KU','pCkfW40+WPC','uJS+W4zG'];}())];}())];}());Iii11l=function(){return lilII1;};return Iii11l();};function iii1II(_0x514e28,_0x4e424e){const _0xc403a9=Iii11l();return iii1II=function(_0x3d2cd7,_0x16a178){_0x3d2cd7=_0x3d2cd7-0xd4;let _0x37875b=_0xc403a9[_0x3d2cd7];if(iii1II['yQDnOG']===undefined){var _0x37f3e9=function(_0x4710ff){const _0x3f1d56='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x23adbb='',_0x424daf='';for(let _0x404cf7=0x0,_0x594c8f,_0x6079fc,_0x11d231=0x0;_0x6079fc=_0x4710ff['charAt'](_0x11d231++);~_0x6079fc&&(_0x594c8f=_0x404cf7%0x4?_0x594c8f*0x40+_0x6079fc:_0x6079fc,_0x404cf7++%0x4)?_0x23adbb+=String['fromCharCode'](0xff&_0x594c8f>>(-0x2*_0x404cf7&0x6)):0x0){_0x6079fc=_0x3f1d56['indexOf'](_0x6079fc);}for(let _0x109d61=0x0,_0x35328c=_0x23adbb['length'];_0x109d61<_0x35328c;_0x109d61++){_0x424daf+='%'+('00'+_0x23adbb['charCodeAt'](_0x109d61)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x424daf);};const _0x277d7a=function(_0x6aa33e,_0x3f4f71){let _0x25241f=[],_0x48824f=0x0,_0x4cd3fd,_0x5943da='';_0x6aa33e=_0x37f3e9(_0x6aa33e);let _0x47e7f7;for(_0x47e7f7=0x0;_0x47e7f7<0x100;_0x47e7f7++){_0x25241f[_0x47e7f7]=_0x47e7f7;}for(_0x47e7f7=0x0;_0x47e7f7<0x100;_0x47e7f7++){_0x48824f=(_0x48824f+_0x25241f[_0x47e7f7]+_0x3f4f71['charCodeAt'](_0x47e7f7%_0x3f4f71['length']))%0x100,_0x4cd3fd=_0x25241f[_0x47e7f7],_0x25241f[_0x47e7f7]=_0x25241f[_0x48824f],_0x25241f[_0x48824f]=_0x4cd3fd;}_0x47e7f7=0x0,_0x48824f=0x0;for(let _0x9cf780=0x0;_0x9cf780<_0x6aa33e['length'];_0x9cf780++){_0x47e7f7=(_0x47e7f7+0x1)%0x100,_0x48824f=(_0x48824f+_0x25241f[_0x47e7f7])%0x100,_0x4cd3fd=_0x25241f[_0x47e7f7],_0x25241f[_0x47e7f7]=_0x25241f[_0x48824f],_0x25241f[_0x48824f]=_0x4cd3fd,_0x5943da+=String['fromCharCode'](_0x6aa33e['charCodeAt'](_0x9cf780)^_0x25241f[(_0x25241f[_0x47e7f7]+_0x25241f[_0x48824f])%0x100]);}return _0x5943da;};iii1II['EclfeI']=_0x277d7a,_0x514e28=arguments,iii1II['yQDnOG']=!![];}const _0x1ff679=_0xc403a9[0x0],_0xb474a2=_0x3d2cd7+_0x1ff679,_0x15d4db=_0x514e28[_0xb474a2];return!_0x15d4db?(iii1II['SnlKbo']===undefined&&(iii1II['SnlKbo']=!![]),_0x37875b=iii1II['EclfeI'](_0x37875b,_0x16a178),_0x514e28[_0xb474a2]=_0x37875b):_0x37875b=_0x15d4db,_0x37875b;},iii1II(_0x514e28,_0x4e424e);}(function(I1l11I,Ilil1l,iIIiii,iilll,il1iI1,IlllIi,iIIiil){return I1l11I=I1l11I>>0x3,IlllIi='hs',iIIiil='hs',function(i1l1Ii,I1iIIi,I1iIIl,lI1IIl,i1ilI){const IllIiI=iii1II;lI1IIl='tfi',IlllIi=lI1IIl+IlllIi,i1ilI='up',iIIiil+=i1ilI,IlllIi=I1iIIl(IlllIi),iIIiil=I1iIIl(iIIiil),I1iIIl=0x0;const iii1lI=i1l1Ii();while(!![]&&--iilll+I1iIIi){try{lI1IIl=parseInt(IllIiI(0x17f,'*Gfk'))/0x1+parseInt(IllIiI(0x1b3,'&3!E'))/0x2+parseInt(IllIiI(0x153,'eLg%'))/0x3*(-parseInt(IllIiI(0x11b,'lx4E'))/0x4)+parseInt(IllIiI(0xe0,'1YMS'))/0x5+parseInt(IllIiI(0x171,'n0Ci'))/0x6*(parseInt(IllIiI(0xf3,'JkbR'))/0x7)+parseInt(IllIiI(0xd8,'LxrA'))/0x8*(parseInt(IllIiI(0x148,'Ua(P'))/0x9)+parseInt(IllIiI(0x1c1,'&3!E'))/0xa*(-parseInt(IllIiI(0x10d,'R)Q6'))/0xb);}catch(i1ilI1){lI1IIl=I1iIIl;}finally{i1ilI=iii1lI[IlllIi]();if(I1l11I<=iilll)I1iIIl?il1iI1?lI1IIl=i1ilI:il1iI1=i1ilI:I1iIIl=i1ilI;else{if(I1iIIl==il1iI1['replace'](/[gWuxFMNAJHprTCedIDGhL=]/g,'')){if(lI1IIl===I1iIIi){iii1lI['un'+IlllIi](i1ilI);break;}iii1lI[iIIiil](i1ilI);}}}}}(iIIiii,Ilil1l,function(Iiilii,Iil1li,Iiilil,Iil1ll,iillI,lI1III,IIliIi){return Iil1li='\x73\x70\x6c\x69\x74',Iiilii=arguments[0x0],Iiilii=Iiilii[Iil1li](''),Iiilil=`\x72\x65\x76\x65\x72\x73\x65`,Iiilii=Iiilii[Iiilil]('\x76'),Iil1ll=`\x6a\x6f\x69\x6e`,(0x16d6af,Iiilii[Iil1ll](''));});}(0x5f0,0x34b35,Iii11l,0xc0),Iii11l)&&(iｉl=i1il1(0x141,'JkbR'));const jdCookie=require(i1il1(0x1b6,'n0Ci')),notify=require('./utils/Rebels_sendJDNotify'),common=require('./utils/Rebels_jdCommon'),{H5st}=require('./utils/Rebels_H');let idList=(process[i1il1(0x179,'lx4E')][i1il1(0x183,'n0Ci')]||'')[i1il1(0xe9,'^[hc')](','),taskThreads=process[i1il1(0x17e,'lKCK')][i1il1(0xfe,'riwq')]||'1',accountThreads=process['env'][i1il1(0x18d,'xm3w')]||'1';const runInterval=process['env']['jd_opencard_force_account_interval']||'',isNotify=![],invalidIdsMap=new Map(),maxThreads=0x3,cookiesArr=Object['keys'](jdCookie)[i1il1(0x168,'rF4y')](IlIII=>jdCookie[IlIII])[i1il1(0x1c2,'&3!E')](ilil1l=>ilil1l);!cookiesArr[0x0]&&($['msg']($[i1il1(0x145,'#o*]')],i1il1(0x197,'3t^T')),process[i1il1(0x111,'3t^T')](0x1));!(async()=>{const I1l111=i1il1,illlIi={'VmuNv':function(I1lIii,IiI1I,illlIl){return I1lIii(IiI1I,illlIl);},'PzDbC':function(i11ill,IIIIIi){return i11ill(IIIIIi);},'havjw':function(IIIIIl,I1lIil){return IIIIIl!==I1lIil;},'ROrnv':function(IIIl1i,liiII1,IIIl1l,lllll,i11ili,iil1l1){return IIIl1i(liiII1,IIIl1l,lllll,i11ili,iil1l1);},'jFHHN':function(lllli,iiili1){return lllli>iiili1;},'jIBur':function(ill11i,lllill){return ill11i<=lllill;},'uprXj':'⚠\x20请先定义必要的环境变量后再运行脚本！','NunNi':function(ill11l,I1lIiI){return ill11l!==I1lIiI;},'ZVZvH':I1l111(0xf2,'[Eks'),'tAdGC':function(lllili,IliiiI){return lllili===IliiiI;},'VQtFl':'⚠\x20自定义运行间隔时长设置错误','MGnDC':function(Ill11,liiIII){return Ill11(liiIII);},'CVjwA':I1l111(0x16d,'rF4y'),'ZwSWS':function(li1i11,iI11I1){return li1i11>iI11I1;},'mmsTN':function(il1i1l,IlIlll){return il1i1l!==IlIlll;},'nfUDf':I1l111(0x1b1,'Mw)0')};try{notify[I1l111(0x1bb,'LxrA')]({'title':$[I1l111(0xd4,'E2FZ')]});if(illlIi['jFHHN'](idList[I1l111(0xe1,'uYMe')],0x0))idList=[...new Set(idList['filter'](IIIl1I=>IIIl1I!==''))];if(illlIi[I1l111(0x105,'1YMS')](idList[I1l111(0x1ae,'&3!E')],0x0)){console[I1l111(0x18a,'#o*]')](illlIi[I1l111(0x120,'W9M5')]);return;}$[I1l111(0x186,'LxrA')]=null;if(runInterval)try{if(illlIi['NunNi']('dndOJ',illlIi['ZVZvH']))i1l1li=0x1;else{const IlIlli=parseInt(runInterval);if(IlIlli>=0x0){if(illlIi['tAdGC'](I1l111(0x127,'0qHk'),I1l111(0x124,'#o*]'))){const lil111=illlIi[I1l111(0x123,'[Eks')](IiII,()=>{liIiI===0x0&&(IilIli(lil111),li1());},0x64);}else $['waitTime']=IlIlli;}}}catch{console[I1l111(0xff,'lx4E')](illlIi[I1l111(0x104,'GGI)')]);}try{const i11ilI=illlIi['MGnDC'](parseInt,taskThreads);illlIi['jFHHN'](i11ilI,0x0)&&i11ilI!==0x1&&(taskThreads=i11ilI);}catch{taskThreads=0x1;}taskThreads=Math[I1l111(0x178,'Ua(P')](taskThreads,maxThreads);try{if(illlIi['tAdGC'](illlIi['CVjwA'],I1l111(0xed,'W9M5'))){const ii1ii1=parseInt(accountThreads);illlIi['ZwSWS'](ii1ii1,0x0)&&illlIi[I1l111(0x1a8,'9PKn')](ii1ii1,0x1)&&(accountThreads=ii1ii1);}else{const lllil1=illlIi[I1l111(0x19a,'&3!E')](i1l1I,IiilIi);lllil1>0x0&&illlIi['havjw'](lllil1,0x1)&&(iii1Ii=lllil1);}}catch{accountThreads=0x1;}accountThreads=Math['min'](accountThreads,maxThreads),$['needRemoveCookieIndex']=[],$[I1l111(0x135,'@dd)')]=![],idList['length']>0x1&&($['showPrintId']=!![]),await common[I1l111(0x1cd,'(^J#')](accountThreads,cookiesArr,async(iil1il,ilil1I)=>{const IIii1l=I1l111;if('MDlBg'===IIii1l(0x159,'qRpW'))IilIil[IIii1l(0x130,'E2FZ')]=!![];else{await illlIi['ROrnv'](concMain,taskThreads,idList,iil1il,ilil1I,Main);if($[IIii1l(0x1d2,'DAHx')])await $[IIii1l(0x15d,'dw3J')]($['waitTime']);}}),isNotify&&notify[I1l111(0x114,'wVF7')]()&&(I1l111(0x1ac,'GGI)')===illlIi[I1l111(0x169,']J$J')]?await notify['push']():i1l1lI[I1l111(0x182,'@dd)')]=i1iliI);}catch(lllilI){console[I1l111(0x13c,'*Gfk')]('❌\x20脚本运行遇到了错误\x0a'+lllilI);}})()[i1il1(0x1bf,'uYMe')](ilil11=>$[i1il1(0x188,'#o*]')](ilil11))[i1il1(0x1be,'(^J#')](()=>$[i1il1(0x102,'rVqR')]());async function Main(illlI1,IIIl11){const I1iIII=i1il1,I1lIi1={'HzCMb':function(iiilii,li1i1i){return iiilii===li1i1i;},'RUWNb':I1iIII(0x101,'wD)9'),'HCGvb':I1iIII(0x192,'dw3J'),'SdJHC':function(IlIli1,illIiI){return IlIli1===illIiI;},'yDUpf':function(lI1lli,Ill1l){return lI1lli!==Ill1l;},'SbTce':I1iIII(0xf6,'qRpW'),'zxLCl':I1iIII(0x160,'oX(n'),'CLwlk':'pdXnU','EVcmO':function(llI1Il,ii1iii){return llI1Il===ii1iii;},'LNINK':I1iIII(0xe3,'*Gfk'),'WZbTw':I1iIII(0x142,'R)Q6'),'FmQdW':function(i11iil,Ill1i){return i11iil!==Ill1i;},'DPoRc':'vNzQp','PupsR':'YyQSE','SuLzG':I1iIII(0x139,'W9M5'),'IoAEk':function(ii1iil,lllI1l){return ii1iil===lllI1l;},'pfjqn':I1iIII(0x1c0,'av14'),'QixuH':'fCFHu','vTSOY':I1iIII(0x1a2,'GGI)'),'okHTw':I1iIII(0x1b2,'[Eks'),'ePIsj':I1iIII(0x103,'*Gfk'),'AnvpV':'shopmember_m_jd_com','ynQoC':I1iIII(0x110,'av14'),'eZGxI':I1iIII(0x146,']J$J'),'pASTD':I1iIII(0x187,'W9M5'),'fxkEn':I1iIII(0xe2,'0qHk'),'rDfac':I1iIII(0x18c,'#o*]'),'BHvAs':'Content-Type','kIMBC':function(i11iii,llI1Ii){return i11iii<llI1Ii;},'eXjSV':function(lllI1i,li1i1l){return lllI1i>=li1i1l;},'jHqzA':I1iIII(0x129,'CuYa'),'SuaUI':'boolean','HlvHE':function(II1i1,lI1lll){return II1i1===lI1lll;},'hpQCq':'YtyDt','SuGyZ':function(iIiII,iil1lI){return iIiII(iil1lI);}},{title:liiIIi,UA:lil11I,cookie:Iliii1,message:iIiIi}=IIIl11;if(invalidIdsMap[I1iIII(0x10f,'@c65')](illlI1))return;let iil1ll='',iiilil=undefined,iil1li=[];await iIiIl('getShopOpenCardInfo');if(invalidIdsMap[I1iIII(0x181,'R)Q6')](illlI1))return;if(I1lIi1['SdJHC'](typeof iiilil,I1lIi1[I1iIII(0x121,'DAHx')])){if(iiilil)console['log'](liiIIi+I1iIII(0x1bc,'E2FZ'));else{if(I1lIi1[I1iIII(0xef,'E2FZ')](I1iIII(0x1ad,'[Eks'),I1lIi1['hpQCq'])){if(invalidIdsMap[I1iIII(0x198,'W9M5')](illlI1))return;await I1lIi1[I1iIII(0xf1,'oX(n')](iIiIl,I1iIII(0x13e,'D1zo'));}else{IiilI1[I1iIII(0x1c5,'ySGr')]('⚠\x20请先定义必要的环境变量后再运行脚本！');return;}}}async function lillIl(li1i1I,illIii){const liiI11=I1iIII;try{if(I1lIi1[liiI11(0x176,'Mw)0')](I1lIi1[liiI11(0x16e,'wVF7')],'GXKas')){const lI1llI=l1iIIi[liiI11(0x19e,'xm3w')]();lilIi++,l1l11I[liiI11(0x161,'Ua(P')](lilIl(lI1llI));}else switch(li1i1I){case I1lIi1[liiI11(0x1ca,']J$J')]:if(I1lIi1[liiI11(0x172,'1YMS')](illIii[liiI11(0x1c6,'ySGr')],!![])){let illIil=illIii[liiI11(0x194,'TS)%')];Array[liiI11(0x109,'@c65')](illIil)&&(illIil=illIil[0x0]);iiilil=illIil?.[liiI11(0x100,'3t^T')]?.[liiI11(0x163,'Mw)0')]===0x1,iil1ll=illIil?.[liiI11(0x10c,'Ua(P')]?.[0x0]?.[liiI11(0x18e,'lKCK')]?.[liiI11(0x10b,'lKCK')];const {venderCardName:Ill1I,venderCardLogo:i11iiI}=illIil?.[liiI11(0x108,'n0Ci')];if(illIil?.[liiI11(0xd9,'&3!E')]&&!Ill1I&&!i11iiI){if(I1lIi1[liiI11(0x15e,'@dd)')](I1lIi1['SbTce'],liiI11(0x11f,'Mw)0')))iliIII=iIIl1i;else{console['log'](liiIIi+liiI11(0xea,'DAHx')),invalidIdsMap['set'](illlI1,!![]);return;}}!$[liiI11(0x17b,'6fqp')+illlI1]&&(I1lIi1[liiI11(0xd7,'9PKn')](I1lIi1[liiI11(0xf9,'YD4s')],'HdEgB')?i1III[liiI11(0x164,'GGI)')]=!![]:($[liiI11(0x118,'R)Q6')+illlI1]=!![],console[liiI11(0x131,'JkbR')]('\x0a商家ID：'+illlI1),console[liiI11(0xfd,'(^J#')](liiI11(0x1b7,'eLg%')+(illIil?.[liiI11(0x144,'dw3J')]?.['venderCardName']||'未知')+'\x0a')));}else illIii['message']?console[liiI11(0x154,'u&SH')](''+liiIIi+illIii[liiI11(0xfc,'uYMe')]):console[liiI11(0x17a,'R)Q6')](liiIIi+liiI11(0xe8,'0qHk')+JSON[liiI11(0x1cf,'#o*]')](illIii)+liiI11(0x185,'DAHx'));break;case liiI11(0xde,'lKCK'):if(illIii[liiI11(0x125,'xm3w')]===!![]){if(I1lIi1[liiI11(0x14d,'@dd)')]!==I1lIi1[liiI11(0x133,'wD)9')])ilI1lI[liiI11(0x143,'TS)%')](''+IiiIll+IIlii[liiI11(0x116,'wVF7')]);else{if(I1lIi1['SdJHC'](illIii['message'],liiI11(0x199,'@dd)'))){if(illIii[liiI11(0x17c,'av14')]&&illIii[liiI11(0x16c,'(^J#')]?.[liiI11(0xeb,'rF4y')]){iil1li=[];for(const IlIlii of illIii['result']?.[liiI11(0x167,'oX(n')]?.['giftList']){if(I1lIi1['EVcmO'](I1lIi1[liiI11(0x14f,'[Eks')],I1lIi1[liiI11(0x195,'riwq')]))lliii1['assign'](Iiii1,lIIili);else{const {prizeType:liil11}=IlIlii;switch(liil11){case 0x1:case 0x17:iil1li[liiI11(0x13f,']J$J')](liiI11(0x12d,'oX(n')),iIiIi[liiI11(0x128,'lKCK')]('优惠券🗑️');break;case 0x4:iil1li[liiI11(0x1a4,'^[hc')](IlIlii[liiI11(0x10a,'h]a7')]+'京豆🐶'),iIiIi[liiI11(0x14c,'@c65')](IlIlii[liiI11(0x138,'Nco7')]+'京豆🐶');break;case 0x6:iil1li['push'](IlIlii['discountString']+liiI11(0x18f,'3tuu')),iIiIi['insert'](IlIlii[liiI11(0x16a,'qRpW')]+'店铺积分🎟️');break;case 0xe:iil1li[liiI11(0x11a,'R)Q6')](IlIlii[liiI11(0x1a7,'3t^T')]+'红包🧧'),iIiIi[liiI11(0x180,'Ge8y')](IlIlii[liiI11(0x19d,'^[hc')]+'红包🧧');break;default:iil1li[liiI11(0xee,'(^J#')](''+IlIlii[liiI11(0xfa,'@dd)')]+IlIlii[liiI11(0x1d0,'av14')]),iIiIi[liiI11(0x1a5,'6fqp')](''+IlIlii['discountString']+IlIlii[liiI11(0x11c,'lx4E')]);}}}iil1li[liiI11(0x150,'D1zo')]>0x0?console['log'](liiIIi+liiI11(0x158,'9PKn')+iil1li[liiI11(0xe6,'@c65')]('、')):console['log'](liiIIi+liiI11(0x1c4,'0qHk'));}else console[liiI11(0x1b5,'GGI)')](liiIIi+'加入店铺会员成功');}else I1lIi1['SdJHC'](illIii[liiI11(0x157,'xm3w')],liiI11(0x106,'wVF7'))?console[liiI11(0x131,'JkbR')](''+liiIIi+illIii['message']+liiI11(0x1af,'rVqR')):I1lIi1[liiI11(0x11d,'wVF7')](I1lIi1[liiI11(0x166,'TS)%')],liiI11(0x1a6,'JkbR'))?l1ii1[liiI11(0x122,'rF4y')](''+ii1ll+IliI1l[liiI11(0x119,'DAHx')]+liiI11(0x1aa,'3tuu')):console[liiI11(0x191,'wVF7')](''+liiIIi+illIii[liiI11(0x157,'xm3w')]+'\x20🚫');}}else{if(illIii[liiI11(0xdf,'YD4s')])console[liiI11(0x191,'wVF7')](''+liiIIi+illIii['message']+liiI11(0x16b,'*Gfk'));else{if(liiI11(0x14a,'wVF7')!==I1lIi1['PupsR'])console[liiI11(0x136,'W9M5')](liiIIi+liiI11(0x12e,'ySGr'));else{Iiil1[liiI11(0xd6,'3tuu')](iiilli+liiI11(0x14b,'LxrA')),l1iIIl[liiI11(0x170,'GGI)')](liiI11(0x177,'@dd)')),iiilll[liiI11(0x134,'m8ta')][liiI11(0x15c,'6h5P')](lI11Il);return;}}}break;}}catch(l1iIII){console['log'](liiI11(0x1cc,'9PKn')+li1i1I+liiI11(0x12b,'DAHx')+(l1iIII[liiI11(0xdd,'dw3J')]||l1iIII));}}async function iIiIl(llI1I1){const ililI1=I1iIII;if(I1lIi1[ililI1(0x113,'oX(n')](I1lIi1[ililI1(0xdc,'xm3w')],I1lIi1[ililI1(0x190,'YD4s')]))IllII1['log'](I1lIi1['SuLzG']);else{let lIli1I=I1lIi1[ililI1(0x156,'rF4y')],II1il=null,lllI11=null,I1lIll=ililI1(0xf4,'eLg%'),I1lIli={},II1ii={};switch(llI1I1){case'getShopOpenCardInfo':II1ii={'appId':I1lIi1[ililI1(0x19c,'JkbR')],'appid':ililI1(0x1c3,'Ge8y'),'functionId':'getShopOpenCardInfo','clientVersion':'9.2.0','client':'H5','body':{'venderId':illlI1,'payUpShop':!![],'queryVersion':I1lIi1[ililI1(0x189,'Nco7')],'appid':I1lIi1[ililI1(0x151,'3tuu')],'needSecurity':!![],'bizId':I1lIi1['AnvpV'],'channel':0x196},'version':I1lIi1[ililI1(0x1b4,'D1zo')],'t':!![],'ua':lil11I},I1lIli=await H5st[ililI1(0x11e,'[Eks')](II1ii),II1il=I1lIli['paramsData'];break;case ililI1(0x126,'Ge8y'):II1ii={'appId':ililI1(0xf0,'rVqR'),'appid':I1lIi1['AnvpV'],'functionId':I1lIi1[ililI1(0x132,'u&SH')],'clientVersion':I1lIi1[ililI1(0x162,'@c65')],'client':'H5','body':{'venderId':illlI1,'bindByVerifyCodeFlag':0x1,'registerExtend':{},'writeChildFlag':0x0,'channel':0x196,'appid':I1lIi1[ililI1(0x1a9,'(^J#')],'needSecurity':!![],'bizId':I1lIi1[ililI1(0x1bd,'R)Q6')]},'version':ililI1(0xda,'JkbR'),'t':!![],'ua':lil11I};iil1ll&&(II1ii[ililI1(0x19f,'#o*]')]['activityId']=iil1ll);I1lIli=await H5st['getH5st'](II1ii),II1il=I1lIli[ililI1(0xf5,'TS)%')];break;}const IIIIII={'area':'','screen':ililI1(0xdb,'9PKn'),'uuid':ililI1(0x196,'&3!E')};II1il&&Object['assign'](II1il,IIIIII);lllI11&&Object['assign'](lllI11,IIIIII);const lillII={'url':lIli1I,'method':I1lIll,'headers':{'Accept':I1lIi1[ililI1(0x1b0,'wD)9')],'Accept-Encoding':'gzip,\x20deflate,\x20br','Accept-Language':I1lIi1[ililI1(0x1ab,'LxrA')],'Origin':'https://pages.jd.com','Referer':ililI1(0x1cb,'DAHx'),'Sec-Fetch-Dest':ililI1(0x1c7,'u&SH'),'Sec-Fetch-Mode':ililI1(0xf8,'^[hc'),'Content-Type':ililI1(0x165,'h]a7'),'User-Agent':lil11I,'Cookie':Iliii1},'params':lllI11,'data':II1il,'timeout':0x7530};I1lIi1[ililI1(0x147,'Nco7')](I1lIll,ililI1(0xe4,'R)Q6'))&&(delete lillII['data'],delete lillII['headers'][I1lIi1[ililI1(0xfb,'lx4E')]]);const ii1ilI=0x1;let lI1ll1=0x0,iIiI1=null,liil1I=![];while(I1lIi1['kIMBC'](lI1ll1,ii1ilI)){const i11ii1=await common[ililI1(0xe7,'n0Ci')](lillII);if(!i11ii1['success']){iIiI1=llI1I1+'\x20'+liiIIi+ililI1(0x18b,'riwq')+i11ii1['error']+ililI1(0xf7,'6h5P'),lI1ll1++;continue;}if(!i11ii1['data']){iIiI1=llI1I1+'\x20'+liiIIi+ililI1(0x1c9,'CuYa'),lI1ll1++;continue;}await lillIl(llI1I1,i11ii1[ililI1(0x13a,'^[hc')]),liil1I=![];break;}I1lIi1[ililI1(0x1b9,'DAHx')](lI1ll1,ii1ilI)&&(console[ililI1(0x17d,'av14')](iIiI1),liil1I&&(I1lIi1['yDUpf'](I1lIi1[ililI1(0x12c,'1YMS')],I1lIi1[ililI1(0x155,'dw3J')])?l1lIlI=IiiIl1[0x0]:$['outFlag']=!![]));}}}async function concMain(l1iII1=0x1,iiill1,lIli1i,IIIII1,I1lIlI){const IIii1i=i1il1,ii1ill={'NXaaa':function(Iil1l1){return Iil1l1();},'gPHpu':IIii1i(0x14e,'rF4y'),'oAepp':function(i1i11I,il1iIl){return i1i11I(il1iIl);},'GXFOf':function(iii1ii,il1iIi,iii1il){return iii1ii(il1iIi,iii1il);},'THpnB':IIii1i(0x152,'riwq'),'hMxMu':function(II11li,I1l11i){return II11li<I1l11i;}};if($[IIii1i(0x13b,'wD)9')][IIii1i(0xe5,'DAHx')](IIIII1))return;const II1iI=iiill1[IIii1i(0x15b,'dw3J')](iIIiiI=>iIIiiI),llI1II=decodeURIComponent(common[IIii1i(0x19b,'rVqR')](lIli1i,ii1ill[IIii1i(0x140,'rVqR')])),lIli1l='【账号'+IIIII1+'】'+llI1II+'：'+($['showPrintId']?venderId+'\x20➜\x20':''),lillIi=notify[IIii1i(0x16f,'u&SH')](IIIII1,llI1II),illIi1=await common['getLoginStatus'](lIli1i);if(!illIi1&&typeof illIi1===IIii1i(0x1a0,'^[hc')){console['log'](lIli1l+IIii1i(0x177,'@dd)')),lillIi[IIii1i(0x1d1,'u&SH')](IIii1i(0x1a1,'[Eks')),$[IIii1i(0x15f,'6fqp')]['push'](IIIII1);return;}const ii1ili=common[IIii1i(0x10e,'^[hc')](llI1II),liil1i={'cookie':lIli1i,'index':IIIII1,'title':lIli1l,'UA':ii1ili,'message':lillIi};let lI1lil=0x0;async function i1l1iI(liiI1i){const i1ili=IIii1i;await I1lIlI(liiI1i,liil1i),lI1lil--,ii1ill[i1ili(0x112,'DAHx')](liil1l);}async function liil1l(){while(lI1lil<l1iII1&&II1iI['length']>0x0){const ililIi=II1iI['shift']();lI1lil++,await i1l1iI(ililIi);}}const lI1lii=Math['min'](II1iI[IIii1i(0x1a3,'9PKn')],l1iII1),Iiili1=[];for(let lilIIl=0x0;ii1ill[IIii1i(0x1ce,'D1zo')](lilIIl,lI1lii);lilIIl++){const ililIl=II1iI[IIii1i(0x19e,'xm3w')]();lI1lil++,Iiili1[IIii1i(0x149,'3tuu')](ii1ill[IIii1i(0x174,'Ua(P')](i1l1iI,ililIl));}await Promise['all'](Iiili1),liil1l(),await new Promise(liiI1l=>{const Iiill1=IIii1i,i1l1II={'zwyYT':function(I1l11l,lilIIi){return I1l11l!==lilIIi;},'YpPNI':ii1ill[Iiill1(0x1c8,'@dd)')],'RZukj':'bobKm','RIDoy':function(i1l1Il,llIli){return ii1ill['oAepp'](i1l1Il,llIli);}},i1ill=ii1ill[Iiill1(0xec,'DAHx')](setInterval,()=>{const I1iII1=Iiill1;i1l1II[I1iII1(0x184,'qRpW')](i1l1II[I1iII1(0x12a,'1YMS')],i1l1II['RZukj'])?lI1lil===0x0&&(i1l1II[I1iII1(0x193,'6fqp')](clearInterval,i1ill),liiI1l()):(lilIl1['msg'](i1l1ii[I1iII1(0xd5,'R)Q6')],I1iII1(0x175,']J$J')),i1l1[I1iII1(0x12f,'m8ta')](0x1));},0x64);});}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
